<h3 class="page-header">
  <span ng-if="customerName">Job orders of {{customerName}}</span>
  <span ng-if="!customerName">Job Orders</span>
</h3>

<table ng-table="tableParams" show-filter="true" class="table table-striped mt20">
  <thead>
    <tr>
      <th>Customer
      <th>Services
      <th>Total Amt Due
      <th>Balance
      <th>Date created
      <th>Date due
      <th>Status
      <th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="joborder in $data">
      <td><a ui-sref="default.customer.view({customerCode: joborder.customer.code, urlSlug: joborder.customer.slug})">{{joborder.customer.formattedName}}</a>
      <td>
        <div ng-repeat="service in joborder.jobServices"><img ng-src="images/icons/{{service.serviceType.icon}}" class="img-sixteen" title="{{service.serviceType.label}}" /> {{service.weightInKilos}} ({{service.amount | currency: '₱'}})</div>
      </td>
      <td>{{joborder.totalAmount | currency: '₱'}}
      <td ng-class="colorizeBalance(joborder)">{{joborder.totalAmount - joborder.totalAmountPaid | currency: '₱'}}
      <td>
        <div>{{joborder.dateCreated | date: 'MMM-dd-yyyy hh:mm a'}}</div>
        <div><small class="text-muted">{{joborder.branchInfo.name}}</small></div>
        <div><small class="text-muted">{{joborder.customer.brandName}}</small></div>
      </td>
      <td>{{joborder.dateDue | date: 'MMM-dd'}}
      <td>{{josLabel(joborder.status)}}
      <td>
        <div class="dropdown">
          <button class="btn btn-default btn-xs dropdown-toggle" type="button" id="dropdownMenu-{{$index}}"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            Actions
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu-{{$index}}">
            <li><a ui-sref="default.joborder.view({joborderCode: joborder.trackingNo, urlSlug: joborder.slug})"><i class="fa fa-search-plus fa-fw"></i> <small>View details</small></a></li>
          </ul>
        </div>
      </td>
    </tr>
    <tr ng-if="!$data.length">
      <td colspan="8" align="center">No items available</td>
    </tr>
  </tbody>
</table>