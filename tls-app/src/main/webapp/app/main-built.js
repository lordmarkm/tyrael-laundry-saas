/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */

/**
 * @license AngularJS v1.3.15
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */

/*
 AngularJS v1.3.15
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/

/*
 AngularJS v1.3.20
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/

/*! ngTable v0.5.3 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/ng-table - New BSD License */

/*!
 * ui-select
 * http://github.com/angular-ui/ui-select
 * Version: 0.11.2 - 2015-03-17T04:08:46.474Z
 * License: MIT
 */

/*
 * AngularJS Toaster
 * Version: 0.4.11
 *
 * Copyright 2013-2014 Jiri Kavulak.
 * All Rights Reserved.
 * Use, reproduction, distribution, and modification of this code is subject to the terms and
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 *
 * Author: Jiri Kavulak
 * Related to project of John Papa and Hans Fj√§llemark
 */

/**
 * State-based routing for AngularJS
 * @version v0.2.13
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* ========================================================================
 * Bootstrap: transition.js v3.3.4
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: alert.js v3.3.4
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.3.4
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: carousel.js v3.3.4
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.3.4
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.4
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.3.4
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.4
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.3.4
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.4
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.3.4
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: affix.js v3.3.4
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

//! moment.js
//! version : 2.10.2
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/*! jQuery UI - v1.11.4 - 2015-03-11
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery blockUI plugin
 * Version 2.70.0-2014.11.23
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 *
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*!
 * Copyright 2002 - 2013 Webdetails, a Pentaho company.  All rights reserved.
 * 
 * This software was developed by Webdetails and is provided under the terms
 * of the Mozilla Public License, Version 2.0, or any later version. You may not use
 * this file except in compliance with the license. If you need a copy of the license,
 * please go to  http://mozilla.org/MPL/2.0/. The Initial Developer is Webdetails.
 *
 * Software distributed under the Mozilla Public License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or  implied. Please refer to
 * the license for the specific language governing your rights and limitations.
 */

/*! Copyright 2010 Stanford Visualization Group, Mike Bostock, BSD license. */

/*! 539b7b4908c29303d90a687962d250d90abf0def */

/*
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * - Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 *
 * - Neither the name of the author nor the names of contributors may be used to
 *   endorse or promote products derived from this software without specific
 *   prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/*!
 * Protovis MSIE/VML addon
 * Copyright (C) 2011 by DataMarket <http://datamarket.com>
 * Dual licensed under the terms of the MIT or GPL Version 2 software licenses.
 * 
 * This software includes code from jQuery, http://jquery.com/
 * jQuery is licensed under the MIT or GPL Version 2 license.
 * 
 * This software includes code from the Protovis, http://mbostock.github.com/protovis/
 * Protovis is licensed under the BSD license.
 * 
 */

/*!!*/

/*!
 * tipsy, facebook style tooltips for jquery
 * version 1.0.0a
 * (c) 2008-2010 jason frame [jason@onehackoranother.com]
 * released under the MIT license
 */

function genTotalDataCells(e,t,n,r,i){var s="",i=i[ROWS];for(var o=n.length-1;o>=0;o--)if(e==n[o]){var u=i[o][r[o]];for(var a=0;a<u.cells.length;a++)s+='<td class="data total">'+u.cells[a][t].value+"</td>";r[o]++,r[o]<i[o].length&&(n[o]+=i[o][r[o]].width)}return s}function genTotalHeaderCells(e,t,n,r,i,s){var o="";for(var u=t;u>=0;u--)if(e==n[u]){var a=i[u][r[u]],f;u==0&&t==1?f="col":u==t?f="col_total_corner":u==t-1&&a.captions?f="col_total_first":f="col_null";for(var l=0;l<a.cells.length;l++){var c="&nbsp;";t==i.length-1&&(a.captions&&(c=i[u][r[u]].captions[l]),u==0&&r[u]==0&&(a.captions?c+="&nbsp;":c="",c+=s?"<span class='i18n'>Grand Total</span>":"Grand Total")),o+='<th class="'+f+'">'+(s?"<div>"+c+"</div>":c)+"</th>"}r[u]++,r[u]<i[u].length&&(n[u]+=i[u][r[u]].width)}return o}function totalIntersectionCells(e,t,n,r,i){var s="";for(var o=t;o>=0;o--)if(e==n[o]){var u=i[o][r[o]],a="data total";for(var f=0;f<u.cells.length;f++){var l="&nbsp;";s+='<td class="'+a+'">'+l+"</td>"}r[o]++,r[o]<i[o].length&&(n[o]+=i[o][r[o]].width)}return s}function genTotalHeaderRowCells(e,t,n,r,i){var s=r[COLUMNS],o=t[COLUMNS],u=n[COLUMNS],a=s.length-2,f="";for(var l=a;l>=0;l--)if(e==o[l]){for(var c=0;c<s[l][u[l]].cells.length;c++){f+="<tr>";for(var h=0;h<=a;h++){var p,d="&nbsp;";l==0&&h==0?p="row":l==h+1?p="row_total_corner":l==h&&s[l][u[l]].captions?p="row_total_first":l<h+1?p="row_total":p="row_null",h==a&&(s[l][u[l]].captions&&(d=s[l][u[l]].captions[c]),l==0&&u[l]==0&&(s[l][u[l]].captions?d+="&nbsp;":d="",d+=i?"<span class='i18n'>Grand Total</span>":"Grand Total")),f+='<th class="'+p+'">'+(i?"<div>"+d+"</div>":d)+"</th>"}var n={},t={};for(var v=0;v<r[ROWS].length;v++)n[v]=0,t[v]=r[ROWS][v][n[v]].width;for(var m=0;m<s[l][u[l]].cells[c].length;m++)f+='<td class="data total">'+s[l][u[l]].cells[c][m].value+"</td>",f+=totalIntersectionCells(m+1,r[ROWS].length-1,t,n,r[ROWS]);f+="</tr>"}u[l]++,u[l]<s[l].length&&(o[l]+=s[l][u[l]].width)}return f}function nextParentsDiffer(e,t,n){while(t-->0)if(e[t][n].properties.uniquename!=e[t][n+1].properties.uniquename)return!0;return!1}function topParentsDiffer(e,t,n){while(n-->0)if(e[t][n].properties.uniquename!=e[t-1][n].properties.uniquename)return!0;return!1}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(a,b){function s(e){var t=e.length,r=n.type(e);return"function"===r||n.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e}function x(e,t,r){if(n.isFunction(t))return n.grep(e,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return n.grep(e,function(e){return e===t!==r});if("string"==typeof t){if(w.test(t))return n.filter(t,e,r);t=n.filter(t,e)}return n.grep(e,function(e){return g.call(t,e)>=0!==r})}function D(e,t){while((e=e[t])&&1!==e.nodeType);return e}function G(e){var t=F[e]={};return n.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:N.test(r)?n.parseJSON(r):r}catch(s){}M.set(e,t,r)}else r=void 0;return r}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(e){}}function jb(e,t){return n.nodeName(e,"table")&&n.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function kb(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function lb(e){var t=gb.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function mb(e,t){for(var n=0,r=e.length;r>n;n++)L.set(e[n],"globalEval",!t||L.get(t[n],"globalEval"))}function nb(e,t){var r,i,s,o,u,a,f,l;if(1===t.nodeType){if(L.hasData(e)&&(o=L.access(e),u=L.set(t,o),l=o.events)){delete u.handle,u.events={};for(s in l)for(r=0,i=l[s].length;i>r;r++)n.event.add(t,s,l[s][r])}M.hasData(e)&&(a=M.access(e),f=n.extend({},a),M.set(t,f))}}function ob(e,t){var r=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&n.nodeName(e,t)?n.merge([e],r):r}function pb(e,t){var n=t.nodeName.toLowerCase();"input"===n&&T.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function sb(e,t){var r,i=n(t.createElement(e)).appendTo(t.body),s=a.getDefaultComputedStyle&&(r=a.getDefaultComputedStyle(i[0]))?r.display:n.css(i[0],"display");return i.detach(),s}function tb(e){var t=l,r=rb[e];return r||(r=sb(e,t),"none"!==r&&r||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=qb[0].contentDocument,t.write(),t.close(),r=sb(e,t),qb.detach()),rb[e]=r),r}function xb(e,t,r){var i,s,o,u,a=e.style;return r=r||wb(e),r&&(u=r.getPropertyValue(t)||r[t]),r&&(""!==u||n.contains(e.ownerDocument,e)||(u=n.style(e,t)),vb.test(u)&&ub.test(t)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=r.width,a.width=i,a.minWidth=s,a.maxWidth=o)),void 0!==u?u+"":u}function yb(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function Fb(e,t){if(t in e)return t;var n=t[0].toUpperCase()+t.slice(1),r=t,i=Eb.length;while(i--)if(t=Eb[i]+n,t in e)return t;return r}function Gb(e,t,n){var r=Ab.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Hb(e,t,r,i,s){for(var o=r===(i?"border":"content")?4:"width"===t?1:0,u=0;4>o;o+=2)"margin"===r&&(u+=n.css(e,r+R[o],!0,s)),i?("content"===r&&(u-=n.css(e,"padding"+R[o],!0,s)),"margin"!==r&&(u-=n.css(e,"border"+R[o]+"Width",!0,s))):(u+=n.css(e,"padding"+R[o],!0,s),"padding"!==r&&(u+=n.css(e,"border"+R[o]+"Width",!0,s)));return u}function Ib(e,t,r){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,o=wb(e),u="border-box"===n.css(e,"boxSizing",!1,o);if(0>=s||null==s){if(s=xb(e,t,o),(0>s||null==s)&&(s=e.style[t]),vb.test(s))return s;i=u&&(k.boxSizingReliable()||s===e.style[t]),s=parseFloat(s)||0}return s+Hb(e,t,r||(u?"border":"content"),i,o)+"px"}function Jb(e,t){for(var r,i,s,o=[],u=0,a=e.length;a>u;u++)i=e[u],i.style&&(o[u]=L.get(i,"olddisplay"),r=i.style.display,t?(o[u]||"none"!==r||(i.style.display=""),""===i.style.display&&S(i)&&(o[u]=L.access(i,"olddisplay",tb(i.nodeName)))):(s=S(i),"none"===r&&s||L.set(i,"olddisplay",s?r:n.css(i,"display"))));for(u=0;a>u;u++)i=e[u],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return e}function Kb(e,t,n,r,i){return new Kb.prototype.init(e,t,n,r,i)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=R[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Ub(e,t,n){for(var r,i=(Rb[t]||[]).concat(Rb["*"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function Vb(e,t,r){var i,s,o,u,a,f,l,c,h=this,p={},d=e.style,v=e.nodeType&&S(e),m=L.get(e,"fxshow");r.queue||(a=n._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,f=a.empty.fire,a.empty.fire=function(){a.unqueued||f()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,n.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],l=n.css(e,"display"),c="none"===l?L.get(e,"olddisplay")||tb(e.nodeName):l,"inline"===c&&"none"===n.css(e,"float")&&(d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}));for(i in t)if(s=t[i],Nb.exec(s)){if(delete t[i],o=o||"toggle"===s,s===(v?"hide":"show")){if("show"!==s||!m||void 0===m[i])continue;v=!0}p[i]=m&&m[i]||n.style(e,i)}else l=void 0;if(n.isEmptyObject(p))"inline"===("none"===l?tb(e.nodeName):l)&&(d.display=l);else{m?"hidden"in m&&(v=m.hidden):m=L.access(e,"fxshow",{}),o&&(m.hidden=!v),v?n(e).show():h.done(function(){n(e).hide()}),h.done(function(){var t;L.remove(e,"fxshow");for(t in p)n.style(e,t,p[t])});for(i in p)u=Ub(v?m[i]:0,i,h),i in m||(m[i]=u.start,v&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function Wb(e,t){var r,i,s,o,u;for(r in e)if(i=n.camelCase(r),s=t[i],o=e[r],n.isArray(o)&&(s=o[1],o=e[r]=o[0]),r!==i&&(e[i]=o,delete e[r]),u=n.cssHooks[i],u&&"expand"in u){o=u.expand(o),delete e[i];for(r in o)r in e||(e[r]=o[r],t[r]=s)}else t[i]=s}function Xb(e,t,r){var i,s,o=0,u=Qb.length,a=n.Deferred().always(function(){delete f.elem}),f=function(){if(s)return!1;for(var t=Lb||Sb(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,i=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(i);return a.notifyWith(e,[l,i,n]),1>i&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:n.extend({},t),opts:n.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:Lb||Sb(),duration:r.duration,tweens:[],createTween:function(t,r){var i=n.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,r=t?l.tweens.length:0;if(s)return this;for(s=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(Wb(c,l.opts.specialEasing);u>o;o++)if(i=Qb[o].call(l,e,c,l.opts))return i;return n.map(c,Ub,l),n.isFunction(l.opts.start)&&l.opts.start.call(e,l),n.fx.timer(n.extend(f,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function qc(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,s=0,o=t.toLowerCase().match(E)||[];if(n.isFunction(r))while(i=o[s++])"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function rc(e,t,r,i){function u(l){var h;return s[l]=!0,n.each(e[l]||[],function(e,n){var a=n(t,r,i);return"string"!=typeof a||o||s[a]?o?!(h=a):void 0:(t.dataTypes.unshift(a),u(a),!1)}),h}var s={},o=e===mc;return u(t.dataTypes[0])||!s["*"]&&u("*")}function sc(e,t){var r,i,s=n.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((s[r]?e:i||(i={}))[r]=t[r]);return i&&n.extend(!0,e,i),e}function tc(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):void 0}function uc(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function Ac(e,t,r,i){var s;if(n.isArray(t))n.each(t,function(t,n){r||wc.test(e)?i(e,n):Ac(e+"["+("object"==typeof n?t:"")+"]",n,r,i)});else if(r||"object"!==n.type(t))i(e,t);else for(s in t)Ac(e+"["+s+"]",t[s],r,i)}function Jc(e){return n.isWindow(e)?e:9===e.nodeType&&e.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(e,t){return new n.fn.init(e,t)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(e,t){return t.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:d.call(this)},pushStack:function(e){var t=n.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return n.each(this,e,t)},map:function(e){return this.pushStack(n.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var e,t,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[a]||{},a++),"object"==typeof u||n.isFunction(u)||(u={}),a===f&&(u=this,a--);f>a;a++)if(null!=(e=arguments[a]))for(t in e)r=u[t],i=e[t],u!==i&&(l&&i&&(n.isPlainObject(i)||(s=n.isArray(i)))?(s?(s=!1,o=r&&n.isArray(r)?r:[]):o=r&&n.isPlainObject(r)?r:{},u[t]=n.extend(l,o,i)):void 0!==i&&(u[t]=i));return u},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===n.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!n.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==n.type(e)||e.nodeType||n.isWindow(e)?!1:e.constructor&&!j.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[i.call(e)]||"object":typeof e},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(e){return e.replace(p,"ms-").replace(q,r)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,u=s(e);if(n){if(u){for(;o>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(u){for(;o>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(o,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(s(Object(e))?n.merge(r,"string"==typeof e?[e]:e):f.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,u=!n;o>s;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(t,n,r){var i,o=0,u=t.length,a=s(t),f=[];if(a)for(;u>o;o++)i=n(t[o],o,r),null!=i&&f.push(i);else for(o in t)i=n(t[o],o,r),null!=i&&f.push(i);return e.apply([],f)},guid:1,proxy:function(e,t){var r,i,s;return"string"==typeof t&&(r=e[t],t=e,e=r),n.isFunction(e)?(i=d.call(arguments,2),s=function(){return e.apply(t||this,i.concat(d.call(arguments)))},s.guid=e.guid=e.guid||n.guid++,s):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){h["[object "+t+"]"]=t.toLowerCase()});var t=function(e){function ot(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;if((t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[],l=t.nodeType,"string"!=typeof e||!e||1!==l&&9!==l&&11!==l)return r;if(!i&&v){if(11!==l&&(s=Z.exec(e)))if(f=s[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return D.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return D.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){if(y=g=w,S=t,x=1!==l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){d=o(e),(g=t.getAttribute("id"))?y=g.replace(tt,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+gt(d[c]);S=et.test(e)&&vt(t.parentNode)||t,x=d.join(",")}if(x)try{return D.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(z,"$1"),t,r,i)}function ut(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function at(e){return e[w]=!0,e}function ft(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||L)-(~e.sourceIndex||L);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function mt(){}function gt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=x++;return t.first?function(t,n,s){while(t=t[r])if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,o))return!0}else while(t=t[r])if(1===t.nodeType||i){if(a=t[w]||(t[w]={}),(u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(a[r]=f,f[2]=e(t,n,o))return!0}}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n){for(var r=0,i=t.length;i>r;r++)ot(e,t[r],n);return n}function Et(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function St(e,t,n,r,i,s){return r&&!r[w]&&(r=St(r)),i&&!i[w]&&(i=St(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:Et(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=Et(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?H(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=Et(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):D.apply(o,g)})}function xt(e){for(var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return H(t,e)>-1},u,!0),h=[function(e,n,r){var i=!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r));return t=null,i}];s>a;a++)if(n=r.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=r.filter[e[a].type].apply(null,e[a].matches),n[w]){for(i=++a;s>i;i++)if(r.relative[e[i].type])break;return St(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(z,"$1"),n,i>a&&xt(e.slice(a,i)),s>i&&xt(e=e.slice(i)),s>i&&gt(e))}h.push(n)}return bt(h)}function Tt(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=null==b?1:Math.random()||.1,x=w.length;for(l&&(f=o!==p&&o);m!==x&&null!=(c=w[m]);m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}if(v+=m,n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)g[m]||y[m]||(y[m]=M.call(a));y=Et(y)}D.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&ot.uniqueSort(a)}return l&&(S=E,f=b),g};return n?at(s):s}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+1*new Date,E=e.document,S=0,x=0,T=ut(),N=ut(),C=ut(),k=function(e,t){return e===t&&(c=!0),0},L=1<<31,A={}.hasOwnProperty,O=[],M=O.pop,_=O.push,D=O.push,P=O.slice,H=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",j="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",I=F.replace("w","w#"),q="\\["+j+"*("+F+")(?:"+j+"*([*^$|!~]?=)"+j+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+j+"*\\]",R=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",U=new RegExp(j+"+","g"),z=new RegExp("^"+j+"+|((?:^|[^\\\\])(?:\\\\.)*)"+j+"+$","g"),W=new RegExp("^"+j+"*,"+j+"*"),X=new RegExp("^"+j+"*([>+~]|"+j+")"+j+"*"),V=new RegExp("="+j+"*([^\\]'\"]*?)"+j+"*\\]","g"),$=new RegExp(R),J=new RegExp("^"+I+"$"),K={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F.replace("w","w*")+")"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+j+"*(even|odd|(([+-]|)(\\d*)n|)"+j+"*(?:([+-]|)"+j+"*(\\d+)|))"+j+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+j+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+j+"*((?:-\\d)?\\d*)"+j+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/[+~]/,tt=/'|\\/g,nt=new RegExp("\\\\([\\da-f]{1,6}"+j+"?|("+j+")|.)","ig"),rt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},it=function(){h()};try{D.apply(O=P.call(E.childNodes),E.childNodes),O[E.childNodes.length].nodeType}catch(st){D={apply:O.length?function(e,t){_.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=ot.support={},s=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},h=ot.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==p&&9===o.nodeType&&o.documentElement?(p=o,d=o.documentElement,i=o.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",it,!1):i.attachEvent&&i.attachEvent("onunload",it)),v=!s(o),n.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ft(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Y.test(o.getElementsByClassName),n.getById=ft(function(e){return d.appendChild(e).id=w,!o.getElementsByName||!o.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(nt,rt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){return v?t.getElementsByClassName(e):void 0},g=[],m=[],(n.qsa=Y.test(o.querySelectorAll))&&(ft(function(e){d.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+j+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+j+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]")}),ft(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+j+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(n.matchesSelector=Y.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ft(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),b=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===o||e.ownerDocument===E&&b(E,e)?-1:t===o||t.ownerDocument===E&&b(E,t)?1:l?H(l,e)-H(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,i=e.parentNode,s=t.parentNode,u=[e],a=[t];if(!i||!s)return e===o?-1:t===o?1:i?-1:s?1:l?H(l,e)-H(l,t):0;if(i===s)return ct(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ct(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},o):p},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&h(e),t=t.replace(V,"='$1']"),!(!n.matchesSelector||!v||g&&g.test(t)||m&&m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return ot(t,p,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},ot.attr=function(e,t){(e.ownerDocument||e)!==p&&h(e);var i=r.attrHandle[t.toLowerCase()],s=i&&A.call(r.attrHandle,t.toLowerCase())?i(e,t,!v):void 0;return void 0!==s?s:n.attributes||!v?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ot.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,r=[],i=0,s=0;if(c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k),c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=ot.getText=function(e){var t,n="",r=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===s||4===s)return e.nodeValue}else while(t=e[r++])n+=i(t);return n},r=ot.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(nt,rt),e[3]=(e[3]||e[4]||e[5]||"").replace(nt,rt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&$.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(nt,rt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+j+")"+e+"("+j+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[S,h]),c===t))break;return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=H(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:at(function(e){var t=[],n=[],r=u(e.replace(z,"$1"));return r[w]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return e=e.replace(nt,rt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:at(function(e){return J.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(nt,rt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ht(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pt(t);return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,o=ot.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){(!n||(i=W.exec(u)))&&(i&&(u=u.slice(i[0].length)||u),a.push(s=[])),n=!1,(i=X.exec(u))&&(n=i.shift(),s.push({value:n,type:i[0].replace(z," ")}),u=u.slice(n.length));for(o in r.filter)!(i=K[o].exec(u))||f[o]&&!(i=f[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)},u=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=xt(t[n]),s[w]?r.push(s):i.push(s);s=C(e,Tt(i,r)),s.selector=e}return s},a=ot.select=function(e,t,i,s){var a,f,l,c,h,p="function"==typeof e&&e,d=!s&&o(e=p.selector||e);if(i=i||[],1===d.length){if(f=d[0]=d[0].slice(0),f.length>2&&"ID"===(l=f[0]).type&&n.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(l.matches[0].replace(nt,rt),t)||[])[0],!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=K.needsContext.test(e)?0:f.length;while(a--){if(l=f[a],r.relative[c=l.type])break;if((h=r.find[c])&&(s=h(l.matches[0].replace(nt,rt),et.test(f[0].type)&&vt(t.parentNode)||t))){if(f.splice(a,1),e=s.length&&gt(f),!e)return D.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,et.test(e)&&vt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(p.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(B,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),ot}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?n.find.matchesSelector(i,e)?[i]:[]:n.find.matches(e,n.grep(t,function(e){return 1===e.nodeType}))},n.fn.extend({find:function(e){var t,r=this.length,i=[],s=this;if("string"!=typeof e)return this.pushStack(n(e).filter(function(){for(t=0;r>t;t++)if(n.contains(s[t],this))return!0}));for(t=0;r>t;t++)n.find(e,s[t],i);return i=this.pushStack(r>1?n.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,"string"==typeof e&&u.test(e)?n(e):e||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(e,t){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:z.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||y).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof n?t[0]:t,n.merge(this,n.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:l,!0)),v.test(r[1])&&n.isPlainObject(t))for(r in t)n.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=l.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=l,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):n.isFunction(e)?"undefined"!=typeof y.ready?y.ready(e):e(n):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),n.makeArray(e,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(e,t,r){var i=[],s=void 0!==r;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(s&&n(e).is(r))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),n.fn.extend({has:function(e){var t=n(e,this),r=t.length;return this.filter(function(){for(var e=0;r>e;e++)if(n.contains(this,t[e]))return!0})},closest:function(e,t){for(var r,i=0,s=this.length,o=[],a=u.test(e)||"string"!=typeof e?n(e,t||this.context):0;s>i;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&n.find.matchesSelector(r,e))){o.push(r);break}return this.pushStack(o.length>1?n.unique(o):o)},index:function(e){return e?"string"==typeof e?g.call(n(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(n.unique(n.merge(this.get(),n(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),n.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return n.dir(e,"parentNode")},parentsUntil:function(e,t,r){return n.dir(e,"parentNode",r)},next:function(e){return D(e,"nextSibling")},prev:function(e){return D(e,"previousSibling")},nextAll:function(e){return n.dir(e,"nextSibling")},prevAll:function(e){return n.dir(e,"previousSibling")},nextUntil:function(e,t,r){return n.dir(e,"nextSibling",r)},prevUntil:function(e,t,r){return n.dir(e,"previousSibling",r)},siblings:function(e){return n.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return n.sibling(e.firstChild)},contents:function(e){return e.contentDocument||n.merge([],e.childNodes)}},function(e,t){n.fn[e]=function(r,i){var s=n.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(s=n.filter(i,s)),this.length>1&&(C[e]||n.unique(s),B.test(e)&&s.reverse()),this.pushStack(s)}});var E=/\S+/g,F={};n.Callbacks=function(e){e="string"==typeof e?F[e]||G(e):n.extend({},e);var t,r,i,s,o,u,a=[],f=!e.once&&[],l=function(n){for(t=e.memory&&n,r=!0,u=s||0,s=0,o=a.length,i=!0;a&&o>u;u++)if(a[u].apply(n[0],n[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):t?a=[]:c.disable())},c={add:function(){if(a){var r=a.length;!function u(t){n.each(t,function(t,r){var i=n.type(r);"function"===i?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==i&&u(r)})}(arguments),i?o=a.length:t&&(s=r,l(t))}return this},remove:function(){return a&&n.each(arguments,function(e,t){var r;while((r=n.inArray(t,a,r))>-1)a.splice(r,1),i&&(o>=r&&o--,u>=r&&u--)}),this},has:function(e){return e?n.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],o=0,this},disable:function(){return a=f=t=void 0,this},disabled:function(){return!a},lock:function(){return f=void 0,t||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return!a||r&&!f||(t=t||[],t=[e,t.slice?t.slice():t],i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},n.extend({Deferred:function(e){var t=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return n.Deferred(function(r){n.each(t,function(t,o){var u=n.isFunction(e[t])&&e[t];s[o[1]](function(){var e=u&&u.apply(this,arguments);e&&n.isFunction(e.promise)?e.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o[0]+"With"](this===i?r.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?n.extend(e,i):i}},s={};return i.pipe=i.then,n.each(t,function(e,n){var o=n[2],u=n[3];i[n[1]]=o.add,u&&o.add(function(){r=u},t[1^e][2].disable,t[2][2].lock),s[n[0]]=function(){return s[n[0]+"With"](this===s?i:this,arguments),this},s[n[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,r=d.call(arguments),i=r.length,s=1!==i||e&&n.isFunction(e.promise)?i:0,o=1===s?e:n.Deferred(),u=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1)for(a=new Array(i),f=new Array(i),l=new Array(i);i>t;t++)r[t]&&n.isFunction(r[t].promise)?r[t].promise().done(u(t,l,r)).fail(o.reject).progress(u(t,f,a)):--s;return s||o.resolveWith(l,r),o.promise()}});var H;n.fn.ready=function(e){return n.ready.promise().done(e),this},n.extend({isReady:!1,readyWait:1,holdReady:function(e){e?n.readyWait++:n.ready(!0)},ready:function(e){(e===!0?--n.readyWait:n.isReady)||(n.isReady=!0,e!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(e){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(e)},n.ready.promise();var J=n.access=function(e,t,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===n.type(r)){s=!0;for(a in r)n.access(e,t,a,r[a],!0,o,u)}else if(void 0!==i&&(s=!0,n.isFunction(i)||(u=!0),l&&(u?(t.call(e,i),t=null):(l=t,t=function(e,t,r){return l.call(n(e),r)})),t))for(;f>a;a++)t(e[a],r,u?i:i.call(e[a],a,t(e[a],r)));return s?e:l?t.call(e):f?t(e[0],r):o};n.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(e){if(!K.accepts(e))return 0;var t={},r=e[this.expando];if(!r){r=K.uid++;try{t[this.expando]={value:r},Object.defineProperties(e,t)}catch(i){t[this.expando]=r,n.extend(e,t)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,t,r){var i,s=this.key(e),o=this.cache[s];if("string"==typeof t)o[t]=r;else if(n.isEmptyObject(o))n.extend(this.cache[s],t);else for(i in t)o[i]=t[i];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,r){var i;return void 0===t||t&&"string"==typeof t&&void 0===r?(i=this.get(e,t),void 0!==i?i:this.get(e,n.camelCase(t))):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i,s,o=this.key(e),u=this.cache[o];if(void 0===t)this.cache[o]={};else{n.isArray(t)?i=t.concat(t.map(n.camelCase)):(s=n.camelCase(t),t in u?i=[t,s]:(i=s,i=i in u?[i]:i.match(E)||[])),r=i.length;while(r--)delete u[i[r]]}},hasData:function(e){return!n.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(e){return M.hasData(e)||L.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return L.access(e,t,n)},_removeData:function(e,t){L.remove(e,t)}}),n.fn.extend({data:function(e,t){var r,i,s,o=this[0],u=o&&o.attributes;if(void 0===e){if(this.length&&(s=M.get(o),1===o.nodeType&&!L.get(o,"hasDataAttrs"))){r=u.length;while(r--)u[r]&&(i=u[r].name,0===i.indexOf("data-")&&(i=n.camelCase(i.slice(5)),P(o,i,s[i])));L.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){M.set(this,e)}):J(this,function(t){var r,i=n.camelCase(e);if(o&&void 0===t){if(r=M.get(o,e),void 0!==r)return r;if(r=M.get(o,i),void 0!==r)return r;if(r=P(o,i,void 0),void 0!==r)return r}else this.each(function(){var n=M.get(this,i);M.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&M.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),n.extend({queue:function(e,t,r){var i;return e?(t=(t||"fx")+"queue",i=L.get(e,t),r&&(!i||n.isArray(r)?i=L.access(e,t,n.makeArray(r)):i.push(r)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var r=n.queue(e,t),i=r.length,s=r.shift(),o=n._queueHooks(e,t),u=function(){n.dequeue(e,t)};"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===t&&r.unshift("inprogress"),delete o.stop,s.call(e,u,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return L.get(e,r)||L.access(e,r,{empty:n.Callbacks("once memory").add(function(){L.remove(e,[t+"queue",r])})})}}),n.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?n.queue(this[0],e):void 0===t?this:this.each(function(){var r=n.queue(this,e,t);n._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&n.dequeue(this,e)})},dequeue:function(e){return this.each(function(){n.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,s=n.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(u--)r=L.get(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(e,t){return e=t||e,"none"===n.css(e,"display")||!n.contains(e.ownerDocument,e)},T=/^(?:checkbox|radio)$/i;!function(){var e=l.createDocumentFragment(),t=e.appendChild(l.createElement("div")),n=l.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),k.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.get(e);if(g){r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=n.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(t){return typeof n!==U&&n.event.triggered!==t.type?n.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(E)||[""],l=t.length;while(l--)a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=n.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=n.event.special[d]||{},c=n.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&n.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),n.event.global[d]=!0)}},remove:function(e,t,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=L.hasData(e)&&L.get(e);if(g&&(f=g.events)){t=(t||"").match(E)||[""],l=t.length;while(l--)if(a=Y.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d){h=n.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,p=f[d]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;while(o--)c=p[o],!s&&m!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,h.remove&&h.remove.call(e,c));u&&!p.length&&(h.teardown&&h.teardown.call(e,v,g.handle)!==!1||n.removeEvent(e,d,g.handle),delete f[d])}else for(d in f)n.event.remove(e,d+t[l],r,i,!0);n.isEmptyObject(f)&&(delete g.handle,L.remove(e,"events"))}},trigger:function(e,t,r,i){var s,o,u,f,c,h,p,d=[r||l],v=j.call(e,"type")?e.type:e,m=j.call(e,"namespace")?e.namespace.split("."):[];if(o=u=r=r||l,3!==r.nodeType&&8!==r.nodeType&&!X.test(v+n.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[n.expando]?e:new n.Event(v,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=m.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:n.makeArray(t,[e]),p=n.event.special[v]||{},i||!p.trigger||p.trigger.apply(r,t)!==!1)){if(!i&&!p.noBubble&&!n.isWindow(r)){for(f=p.delegateType||v,X.test(f+v)||(o=o.parentNode);o;o=o.parentNode)d.push(o),u=o;u===(r.ownerDocument||l)&&d.push(u.defaultView||u.parentWindow||a)}s=0;while((o=d[s++])&&!e.isPropagationStopped())e.type=s>1?f:p.bindType||v,h=(L.get(o,"events")||{})[e.type]&&L.get(o,"handle"),h&&h.apply(o,t),h=c&&o[c],h&&h.apply&&n.acceptData(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||p._default&&p._default.apply(d.pop(),t)!==!1||!n.acceptData(r)||c&&n.isFunction(r[v])&&!n.isWindow(r)&&(u=r[c],u&&(r[c]=null),n.event.triggered=v,r[v](),n.event.triggered=void 0,u&&(r[c]=u)),e.result}},dispatch:function(e){e=n.event.fix(e);var t,r,i,s,o,u=[],a=d.call(arguments),f=(L.get(this,"events")||{})[e.type]||[],l=n.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=n.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((n.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var r,i,s,o,u=[],a=t.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!==this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==e.type){for(i=[],r=0;a>r;r++)o=t[r],s=o.selector+" ",void 0===i[s]&&(i[s]=o.needsContext?n(s,this).index(f)>=0:n.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||l,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[n.expando])return e;var t,r,i,s=e.type,o=e,u=this.fixHooks[s];u||(this.fixHooks[s]=u=W.test(s)?this.mouseHooks:V.test(s)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,e=new n.Event(o),t=i.length;while(t--)r=i[t],e[r]=o[r];return e.target||(e.target=l),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return n.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,r,i){var s=n.extend(new n.Event,r,{type:e,isSimulated:!0,originalEvent:{}});i?n.event.trigger(s,null,t):n.event.dispatch.call(t,s),s.isDefaultPrevented()&&r.preventDefault()}},n.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},n.Event=function(e,t){return this instanceof n.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?Z:$):this.type=e,t&&n.extend(this,t),this.timeStamp=e&&e.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(e,t)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Z,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Z,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Z,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){n.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=this,s=e.relatedTarget,o=e.handleObj;return(!s||s!==i&&!n.contains(i,s))&&(e.type=o.origType,r=o.handler.apply(this,arguments),e.type=t),r}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){n.event.simulate(t,e.target,n.event.fix(e),!0)};n.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=L.access(n,t);i||n.addEventListener(e,r,!0),L.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=L.access(n,t)-1;i?L.access(n,t,i):(n.removeEventListener(e,r,!0),L.remove(n,t))}}}),n.fn.extend({on:function(e,t,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof t&&(r=r||t,t=void 0);for(u in e)this.on(u,t,r,e[u],s);return this}if(null==r&&null==i?(i=t,r=t=void 0):null==i&&("string"==typeof t?(i=r,r=void 0):(i=r,r=t,t=void 0)),i===!1)i=$;else if(!i)return this;return 1===s&&(o=i,i=function(e){return n().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=n.guid++)),this.each(function(){n.event.add(this,e,i,r,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,n(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(r=t,t=void 0),r===!1&&(r=$),this.each(function(){n.event.remove(this,e,r,t)})},trigger:function(e,t){return this.each(function(){n.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];return r?n.event.trigger(e,t,r,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(e,t,r){var i,s,o,u,a=e.cloneNode(!0),f=n.contains(e.ownerDocument,e);if(!(k.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||n.isXMLDoc(e)))for(u=ob(a),o=ob(e),i=0,s=o.length;s>i;i++)pb(o[i],u[i]);if(t)if(r)for(o=o||ob(e),u=u||ob(a),i=0,s=o.length;s>i;i++)nb(o[i],u[i]);else nb(e,a);return u=ob(a,"script"),u.length>0&&mb(u,!f&&ob(e,"script")),a},buildFragment:function(e,t,r,i){for(var s,o,u,a,f,l,c=t.createDocumentFragment(),h=[],p=0,d=e.length;d>p;p++)if(s=e[p],s||0===s)if("object"===n.type(s))n.merge(h,s.nodeType?[s]:s);else if(cb.test(s)){o=o||c.appendChild(t.createElement("div")),u=(bb.exec(s)||["",""])[1].toLowerCase(),a=ib[u]||ib._default,o.innerHTML=a[1]+s.replace(ab,"<$1></$2>")+a[2],l=a[0];while(l--)o=o.lastChild;n.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(s));c.textContent="",p=0;while(s=h[p++])if((!i||-1===n.inArray(s,i))&&(f=n.contains(s.ownerDocument,s),o=ob(c.appendChild(s),"script"),f&&mb(o),r)){l=0;while(s=o[l++])fb.test(s.type||"")&&r.push(s)}return c},cleanData:function(e){for(var t,r,i,s,o=n.event.special,u=0;void 0!==(r=e[u]);u++){if(n.acceptData(r)&&(s=r[L.expando],s&&(t=L.cache[s]))){if(t.events)for(i in t.events)o[i]?n.event.remove(r,i):n.removeEvent(r,i,t.handle);L.cache[s]&&delete L.cache[s]}delete M.cache[r[M.expando]]}}}),n.fn.extend({text:function(e){return J(this,function(e){return void 0===e?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=jb(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var r,i=e?n.filter(e,this):this,s=0;null!=(r=i[s]);s++)t||1!==r.nodeType||n.cleanData(ob(r)),r.parentNode&&(t&&n.contains(r.ownerDocument,r)&&mb(ob(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(n.cleanData(ob(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return n.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!db.test(e)&&!ib[(bb.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ab,"<$1></$2>");try{for(;i>r;r++)t=this[r]||{},1===t.nodeType&&(n.cleanData(ob(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,n.cleanData(ob(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(t,r){t=e.apply([],t);var i,s,o,u,a,f,l=0,c=this.length,h=this,p=c-1,d=t[0],v=n.isFunction(d);if(v||c>1&&"string"==typeof d&&!k.checkClone&&eb.test(d))return this.each(function(e){var n=h.eq(e);v&&(t[0]=d.call(this,e,n.html())),n.domManip(t,r)});if(c&&(i=n.buildFragment(t,this[0].ownerDocument,!1,this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(o=n.map(ob(i,"script"),kb),u=o.length;c>l;l++)a=i,l!==p&&(a=n.clone(a,!0,!0),u&&n.merge(o,ob(a,"script"))),r.call(this[l],a,l);if(u)for(f=o[o.length-1].ownerDocument,n.map(o,lb),l=0;u>l;l++)a=o[l],fb.test(a.type||"")&&!L.access(a,"globalEval")&&n.contains(f,a)&&(a.src?n._evalUrl&&n._evalUrl(a.src):n.globalEval(a.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){n.fn[e]=function(e){for(var r,i=[],s=n(e),o=s.length-1,u=0;o>=u;u++)r=u===o?this:this.clone(!0),n(s[u])[t](r),f.apply(i,r.get());return this.pushStack(i)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):a.getComputedStyle(e,null)};!function(){var e,t,r=l.documentElement,i=l.createElement("div"),s=l.createElement("div");if(s.style){s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===s.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(s);function o(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(i);var n=a.getComputedStyle(s,null);e="1%"!==n.top,t="4px"===n.width,r.removeChild(i)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==t&&o(),t},reliableMarginRight:function(){var e,t=s.appendChild(l.createElement("div"));return t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",r.appendChild(i),e=!parseFloat(a.getComputedStyle(t,null).marginRight),r.removeChild(i),s.removeChild(t),e}})}}(),n.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=xb(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=n.camelCase(t),f=e.style;return t=n.cssProps[a]||(n.cssProps[a]=Fb(f,a)),u=n.cssHooks[t]||n.cssHooks[a],void 0===r?u&&"get"in u&&void 0!==(s=u.get(e,!1,i))?s:f[t]:(o=typeof r,"string"===o&&(s=Bb.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(n.css(e,t)),o="number"),null!=r&&r===r&&("number"!==o||n.cssNumber[a]||(r+="px"),k.clearCloneStyle||""!==r||0!==t.indexOf("background")||(f[t]="inherit"),u&&"set"in u&&void 0===(r=u.set(e,r,i))||(f[t]=r)),void 0)}},css:function(e,t,r,i){var s,o,u,a=n.camelCase(t);return t=n.cssProps[a]||(n.cssProps[a]=Fb(e.style,a)),u=n.cssHooks[t]||n.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),void 0===s&&(s=xb(e,t,i)),"normal"===s&&t in Db&&(s=Db[t]),""===r||r?(o=parseFloat(s),r===!0||n.isNumeric(o)?o||0:s):s}}),n.each(["height","width"],function(e,t){n.cssHooks[t]={get:function(e,r,i){return r?zb.test(n.css(e,"display"))&&0===e.offsetWidth?n.swap(e,Cb,function(){return Ib(e,t,i)}):Ib(e,t,i):void 0},set:function(e,r,i){var s=i&&wb(e);return Gb(e,r,i?Hb(e,t,i,"border-box"===n.css(e,"boxSizing",!1,s),s):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(e,t){return t?n.swap(e,{display:"inline-block"},xb,[e,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(e,t){n.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+R[r]+t]=s[r]||s[r-2]||s[0];return i}},ub.test(e)||(n.cssHooks[e+t].set=Gb)}),n.fn.extend({css:function(e,t){return J(this,function(e,t,r){var i,s,o={},u=0;if(n.isArray(t)){for(i=wb(e),s=t.length;s>u;u++)o[t[u]]=n.css(e,t[u],!1,i);return o}return void 0!==r?n.style(e,t,r):n.css(e,t)},e,t,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(e,t,r,i,s,o){this.elem=e,this.prop=r,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(n.cssNumber[r]?"":"px")},cur:function(){var e=Kb.propHooks[this.prop];return e&&e.get?e.get(this):Kb.propHooks._default.get(this)},run:function(e){var t,r=Kb.propHooks[this.prop];return this.pos=t=this.options.duration?n.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=n.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){n.fx.step[e.prop]?n.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[n.cssProps[e.prop]]||n.cssHooks[e.prop])?n.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},n.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(e,t){var r=this.createTween(e,t),i=r.cur(),s=Ob.exec(t),o=s&&s[3]||(n.cssNumber[e]?"":"px"),u=(n.cssNumber[e]||"px"!==o&&+i)&&Ob.exec(n.css(r.elem,e)),a=1,f=20;if(u&&u[3]!==o){o=o||u[3],s=s||[],u=+i||1;do a=a||".5",u/=a,n.style(r.elem,e,u+o);while(a!==(a=r.cur()/i)&&1!==a&&--f)}return s&&(u=r.start=+u||+i||0,r.unit=o,r.end=s[1]?u+(s[1]+1)*s[2]:+s[2]),r}]};n.Animation=n.extend(Xb,{tweener:function(e,t){n.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var r,i=0,s=e.length;s>i;i++)r=e[i],Rb[r]=Rb[r]||[],Rb[r].unshift(t)},prefilter:function(e,t){t?Qb.unshift(e):Qb.push(e)}}),n.speed=function(e,t,r){var i=e&&"object"==typeof e?n.extend({},e):{complete:r||!r&&t||n.isFunction(e)&&e,duration:e,easing:r&&t||t&&!n.isFunction(t)&&t};return i.duration=n.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in n.fx.speeds?n.fx.speeds[i.duration]:n.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){n.isFunction(i.old)&&i.old.call(this),i.queue&&n.dequeue(this,i.queue)},i},n.fn.extend({fadeTo:function(e,t,n,r){return this.filter(S).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,r,i){var s=n.isEmptyObject(e),o=n.speed(t,r,i),u=function(){var t=Xb(this,n.extend({},e),o);(s||L.get(this,"finish"))&&t.stop(!0)};return u.finish=u,s||o.queue===!1?this.each(u):this.queue(o.queue,u)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",o=n.timers,u=L.get(this);if(s)u[s]&&u[s].stop&&i(u[s]);else for(s in u)u[s]&&u[s].stop&&Pb.test(s)&&i(u[s]);for(s=o.length;s--;)o[s].elem!==this||null!=e&&o[s].queue!==e||(o[s].anim.stop(r),t=!1,o.splice(s,1));(t||!r)&&n.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,r=L.get(this),i=r[e+"queue"],s=r[e+"queueHooks"],o=n.timers,u=i?i.length:0;for(r.finish=!0,n.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;u>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish})}}),n.each(["toggle","show","hide"],function(e,t){var r=n.fn[t];n.fn[t]=function(e,n,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(Tb(t,!0),e,n,i)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){n.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),n.timers=[],n.fx.tick=function(){var e,t=0,r=n.timers;for(Lb=n.now();t<r.length;t++)e=r[t],e()||r[t]!==e||r.splice(t--,1);r.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(e){n.timers.push(e),e()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(e,t){return e=n.fx?n.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=l.createElement("input"),t=l.createElement("select"),n=t.appendChild(l.createElement("option"));e.type="checkbox",k.checkOn=""!==e.value,k.optSelected=n.selected,t.disabled=!0,k.optDisabled=!n.disabled,e=l.createElement("input"),e.value="t",e.type="radio",k.radioValue="t"===e.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(e,t){return J(this,n.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){n.removeAttr(this,e)})}}),n.extend({attr:function(e,t,r){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===U?n.prop(e,t,r):(1===o&&n.isXMLDoc(e)||(t=t.toLowerCase(),i=n.attrHooks[t]||(n.expr.match.bool.test(t)?Zb:Yb)),void 0===r?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=n.find.attr(e,t),null==s?void 0:s):null!==r?i&&"set"in i&&void 0!==(s=i.set(e,r,t))?s:(e.setAttribute(t,r+""),r):void n.removeAttr(e,t))},removeAttr:function(e,t){var r,i,s=0,o=t&&t.match(E);if(o&&1===e.nodeType)while(r=o[s++])i=n.propFix[r]||r,n.expr.match.bool.test(r)&&(e[i]=!1),e.removeAttribute(r)},attrHooks:{type:{set:function(e,t){if(!k.radioValue&&"radio"===t&&n.nodeName(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}}}),Zb={set:function(e,t,r){return t===!1?n.removeAttr(e,r):e.setAttribute(r,r),r}},n.each(n.expr.match.bool.source.match(/\w+/g),function(e,t){var r=$b[t]||n.find.attr;$b[t]=function(e,t,n){var i,s;return n||(s=$b[t],$b[t]=i,i=null!=r(e,t,n)?t.toLowerCase():null,$b[t]=s),i}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(e,t){return J(this,n.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[n.propFix[e]||e]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!n.isXMLDoc(e),o&&(t=n.propFix[t]||t,s=n.propHooks[t]),void 0!==r?s&&"set"in s&&void 0!==(i=s.set(e,r,t))?i:e[t]=r:s&&"get"in s&&null!==(i=s.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||_b.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(e){var t,r,i,s,o,u,a="string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):" ")){o=0;while(s=t[o++])i.indexOf(" "+s+" ")<0&&(i+=s+" ");u=n.trim(i),r.className!==u&&(r.className=u)}return this},removeClass:function(e){var t,r,i,s,o,u,a=0===arguments.length||"string"==typeof e&&e,f=0,l=this.length;if(n.isFunction(e))return this.each(function(t){n(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];l>f;f++)if(r=this[f],i=1===r.nodeType&&(r.className?(" "+r.className+" ").replace(ac," "):"")){o=0;while(s=t[o++])while(i.indexOf(" "+s+" ")>=0)i=i.replace(" "+s+" "," ");u=e?n.trim(i):"",r.className!==u&&(r.className=u)}return this},toggleClass:function(e,t){var r=typeof e;return"boolean"==typeof t&&"string"===r?t?this.addClass(e):this.removeClass(e):this.each(n.isFunction(e)?function(r){n(this).toggleClass(e.call(this,r,this.className,t),t)}:function(){if("string"===r){var t,i=0,s=n(this),o=e.match(E)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(r===U||"boolean"===r)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||e===!1?"":L.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ac," ").indexOf(t)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(e){var t,r,i,s=this[0];if(arguments.length)return i=n.isFunction(e),this.each(function(r){var s;1===this.nodeType&&(s=i?e.call(this,r,n(this).val()):e,null==s?s="":"number"==typeof s?s+="":n.isArray(s)&&(s=n.map(s,function(e){return null==e?"":e+""})),t=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=n.valHooks[s.type]||n.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(s,"value"))?r:(r=s.value,"string"==typeof r?r.replace(bc,""):null==r?"":r)}}),n.extend({valHooks:{option:{get:function(e){var t=n.find.attr(e,"value");return null!=t?t:n.trim(n.text(e))}},select:{get:function(e){for(var t,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type||0>s,u=o?null:[],a=o?s+1:i.length,f=0>s?a:o?s:0;a>f;f++)if(r=i[f],!(!r.selected&&f!==s||(k.optDisabled?r.disabled:null!==r.getAttribute("disabled"))||r.parentNode.disabled&&n.nodeName(r.parentNode,"optgroup"))){if(t=n(r).val(),o)return t;u.push(t)}return u},set:function(e,t){var r,i,s=e.options,o=n.makeArray(t),u=s.length;while(u--)i=s[u],(i.selected=n.inArray(i.value,o)>=0)&&(r=!0);return r||(e.selectedIndex=-1),o}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(e,t){return n.isArray(t)?e.checked=n.inArray(n(e).val(),t)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){n.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),n.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(e){return JSON.parse(e+"")},n.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{r=new DOMParser,t=r.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+e),t};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?sc(sc(e,n.ajaxSettings),t):sc(n.ajaxSettings,e)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(e,t){function T(e,t,o,a){var l,g,y,w,E,x=t;2!==b&&(b=2,u&&clearTimeout(u),r=void 0,s=a||"",S.readyState=e>0?4:0,l=e>=200&&300>e||304===e,o&&(w=tc(c,S,o)),w=uc(c,w,S,l),l?(c.ifModified&&(E=S.getResponseHeader("Last-Modified"),E&&(n.lastModified[i]=E),E=S.getResponseHeader("etag"),E&&(n.etag[i]=E)),204===e||"HEAD"===c.type?x="nocontent":304===e?x="notmodified":(x=w.state,g=w.data,y=w.error,l=!y)):(y=x,(e||!x)&&(x="error",0>e&&(e=0))),S.status=e,S.statusText=(t||x)+"",l?d.resolveWith(h,[g,x,S]):d.rejectWith(h,[S,x,y]),S.statusCode(m),m=void 0,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[S,c,l?g:y]),v.fireWith(h,[S,x]),f&&(p.trigger("ajaxComplete",[S,c]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,u,a,f,l,c=n.ajaxSetup({},t),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?n(h):n.event,d=n.Deferred(),v=n.Callbacks("once memory"),m=c.statusCode||{},g={},y={},b=0,w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o){o={};while(t=gc.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),T(0,t),this}};if(d.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=n.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(a=kc.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===pc[1]&&a[2]===pc[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=n.param(c.data,c.traditional)),rc(lc,c,t,S),2===b)return S;f=n.event&&c.global,f&&0===n.active++&&n.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!ic.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(dc.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=fc.test(i)?i.replace(fc,"$1_="+cc++):i+(dc.test(i)?"&":"?")+"_="+cc++)),c.ifModified&&(n.lastModified[i]&&S.setRequestHeader("If-Modified-Since",n.lastModified[i]),n.etag[i]&&S.setRequestHeader("If-None-Match",n.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+nc+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)S.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,S,c)!==!1&&2!==b){w="abort";for(l in{success:1,error:1,complete:1})S[l](c[l]);if(r=rc(mc,c,t,S)){S.readyState=1,f&&p.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){S.abort("timeout")},c.timeout));try{b=1,r.send(g,T)}catch(x){if(!(2>b))throw x;T(-1,x)}}else T(-1,"No Transport");return S}return S.abort()},getJSON:function(e,t,r){return n.get(e,t,r,"json")},getScript:function(e,t){return n.get(e,void 0,t,"script")}}),n.each(["get","post"],function(e,t){n[t]=function(e,r,i,s){return n.isFunction(r)&&(s=s||i,i=r,r=void 0),n.ajax({url:e,type:t,dataType:s,data:r,success:i})}}),n._evalUrl=function(e){return n.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(e){var t;return n.isFunction(e)?this.each(function(t){n(this).wrapAll(e.call(this,t))}):(this[0]&&(t=n(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(n.isFunction(e)?function(t){n(this).wrapInner(e.call(this,t))}:function(){var t=n(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=n.isFunction(e);return this.each(function(r){n(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},n.expr.filters.visible=function(e){return!n.expr.filters.hidden(e)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;n.param=function(e,t){var r,i=[],s=function(e,t){t=n.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(e)||e.jquery&&!n.isPlainObject(e))n.each(e,function(){s(this.name,this.value)});else for(r in e)Ac(r,e[r],t,s);return i.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=n.prop(this,"elements");return e?n.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(e)&&(this.checked||!T.test(e))}).map(function(e,t){var r=n(this).val();return null==r?null:n.isArray(r)?n.map(r,function(e){return{name:t.name,value:e.replace(xc,"\r\n")}}):{name:t.name,value:r.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var e in Cc)Cc[e]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(e){var t;return k.cors||Ec&&!e.crossDomain?{send:function(n,r){var i,s=e.xhr(),o=++Bc;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)s.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Cc[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?r(s.status,s.statusText):r(Dc[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=Cc[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return n.globalEval(e),e}}}),n.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),n.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(i,s){t=n("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&s("error"===e.type?404:200,e.type)}),l.head.appendChild(t[0])},abort:function(){r&&r()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Fc.pop()||n.expando+"_"+cc++;return this[e]=!0,e}}),n.ajaxPrefilter("json jsonp",function(e,t,r){var i,s,o,u=e.jsonp!==!1&&(Gc.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(e.data)&&"data");return u||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=n.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,u?e[u]=e[u].replace(Gc,"$1"+i):e.jsonp!==!1&&(e.url+=(dc.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||n.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=a[i],a[i]=function(){o=arguments},r.always(function(){a[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Fc.push(i)),o&&n.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),n.parseHTML=function(e,t,r){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(r=t,t=!1),t=t||l;var i=v.exec(e),s=!r&&[];return i?[t.createElement(i[1])]:(i=n.buildFragment([e],t,s),s&&s.length&&n(s).remove(),n.merge([],i.childNodes))};var Hc=n.fn.load;n.fn.load=function(e,t,r){if("string"!=typeof e&&Hc)return Hc.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=n.trim(e.slice(a)),e=e.slice(0,a)),n.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(s="POST"),u.length>0&&n.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){o=arguments,u.html(i?n("<div>").append(n.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.expr.filters.animated=function(e){return n.grep(n.timers,function(t){return e===t.elem}).length};var Ic=a.document.documentElement;n.offset={setOffset:function(e,t,r){var i,s,o,u,a,f,l,c=n.css(e,"position"),h=n(e),p={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=n.css(e,"top"),f=n.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+f).indexOf("auto")>-1,l?(i=h.position(),u=i.top,s=i.left):(u=parseFloat(o)||0,s=parseFloat(f)||0),n.isFunction(t)&&(t=t.call(e,r,a)),null!=t.top&&(p.top=t.top-a.top+u),null!=t.left&&(p.left=t.left-a.left+s),"using"in t?t.using.call(e,p):h.css(p)}},n.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){n.offset.setOffset(this,e,t)});var t,r,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,n.contains(t,i)?(typeof i.getBoundingClientRect!==U&&(s=i.getBoundingClientRect()),r=Jc(o),{top:s.top+r.pageYOffset-t.clientTop,left:s.left+r.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,r=this[0],i={top:0,left:0};return"fixed"===n.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),n.nodeName(e[0],"html")||(i=e.offset()),i.top+=n.css(e[0],"borderTopWidth",!0),i.left+=n.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-n.css(r,"marginTop",!0),left:t.left-i.left-n.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||Ic;while(e&&!n.nodeName(e,"html")&&"static"===n.css(e,"position"))e=e.offsetParent;return e||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;n.fn[e]=function(n){return J(this,function(e,n,i){var s=Jc(e);return void 0===i?s?s[t]:e[n]:void (s?s.scrollTo(r?a.pageXOffset:i,r?i:a.pageYOffset):e[n]=i)},e,n,arguments.length,null)}}),n.each(["top","left"],function(e,t){n.cssHooks[t]=yb(k.pixelPosition,function(e,r){return r?(r=xb(e,t),vb.test(r)?n(e).position()[t]+"px":r):void 0})}),n.each({Height:"height",Width:"width"},function(e,t){n.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,i){n.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return J(this,function(t,r,i){var s;return n.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?n.css(t,r,u):n.style(t,r,i,u)},t,o?i:void 0,o,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(e){return a.$===n&&(a.$=Lc),e&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n}),function(e,t,n){function r(e,t){return t=t||Error,function(){var n=arguments[0],r="["+(e?e+":":"")+n+"] ",i=arguments[1],s=arguments,o,u;o=r+i.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n;return t+2<s.length?Wt(s[t+2]):e}),o=o+"\nhttp://errors.angularjs.org/1.3.15/"+(e?e+"/":"")+n;for(u=2;u<arguments.length;u++)o=o+(u==2?"?":"&")+"p"+(u-2)+"="+encodeURIComponent(Wt(arguments[u]));return new t(o)}}function S(e){if(e==null||W(e))return!1;var t=e.length;return e.nodeType===jt&&t?!0:F(e)||R(e)||t===0||typeof t=="number"&&t>0&&t-1 in e}function x(e,t,n){var r,i;if(e)if(U(e))for(r in e)r!="prototype"&&r!="length"&&r!="name"&&(!e.hasOwnProperty||e.hasOwnProperty(r))&&t.call(n,e[r],r,e);else if(R(e)||S(e)){var s=typeof e!="object";for(r=0,i=e.length;r<i;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==x)e.forEach(t,n,e);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);return e}function T(e){return Object.keys(e).sort()}function N(e,t,n){var r=T(e);for(var i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function C(e){return function(t,n){e(n,t)}}function k(){return++E}function L(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function A(e){var t=e.$$hashKey;for(var n=1,r=arguments.length;n<r;n++){var i=arguments[n];if(i){var s=Object.keys(i);for(var o=0,u=s.length;o<u;o++){var a=s[o];e[a]=i[a]}}}return L(e,t),e}function O(e){return parseInt(e,10)}function M(e,t){return A(Object.create(e),t)}function _(){}function D(e){return e}function P(e){return function(){return e}}function H(e){return typeof e=="undefined"}function B(e){return typeof e!="undefined"}function j(e){return e!==null&&typeof e=="object"}function F(e){return typeof e=="string"}function I(e){return typeof e=="number"}function q(e){return g.call(e)==="[object Date]"}function U(e){return typeof e=="function"}function z(e){return g.call(e)==="[object RegExp]"}function W(e){return e&&e.window===e}function X(e){return e&&e.$evalAsync&&e.$watch}function V(e){return g.call(e)==="[object File]"}function $(e){return g.call(e)==="[object FormData]"}function J(e){return g.call(e)==="[object Blob]"}function K(e){return typeof e=="boolean"}function Q(e){return e&&U(e.then)}function Z(e){return!!e&&!!(e.nodeName||e.prop&&e.attr&&e.find)}function et(e){var t={},n=e.split(","),r;for(r=0;r<n.length;r++)t[n[r]]=!0;return t}function tt(e){return o(e.nodeName||e[0]&&e[0].nodeName)}function nt(e,t){return Array.prototype.indexOf.call(e,t)!=-1}function rt(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function it(e,t,n,r){if(W(e)||X(e))throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(!t){t=e;if(e)if(R(e))t=it(e,[],n,r);else if(q(e))t=new Date(e.getTime());else if(z(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(j(e)){var i=Object.create(Object.getPrototypeOf(e));t=it(e,i,n,r)}}else{if(e===t)throw y("cpi","Can't copy! Source and destination are identical.");n=n||[],r=r||[];if(j(e)){var s=n.indexOf(e);if(s!==-1)return r[s];n.push(e),r.push(t)}var o;if(R(e)){t.length=0;for(var u=0;u<e.length;u++)o=it(e[u],null,n,r),j(e[u])&&(n.push(e[u]),r.push(o)),t.push(o)}else{var a=t.$$hashKey;R(t)?t.length=0:x(t,function(e,n){delete t[n]});for(var f in e)e.hasOwnProperty(f)&&(o=it(e[f],null,n,r),j(e[f])&&(n.push(e[f]),r.push(o)),t[f]=o);L(t,a)}}return t}function st(e,t){if(R(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(j(e)){t=t||{};for(var i in e)if(i.charAt(0)!=="$"||i.charAt(1)!=="$")t[i]=e[i]}return t||e}function ot(e,t){if(e===t)return!0;if(e===null||t===null)return!1;if(e!==e&&t!==t)return!0;var r=typeof e,i=typeof t,s,o,u;if(r==i&&r=="object"){if(!R(e)){if(q(e))return q(t)?ot(e.getTime(),t.getTime()):!1;if(z(e))return z(t)?e.toString()==t.toString():!1;if(X(e)||X(t)||W(e)||W(t)||R(t)||q(t)||z(t))return!1;u={};for(o in e){if(o.charAt(0)==="$"||U(e[o]))continue;if(!ot(e[o],t[o]))return!1;u[o]=!0}for(o in t)if(!u.hasOwnProperty(o)&&o.charAt(0)!=="$"&&t[o]!==n&&!U(t[o]))return!1;return!0}if(!R(t))return!1;if((s=e.length)==t.length){for(o=0;o<s;o++)if(!ot(e[o],t[o]))return!1;return!0}}return!1}function at(e,t,n){return e.concat(d.call(t,n))}function ft(e,t){return d.call(e,t||0)}function lt(e,t){var n=arguments.length>2?ft(arguments,2):[];return!U(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,at(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function ct(e,r){var i=r;return typeof e=="string"&&e.charAt(0)==="$"&&e.charAt(1)==="$"?i=n:W(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":X(r)&&(i="$SCOPE"),i}function ht(e,t){return typeof e=="undefined"?n:(I(t)||(t=t?2:null),JSON.stringify(e,ct,t))}function pt(e){return F(e)?JSON.parse(e):e}function dt(e){e=h(e).clone();try{e.empty()}catch(t){}var n=h("<div>").append(e).html();try{return e[0].nodeType===Ft?o(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+o(t)})}catch(t){return o(n)}}function vt(e){try{return decodeURIComponent(e)}catch(t){}}function mt(e){var t={},n,r;return x((e||"").split("&"),function(e){if(e){n=e.replace(/\+/g,"%20").split("="),r=vt(n[0]);if(B(r)){var i=B(n[1])?vt(n[1]):!0;u.call(t,r)?R(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i}}}),t}function gt(e){var t=[];return x(e,function(e,n){R(e)?x(e,function(e){t.push(bt(n,!0)+(e===!0?"":"="+bt(e,!0)))}):t.push(bt(n,!0)+(e===!0?"":"="+bt(e,!0)))}),t.length?t.join("&"):""}function yt(e){return bt(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function bt(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function Et(e,t){var n,r,i=wt.length;e=h(e);for(r=0;r<i;++r){n=wt[r]+t;if(F(n=e.attr(n)))return n}return null}function St(e,t){var n,r,i={};x(wt,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),x(wt,function(t){var i=t+"app",s;!n&&(s=e.querySelector("["+i.replace(":","\\:")+"]"))&&(n=s,r=s.getAttribute(i))}),n&&(i.strictDi=Et(n,"strict-di")!==null,t(n,r?[r]:[],i))}function xt(n,r,i){j(i)||(i={});var s={strictDi:!1};i=A(s,i);var o=function(){n=h(n);if(n.injector()){var e=n[0]===t?"document":dt(n);throw y("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var s=Vn(r,i.strictDi);return s.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,n,r,i){t.$apply(function(){n.data("$injector",i),r(n)(t)})}]),s},u=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;e&&u.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(u,""));if(e&&!a.test(e.name))return o();e.name=e.name.replace(a,""),b.resumeBootstrap=function(e){return x(e,function(e){r.push(e)}),o()},U(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Tt(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Nt(e){var t=b.element(e).injector();if(!t)throw y("test","no injector found for element argument to getTestability");return t.get("$$testability")}function kt(e,t){return t=t||"_",e.replace(Ct,function(e,n){return(n?t:"")+e.toLowerCase()})}function Ot(){var t;if(Lt)return;p=e.jQuery,p&&p.fn.on?(h=p,A(p.fn,{scope:An.scope,isolateScope:An.isolateScope,controller:An.controller,injector:An.injector,inheritedData:An.inheritedData}),t=p.cleanData,p.cleanData=function(e){var n;if(!At)for(var r=0,i;(i=e[r])!=null;r++)n=p._data(i,"events"),n&&n.$destroy&&p(i).triggerHandler("$destroy");else At=!1;t(e)}):h=pn,b.element=h,Lt=!0}function Mt(e,t,n){if(!e)throw y("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function _t(e,t,n){return n&&R(e)&&(e=e[e.length-1]),Mt(U(e),t,"not a function, got "+(e&&typeof e=="object"?e.constructor.name||"Object":typeof e)),e}function Dt(e,t){if(e==="hasOwnProperty")throw y("badname","hasOwnProperty is not a valid {0} name",t)}function Pt(e,t,n){if(!t)return e;var r=t.split("."),i,s=e,o=r.length;for(var u=0;u<o;u++)i=r[u],e&&(e=(s=e)[i]);return!n&&U(e)?lt(s,e):e}function Ht(e){var t=e[0],n=e[e.length-1],r=[t];do{t=t.nextSibling;if(!t)break;r.push(t)}while(t!==n);return h(r)}function Bt(){return Object.create(null)}function Ut(e){function i(e,t,n){return e[t]||(e[t]=n())}var t=r("$injector"),n=r("ng"),s=i(e,"angular",Object);return s.$$minErr=s.$$minErr||r,i(s,"module",function(){var e={};return function(s,o,u){var a=function(e,t){if(e==="hasOwnProperty")throw n("badname","hasOwnProperty is not a valid {0} name",t)};return a(s,"module"),o&&e.hasOwnProperty(s)&&(e[s]=null),i(e,s,function(){function f(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),a}}if(!o)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",s);var e=[],n=[],r=[],i=f("$injector","invoke","push",n),a={_invokeQueue:e,_configBlocks:n,_runBlocks:r,requires:o,name:s,provider:f("$provide","provider"),factory:f("$provide","factory"),service:f("$provide","service"),value:f("$provide","value"),constant:f("$provide","constant","unshift"),animation:f("$animateProvider","register"),filter:f("$filterProvider","register"),controller:f("$controllerProvider","register"),directive:f("$compileProvider","directive"),config:i,run:function(e){return r.push(e),this}};return u&&i(u),a})}})}function zt(e){var t=[];return JSON.stringify(e,function(e,n){n=ct(e,n);if(j(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function Wt(e){return typeof e=="function"?e.toString().replace(/ \{[\s\S]*$/,""):typeof e=="undefined"?"undefined":typeof e!="string"?zt(e):e}function Vt(t){A(t,{bootstrap:xt,copy:it,extend:A,equals:ot,element:h,forEach:x,injector:Vn,noop:_,bind:lt,toJson:ht,fromJson:pt,identity:D,isUndefined:H,isDefined:B,isString:F,isFunction:U,isObject:j,isNumber:I,isElement:Z,isArray:R,version:Xt,isDate:q,lowercase:o,uppercase:a,callbacks:{counter:0},getTestability:Nt,$$minErr:r,$$csp:ut,reloadWithDebugInfo:Tt}),w=Ut(e);try{w("ngLocale")}catch(n){w("ngLocale",[]).provider("$locale",Mr)}w("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Ni}),t.provider("$compile",nr).directive({a:vs,input:$s,textarea:$s,form:Ss,script:qo,select:zo,style:Xo,option:Wo,ngBind:Qs,ngBindHtml:Ys,ngBindTemplate:Gs,ngClass:to,ngClassEven:ro,ngClassOdd:no,ngCloak:io,ngController:so,ngForm:xs,ngHide:Po,ngIf:ao,ngInclude:fo,ngInit:co,ngNonBindable:Lo,ngPluralize:Ao,ngRepeat:Oo,ngShow:Do,ngStyle:Ho,ngSwitch:Bo,ngSwitchWhen:jo,ngSwitchDefault:Fo,ngOptions:Uo,ngTransclude:Io,ngModel:xo,ngList:ho,ngChange:Zs,pattern:$o,ngPattern:$o,required:Vo,ngRequired:Vo,minlength:Ko,ngMinlength:Ko,maxlength:Jo,ngMaxlength:Jo,ngValue:Ks,ngModelOptions:No}).directive({ngInclude:lo}).directive(ms).directive(oo),t.provider({$anchorScroll:$n,$animate:Kn,$browser:Yn,$cacheFactory:Zn,$controller:lr,$document:cr,$exceptionHandler:hr,$filter:Ri,$interpolate:Ar,$interval:Or,$http:Tr,$httpBackend:Cr,$location:Kr,$log:Qr,$parse:bi,$rootScope:Ti,$q:wi,$$q:Ei,$sce:Mi,$sceDelegate:Oi,$sniffer:_i,$templateCache:er,$templateRequest:Di,$$testability:Pi,$timeout:Hi,$window:qi,$$rAF:xi,$$asyncCallback:Qn,$$jqLite:Bn})}])}function Gt(){return++Jt}function nn(e){return e.replace(Yt,function(e,t,n,r){return r?n.toUpperCase():n}).replace(Zt,"Moz$1")}function fn(e){return!sn.test(e)}function ln(e){var t=e.nodeType;return t===jt||!t||t===qt}function cn(e,t){var n,r,i,s=t.createDocumentFragment(),o=[],u;if(fn(e))o.push(t.createTextNode(e));else{n=n||s.appendChild(t.createElement("div")),r=(on.exec(e)||["",""])[1].toLowerCase(),i=an[r]||an._default,n.innerHTML=i[1]+e.replace(un,"<$1></$2>")+i[2],u=i[0];while(u--)n=n.lastChild;o=at(o,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",x(o,function(e){s.appendChild(e)}),s}function hn(e,n){n=n||t;var r;return(r=rn.exec(e))?[n.createElement(r[1])]:(r=cn(e,n))?r.childNodes:[]}function pn(e){if(e instanceof pn)return e;var t;F(e)&&(e=G(e),t=!0);if(!(this instanceof pn)){if(t&&e.charAt(0)!="<")throw tn("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new pn(e)}t?xn(this,hn(e)):xn(this,e)}function dn(e){return e.cloneNode(!0)}function vn(e,t){t||gn(e);if(e.querySelectorAll){var n=e.querySelectorAll("*");for(var r=0,i=n.length;r<i;r++)gn(n[r])}}function mn(e,t,n,r){if(B(r))throw tn("offargs","jqLite#off() does not support the `selector` argument");var i=yn(e),s=i&&i.events,o=i&&i.handle;if(!o)return;if(!t)for(t in s)t!=="$destroy"&&Qt(e,t,o),delete s[t];else x(t.split(" "),function(t){if(B(n)){var r=s[t];rt(r||[],n);if(r&&r.length>0)return}Qt(e,t,o),delete s[t]})}function gn(e,t){var r=e.ng339,i=r&&$t[r];if(i){if(t){delete i.data[t];return}i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),mn(e)),delete $t[r],e.ng339=n}}function yn(e,t){var r=e.ng339,i=r&&$t[r];return t&&!i&&(e.ng339=r=Gt(),i=$t[r]={events:{},data:{},handle:n}),i}function bn(e,t,n){if(ln(e)){var r=B(n),i=!r&&t&&!j(t),s=!t,o=yn(e,!i),u=o&&o.data;if(r)u[t]=n;else{if(s)return u;if(i)return u&&u[t];A(u,t)}}}function wn(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function En(e,t){t&&e.setAttribute&&x(t.split(" "),function(t){e.setAttribute("class",G((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+G(t)+" "," ")))})}function Sn(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");x(t.split(" "),function(e){e=G(e),n.indexOf(" "+e+" ")===-1&&(n+=e+" ")}),e.setAttribute("class",G(n))}}function xn(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if(typeof n=="number"&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Tn(e,t){return Nn(e,"$"+(t||"ngController")+"Controller")}function Nn(e,t,r){e.nodeType==qt&&(e=e.documentElement);var i=R(t)?t:[t];while(e){for(var s=0,o=i.length;s<o;s++)if((r=h.data(e,i[s]))!==n)return r;e=e.parentNode||e.nodeType===Rt&&e.host}}function Cn(e){vn(e,!0);while(e.firstChild)e.removeChild(e.firstChild)}function kn(e,t){t||vn(e);var n=e.parentNode;n&&n.removeChild(e)}function Ln(t,n){n=n||e,n.document.readyState==="complete"?n.setTimeout(t):h(n).on("load",t)}function Dn(e,t){var n=On[t.toLowerCase()];return n&&Mn[tt(e)]&&n}function Pn(e,t){var n=e.nodeName;return(n==="INPUT"||n==="TEXTAREA")&&_n[t]}function Hn(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],s=i?i.length:0;if(!s)return;if(H(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},s>1&&(i=st(i));for(var u=0;u<s;u++)n.isImmediatePropagationStopped()||i[u].call(e,n)};return n.elem=e,n}function Bn(){this.$get=function(){return A(pn,{hasClass:function(e,t){return e.attr&&(e=e[0]),wn(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Sn(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),En(e,t)}})}}function jn(e,t){var n=e&&e.$$hashKey;if(n)return typeof n=="function"&&(n=e.$$hashKey()),n;var r=typeof e;return r=="function"||r=="object"&&e!==null?n=e.$$hashKey=r+":"+(t||k)():n=r+":"+e,n}function Fn(e,t){if(t){var n=0;this.nextUid=function(){return++n}}x(e,this.put,this)}function Wn(e){var t=e.toString().replace(Un,""),n=t.match(In);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Xn(e,t,n){var r,i,s,o;if(typeof e=="function"){if(!(r=e.$inject)){r=[];if(e.length){if(t){if(!F(n)||!n)n=e.name||Wn(e);throw zn("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n)}i=e.toString().replace(Un,""),s=i.match(In),x(s[1].split(qn),function(e){e.replace(Rn,function(e,t,n){r.push(n)})})}e.$inject=r}}else R(e)?(o=e.length-1,_t(e[o],"fn"),r=e.slice(0,o)):_t(e,"fn",!0);return r}function Vn(e,t){function c(e){return function(t,n){if(!j(t))return e(t,n);x(t,C(e))}}function h(e,t){Dt(e,"service");if(U(t)||R(t))t=a.instantiate(t);if(!t.$get)throw zn("pget","Provider '{0}' must define $get factory method.",e);return u[e+i]=t}function p(e,t){return function(){var r=l.invoke(t,this);if(H(r))throw zn("undef","Provider '{0}' must return a value from $get factory method.",e);return r}}function d(e,t,n){return h(e,{$get:n!==!1?p(e,t):t})}function v(e,t){return d(e,["$injector",function(e){return e.instantiate(t)}])}function m(e,t){return d(e,P(t),!1)}function g(e,t){Dt(e,"constant"),u[e]=t,f[e]=t}function y(e,t){var n=a.get(e+i),r=n.$get;n.$get=function(){var e=l.invoke(r,n);return l.invoke(t,null,{$delegate:e})}}function E(e){var t=[],n;return x(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=a.get(r[0]);i[r[1]].apply(i,r[2])}}if(o.get(e))return;o.put(e,!0);try{F(e)?(n=w(e),t=t.concat(E(n.requires)).concat(n._runBlocks),r(n._invokeQueue),r(n._configBlocks)):U(e)?t.push(a.invoke(e)):R(e)?t.push(a.invoke(e)):_t(e,"module")}catch(i){throw R(e)&&(e=e[e.length-1]),i.message&&i.stack&&i.stack.indexOf(i.message)==-1&&(i=i.message+"\n"+i.stack),zn("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}),t}function S(e,n){function o(t,i){if(e.hasOwnProperty(t)){if(e[t]===r)throw zn("cdep","Circular dependency found: {0}",t+" <- "+s.join(" <- "));return e[t]}try{return s.unshift(t),e[t]=r,e[t]=n(t,i)}catch(o){throw e[t]===r&&delete e[t],o}finally{s.shift()}}function a(e,n,r,i){typeof r=="string"&&(i=r,r=null);var s=[],u=Vn.$$annotate(e,t,i),a,f,l;for(f=0,a=u.length;f<a;f++){l=u[f];if(typeof l!="string")throw zn("itkn","Incorrect injection token! Expected service name as string, got {0}",l);s.push(r&&r.hasOwnProperty(l)?r[l]:o(l,i))}return R(e)&&(e=e[a]),e.apply(n,s)}function f(e,t,n){var r=Object.create((R(e)?e[e.length-1]:e).prototype||null),i=a(e,r,t,n);return j(i)||U(i)?i:r}return{invoke:a,instantiate:f,get:o,annotate:Vn.$$annotate,has:function(t){return u.hasOwnProperty(t+i)||e.hasOwnProperty(t)}}}t=t===!0;var r={},i="Provider",s=[],o=new Fn([],!0),u={$provide:{provider:c(h),factory:c(d),service:c(v),value:c(m),constant:c(g),decorator:y}},a=u.$injector=S(u,function(e,t){throw b.isString(t)&&s.push(t),zn("unpr","Unknown provider: {0}",s.join(" <- "))}),f={},l=f.$injector=S(f,function(e,t){var r=a.get(e+i,t);return l.invoke(r.$get,r,n,e)});return x(E(e),function(e){l.invoke(e||_)}),l}function $n(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function s(e){var t=null;return Array.prototype.some.call(e,function(e){if(tt(e)==="a")return t=e,!0}),t}function o(){var e=a.yOffset;if(U(e))e=e();else if(Z(e)){var n=e[0],r=t.getComputedStyle(n);r.position!=="fixed"?e=0:e=n.getBoundingClientRect().bottom}else I(e)||(e=0);return e}function u(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function a(){var e=n.hash(),t;e?(t=i.getElementById(e))?u(t):(t=s(i.getElementsByName(e)))?u(t):e==="top"&&u(null):u(null)}var i=t.document;return e&&r.$watch(function(){return n.hash()},function(t,n){if(t===n&&t==="")return;Ln(function(){r.$evalAsync(a)})}),a}]}function Qn(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Gn(e,t,r,i){function v(e){try{e.apply(null,ft(arguments,1))}finally{p--;if(p===0)while(d.length)try{d.pop()()}catch(t){r.error(t)}}}function m(e){var t=e.indexOf("#");return t===-1?"":e.substr(t+1)}function b(e,t){(function n(){x(g,function(e){e()}),y=t(n,e)})()}function L(){M(),D()}function A(){try{return a.state}catch(e){}}function M(){w=A(),w=H(w)?null:w,ot(w,O)&&(w=O),O=w}function D(){if(S===s.url()&&E===w)return;S=s.url(),E=w,x(C,function(e){e(s.url(),w)})}function I(e){try{return decodeURIComponent(e)}catch(t){return e}}var s=this,o=t[0],u=e.location,a=e.history,f=e.setTimeout,l=e.clearTimeout,c={};s.isMock=!1;var p=0,d=[];s.$$completeOutstandingRequest=v,s.$$incOutstandingRequestCount=function(){p++},s.notifyWhenNoOutstandingRequests=function(e){x(g,function(e){e()}),p===0?e():d.push(e)};var g=[],y;s.addPollFn=function(e){return H(y)&&b(100,f),g.push(e),e};var w,E,S=u.href,T=t.find("base"),N=null;M(),E=w,s.url=function(t,n,r){H(r)&&(r=null),u!==e.location&&(u=e.location),a!==e.history&&(a=e.history);if(t){var o=E===r;if(S===t&&(!i.history||o))return s;var f=S&&Ir(S)===Ir(t);return S=t,E=r,i.history&&(!f||!o)?(a[n?"replaceState":"pushState"](r,"",t),M(),E=w):(f||(N=t),n?u.replace(t):f?u.hash=m(t):u.href=t),s}return N||u.href.replace(/%27/g,"'")},s.state=function(){return w};var C=[],k=!1,O=null;s.onUrlChange=function(t){return k||(i.history&&h(e).on("popstate",L),h(e).on("hashchange",L),k=!0),C.push(t),t},s.$$checkUrlChange=D,s.baseHref=function(){var e=T.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var P={},B="",j=s.baseHref();s.cookies=function(e,t){var i,s,u,a,f;if(!e){if(o.cookie!==B){B=o.cookie,s=B.split("; "),P={};for(a=0;a<s.length;a++)u=s[a],f=u.indexOf("="),f>0&&(e=I(u.substring(0,f)),P[e]===n&&(P[e]=I(u.substring(f+1))))}return P}t===n?o.cookie=encodeURIComponent(e)+"=;path="+j+";expires=Thu, 01 Jan 1970 00:00:00 GMT":F(t)&&(i=(o.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+j).length+1,i>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},s.defer=function(e,t){var n;return p++,n=f(function(){delete c[n],v(e)},t||0),c[n]=!0,n},s.defer.cancel=function(e){return c[e]?(delete c[e],l(e),v(_),!0):!1}}function Yn(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Gn(e,r,t,n)}]}function Zn(){this.$get=function(){function t(t,n){function c(e){e!=f&&(l?l==e&&(l=e.n):l=e,h(e.n,e.p),h(e,f),f=e,f.n=null)}function h(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(t in e)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var i=0,s=A({},n,{id:t}),o={},u=n&&n.capacity||Number.MAX_VALUE,a={},f=null,l=null;return e[t]={put:function(e,t){if(u<Number.MAX_VALUE){var n=a[e]||(a[e]={key:e});c(n)}if(H(t))return;return e in o||i++,o[e]=t,i>u&&this.remove(l.key),t},get:function(e){if(u<Number.MAX_VALUE){var t=a[e];if(!t)return;c(t)}return o[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=a[e];if(!t)return;t==f&&(f=t.p),t==l&&(l=t.n),h(t.n,t.p),delete a[e]}delete o[e],i--},removeAll:function(){o={},i=0,a={},f=l=null},destroy:function(){o=null,s=null,a=null,delete e[t]},info:function(){return A({},s,{size:i})}}}var e={};return t.info=function(){var t={};return x(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function er(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function nr(e,r){function d(e,t){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return x(e,function(e,i){var s=e.match(n);if(!s)throw tr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,i,e);r[i]={mode:s[1][0],collection:s[2]==="*",optional:s[3]==="?",attrName:s[4]||i}}),r}var i={},s="Directive",u=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,a=/(([\w\-]+)(?:\:([^;]+))?;?)/,f=et("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,c=/^(on[a-z]+|formaction)$/;this.directive=function m(t,n){return Dt(t,"directive"),F(t)?(Mt(n,"directiveFactory"),i.hasOwnProperty(t)||(i[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var r=[];return x(i[t],function(i,s){try{var o=e.invoke(i);U(o)?o={compile:P(o)}:!o.compile&&o.link&&(o.compile=P(o.link)),o.priority=o.priority||0,o.index=s,o.name=o.name||t,o.require=o.require||o.controller&&o.name,o.restrict=o.restrict||"EA",j(o.scope)&&(o.$$isolateBindings=d(o.scope,o.name)),r.push(o)}catch(u){n(u)}}),r}])),i[t].push(n)):x(t,C(m)),this},this.aHrefSanitizationWhitelist=function(e){return B(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return B(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var v=!0;this.debugInfoEnabled=function(e){return B(e)?(v=e,this):v},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,d,m,g,y,b,w,E,S,T){function C(e,t){try{e.addClass(t)}catch(n){}}function H(e,t,n,r,i){e instanceof h||(e=h(e)),x(e,function(t,n){t.nodeType==Ft&&t.nodeValue.match(/\S+/)&&(e[n]=h(t).wrap("<span></span>").parent()[0])});var s=I(e,t,e,n,r,i);H.$$addScopeClass(e);var o=null;return function(n,r,i){Mt(n,"scope"),i=i||{};var u=i.parentBoundTranscludeFn,a=i.transcludeControllers,f=i.futureParentElement;u&&u.$$boundTransclude&&(u=u.$$boundTransclude),o||(o=B(f));var l;o!=="html"?l=h(st(o,h("<div>").append(e).html())):r?l=An.clone.call(e):l=e;if(a)for(var c in a)l.data("$"+c+"Controller",a[c].instance);return H.$$addScopeInfo(l,n),r&&r(l,n),s&&s(n,l,l,u),l}}function B(e){var t=e&&e[0];return t?tt(t)!=="foreignobject"&&t.toString().match(/SVG/)?"svg":"html":"html"}function I(e,t,r,i,s,o){function g(e,r,i,s){var o,a,f,l,c,p,d,m,g;if(v){var y=r.length;g=new Array(y);for(c=0;c<u.length;c+=3)d=u[c],g[d]=r[d]}else g=r;for(c=0,p=u.length;c<p;)f=g[u[c++]],o=u[c++],a=u[c++],o?(o.scope?(l=e.$new(),H.$$addScopeInfo(h(f),l)):l=e,o.transcludeOnThisElement?m=q(e,o.transclude,s,o.elementTranscludeOnThisElement):!o.templateOnThisElement&&s?m=s:!s&&t?m=q(e,t):m=null,o(a,l,f,i,m)):a&&a(e,f.childNodes,n,s)}var u=[],a,f,l,c,p,d,v;for(var m=0;m<e.length;m++){a=new N,f=z(e[m],[],a,m===0?i:n,s),l=f.length?$(f,e[m],a,t,r,null,[],[],o):null,l&&l.scope&&H.$$addScopeClass(a.$$element),p=l&&l.terminal||!(c=e[m].childNodes)||!c.length?null:I(c,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t);if(l||p)u.push(m,l,p),d=!0,v=v||l;o=null}return d?g:null}function q(e,t,n,r){var i=function(r,i,s,o,u){return r||(r=e.$new(!1,u),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:s,futureParentElement:o})};return i}function z(e,t,n,r,i){var s=e.nodeType,o=n.$attr,f,l;switch(s){case jt:K(t,ir(tt(e)),"E",r,i);for(var c,h,p,d,v,m,g=e.attributes,y=0,b=g&&g.length;y<b;y++){var w=!1,E=!1;c=g[y],h=c.name,v=G(c.value),d=ir(h);if(m=P.test(d))h=h.replace(rr,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()});var S=d.replace(/(Start|End)$/,"");Q(S)&&d===S+"Start"&&(w=h,E=h.substr(0,h.length-5)+"end",h=h.substr(0,h.length-6)),p=ir(h.toLowerCase()),o[p]=h;if(m||!n.hasOwnProperty(p))n[p]=v,Dn(e,p)&&(n[p]=!0);at(e,t,v,p,m),K(t,p,"A",r,i,w,E)}l=e.className,j(l)&&(l=l.animVal);if(F(l)&&l!=="")while(f=a.exec(l))p=ir(f[2]),K(t,p,"C",r,i)&&(n[p]=G(f[3])),l=l.substr(f.index+f[0].length);break;case Ft:it(t,e.nodeValue);break;case It:try{f=u.exec(e.nodeValue),f&&(p=ir(f[1]),K(t,p,"M",r,i)&&(n[p]=G(f[2])))}catch(x){}}return t.sort(et),t}function W(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw tr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==jt&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return h(r)}function V(e,t,n){return function(r,i,s,o,u){return i=W(i[0],t,n),e(r,i,s,o,u)}}function $(e,i,s,o,u,a,f,c,p){function at(e,t,n,r){if(e){n&&(e=V(e,n,r)),e.require=M.require,e.directiveName=_;if(E===M||M.$$isolateScope)e=ct(e,{isolateScope:!0});f.push(e)}if(t){n&&(t=V(t,n,r)),t.require=M.require,t.directiveName=_;if(E===M||M.$$isolateScope)t=ct(t,{isolateScope:!0});c.push(t)}}function pt(e,t,n,r){var i,s="data",o=!1,u=n,a;if(F(t)){a=t.match(l),t=t.substring(a[0].length),a[3]&&(a[1]?a[3]=null:a[1]=a[3]),a[1]==="^"?s="inheritedData":a[1]==="^^"&&(s="inheritedData",u=n.parent()),a[2]==="?"&&(o=!0),i=null,r&&s==="data"&&(i=r[t])&&(i=i.instance),i=i||u[s]("$"+t+"Controller");if(!i&&!o)throw tr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i||null}return R(t)&&(i=[],x(t,function(t){i.push(pt(e,t,n,r))})),i}function vt(e,t,o,u,a){function D(e,t,r){var i;return X(e)||(r=t,t=e,e=n),L&&(i=T),r||(r=L?k.parent():k),a(e,t,i,r,_)}var l,p,d,v,m,T,C,k,A;i===o?(A=s,k=s.$$element):(k=h(o),A=new N(k,s)),E&&(m=t.$new(!0)),a&&(C=D,C.$$boundTransclude=a),b&&(w={},T={},x(b,function(e){var n={$scope:e===E||e.$$isolateScope?m:t,$element:k,$attrs:A,$transclude:C},r;v=e.controller,v=="@"&&(v=A[e.name]),r=y(v,n,!0,e.controllerAs),T[e.name]=r,L||k.data("$"+e.name+"Controller",r.instance),w[e.name]=r}));if(E){H.$$addScopeInfo(k,m,!0,!S||S!==E&&S!==E.$$originalDirective),H.$$addScopeClass(k,!0);var O=w&&w[E.name],M=m;O&&O.identifier&&E.bindToController===!0&&(M=O.instance),x(m.$$isolateBindings=E.$$isolateBindings,function(e,n){var i=e.attrName,s=e.optional,o=e.mode,u,a,f,l;switch(o){case"@":A.$observe(i,function(e){M[n]=e}),A.$$observers[i].$$scope=t,A[i]&&(M[n]=r(A[i])(t));break;case"=":if(s&&!A[i])return;a=g(A[i]),a.literal?l=ot:l=function(e,t){return e===t||e!==e&&t!==t},f=a.assign||function(){throw u=M[n]=a(t),tr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",A[i],E.name)},u=M[n]=a(t);var c=function(r){return l(r,M[n])||(l(r,u)?f(t,r=M[n]):M[n]=r),u=r};c.$stateful=!0;var h;e.collection?h=t.$watchCollection(A[i],c):h=t.$watch(g(A[i],c),null,a.literal),m.$on("$destroy",h);break;case"&":a=g(A[i]),M[n]=function(e){return a(t,e)}}})}w&&(x(w,function(e){e()}),w=null);for(l=0,p=f.length;l<p;l++)d=f[l],ht(d,d.isolateScope?m:t,k,A,d.require&&pt(d.directiveName,d.require,k,T),C);var _=t;E&&(E.template||E.templateUrl===null)&&(_=m),e&&e(_,o.childNodes,n,a);for(l=c.length-1;l>=0;l--)d=c[l],ht(d,d.isolateScope?m:t,k,A,d.require&&pt(d.directiveName,d.require,k,T),C)}p=p||{};var v=-Number.MAX_VALUE,m,b=p.controllerDirectives,w,E=p.newIsolateScopeDirective,S=p.templateDirective,T=p.nonTlbTranscludeDirective,C=!1,k=!1,L=p.hasElementTranscludeDirective,A=s.$$element=h(i),M,_,D,P=a,B=o,I,q;for(var $=0,K=e.length;$<K;$++){M=e[$];var Q=M.$$start,et=M.$$end;Q&&(A=W(i,Q,et)),D=n;if(v>M.priority)break;if(q=M.scope)M.templateUrl||(j(q)?(nt("new/isolated scope",E||m,M,A),E=M):nt("new/isolated scope",E,M,A)),m=m||M;_=M.name,!M.templateUrl&&M.controller&&(q=M.controller,b=b||{},nt("'"+_+"' controller",b[_],M,A),b[_]=M);if(q=M.transclude)C=!0,M.$$tlb||(nt("transclusion",T,M,A),T=M),q=="element"?(L=!0,v=M.priority,D=A,A=s.$$element=h(t.createComment(" "+_+": "+s[_]+" ")),i=A[0],lt(u,ft(D),i),B=H(D,o,v,P&&P.name,{nonTlbTranscludeDirective:T})):(D=h(dn(i)).contents(),A.empty(),B=H(D,o));if(M.template){k=!0,nt("template",S,M,A),S=M,q=U(M.template)?M.template(A,s):M.template,q=O(q);if(M.replace){P=M,fn(q)?D=[]:D=ar(st(M.templateNamespace,G(q))),i=D[0];if(D.length!=1||i.nodeType!==jt)throw tr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",_,"");lt(u,A,i);var tt={$attr:{}},rt=z(i,[],tt),it=e.splice($+1,e.length-($+1));E&&J(rt),e=e.concat(rt).concat(it),Y(s,tt),K=e.length}else A.html(q)}if(M.templateUrl)k=!0,nt("template",S,M,A),S=M,M.replace&&(P=M),vt=Z(e.splice($,e.length-$),A,s,u,C&&B,f,c,{controllerDirectives:b,newIsolateScopeDirective:E,templateDirective:S,nonTlbTranscludeDirective:T}),K=e.length;else if(M.compile)try{I=M.compile(A,s,B),U(I)?at(null,I,Q,et):I&&at(I.pre,I.post,Q,et)}catch(ut){d(ut,dt(A))}M.terminal&&(vt.terminal=!0,v=Math.max(v,M.priority))}return vt.scope=m&&m.scope===!0,vt.transcludeOnThisElement=C,vt.elementTranscludeOnThisElement=L,vt.templateOnThisElement=k,vt.transclude=B,p.hasElementTranscludeDirective=L,vt}function J(e){for(var t=0,n=e.length;t<n;t++)e[t]=M(e[t],{$$isolateScope:!0})}function K(t,r,o,u,a,f,l){if(r===a)return null;var c=null;if(i.hasOwnProperty(r))for(var h,p=e.get(r+s),v=0,m=p.length;v<m;v++)try{h=p[v],(u===n||u>h.priority)&&h.restrict.indexOf(o)!=-1&&(f&&(h=M(h,{$$start:f,$$end:l})),t.push(h),c=h)}catch(g){d(g)}return c}function Q(t){if(i.hasOwnProperty(t))for(var n,r=e.get(t+s),o=0,u=r.length;o<u;o++){n=r[o];if(n.multiElement)return!0}return!1}function Y(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;x(e,function(r,i){i.charAt(0)!="$"&&(t[i]&&t[i]!==r&&(r+=(i==="style"?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),x(t,function(t,s){s=="class"?(C(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):s=="style"?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):s.charAt(0)!="$"&&!e.hasOwnProperty(s)&&(e[s]=t,r[s]=n[s])})}function Z(e,t,n,r,i,s,o,u){var a=[],f,l,c=t[0],p=e.shift(),d=M(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),v=U(p.templateUrl)?p.templateUrl(t,n):p.templateUrl,g=p.templateNamespace;return t.empty(),m(E.getTrustedResourceUrl(v)).then(function(m){var y,b,w,E;m=O(m);if(p.replace){fn(m)?w=[]:w=ar(st(g,G(m))),y=w[0];if(w.length!=1||y.nodeType!==jt)throw tr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,v);b={$attr:{}},lt(r,t,y);var S=z(y,[],b);j(p.scope)&&J(S),e=S.concat(e),Y(n,b)}else y=c,t.html(m);e.unshift(d),f=$(e,y,n,i,t,p,s,o,u),x(r,function(e,n){e==y&&(r[n]=t[0])}),l=I(t[0].childNodes,i);while(a.length){var T=a.shift(),N=a.shift(),k=a.shift(),L=a.shift(),A=t[0];if(T.$$destroyed)continue;if(N!==c){var M=N.className;if(!u.hasElementTranscludeDirective||!p.replace)A=dn(y);lt(k,h(N),A),C(h(A),M)}f.transcludeOnThisElement?E=q(T,f.transclude,L):E=L,f(l,T,A,r,E)}a=null}),function(t,n,r,i,s){var o=s;if(n.$$destroyed)return;a?a.push(n,r,i,o):(f.transcludeOnThisElement&&(o=q(n,f.transclude,s)),f(l,n,r,i,o))}}function et(e,t){var n=t.priority-e.priority;return n!==0?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function nt(e,t,n,r){if(t)throw tr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,dt(r))}function it(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(t){var r=t.parent(),i=!!r.length;return i&&H.$$addBindingClass(r),function(t,r){var s=r.parent();i||H.$$addBindingClass(s),H.$$addBindingInfo(s,n.expressions),t.$watch(n,function(t){r[0].nodeValue=t})}}})}function st(e,n){e=o(e||"html");switch(e){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function ut(e,t){if(t=="srcdoc")return E.HTML;var n=tt(e);if(t=="xlinkHref"||n=="form"&&t=="action"||n!="img"&&(t=="src"||t=="ngSrc"))return E.RESOURCE_URL}function at(e,t,n,i,s){var o=ut(e,i);s=f[i]||s;var u=r(n,!0,o,s);if(!u)return;if(i==="multiple"&&tt(e)==="select")throw tr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",dt(e));t.push({priority:100,compile:function(){return{pre:function(t,a,f){var l=f.$$observers||(f.$$observers={});if(c.test(i))throw tr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var h=f[i];h!==n&&(u=h&&r(h,!0,o,s),n=h);if(!u)return;f[i]=u(t),(l[i]||(l[i]=[])).$$inter=!0,(f.$$observers&&f.$$observers[i].$$scope||t).$watch(u,function(t,n){i==="class"&&t!=n?f.$updateClass(t,n):f.$set(i,t)})}}}})}function lt(e,n,r){var i=n[0],s=n.length,o=i.parentNode,u,a;if(e)for(u=0,a=e.length;u<a;u++)if(e[u]==i){e[u++]=r;for(var f=u,l=f+s-1,c=e.length;f<c;f++,l++)l<c?e[f]=e[l]:delete e[f];e.length-=s-1,e.context===i&&(e.context=r);break}o&&o.replaceChild(r,i);var d=t.createDocumentFragment();d.appendChild(i),h(r).data(h(i).data()),p?(At=!0,p.cleanData([i])):delete h.cache[i[h.expando]];for(var v=1,m=n.length;v<m;v++){var g=n[v];h(g).remove(),d.appendChild(g),delete n[v]}n[0]=r,n.length=1}function ct(e,t){return A(function(){return e.apply(null,arguments)},e,t)}function ht(e,t,n,r,i,s){try{e(t,n,r,i,s)}catch(o){d(o,dt(n))}}var N=function(e,t){if(t){var n=Object.keys(t),r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r],this[s]=t[s]}else this.$attr={};this.$$element=e};N.prototype={$normalize:ir,$addClass:function(e){e&&e.length>0&&S.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&S.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=ur(e,t);n&&n.length&&S.addClass(this.$$element,n);var r=ur(t,e);r&&r.length&&S.removeClass(this.$$element,r)},$set:function(e,t,r,i){var s=this.$$element[0],o=Dn(s,e),u=Pn(s,e),a=e,f;o?(this.$$element.prop(e,t),i=o):u&&(this[u]=t,a=u),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e],i||(this.$attr[e]=i=kt(e,"-"))),f=tt(this.$$element);if(f==="a"&&e==="href"||f==="img"&&e==="src")this[e]=t=T(t,e==="src");else if(f==="img"&&e==="srcset"){var l="",c=G(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(c)?h:/(,)/,v=c.split(p),m=Math.floor(v.length/2);for(var g=0;g<m;g++){var y=g*2;l+=T(G(v[y]),!0),l+=" "+G(v[y+1])}var b=G(v[g*2]).split(/\s/);l+=T(G(b[0]),!0),b.length===2&&(l+=" "+G(b[1])),this[e]=t=l}r!==!1&&(t===null||t===n?this.$$element.removeAttr(i):this.$$element.attr(i,t));var w=this.$$observers;w&&x(w[a],function(e){try{e(t)}catch(n){d(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=Bt()),i=r[e]||(r[e]=[]);return i.push(t),b.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){rt(i,t)}}};var k=r.startSymbol(),L=r.endSymbol(),O=k=="{{"||L=="}}"?D:function(t){return t.replace(/\{\{/g,k).replace(/}}/g,L)},P=/^ngAttr[A-Z]/;return H.$$addBindingInfo=v?function(t,n){var r=t.data("$binding")||[];R(n)?r=r.concat(n):r.push(n),t.data("$binding",r)}:_,H.$$addBindingClass=v?function(t){C(t,"ng-binding")}:_,H.$$addScopeInfo=v?function(t,n,r,i){var s=r?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";t.data(s,n)}:_,H.$$addScopeClass=v?function(t,n){C(t,n?"ng-isolate-scope":"ng-scope")}:_,H}]}function ir(e){return nn(e.replace(rr,""))}function sr(e,t,n,r){}function or(e,t,n,r,i){}function ur(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var s=0;s<r.length;s++){var o=r[s];for(var u=0;u<i.length;u++)if(o==i[u])continue e;n+=(n.length>0?" ":"")+o}return n}function ar(e){e=h(e);var t=e.length;if(t<=1)return e;while(t--){var n=e[t];n.nodeType===It&&v.call(e,t,1)}return e}function lr(){var e={},t=!1,i=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){Dt(t,"controller"),j(t)?A(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(s,o){function u(e,t,n,i){if(!e||!j(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,a,f,l){var c,h,p,d;f=f===!0,l&&F(l)&&(d=l);if(F(r)){h=r.match(i);if(!h)throw fr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);p=h[1],d=d||h[3],r=e.hasOwnProperty(p)?e[p]:Pt(a.$scope,p,!0)||(t?Pt(o,p,!0):n),_t(r,p,!0)}if(f){var v=(R(r)?r[r.length-1]:r).prototype;return c=Object.create(v||null),d&&u(a,d,c,p||r.name),A(function(){return s.invoke(r,c,a,p),c},{instance:c,identifier:d})}return c=s.instantiate(r,a,p),d&&u(a,d,c,p||r.name),c}}]}function cr(){this.$get=["$window",function(e){return h(e.document)}]}function hr(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function yr(e,t){if(F(e)){var n=e.replace(gr,"").trim();if(n){var r=t("Content-Type");if(r&&r.indexOf(pr)===0||br(n))e=pt(n)}}return e}function br(e){var t=e.match(vr);return t&&mr[t[0]].test(e)}function wr(e){var t=Bt(),n,r,i;return e?(x(e.split("\n"),function(e){i=e.indexOf(":"),n=o(G(e.substr(0,i))),r=G(e.substr(i+1)),n&&(t[n]=t[n]?t[n]+", "+r:r)}),t):t}function Er(e){var t=j(e)?e:n;return function(n){t||(t=wr(e));if(n){var r=t[o(n)];return r===void 0&&(r=null),r}return t}}function Sr(e,t,n,r){return U(r)?r(e,t,n):(x(r,function(r){e=r(e,t,n)}),e)}function xr(e){return 200<=e&&e<300}function Tr(){var e=this.defaults={transformResponse:[yr],transformRequest:[function(e){return j(e)&&!V(e)&&!J(e)&&!$(e)?ht(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:st(dr),put:st(dr),patch:st(dr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return B(e)?(t=!!e,this):t};var i=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(s,u,f,l,c,h){function v(t){function p(e){var t=A({},e);return e.data?t.data=Sr(e.data,e.headers,e.status,i.transformResponse):t.data=e.data,xr(e.status)?t:c.reject(t)}function v(e){var t,n={};return x(e,function(e,r){U(e)?(t=e(),t!=null&&(n[r]=t)):n[r]=e}),n}function m(t){var n=e.headers,r=A({},t.headers),i,s,u;n=A({},n.common,n[o(t.method)]);e:for(i in n){s=o(i);for(u in r)if(o(u)===s)continue e;r[i]=n[i]}return v(r)}if(!b.isObject(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var i=A({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},t);i.headers=m(t),i.method=a(i.method);var s=function(t){var r=t.headers,i=Sr(t.data,Er(r),n,t.transformRequest);return H(i)&&x(r,function(e,t){o(t)==="content-type"&&delete r[t]}),H(t.withCredentials)&&!H(e.withCredentials)&&(t.withCredentials=e.withCredentials),y(t,i).then(p,p)},u=[s,n],f=c.when(i);x(d,function(e){(e.request||e.requestError)&&u.unshift(e.request,e.requestError),(e.response||e.responseError)&&u.push(e.response,e.responseError)});while(u.length){var l=u.shift(),h=u.shift();f=f.then(l,h)}return f.success=function(e){return f.then(function(t){e(t.data,t.status,t.headers,i)}),f},f.error=function(e){return f.then(null,function(t){e(t.data,t.status,t.headers,i)}),f},f}function m(e){x(arguments,function(e){v[e]=function(t,n){return v(A(n||{},{method:e,url:t}))}})}function g(e){x(arguments,function(e){v[e]=function(t,n,r){return v(A(r||{},{method:e,url:t,data:n}))}})}function y(r,i){function y(e,n,r,i){function s(){b(n,e,r,i)}f&&(xr(e)?f.put(m,[e,n,wr(r),i]):f.remove(m)),t?l.$applyAsync(s):(s(),l.$$phase||l.$apply())}function b(e,t,n,i){t=Math.max(t,0),(xr(t)?o.resolve:o.reject)({data:e,status:t,headers:Er(n),config:r,statusText:i})}function E(e){b(e.data,e.status,st(e.headers()),e.statusText)}function S(){var e=v.pendingRequests.indexOf(r);e!==-1&&v.pendingRequests.splice(e,1)}var o=c.defer(),a=o.promise,f,h,d=r.headers,m=w(r.url,r.params);v.pendingRequests.push(r),a.then(S,S),(r.cache||e.cache)&&r.cache!==!1&&(r.method==="GET"||r.method==="JSONP")&&(f=j(r.cache)?r.cache:j(e.cache)?e.cache:p),f&&(h=f.get(m),B(h)?Q(h)?h.then(E,E):R(h)?b(h[1],h[0],st(h[2]),h[3]):b(h,200,{},"OK"):f.put(m,a));if(H(h)){var g=Ii(r.url)?u.cookies()[r.xsrfCookieName||e.xsrfCookieName]:n;g&&(d[r.xsrfHeaderName||e.xsrfHeaderName]=g),s(r.method,m,i,y,d,r.timeout,r.withCredentials,r.responseType)}return a}function w(e,t){if(!t)return e;var n=[];return N(t,function(e,t){if(e===null||H(e))return;R(e)||(e=[e]),x(e,function(e){j(e)&&(q(e)?e=e.toISOString():e=ht(e)),n.push(bt(t)+"="+bt(e))})}),n.length>0&&(e+=(e.indexOf("?")==-1?"?":"&")+n.join("&")),e}var p=f("$http"),d=[];return x(i,function(e){d.unshift(F(e)?h.get(e):h.invoke(e))}),v.pendingRequests=[],m("get","delete","head","jsonp"),g("post","put","patch"),v.defaults=e,v}]}function Nr(){return new e.XMLHttpRequest}function Cr(){this.$get=["$browser","$window","$document",function(e,t,n){return kr(e,Nr,e.defer,t.angular.callbacks,n[0])}]}function kr(e,t,r,i,s){function u(e,t,n){var r=s.createElement("script"),o=null;return r.type="text/javascript",r.src=e,r.async=!0,o=function(e){Qt(r,"load",o),Qt(r,"error",o),s.body.removeChild(r),r=null;var u=-1,a="unknown";e&&(e.type==="load"&&!i[t].called&&(e={type:"error"}),a=e.type,u=e.type==="error"?404:200),n&&n(u,a)},Kt(r,"load",o),Kt(r,"error",o),s.body.appendChild(r),o}return function(s,a,f,l,c,h,p,d){function E(){m&&m(),g&&g.abort()}function S(t,i,s,o,u){w!==n&&r.cancel(w),m=g=null,t(i,s,o,u),e.$$completeOutstandingRequest(_)}e.$$incOutstandingRequestCount(),a=a||e.url();if(o(s)=="jsonp"){var v="_"+(i.counter++).toString(36);i[v]=function(e){i[v].data=e,i[v].called=!0};var m=u(a.replace("JSON_CALLBACK","angular.callbacks."+v),v,function(e,t){S(l,e,i[v].data,"",t),i[v]=_})}else{var g=t();g.open(s,a,!0),x(c,function(e,t){B(e)&&g.setRequestHeader(t,e)}),g.onload=function(){var t=g.statusText||"",n="response"in g?g.response:g.responseText,r=g.status===1223?204:g.status;r===0&&(r=n?200:Fi(a).protocol=="file"?404:0),S(l,r,n,g.getAllResponseHeaders(),t)};var y=function(){S(l,-1,null,null,"")};g.onerror=y,g.onabort=y,p&&(g.withCredentials=!0);if(d)try{g.responseType=d}catch(b){if(d!=="json")throw b}g.send(f||null)}if(h>0)var w=r(E,h);else Q(h)&&h.then(E)}}function Ar(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function f(e){return"\\\\\\"+e}function l(f,l,c,h){function N(n){return n.replace(u,e).replace(a,t)}function C(e){try{return e=x(e),h&&!B(e)?e:T(e)}catch(t){var n=Lr("interr","Can't interpolate: {0}\n{1}",f,t.toString());r(n)}}h=!!h;var p,d,v=0,m=[],g=[],y=f.length,b,w=[],E=[];while(v<y){if((p=f.indexOf(e,v))==-1||(d=f.indexOf(t,p+s))==-1){v!==y&&w.push(N(f.substring(v)));break}v!==p&&w.push(N(f.substring(v,p))),b=f.substring(p+s,d),m.push(b),g.push(n(b,C)),v=d+o,E.push(w.length),w.push("")}if(c&&w.length>1)throw Lr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!l||m.length){var S=function(e){for(var t=0,n=m.length;t<n;t++){if(h&&H(e[t]))return;w[E[t]]=e[t]}return w.join("")},x=function(e){return c?i.getTrusted(c,e):i.valueOf(e)},T=function(e){if(e==null)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=ht(e)}return e};return A(function(t){var n=0,i=m.length,s=new Array(i);try{for(;n<i;n++)s[n]=g[n](t);return S(s)}catch(o){var u=Lr("interr","Can't interpolate: {0}\n{1}",f,o.toString());r(u)}},{exp:f,expressions:m,$$watchDelegate:function(e,t,n){var r;return e.$watchGroup(g,function(i,s){var o=S(i);U(t)&&t.call(this,o,i!==s?r:o,e),r=o},n)}})}}var s=e.length,o=t.length,u=new RegExp(e.replace(/./g,f),"g"),a=new RegExp(t.replace(/./g,f),"g");return l.startSymbol=function(){return e},l.endSymbol=function(){return t},l}]}function Or(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function s(s,o,u,a){var f=t.setInterval,l=t.clearInterval,c=0,h=B(a)&&!a,p=(h?r:n).defer(),d=p.promise;return u=B(u)?u:0,d.then(null,null,s),d.$$intervalId=f(function(){p.notify(c++),u>0&&c>=u&&(p.resolve(c),l(d.$$intervalId),delete i[d.$$intervalId]),h||e.$apply()},o),i[d.$$intervalId]=p,d}var i={};return s.cancel=function(e){return e&&e.$$intervalId in i?(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],!0):!1},s}]}function Mr(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¬§",posSuf:"",negPre:"(¬§",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(e){return e===1?"one":"other"}}}}function Hr(e){var t=e.split("/"),n=t.length;while(n--)t[n]=yt(t[n]);return t.join("/")}function Br(e,t){var n=Fi(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=O(n.port)||Dr[n.protocol]||null}function jr(e,t){var n=e.charAt(0)!=="/";n&&(e="/"+e);var r=Fi(e);t.$$path=decodeURIComponent(n&&r.pathname.charAt(0)==="/"?r.pathname.substring(1):r.pathname),t.$$search=mt(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&t.$$path.charAt(0)!="/"&&(t.$$path="/"+t.$$path)}function Fr(e,t){if(t.indexOf(e)===0)return t.substr(e.length)}function Ir(e){var t=e.indexOf("#");return t==-1?e:e.substr(0,t)}function qr(e){return e.replace(/(#.+)|#$/,"$1")}function Rr(e){return e.substr(0,Ir(e).lastIndexOf("/")+1)}function Ur(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function zr(e,t){this.$$html5=!0,t=t||"";var r=Rr(e);Br(e,this),this.$$parse=function(e){var t=Fr(r,e);if(!F(t))throw Pr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,r);jr(t,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=gt(this.$$search),t=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Hr(this.$$path)+(e?"?"+e:"")+t,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,s){if(s&&s[0]==="#")return this.hash(s.slice(1)),!0;var o,u,a;return(o=Fr(e,i))!==n?(u=o,(o=Fr(t,o))!==n?a=r+(Fr("/",o)||o):a=e+u):(o=Fr(r,i))!==n?a=r+o:r==i+"/"&&(a=r),a&&this.$$parse(a),!!a}}function Wr(e,t){var n=Rr(e);Br(e,this),this.$$parse=function(r){function o(e,t,n){var r=/^\/[A-Z]:(\/.*)/,i;return t.indexOf(n)===0&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}var i=Fr(e,r)||Fr(n,r),s;i.charAt(0)==="#"?(s=Fr(t,i),H(s)&&(s=i)):s=this.$$html5?i:"",jr(s,this),this.$$path=o(this.$$path,s,e),this.$$compose()},this.$$compose=function(){var n=gt(this.$$search),r=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Hr(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+(this.$$url?t+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Ir(e)==Ir(t)?(this.$$parse(t),!0):!1}}function Xr(e,t){this.$$html5=!0,Wr.apply(this,arguments);var n=Rr(e);this.$$parseLinkUrl=function(r,i){if(i&&i[0]==="#")return this.hash(i.slice(1)),!0;var s,o;return e==Ir(r)?s=r:(o=Fr(n,r))?s=e+t+o:n===r+"/"&&(s=n),s&&this.$$parse(s),!!s},this.$$compose=function(){var n=gt(this.$$search),r=this.$$hash?"#"+yt(this.$$hash):"";this.$$url=Hr(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=e+t+this.$$url}}function $r(e){return function(){return this[e]}}function Jr(e,t){return function(n){return H(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Kr(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return B(t)?(e=t,this):e},this.html5Mode=function(e){return K(e)?(t.enabled=e,this):j(e)?(K(e.enabled)&&(t.enabled=e.enabled),K(e.requireBase)&&(t.requireBase=e.requireBase),K(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,s,o){function d(e,t,n){var i=u.url(),s=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(o){throw u.url(i),u.$$state=s,o}}function m(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,a,f=r.baseHref(),l=r.url(),c;if(t.enabled){if(!f&&t.requireBase)throw Pr("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=Ur(l)+(f||"/"),a=i.history?zr:Xr}else c=Ir(l),a=Wr;u=new a(c,"#"+e),u.$$parseLinkUrl(l,l),u.$$state=r.state();var p=/^\s*(javascript|mailto):/i;s.on("click",function(e){if(!t.rewriteLinks||e.ctrlKey||e.metaKey||e.shiftKey||e.which==2||e.button==2)return;var i=h(e.target);while(tt(i[0])!=="a")if(i[0]===s[0]||!(i=i.parent())[0])return;var a=i.prop("href"),f=i.attr("href")||i.attr("xlink:href");j(a)&&a.toString()==="[object SVGAnimatedString]"&&(a=Fi(a.animVal).href);if(p.test(a))return;a&&!i.attr("target")&&!e.isDefaultPrevented()&&u.$$parseLinkUrl(a,f)&&(e.preventDefault(),u.absUrl()!=r.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}),qr(u.absUrl())!=qr(l)&&r.url(u.absUrl(),!0);var v=!0;return r.onUrlChange(function(e,t){n.$evalAsync(function(){var r=u.absUrl(),i=u.$$state,s;u.$$parse(e),u.$$state=t,s=n.$broadcast("$locationChangeStart",e,r,t,i).defaultPrevented;if(u.absUrl()!==e)return;s?(u.$$parse(r),u.$$state=i,d(r,!1,i)):(v=!1,m(r,i))}),n.$$phase||n.$digest()}),n.$watch(function(){var t=qr(r.url()),s=qr(u.absUrl()),o=r.state(),a=u.$$replace,f=t!==s||u.$$html5&&i.history&&o!==u.$$state;if(v||f)v=!1,n.$evalAsync(function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;if(u.absUrl()!==e)return;r?(u.$$parse(t),u.$$state=o):(f&&d(e,a,o===u.$$state?null:u.$$state),m(t,o))});u.$$replace=!1}),u}]}function Qr(){var e=!0,t=this;this.debugEnabled=function(t){return B(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&e.stack.indexOf(e.message)===-1?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||_,s=!1;try{s=!!i.apply}catch(o){}return s?function(){var e=[];return x(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,t==null?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Yr(e,t){if(e==="__defineGetter__"||e==="__defineSetter__"||e==="__lookupGetter__"||e==="__lookupSetter__"||e==="__proto__")throw Gr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Zr(e,t){if(e){if(e.constructor===e)throw Gr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Gr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Gr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Gr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function ri(e,t){if(e){if(e.constructor===e)throw Gr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===ei||e===ti||e===ni)throw Gr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function ai(e){return e.constant}function li(e,t,n,r,i){Zr(e,i),Zr(t,i);var s=n.split("."),o;for(var u=0;s.length>1;u++){o=Yr(s.shift(),i);var a=u===0&&t&&t[o]||e[o];a||(a={},e[o]=a),e=Zr(a,i)}return o=Yr(s.shift(),i),Zr(e[o],i),e[o]=r,r}function pi(e){return e=="constructor"}function di(e,t,r,i,s,o,u){Yr(e,o),Yr(t,o),Yr(r,o),Yr(i,o),Yr(s,o);var a=function(e){return Zr(e,o)},f=u||pi(e)?a:D,l=u||pi(t)?a:D,c=u||pi(r)?a:D,h=u||pi(i)?a:D,p=u||pi(s)?a:D;return function(u,a){var d=a&&a.hasOwnProperty(e)?a:u;return d==null?d:(d=f(d[e]),t?d==null?n:(d=l(d[t]),r?d==null?n:(d=c(d[r]),i?d==null?n:(d=h(d[i]),s?d==null?n:(d=p(d[s]),d):d):d):d):d)}}function vi(e,t){return function(n,r){return e(n,r,Zr,t)}}function mi(e,t,r){var i=t.expensiveChecks,s=i?hi:ci,o=s[e];if(o)return o;var u=e.split("."),a=u.length;if(t.csp)a<6?o=di(u[0],u[1],u[2],u[3],u[4],r,i):o=function(t,s){var o=0,f;do f=di(u[o++],u[o++],u[o++],u[o++],u[o++],r,i)(t,s),s=n,t=f;while(o<a);return f};else{var f="";i&&(f+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=i;x(u,function(e,t){Yr(e,r);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;if(i||pi(e))n="eso("+n+", fe)",l=!0;f+="if(s == null) return undefined;\ns="+n+";\n"}),f+="return s;";var c=new Function("s","l","eso","fe",f);c.toString=P(f),l&&(c=vi(c,r)),o=c}return o.sharedGetter=!0,o.assign=function(t,n,r){return li(t,r,e,n,e)},s[e]=o,o}function yi(e){return U(e.valueOf)?e.valueOf():gi.call(e)}function bi(){var e=Bt(),t=Bt();this.$get=["$filter","$sniffer",function(n,r){function o(e){var t=e;return e.sharedGetter&&(t=function(n,r){return e(n,r)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function u(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];i.constant||(i.inputs?u(i.inputs,t):t.indexOf(i)===-1&&t.push(i))}return t}function a(e,t){if(e==null||t==null)return e===t;if(typeof e=="object"){e=yi(e);if(typeof e=="object")return!1}return e===t||e!==e&&t!==t}function f(e,t,n,r){var i=r.$$inputs||(r.$$inputs=u(r.inputs,[])),s;if(i.length===1){var o=a;return i=i[0],e.$watch(function(t){var n=i(t);return a(n,o)||(s=r(t),o=n&&yi(n)),s},t,n)}var f=[];for(var l=0,c=i.length;l<c;l++)f[l]=a;return e.$watch(function(t){var n=!1;for(var o=0,u=i.length;o<u;o++){var l=i[o](t);if(n||(n=!a(l,f[o])))f[o]=l&&yi(l)}return n&&(s=r(t)),s},t,n)}function l(e,t,n,r){var i,s;return i=e.$watch(function(t){return r(t)},function(n,r,o){s=n,U(t)&&t.apply(this,arguments),B(n)&&o.$$postDigest(function(){B(s)&&i()})},n)}function c(e,t,n,r){function o(e){var t=!0;return x(e,function(e){B(e)||(t=!1)}),t}var i,s;return i=e.$watch(function(t){return r(t)},function(n,r,u){s=n,U(t)&&t.call(this,n,r,u),o(n)&&u.$$postDigest(function(){o(s)&&i()})},n)}function h(e,t,n,r){var i;return i=e.$watch(function(t){return r(t)},function(n,r,s){U(t)&&t.apply(this,arguments),i()},n)}function p(e,t){if(!t)return e;var n=e.$$watchDelegate,r=n!==c&&n!==l,i=r?function(r,i){var s=e(r,i);return t(s,r,i)}:function(r,i){var s=e(r,i),o=t(s,r,i);return B(s)?o:s};return e.$$watchDelegate&&e.$$watchDelegate!==f?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=f,i.inputs=[e]),i}var i={csp:r.csp,expensiveChecks:!1},s={csp:r.csp,expensiveChecks:!0};return function(u,a,d){var v,m,g;switch(typeof u){case"string":g=u=u.trim();var y=d?t:e;v=y[g];if(!v){u.charAt(0)===":"&&u.charAt(1)===":"&&(m=!0,u=u.substring(2));var b=d?s:i,w=new ui(b),E=new fi(w,n,b);v=E.parse(u),v.constant?v.$$watchDelegate=h:m?(v=o(v),v.$$watchDelegate=v.literal?c:l):v.inputs&&(v.$$watchDelegate=f),y[g]=v}return p(v,a);case"function":return p(u,a);default:return p(_,a)}}}]}function wi(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Si(function(t){e.$evalAsync(t)},t)}]}function Ei(){this.$get=["$browser","$exceptionHandler",function(e,t){return Si(function(t){e.defer(t)},t)}]}function Si(e,t){function s(e,t,n){function i(t){return function(n){if(r)return;r=!0,t.call(e,n)}}var r=!1;return[i(t),i(n)]}function u(){this.$$state={status:0}}function a(e,t){return function(n){t.call(e,n)}}function f(e){var r,i,s;s=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,u=s.length;o<u;++o){i=s[o][0],r=s[o][e.status];try{U(r)?i.resolve(r(e.value)):e.status===1?i.resolve(e.value):i.reject(e.value)}catch(a){i.reject(a),t(a)}}}function l(t){if(t.processScheduled||!t.pending)return;t.processScheduled=!0,e(function(){f(t)})}function c(){this.promise=new u,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}function m(e){var t=new c,n=0,r=R(e)?[]:{};return x(e,function(e,i){n++,v(e).then(function(e){if(r.hasOwnProperty(i))return;r[i]=e,--n||t.resolve(r)},function(e){if(r.hasOwnProperty(i))return;t.reject(e)})}),n===0&&t.resolve(r),t.promise}var i=r("$q",TypeError),o=function(){return new c};u.prototype={then:function(e,t,n){var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return d(t,!0,e)},function(t){return d(t,!1,e)},t)}},c.prototype={resolve:function(e){if(this.promise.$$state.status)return;e===this.promise?this.$$reject(i("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e)},$$resolve:function(e){var n,r;r=s(this,this.$$resolve,this.$$reject);try{if(j(e)||U(e))n=e&&e.then;U(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(i){r[1](i),t(i)}},reject:function(e){if(this.promise.$$state.status)return;this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){var e,i;for(var s=0,o=r.length;s<o;s++){i=r[s][0],e=r[s][3];try{i.notify(U(e)?e(n):n)}catch(u){t(u)}}})}};var h=function(e){var t=new c;return t.reject(e),t.promise},p=function(t,n){var r=new c;return n?r.resolve(t):r.reject(t),r.promise},d=function(t,n,r){var i=null;try{U(r)&&(i=r())}catch(s){return p(s,!1)}return Q(i)?i.then(function(){return p(t,n)},function(e){return p(e,!1)}):p(t,n)},v=function(e,t,n,r){var i=new c;return i.resolve(e),i.promise.then(t,n,r)},g=function y(e){function n(e){t.resolve(e)}function r(e){t.reject(e)}if(!U(e))throw i("norslvr","Expected resolverFn, got '{0}'",e);if(this instanceof y){var t=new c;return e(n,r),t.promise}return new y(e)};return g.defer=o,g.reject=h,g.when=v,g.all=m,g}function xi(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,s=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return s.supported=i,s}]}function Ti(){function s(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=k(),this.$$ChildScope=null}return t.prototype=e,t}var e=10,t=r("$rootScope"),n=null,i=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,o,a,f){function l(e){e.currentScope.$$destroyed=!0}function c(){this.$id=k(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function m(e){if(h.$$phase)throw t("inprog","{0} already in progress",h.$$phase);h.$$phase=e}function g(){h.$$phase=null}function y(e,t,n){do e.$$listenerCount[n]-=t,e.$$listenerCount[n]===0&&delete e.$$listenerCount[n];while(e=e.$parent)}function b(){}function w(){while(v.length)try{v.shift()()}catch(e){o(e)}i=null}function E(){i===null&&(i=f.defer(function(){h.$apply(w)}))}c.prototype={constructor:c,$new:function(e,t){var n;return t=t||this,e?(n=new c,n.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=s(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!=this)&&n.$on("$destroy",l),n},$watch:function(e,t,r){var i=a(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,r,i);var s=this,o=s.$$watchers,u={fn:t,last:b,get:i,exp:e,eq:!!r};return n=null,U(t)||(u.fn=_),o||(o=s.$$watchers=[]),o.unshift(u),function(){rt(o,u),n=null}},$watchGroup:function(e,t){function f(){o=!1,u?(u=!1,t(r,r,s)):t(r,n,s)}var n=new Array(e.length),r=new Array(e.length),i=[],s=this,o=!1,u=!0;if(!e.length){var a=!0;return s.$evalAsync(function(){a&&t(r,r,s)}),function(){a=!1}}return e.length===1?this.$watch(e[0],function(i,s,o){r[0]=i,n[0]=s,t(r,i===s?r:n,o)}):(x(e,function(e,t){var u=s.$watch(e,function(i,u){r[t]=i,n[t]=u,o||(o=!0,s.$evalAsync(f))});i.push(u)}),function(){while(i.length)i.shift()()})},$watchCollection:function(e,t){function v(e){r=e;var t,n,s,o,u;if(H(r))return;if(!j(r))i!==r&&(i=r,f++);else if(S(r)){i!==c&&(i=c,d=i.length=0,f++),t=r.length,d!==t&&(f++,i.length=d=t);for(var a=0;a<t;a++)u=i[a],o=r[a],s=u!==u&&o!==o,!s&&u!==o&&(f++,i[a]=o)}else{i!==h&&(i=h={},d=0,f++),t=0;for(n in r)r.hasOwnProperty(n)&&(t++,o=r[n],u=i[n],n in i?(s=u!==u&&o!==o,!s&&u!==o&&(f++,i[n]=o)):(d++,i[n]=o,f++));if(d>t){f++;for(n in i)r.hasOwnProperty(n)||(d--,delete i[n])}}return f}function m(){p?(p=!1,t(r,r,n)):t(r,s,n);if(o)if(!j(r))s=r;else if(S(r)){s=new Array(r.length);for(var e=0;e<r.length;e++)s[e]=r[e]}else{s={};for(var i in r)u.call(r,i)&&(s[i]=r[i])}}v.$stateful=!0;var n=this,r,i,s,o=t.length>1,f=0,l=a(e,v),c=[],h={},p=!0,d=0;return this.$watch(l,m)},$digest:function(){var r,s,u,a,l,c,v=e,y,E,S=this,x=[],T,N,C;m("$digest"),f.$$checkUrlChange(),this===h&&i!==null&&(f.defer.cancel(i),w()),n=null;do{c=!1,E=S;while(p.length){try{C=p.shift(),C.scope.$eval(C.expression,C.locals)}catch(k){o(k)}n=null}e:do{if(a=E.$$watchers){l=a.length;while(l--)try{r=a[l];if(r)if((s=r.get(E))!==(u=r.last)&&!(r.eq?ot(s,u):typeof s=="number"&&typeof u=="number"&&isNaN(s)&&isNaN(u)))c=!0,n=r,r.last=r.eq?it(s,null):s,r.fn(s,u===b?s:u,E),v<5&&(T=4-v,x[T]||(x[T]=[]),x[T].push({msg:U(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:s,oldVal:u}));else if(r===n){c=!1;break e}}catch(k){o(k)}}if(!(y=E.$$childHead||E!==S&&E.$$nextSibling))while(E!==S&&!(y=E.$$nextSibling))E=E.$parent}while(E=y);if((c||p.length)&&!(v--))throw g(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,x)}while(c||p.length);g();while(d.length)try{d.shift()()}catch(k){o(k)}},$destroy:function(){if(this.$$destroyed)return;var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0;if(this===h)return;for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=_,this.$on=this.$watch=this.$watchGroup=function(){return _},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null},$eval:function(e,t){return a(e)(this,t)},$evalAsync:function(e,t){!h.$$phase&&!p.length&&f.defer(function(){p.length&&h.$digest()}),p.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){d.push(e)},$apply:function(e){try{return m("$apply"),this.$eval(e)}catch(t){o(t)}finally{g();try{h.$digest()}catch(t){throw o(t),t}}},$applyAsync:function(e){function n(){t.$eval(e)}var t=this;e&&v.push(n),E()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);r!==-1&&(n[r]=null,y(i,1,e))}},$emit:function(e,t){var n=[],r,i=this,s=!1,u={name:e,targetScope:i,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},a=at([u],arguments,1),f,l;do{r=i.$$listeners[e]||n,u.currentScope=i;for(f=0,l=r.length;f<l;f++){if(!r[f]){r.splice(f,1),f--,l--;continue}try{r[f].apply(null,a)}catch(c){o(c)}}if(s)return u.currentScope=null,u;i=i.$parent}while(i);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,r=n,i=n,s={name:e,targetScope:n,preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return s;var u=at([s],arguments,1),a,f,l;while(r=i){s.currentScope=r,a=r.$$listeners[e]||[];for(f=0,l=a.length;f<l;f++){if(!a[f]){a.splice(f,1),f--,l--;continue}try{a[f].apply(null,u)}catch(c){o(c)}}if(!(i=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))while(r!==n&&!(i=r.$$nextSibling))r=r.$parent}return s.currentScope=null,s}};var h=new c,p=h.$$asyncQueue=[],d=h.$$postDigestQueue=[],v=h.$$applyAsyncQueue=[];return h}]}function Ni(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return B(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return B(e)?(t=e,this):t},this.$get=function(){return function(r,i){var s=i?t:e,o;return o=Fi(r).href,o!==""&&!o.match(s)?"unsafe:"+o:r}}}function Li(e){if(e==="self")return e;if(F(e)){if(e.indexOf("***")>-1)throw Ci("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=Y(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(z(e))return new RegExp("^"+e.source+"$");throw Ci("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Ai(e){var t=[];return B(e)&&x(e,function(e){t.push(Li(e))}),t}function Oi(){this.SCE_CONTEXTS=ki;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Ai(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Ai(e)),t},this.$get=["$injector",function(r){function s(e,t){return e==="self"?Ii(t):!!e.exec(t.href)}function o(n){var r=Fi(n.toString()),i,o,u=!1;for(i=0,o=e.length;i<o;i++)if(s(e[i],r)){u=!0;break}if(u)for(i=0,o=t.length;i<o;i++)if(s(t[i],r)){u=!1;break}return u}function u(e){var t=function(t){this.$$unwrapTrustedValue=function(){return t}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function l(e,t){var r=f.hasOwnProperty(e)?f[e]:null;if(!r)throw Ci("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(t===null||t===n||t==="")return t;if(typeof t!="string")throw Ci("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function c(e){return e instanceof a?e.$$unwrapTrustedValue():e}function h(e,t){if(t===null||t===n||t==="")return t;var r=f.hasOwnProperty(e)?f[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===ki.RESOURCE_URL){if(o(t))return t;throw Ci("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===ki.HTML)return i(t);throw Ci("unsafe","Attempting to use an unsafe value in a safe context.")}var i=function(t){throw Ci("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(i=r.get("$sanitize"));var a=u(),f={};return f[ki.HTML]=u(a),f[ki.CSS]=u(a),f[ki.URL]=u(a),f[ki.JS]=u(a),f[ki.RESOURCE_URL]=u(f[ki.URL]),{trustAs:l,getTrusted:h,valueOf:c}}]}function Mi(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&c<8)throw Ci("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=st(ki);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=D),r.parseAs=function(n,i){var s=t(i);return s.literal&&s.constant?s:t(i,function(e){return r.getTrusted(n,e)})};var i=r.parseAs,s=r.getTrusted,u=r.trustAs;return x(ki,function(e,t){var n=o(t);r[nn("parse_as_"+n)]=function(t){return i(e,t)},r[nn("get_trusted_"+n)]=function(t){return s(e,t)},r[nn("trust_as_"+n)]=function(t){return u(e,t)}}),r}]}function _i(){this.$get=["$window","$document",function(e,t){var n={},r=O((/android (\d+)/.exec(o((e.navigator||{}).userAgent))||[])[1]),i=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u,a=/^(Moz|webkit|ms)(?=[A-Z])/,f=s.body&&s.body.style,l=!1,h=!1,p;if(f){for(var d in f)if(p=a.exec(d)){u=p[0],u=u.substr(0,1).toUpperCase()+u.substr(1);break}u||(u="WebkitOpacity"in f&&"webkit"),l="transition"in f||u+"Transition"in f,h="animation"in f||u+"Animation"in f,r&&(!l||!h)&&(l=F(s.body.style.webkitTransition),h=F(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||r<4)&&!i,hasEvent:function(e){if(e==="input"&&c<=11)return!1;if(H(n[e])){var t=s.createElement("div");n[e]="on"+e in t}return n[e]},csp:ut(),vendorPrefix:u,transitions:l,animations:h,android:r}}]}function Di(){this.$get=["$templateCache","$http","$q",function(e,t,n){function r(i,s){function a(e){if(!s)throw tr("tpload","Failed to load template: {0}",i);return n.reject(e)}r.totalPendingRequests++;var o=t.defaults&&t.defaults.transformResponse;R(o)?o=o.filter(function(e){return e!==yr}):o===yr&&(o=null);var u={cache:e,transformResponse:o};return t.get(i,u)["finally"](function(){r.totalPendingRequests--}).then(function(e){return e.data},a)}return r.totalPendingRequests=0,r}]}function Pi(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return x(r,function(e){var r=b.element(e).data("$binding");r&&x(r,function(r){if(n){var s=new RegExp("(^|\\s)"+Y(t)+"(\\s|\\||$)");s.test(r)&&i.push(e)}else r.indexOf(t)!=-1&&i.push(e)})}),i},r.findModels=function(e,t,n){var r=["ng-","data-ng-","ng\\:"];for(var i=0;i<r.length;++i){var s=n?"=":"*=",o="["+r[i]+"model"+s+'"'+t+'"]',u=e.querySelectorAll(o);if(u.length)return u}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function Hi(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,u,a){var f=B(a)&&!a,l=(f?r:n).defer(),c=l.promise,h;return h=t.defer(function(){try{l.resolve(o())}catch(t){l.reject(t),i(t)}finally{delete s[c.$$timeoutId]}f||e.$apply()},u),c.$$timeoutId=h,s[h]=l,c}var s={};return o.cancel=function(e){return e&&e.$$timeoutId in s?(s[e.$$timeoutId].reject("canceled"),delete s[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},o}]}function Fi(e){var t=e;return c&&(Bi.setAttribute("href",t),t=Bi.href),Bi.setAttribute("href",t),{href:Bi.href,protocol:Bi.protocol?Bi.protocol.replace(/:$/,""):"",host:Bi.host,search:Bi.search?Bi.search.replace(/^\?/,""):"",hash:Bi.hash?Bi.hash.replace(/^#/,""):"",hostname:Bi.hostname,port:Bi.port,pathname:Bi.pathname.charAt(0)==="/"?Bi.pathname:"/"+Bi.pathname}}function Ii(e){var t=F(e)?Fi(e):e;return t.protocol===ji.protocol&&t.host===ji.host}function qi(){this.$get=P(e)}function Ri(e){function n(r,i){if(j(r)){var s={};return x(r,function(e,t){s[t]=n(t,e)}),s}return e.factory(r+t,i)}var t="Filter";this.register=n,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],n("currency",Xi),n("date",as),n("filter",Ui),n("json",fs),n("limitTo",hs),n("lowercase",ls),n("number",Vi),n("orderBy",ps),n("uppercase",cs)}function Ui(){return function(e,t,n){if(!R(e))return e;var r,i;switch(typeof t){case"function":r=t;break;case"boolean":case"number":case"string":i=!0;case"object":r=zi(t,n,i);break;default:return e}return e.filter(r)}}function zi(e,t,n){var r=j(e)&&"$"in e,i;return t===!0?t=ot:U(t)||(t=function(e,t){return j(e)||j(t)?!1:(e=o(""+e),t=o(""+t),e.indexOf(t)!==-1)}),i=function(i){return r&&!j(i)?Wi(i,e.$,t,!1):Wi(i,e,t,n)},i}function Wi(e,t,n,r,i){var s=e!==null?typeof e:"null",o=t!==null?typeof t:"null";if(o==="string"&&t.charAt(0)==="!")return!Wi(e,t.substring(1),n,r);if(R(e))return e.some(function(e){return Wi(e,t,n,r)});switch(s){case"object":var u;if(r){for(u in e)if(u.charAt(0)!=="$"&&Wi(e[u],t,n,!0))return!0;return i?!1:Wi(e,t,n,!1)}if(o==="object"){for(u in t){var a=t[u];if(U(a)||H(a))continue;var f=u==="$",l=f?e:e[u];if(!Wi(l,a,n,f,f))return!1}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Xi(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return H(n)&&(n=t.CURRENCY_SYM),H(r)&&(r=t.PATTERNS[1].maxFrac),e==null?e:Ji(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Vi(e){var t=e.NUMBER_FORMATS;return function(e,n){return e==null?e:Ji(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function Ji(e,t,n,r,i){if(!isFinite(e)||j(e))return"";var s=e<0;e=Math.abs(e);var o=e+"",u="",a=[],f=!1;if(o.indexOf("e")!==-1){var l=o.match(/([\d\.]+)e(-?)(\d+)/);l&&l[2]=="-"&&l[3]>i+1?e=0:(u=o,f=!0)}if(!f){var c=(o.split($i)[1]||"").length;H(i)&&(i=Math.min(Math.max(t.minFrac,c),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+ -i);var h=(""+e).split($i),p=h[0];h=h[1]||"";var d,v=0,m=t.lgSize,g=t.gSize;if(p.length>=m+g){v=p.length-m;for(d=0;d<v;d++)(v-d)%g===0&&d!==0&&(u+=n),u+=p.charAt(d)}for(d=v;d<p.length;d++)(p.length-d)%m===0&&d!==0&&(u+=n),u+=p.charAt(d);while(h.length<i)h+="0";i&&i!=="0"&&(u+=r+h.substr(0,i))}else i>0&&e<1&&(u=e.toFixed(i),e=parseFloat(u));return e===0&&(s=!1),a.push(s?t.negPre:t.posPre,u,s?t.negSuf:t.posSuf),a.join("")}function Ki(e,t,n){var r="";e<0&&(r="-",e=-e),e=""+e;while(e.length<t)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function Qi(e,t,n,r){return n=n||0,function(i){var s=i["get"+e]();if(n>0||s>-n)s+=n;return s===0&&n==-12&&(s=12),Ki(s,t,r)}}function Gi(e,t){return function(n,r){var i=n["get"+e](),s=a(t?"SHORT"+e:e);return r[s][i]}}function Yi(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=Ki(Math[t>0?"floor":"ceil"](t/60),2)+Ki(Math.abs(t%60),2),n}function Zi(e){var t=(new Date(e,0,1)).getDay();return new Date(e,0,(t<=4?5:12)-t)}function es(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function ts(e){return function(t){var n=Zi(t.getFullYear()),r=es(t),i=+r- +n,s=1+Math.round(i/6048e5);return Ki(s,e)}}function ns(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function rs(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function is(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function as(e){function n(e){var n;if(n=e.match(t)){var r=new Date(0),i=0,s=0,o=n[8]?r.setUTCFullYear:r.setFullYear,u=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=O(n[9]+n[10]),s=O(n[9]+n[11])),o.call(r,O(n[1]),O(n[2])-1,O(n[3]));var a=O(n[4]||0)-i,f=O(n[5]||0)-s,l=O(n[6]||0),c=Math.round(parseFloat("0."+(n[7]||0))*1e3);return u.call(r,a,f,l,c),r}return e}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,r,i){var s="",o=[],u,a;r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,F(t)&&(t=us.test(t)?O(t):n(t)),I(t)&&(t=new Date(t));if(!q(t))return t;while(r)a=os.exec(r),a?(o=at(o,a,1),r=o.pop()):(o.push(r),r=null);return i&&i==="UTC"&&(t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+t.getTimezoneOffset())),x(o,function(n){u=ss[n],s+=u?u(t,e.DATETIME_FORMATS):n.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function fs(){return function(e,t){return H(t)&&(t=2),ht(e,t)}}function hs(){return function(e,t){return I(e)&&(e=e.toString()),!R(e)&&!F(e)?e:(Math.abs(Number(t))===Infinity?t=Number(t):t=O(t),t?t>0?e.slice(0,t):e.slice(t):F(e)?"":[])}}function ps(e){return function(t,n,r){function i(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(i!==0)return i}return 0}function s(e,t){return t?function(t,n){return e(n,t)}:e}function o(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function u(e){if(e===null)return"null";if(typeof e.valueOf=="function"){e=e.valueOf();if(o(e))return e}if(typeof e.toString=="function"){e=e.toString();if(o(e))return e}return""}function a(e,t){var n=typeof e,r=typeof t;return n===r&&n==="object"&&(e=u(e),t=u(t)),n===r?(n==="string"&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:e<t?-1:1):n<r?-1:1}return S(t)?(n=R(n)?n:[n],n.length===0&&(n=["+"]),n=n.map(function(t){var n=!1,r=t||D;if(F(t)){if(t.charAt(0)=="+"||t.charAt(0)=="-")n=t.charAt(0)=="-",t=t.substring(1);if(t==="")return s(a,n);r=e(t);if(r.constant){var i=r();return s(function(e,t){return a(e[i],t[i])},n)}}return s(function(e,t){return a(r(e),r(t))},n)}),d.call(t).sort(s(i,r))):t}}function ds(e){return U(e)&&(e={link:e}),e.restrict=e.restrict||"AC",P(e)}function bs(e,t){e.$name=t}function ws(e,t,r,i,s){var o=this,u=[],a=o.$$parentForm=e.parent().controller("form")||gs;o.$error={},o.$$success={},o.$pending=n,o.$name=s(t.name||t.ngForm||"")(r),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,a.$addControl(o),o.$rollbackViewValue=function(){x(u,function(e){e.$rollbackViewValue()})},o.$commitViewValue=function(){x(u,function(e){e.$commitViewValue()})},o.$addControl=function(e){Dt(e.$name,"input"),u.push(e),e.$name&&(o[e.$name]=e)},o.$$renameControl=function(e,t){var n=e.$name;o[n]===e&&delete o[n],o[t]=e,e.$name=t},o.$removeControl=function(e){e.$name&&o[e.$name]===e&&delete o[e.$name],x(o.$pending,function(t,n){o.$setValidity(n,null,e)}),x(o.$error,function(t,n){o.$setValidity(n,null,e)}),x(o.$$success,function(t,n){o.$setValidity(n,null,e)}),rt(u,e)},Co({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(!r)e[t]=[n];else{var i=r.indexOf(n);i===-1&&r.push(n)}},unset:function(e,t,n){var r=e[t];if(!r)return;rt(r,n),r.length===0&&delete e[t]},parentForm:a,$animate:i}),o.$setDirty=function(){i.removeClass(e,mo),i.addClass(e,go),o.$dirty=!0,o.$pristine=!1,a.$setDirty()},o.$setPristine=function(){i.setClass(e,mo,go+" "+ys),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,x(u,function(e){e.$setPristine()})},o.$setUntouched=function(){x(u,function(e){e.$setUntouched()})},o.$setSubmitted=function(){i.addClass(e,ys),o.$submitted=!0,a.$setSubmitted()}}function Ps(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function Hs(e,t,n,r,i,s){Bs(e,t,n,r,i,s),Ps(r)}function Bs(e,t,n,r,i,s){var u=o(t[0].type);if(!i.android){var a=!1;t.on("compositionstart",function(e){a=!0}),t.on("compositionend",function(){a=!1,f()})}var f=function(e){l&&(s.defer.cancel(l),l=null);if(a)return;var i=t.val(),o=e&&e.type;u!=="password"&&(!n.ngTrim||n.ngTrim!=="false")&&(i=G(i)),(r.$viewValue!==i||i===""&&r.$$hasNativeValidators)&&r.$setViewValue(i,o)};if(i.hasEvent("input"))t.on("input",f);else{var l,c=function(e,t,n){l||(l=s.defer(function(){l=null,(!t||t.value!==n)&&f(e)}))};t.on("keydown",function(e){var t=e.keyCode;if(t===91||15<t&&t<19||37<=t&&t<=40)return;c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",f),r.$render=function(){t.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function js(e,t){if(q(e))return e;if(F(e)){Os.lastIndex=0;var n=Os.exec(e);if(n){var r=+n[1],i=+n[2],s=0,o=0,u=0,a=0,f=Zi(r),l=(i-1)*7;return t&&(s=t.getHours(),o=t.getMinutes(),u=t.getSeconds(),a=t.getMilliseconds()),new Date(r,0,f.getDate()+l,s,o,u,a)}}return NaN}function Fs(e,t){return function(n,r){var i,s;if(q(n))return n;if(F(n)){n.charAt(0)=='"'&&n.charAt(n.length-1)=='"'&&(n=n.substring(1,n.length-1));if(Ts.test(n))return new Date(n);e.lastIndex=0,i=e.exec(n);if(i)return i.shift(),r?s={yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:s={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},x(i,function(e,n){n<t.length&&(s[t[n]]=+e)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,s.sss*1e3||0)}return NaN}}function Is(e,t,r,i){return function(o,u,a,f,l,c,h){function g(e){return e&&(!e.getTime||e.getTime()===e.getTime())}function y(e){return B(e)?q(e)?e:r(e):n}qs(o,u,a,f),Bs(o,u,a,f,l,c);var p=f&&f.$options&&f.$options.timezone,d;f.$$parserName=e,f.$parsers.push(function(e){if(f.$isEmpty(e))return null;if(t.test(e)){var i=r(e,d);return p==="UTC"&&i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),i}return n}),f.$formatters.push(function(e){if(e&&!q(e))throw Eo("datefmt","Expected `{0}` to be a date",e);if(g(e)){d=e;if(d&&p==="UTC"){var t=6e4*d.getTimezoneOffset();d=new Date(d.getTime()+t)}return h("date")(e,i,p)}return d=null,""});if(B(a.min)||a.ngMin){var v;f.$validators.min=function(e){return!g(e)||H(v)||r(e)>=v},a.$observe("min",function(e){v=y(e),f.$validate()})}if(B(a.max)||a.ngMax){var m;f.$validators.max=function(e){return!g(e)||H(m)||r(e)<=m},a.$observe("max",function(e){m=y(e),f.$validate()})}}}function qs(e,t,r,i){var o=t[0],u=i.$$hasNativeValidators=j(o.validity);u&&i.$parsers.push(function(e){var r=t.prop(s)||{};return r.badInput&&!r.typeMismatch?n:e})}function Rs(e,t,r,i,s,o){qs(e,t,r,i),Bs(e,t,r,i,s,o),i.$$parserName="number",i.$parsers.push(function(e){return i.$isEmpty(e)?null:ks.test(e)?parseFloat(e):n}),i.$formatters.push(function(e){if(!i.$isEmpty(e)){if(!I(e))throw Eo("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e});if(B(r.min)||r.ngMin){var u;i.$validators.min=function(e){return i.$isEmpty(e)||H(u)||e>=u},r.$observe("min",function(e){B(e)&&!I(e)&&(e=parseFloat(e,10)),u=I(e)&&!isNaN(e)?e:n,i.$validate()})}if(B(r.max)||r.ngMax){var a;i.$validators.max=function(e){return i.$isEmpty(e)||H(a)||e<=a},r.$observe("max",function(e){B(e)&&!I(e)&&(e=parseFloat(e,10)),a=I(e)&&!isNaN(e)?e:n,i.$validate()})}}function Us(e,t,n,r,i,s){Bs(e,t,n,r,i,s),Ps(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||Ns.test(n)}}function zs(e,t,n,r,i,s){Bs(e,t,n,r,i,s),Ps(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Cs.test(n)}}function Ws(e,t,n,r){H(n.name)&&t.attr("name",k());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function Xs(e,t,n,i,s){var o;if(B(i)){o=e(i);if(!o.constant)throw r("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(t)}return s}function Vs(e,t,n,r,i,s,o,u){var a=Xs(u,e,"ngTrueValue",n.ngTrueValue,!0),f=Xs(u,e,"ngFalseValue",n.ngFalseValue,!1),l=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",l),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return ot(e,a)}),r.$parsers.push(function(e){return e?a:f})}function eo(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){var i=e[r];for(var s=0;s<t.length;s++)if(i==t[s])continue e;n.push(i)}return n}function i(e){if(R(e))return e;if(F(e))return e.split(" ");if(j(e)){var t=[];return x(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(s,o,u){function f(e){var t=c(e,1);u.$addClass(t)}function l(e){var t=c(e,-1);u.$removeClass(t)}function c(e,t){var n=o.data("$classCounts")||{},r=[];return x(e,function(e){if(t>0||n[e])n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e)}),o.data("$classCounts",n),r.join(" ")}function h(e,t){var i=r(t,e),s=r(e,t);i=c(i,1),s=c(s,-1),i&&i.length&&n.addClass(o,i),s&&s.length&&n.removeClass(o,s)}function p(e){if(t===!0||s.$index%2===t){var n=i(e||[]);if(!a)f(n);else if(!ot(e,a)){var r=i(a);h(r,n)}}a=st(e)}var a;s.$watch(u[e],p,!0),u.$observe("class",function(t){p(s.$eval(u[e]))}),e!=="ngClass"&&s.$watch("$index",function(n,r){var o=n&1;if(o!==(r&1)){var a=i(s.$eval(u[e]));o===t?f(a):l(a)}})}}}]}function Co(e){function f(e,r,i){r===n?l("$pending",e,i):c("$pending",e,i),K(r)?r?(o(t.$error,e,i),s(t.$$success,e,i)):(s(t.$error,e,i),o(t.$$success,e,i)):(o(t.$error,e,i),o(t.$$success,e,i)),t.$pending?(h(wo,!0),t.$valid=t.$invalid=n,p("",null)):(h(wo,!1),t.$valid=ko(t.$error),t.$invalid=!t.$valid,p("",t.$valid));var a;t.$pending&&t.$pending[e]?a=n:t.$error[e]?a=!1:t.$$success[e]?a=!0:a=null,p(e,a),u.$setValidity(e,a,t)}function l(e,n,r){t[e]||(t[e]={}),s(t[e],n,r)}function c(e,r,i){t[e]&&o(t[e],r,i),ko(t[e])&&(t[e]=n)}function h(e,t){t&&!i[e]?(a.addClass(r,e),i[e]=!0):!t&&i[e]&&(a.removeClass(r,e),i[e]=!1)}function p(e,t){e=e?"-"+kt(e,"-"):"",h(po+e,t===!0),h(vo+e,t===!1)}var t=e.ctrl,r=e.$element,i={},s=e.set,o=e.unset,u=e.parentForm,a=e.$animate;i[vo]=!(i[po]=r.hasClass(po)),t.$setValidity=f}function ko(e){if(e)for(var t in e)return!1;return!0}var i=/^\/(.+)\/([a-z]*)$/,s="validity",o=function(e){return F(e)?e.toLowerCase():e},u=Object.prototype.hasOwnProperty,a=function(e){return F(e)?e.toUpperCase():e},f=function(e){return F(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)}):e},l=function(e){return F(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)&-33)}):e};"i"!=="I".toLowerCase()&&(o=f,a=l);var c,h,p,d=[].slice,v=[].splice,m=[].push,g=Object.prototype.toString,y=r("ng"),b=e.angular||(e.angular={}),w,E=0;c=t.documentMode,_.$inject=[],D.$inject=[];var R=Array.isArray,G=function(e){return F(e)?e.trim():e},Y=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ut=function(){if(B(ut.isActive_))return ut.isActive_;var e=!!t.querySelector("[ng-csp]")||!!t.querySelector("[data-ng-csp]");if(!e)try{new Function("")}catch(n){e=!0}return ut.isActive_=e},wt=["ng-","data-ng-","ng:","x-ng-"],Ct=/[A-Z]/g,Lt=!1,At,jt=1,Ft=3,It=8,qt=9,Rt=11,Xt={full:"1.3.15",major:1,minor:3,dot:15,codeName:"locality-filtration"};pn.expando="ng339";var $t=pn.cache={},Jt=1,Kt=function(e,t,n){e.addEventListener(t,n,!1)},Qt=function(e,t,n){e.removeEventListener(t,n,!1)};pn._data=function(e){return this.cache[e[this.expando]]||{}};var Yt=/([\:\-\_]+(.))/g,Zt=/^moz([A-Z])/,en={mouseleave:"mouseout",mouseenter:"mouseover"},tn=r("jqLite"),rn=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,sn=/<|&#?\w+;/,on=/<([\w:]+)/,un=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,an={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td;var An=pn.prototype={ready:function(n){function i(){if(r)return;r=!0,n()}var r=!1;t.readyState==="complete"?setTimeout(i):(this.on("DOMContentLoaded",i),pn(e).on("load",i))},toString:function(){var e=[];return x(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return e>=0?h(this[e]):h(this[this.length+e])},length:0,push:m,sort:[].sort,splice:[].splice},On={};x("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){On[o(e)]=e});var Mn={};x("input,select,option,textarea,button,form,details".split(","),function(e){Mn[e]=!0});var _n={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};x({data:bn,removeData:gn},function(e,t){pn[t]=e}),x({data:bn,inheritedData:Nn,scope:function(e){return h.data(e,"$scope")||Nn(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return h.data(e,"$isolateScope")||h.data(e,"$isolateScopeNoTemplate")},controller:Tn,injector:function(e){return Nn(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:wn,css:function(e,t,n){t=nn(t);if(!B(n))return e.style[t];e.style[t]=n},attr:function(e,t,r){var i=o(t);if(On[i]){if(!B(r))return e[t]||(e.attributes.getNamedItem(t)||_).specified?i:n;r?(e[t]=!0,e.setAttribute(t,i)):(e[t]=!1,e.removeAttribute(i))}else if(B(r))e.setAttribute(t,r);else if(e.getAttribute){var s=e.getAttribute(t,2);return s===null?n:s}},prop:function(e,t,n){if(!B(n))return e[t];e[t]=n},text:function(){function e(e,t){if(H(t)){var n=e.nodeType;return n===jt||n===Ft?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(H(t)){if(e.multiple&&tt(e)==="select"){var n=[];return x(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n.length===0?null:n}return e.value}e.value=t},html:function(e,t){if(H(t))return e.innerHTML;vn(e,!0),e.innerHTML=t},empty:Cn},function(e,t){pn.prototype[t]=function(t,r){var i,s,o=this.length;if(e!==Cn&&(e.length==2&&e!==wn&&e!==Tn?t:r)===n){if(j(t)){for(i=0;i<o;i++)if(e===bn)e(this[i],t);else for(s in t)e(this[i],s,t[s]);return this}var u=e.$dv,a=u===n?Math.min(o,1):o;for(var f=0;f<a;f++){var l=e(this[f],t,r);u=u?u+l:l}return u}for(i=0;i<o;i++)e(this[i],t,r);return this}}),x({removeData:gn,on:function Qo(e,t,n,r){if(B(r))throw tn("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!ln(e))return;var i=yn(e,!0),s=i.events,o=i.handle;o||(o=i.handle=Hn(e,s));var u=t.indexOf(" ")>=0?t.split(" "):[t],a=u.length;while(a--){t=u[a];var f=s[t];f||(s[t]=[],t==="mouseenter"||t==="mouseleave"?Qo(e,en[t],function(e){var n=this,r=e.relatedTarget;(!r||r!==n&&!n.contains(r))&&o(e,t)}):t!=="$destroy"&&Kt(e,t,o),f=s[t]),f.push(n)}},off:mn,one:function(e,t,n){e=h(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;vn(e),x(new pn(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return x(e.childNodes,function(e){e.nodeType===jt&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n!==jt&&n!==Rt)return;t=new pn(t);for(var r=0,i=t.length;r<i;r++){var s=t[r];e.appendChild(s)}},prepend:function(e,t){if(e.nodeType===jt){var n=e.firstChild;x(new pn(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=h(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:kn,detach:function(e){kn(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new pn(t);for(var i=0,s=t.length;i<s;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:Sn,removeClass:En,toggleClass:function(e,t,n){t&&x(t.split(" "),function(t){var r=n;H(r)&&(r=!wn(e,t)),(r?Sn:En)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Rt?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:dn,triggerHandler:function(e,t,n){var r,i,s,o=t.type||t,u=yn(e),a=u&&u.events,f=a&&a[o];f&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:_,type:o,target:e},t.type&&(r=A(r,t)),i=st(f),s=n?[r].concat(n):[r],x(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,s)}))}},function(e,t){pn.prototype[t]=function(t,n,r){var i;for(var s=0,o=this.length;s<o;s++)H(i)?(i=e(this[s],t,n,r),B(i)&&(i=h(i))):xn(i,e(this[s],t,n,r));return B(i)?i:this},pn.prototype.bind=pn.prototype.on,pn.prototype.unbind=pn.prototype.off}),Fn.prototype={put:function(e,t){this[jn(e,this.nextUid)]=t},get:function(e){return this[jn(e,this.nextUid)]},remove:function(e){var t=this[e=jn(e,this.nextUid)];return delete this[e],t}};var In=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,qn=/,/,Rn=/^\s*(_?)(\S+?)\1\s*$/,Un=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,zn=r("$injector");Vn.$$annotate=Xn;var Jn=r("$animate"),Kn=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&t.charAt(0)!=".")throw Jn("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return arguments.length===1&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,n){function i(t){var r,i=e.defer();return i.promise.$$cancelFn=function(){r&&r()},n.$$postDigest(function(){r=t(function(){i.resolve()})}),i.promise}function s(e,t){var n=[],r=[],i=Bt();return x((e.attr("class")||"").split(/\s+/),function(e){i[e]=!0}),x(t,function(e,t){var s=i[t];e===!1&&s?r.push(t):e===!0&&!s&&n.push(t)}),n.length+r.length>0&&[n.length?n:null,r.length?r:null]}function o(e,t,n){for(var r=0,i=t.length;r<i;++r){var s=t[r];e[s]=n}}function u(){return r||(r=e.defer(),t(function(){r.resolve(),r=null})),r.promise}function a(e,t){if(b.isObject(t)){var n=A(t.from||{},t.to||{});e.css(n)}}var r;return{animate:function(e,t,n){return a(e,{from:t,to:n}),u()},enter:function(e,t,n,r){return a(e,r),n?n.after(e):t.prepend(e),u()},leave:function(e,t){return a(e,t),e.remove(),u()},move:function(e,t,n,r){return this.enter(e,t,n,r)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=h(e),t=F(t)?t:R(t)?t.join(" "):"",x(e,function(e){Sn(e,t)}),a(e,n),u()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=h(e),t=F(t)?t:R(t)?t.join(" "):"",x(e,function(e){En(e,t)}),a(e,n),u()},setClass:function(e,t,n,r){var u=this,a="$$animateClasses",f=!1;e=h(e);var l=e.data(a);l?r&&l.options&&(l.options=b.extend(l.options||{},r)):(l={classes:{},options:r},f=!0);var c=l.classes;return t=R(t)?t:t.split(" "),n=R(n)?n:n.split(" "),o(c,t,!0),o(c,n,!1),f&&(l.promise=i(function(t){var n=e.data(a);e.removeData(a);if(n){var r=s(e,n.classes);r&&u.$$setClassImmediately(e,r[0],r[1],n.options)}t()}),e.data(a,l)),l.promise},$$setClassImmediately:function(e,t,n,r){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),a(e,r),u()},enabled:_,cancel:_}}]}],tr=r("$compile");nr.$inject=["$provide","$$sanitizeUriProvider"];var rr=/^((?:x|data)[\:\-_])/i,fr=r("$controller"),pr="application/json",dr={"Content-Type":pr+";charset=utf-8"},vr=/^\[|^\{(?!\{)/,mr={"[":/]$/,"{":/}$/},gr=/^\)\]\}',?\n/,Lr=r("$interpolate"),_r=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Dr={http:80,https:443,ftp:21},Pr=r("$location"),Vr={$$html5:!1,$$replace:!1,absUrl:$r("$$absUrl"),url:function(e){if(H(e))return this.$$url;var t=_r.exec(e);return(t[1]||e==="")&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||e==="")&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:$r("$$protocol"),host:$r("$$host"),port:$r("$$port"),path:Jr("$$path",function(e){return e=e!==null?e.toString():"",e.charAt(0)=="/"?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(F(e)||I(e))e=e.toString(),this.$$search=mt(e);else{if(!j(e))throw Pr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=it(e,{}),x(e,function(t,n){t==null&&delete e[n]}),this.$$search=e}break;default:H(t)||t===null?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Jr("$$hash",function(e){return e!==null?e.toString():""}),replace:function(){return this.$$replace=!0,this}};x([Xr,Wr,zr],function(e){e.prototype=Object.create(Vr),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==zr||!this.$$html5)throw Pr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=H(t)?null:t,this}});var Gr=r("$parse"),ei=Function.prototype.call,ti=Function.prototype.apply,ni=Function.prototype.bind,ii=Bt();x({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},"undefined":function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,ii[t]=e}),ii["this"]=function(e){return e},ii["this"].sharedGetter=!0;var si=A(Bt(),{"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),B(r)?B(i)?r+i:r:B(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),(B(n)?n:0)-(B(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),oi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},ui=function(e){this.options=e};ui.prototype={constructor:ui,lex:function(e){this.text=e,this.index=0,this.tokens=[];while(this.index<this.text.length){var t=this.text.charAt(this.index);if(t==='"'||t==="'")this.readString(t);else if(this.isNumber(t)||t==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=si[t],s=si[n],o=si[r];if(i||s||o){var u=o?r:s?n:t;this.tokens.push({index:this.index,text:u,operator:!0}),this.index+=u.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return t.indexOf(e)!==-1},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return"0"<=e&&e<="9"&&typeof e=="string"},isWhitespace:function(e){return e===" "||e==="\r"||e==="	"||e==="\n"||e===""||e==="¬†"},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||e==="$"},isExpOperator:function(e){return e==="-"||e==="+"||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=B(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Gr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){var e="",t=this.index;while(this.index<this.text.length){var n=o(this.text.charAt(this.index));if(n=="."||this.isNumber(n))e+=n;else{var r=this.peek();if(n=="e"&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&e.charAt(e.length-1)=="e")e+=n;else{if(!this.isExpOperator(n)||!!r&&!!this.isNumber(r)||e.charAt(e.length-1)!="e")break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;while(this.index<this.text.length){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;var n="",r=e,i=!1;while(this.index<this.text.length){var s=this.text.charAt(this.index);r+=s;if(i){if(s==="u"){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var u=oi[s];n+=u||s}i=!1}else if(s==="\\")i=!0;else{if(s===e){this.index++,this.tokens.push({index:t,text:r,constant:!0,value:n});return}n+=s}this.index++}this.throwError("Unterminated quote",t)}};var fi=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};fi.ZERO=A(function(){return 0},{sharedGetter:!0,constant:!0}),fi.prototype={constructor:fi,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in ii?e=ii[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());var t,n;while(t=this.expect("(","[","."))t.text==="("?(e=this.functionCall(e,n),n=null):t.text==="["?(n=e,e=this.objectIndex(e)):t.text==="."?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw Gr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(this.tokens.length===0)throw Gr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var s=this.tokens[e],o=s.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return s}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},consume:function(e){if(this.tokens.length===0)throw Gr("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var n=si[e];return A(function(r,i){return n(r,i,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,r){var i=si[t];return A(function(r,s){return i(r,s,e,n)},{constant:e.constant&&n.constant,inputs:!r&&[e,n]})},identifier:function(){var e=this.consume().text;while(this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"("))e+=this.consume().text+this.consume().text;return mi(e,this.options,this.text)},constant:function(){var e=this.consume().value;return A(function(){return e},{constant:!0,literal:!0})},statements:function(){var e=[];for(;;){this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain());if(!this.expect(";"))return e.length===1?e[0]:function(n,r){var i;for(var s=0,o=e.length;s<o;s++)i=e[s](n,r);return i}}},filterChain:function(){var e=this.expression(),t;while(t=this.expect("|"))e=this.filter(e);return e},filter:function(e){var t=this.$filter(this.consume().text),r,i;if(this.peek(":")){r=[],i=[];while(this.expect(":"))r.push(this.expression())}var s=[e].concat(r||[]);return A(function(o,u){var a=e(o,u);if(i){i[0]=a;var f=r.length;while(f--)i[f+1]=r[f](o,u);return t.apply(n,i)}return t(a)},{constant:!t.$stateful&&s.every(ai),inputs:!t.$stateful&&s})},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary(),t,n;return(n=this.expect("="))?(e.assign||this.throwError("implies assignment but ["+this.text.substring(0,n.index)+"] can not be assigned to",n),t=this.ternary(),A(function(r,i){return e.assign(r,t(r,i),i)},{inputs:[e,t]})):e},ternary:function(){var e=this.logicalOR(),t,n;if(n=this.expect("?")){t=this.assignment();if(this.consume(":")){var r=this.assignment();return A(function(i,s){return e(i,s)?t(i,s):r(i,s)},{constant:e.constant&&t.constant&&r.constant})}}return e},logicalOR:function(){var e=this.logicalAND(),t;while(t=this.expect("||"))e=this.binaryFn(e,t.text,this.logicalAND(),!0);return e},logicalAND:function(){var e=this.equality(),t;while(t=this.expect("&&"))e=this.binaryFn(e,t.text,this.equality(),!0);return e},equality:function(){var e=this.relational(),t;while(t=this.expect("==","!=","===","!=="))e=this.binaryFn(e,t.text,this.relational());return e},relational:function(){var e=this.additive(),t;while(t=this.expect("<",">","<=",">="))e=this.binaryFn(e,t.text,this.additive());return e},additive:function(){var e=this.multiplicative(),t;while(t=this.expect("+","-"))e=this.binaryFn(e,t.text,this.multiplicative());return e},multiplicative:function(){var e=this.unary(),t;while(t=this.expect("*","/","%"))e=this.binaryFn(e,t.text,this.unary());return e},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn(fi.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return A(function(i,s,o){var u=o||e(i,s);return u==null?n:t(u)},{assign:function(n,r,i){var s=e(n,i);return s||e.assign(n,s={},i),t.assign(s,r)}})},objectIndex:function(e){var t=this.text,r=this.expression();return this.consume("]"),A(function(s,o){var u=e(s,o),a=r(s,o),f;return Yr(a,t),u?(f=Zr(u[a],t),f):n},{assign:function(n,i,s){var o=Yr(r(n,s),t),u=Zr(e(n,s),t);return u||e.assign(n,u={},s),u[o]=i}})},functionCall:function(e,t){var r=[];if(this.peekToken().text!==")")do r.push(this.expression());while(this.expect(","));this.consume(")");var i=this.text,s=r.length?[]:null;return function(u,a){var f=t?t(u,a):B(t)?n:u,l=e(u,a,f)||_;if(s){var c=r.length;while(c--)s[c]=Zr(r[c](u,a),i)}Zr(f,i),ri(l,i);var h=l.apply?l.apply(f,s):l(s[0],s[1],s[2],s[3],s[4]);return s&&(s.length=0),Zr(h,i)}},arrayDeclaration:function(){var e=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),A(function(n,r){var i=[];for(var s=0,o=e.length;s<o;s++)i.push(e[s](n,r));return i},{literal:!0,constant:e.every(ai),inputs:e})},object:function(){var e=[],t=[];if(this.peekToken().text!=="}")do{if(this.peek("}"))break;var n=this.consume();n.constant?e.push(n.value):n.identifier?e.push(n.text):this.throwError("invalid key",n),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),A(function(r,i){var s={};for(var o=0,u=t.length;o<u;o++)s[e[o]]=t[o](r,i);return s},{literal:!0,constant:t.every(ai),inputs:t})}};var ci=Bt(),hi=Bt(),gi=Object.prototype.valueOf,Ci=r("$sce"),ki={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},tr=r("$compile"),Bi=t.createElement("a"),ji=Fi(e.location.href);Ri.$inject=["$provide"],Xi.$inject=["$locale"],Vi.$inject=["$locale"];var $i=".",ss={yyyy:Qi("FullYear",4),yy:Qi("FullYear",2,0,!0),y:Qi("FullYear",1),MMMM:Gi("Month"),MMM:Gi("Month",!0),MM:Qi("Month",2,1),M:Qi("Month",1,1),dd:Qi("Date",2),d:Qi("Date",1),HH:Qi("Hours",2),H:Qi("Hours",1),hh:Qi("Hours",2,-12),h:Qi("Hours",1,-12),mm:Qi("Minutes",2),m:Qi("Minutes",1),ss:Qi("Seconds",2),s:Qi("Seconds",1),sss:Qi("Milliseconds",3),EEEE:Gi("Day"),EEE:Gi("Day",!0),a:ns,Z:Yi,ww:ts(2),w:ts(1),G:rs,GG:rs,GGG:rs,GGGG:is},os=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,us=/^\-?\d+$/;as.$inject=["$locale"];var ls=P(o),cs=P(a);ps.$inject=["$parse"];var vs=P({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref&&!t.name)return function(e,t){if(t[0].nodeName.toLowerCase()!=="a")return;var n=g.call(t.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}),ms={};x(On,function(e,t){if(e=="multiple")return;var n=ir("ng-"+t);ms[n]=function(){return{restrict:"A",priority:100,link:function(e,r,i){e.$watch(i[n],function(n){i.$set(t,!!n)})}}}}),x(_n,function(e,t){ms[t]=function(){return{priority:100,link:function(e,n,r){if(t==="ngPattern"&&r.ngPattern.charAt(0)=="/"){var s=r.ngPattern.match(i);if(s){r.$set("ngPattern",new RegExp(s[1],s[2]));return}}e.$watch(r[t],function(n){r.$set(t,n)})}}}}),x(["src","srcset","href"],function(e){var t=ir("ng-"+e);ms[t]=function(){return{priority:99,link:function(n,r,i){var s=e,o=e;e==="href"&&g.call(r.prop("href"))==="[object SVGAnimatedString]"&&(o="xlinkHref",i.$attr[o]="xlink:href",s=null),i.$observe(t,function(t){if(!t){e==="href"&&i.$set(o,null);return}i.$set(o,t),c&&s&&r.prop(s,i[o])})}}}});var gs={$addControl:_,$$renameControl:bs,$removeControl:_,$setValidity:_,$setDirty:_,$setPristine:_,$setSubmitted:_},ys="ng-submitted";ws.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Es=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:ws,compile:function(i,s){i.addClass(mo).addClass(po);var o=s.name?"name":e&&s.ngForm?"ngForm":!1;return{pre:function(r,i,s,u){if(!("action"in s)){var a=function(e){r.$apply(function(){u.$commitViewValue(),u.$setSubmitted()}),e.preventDefault()};Kt(i[0],"submit",a),i.on("$destroy",function(){t(function(){Qt(i[0],"submit",a)},0,!1)})}var f=u.$$parentForm;o&&(li(r,null,u.$name,u,u.$name),s.$observe(o,function(e){if(u.$name===e)return;li(r,null,u.$name,n,u.$name),f.$$renameControl(u,e),li(r,null,u.$name,u,u.$name)})),i.on("$destroy",function(){f.$removeControl(u),o&&li(r,null,s[o],n,u.$name),A(u,gs)})}}}};return r}]},Ss=Es(),xs=Es(!0),Ts=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Ns=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Cs=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ks=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Ls=/^(\d{4})-(\d{2})-(\d{2})$/,As=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Os=/^(\d{4})-W(\d\d)$/,Ms=/^(\d{4})-(\d\d)$/,_s=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ds={text:Hs,date:Is("date",Ls,Fs(Ls,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Is("datetimelocal",As,Fs(As,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Is("time",_s,Fs(_s,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Is("week",Os,js,"yyyy-Www"),month:Is("month",Ms,Fs(Ms,["yyyy","MM"]),"yyyy-MM"),number:Rs,url:Us,email:zs,radio:Ws,checkbox:Vs,hidden:_,button:_,submit:_,reset:_,file:_},$s=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,s,u,a){a[0]&&(Ds[o(u.type)]||Ds.text)(i,s,u,a[0],t,e,n,r)}}}}],Js=/^(true|false|\d+)$/,Ks=function(){return{restrict:"A",priority:100,compile:function(e,t){return Js.test(t.ngValue)?function(t,n,r){r.$set("value",t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,function(t){r.$set("value",t)})}}}},Qs=["$compile",function(e){return{restrict:"AC",compile:function(r){return e.$$addBindingClass(r),function(r,i,s){e.$$addBindingInfo(i,s.ngBind),i=i[0],r.$watch(s.ngBind,function(t){i.textContent=t===n?"":t})}}}}],Gs=["$interpolate","$compile",function(e,t){return{compile:function(i){return t.$$addBindingClass(i),function(i,s,o){var u=e(s.attr(o.$attr.ngBindTemplate));t.$$addBindingInfo(s,u.expressions),s=s[0],o.$observe("ngBindTemplate",function(e){s.textContent=e===n?"":e})}}}}],Ys=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,s){var o=t(s.ngBindHtml),u=t(s.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(i),function(r,i,s){n.$$addBindingInfo(i,s.ngBindHtml),r.$watch(u,function(){i.html(e.getTrustedHtml(o(r))||"")})}}}}],Zs=P({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),to=eo("",!0),no=eo("Odd",0),ro=eo("Even",1),io=ds({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),so=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],oo={},uo={blur:!0,focus:!0};x("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=ir("ng-"+e);oo[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,s){var o=n(s[t],null,!0);return function(n,i){i.on(e,function(t){var i=function(){o(n,{$event:t})};uo[e]&&r.$$phase?n.$evalAsync(i):n.$apply(i)})}}}}]});var ao=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,s,o){var u,a,f;n.$watch(i.ngIf,function(s){s?a||o(function(n,s){a=s,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),u={clone:n},e.enter(n,r.parent(),r)}):(f&&(f.remove(),f=null),a&&(a.$destroy(),a=null),u&&(f=Ht(u.clone),e.leave(f).then(function(){f=null}),u=null))})}}}],fo=["$templateRequest","$anchorScroll","$animate","$sce",function(e,t,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(i,s){var o=s.ngInclude||s.src,u=s.onload||"",a=s.autoscroll;return function(i,s,f,l,c){var h=0,p,d,v,m=function(){d&&(d.remove(),d=null),p&&(p.$destroy(),p=null),v&&(n.leave(v).then(function(){d=null}),d=v,v=null)};i.$watch(r.parseAsResourceUrl(o),function(o){var f=function(){B(a)&&(!a||i.$eval(a))&&t()},d=++h;o?(e(o,!0).then(function(e){if(d!==h)return;var t=i.$new();l.template=e;var r=c(t,function(e){m(),n.enter(e,null,s).then(f)});p=t,v=r,p.$emit("$includeContentLoaded",o),i.$eval(u)},function(){d===h&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),l.template=null)})}}}}],lo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,s){if(/SVG/.test(r[0].toString())){r.empty(),e(cn(s.template,t).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});return}r.html(s.template),e(r.contents())(n)}}}],co=ds({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ho=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var s=t.attr(r.$attr.ngList)||", ",o=r.ngTrim!=="false",u=o?G(s):s,a=function(e){if(H(e))return;var t=[];return e&&x(e.split(u),function(e){e&&t.push(o?G(e):e)}),t};i.$parsers.push(a),i.$formatters.push(function(e){return R(e)?e.join(s):n}),i.$isEmpty=function(e){return!e||!e.length}}}},po="ng-valid",vo="ng-invalid",mo="ng-pristine",go="ng-dirty",yo="ng-untouched",bo="ng-touched",wo="ng-pending",Eo=new r("ngModel"),So=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,i,s,o,u,a,f,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=l(r.name||"",!1)(e);var c=s(r.ngModel),h=c.assign,p=c,d=h,v=null,m,g=this;this.$$setOptions=function(e){g.$options=e;if(e&&e.getterSetter){var t=s(r.ngModel+"()"),n=s(r.ngModel+"($$$p)");p=function(e){var n=c(e);return U(n)&&(n=t(e)),n},d=function(e,t){U(c(e))?n(e,{$$$p:g.$modelValue}):h(e,g.$modelValue)}}else if(!c.assign)throw Eo("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,dt(i))},this.$render=_,this.$isEmpty=function(e){return H(e)||e===""||e===null||e!==e};var y=i.inheritedData("$formController")||gs,b=0;Co({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:y,$animate:o}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,o.removeClass(i,go),o.addClass(i,mo)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,o.removeClass(i,mo),o.addClass(i,go),y.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,o.setClass(i,yo,bo)},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,o.setClass(i,bo,yo)},this.$rollbackViewValue=function(){u.cancel(v),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){if(I(g.$modelValue)&&isNaN(g.$modelValue))return;var e=g.$$lastCommittedViewValue,t=g.$$rawModelValue,r=g.$valid,i=g.$modelValue,s=g.$options&&g.$options.allowInvalid;g.$$runValidators(t,e,function(e){!s&&r!==e&&(g.$modelValue=e?t:n,g.$modelValue!==i&&g.$$writeModelToScope())})},this.$$runValidators=function(e,t,r){function s(){var e=g.$$parserName||"parse";return m!==n?(m||(x(g.$validators,function(e,t){a(t,null)}),x(g.$asyncValidators,function(e,t){a(t,null)})),a(e,m),m):(a(e,null),!0)}function o(){var n=!0;return x(g.$validators,function(r,i){var s=r(e,t);n=n&&s,a(i,s)}),n?!0:(x(g.$asyncValidators,function(e,t){a(t,null)}),!1)}function u(){var r=[],i=!0;x(g.$asyncValidators,function(s,o){var u=s(e,t);if(!Q(u))throw Eo("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",u);a(o,n),r.push(u.then(function(){a(o,!0)},function(e){i=!1,a(o,!1)}))}),r.length?f.all(r).then(function(){l(i)},_):l(!0)}function a(e,t){i===b&&g.$setValidity(e,t)}function l(e){i===b&&r(e)}b++;var i=b;if(!s()){l(!1);return}if(!o()){l(!1);return}u()},this.$commitViewValue=function(){var e=g.$viewValue;u.cancel(v);if(g.$$lastCommittedViewValue===e&&(e!==""||!g.$$hasNativeValidators))return;g.$$lastCommittedViewValue=e,g.$pristine&&this.$setDirty(),this.$$parseAndValidate()},this.$$parseAndValidate=function(){function u(){g.$modelValue!==s&&g.$$writeModelToScope()}var t=g.$$lastCommittedViewValue,r=t;m=H(r)?n:!0;if(m)for(var i=0;i<g.$parsers.length;i++){r=g.$parsers[i](r);if(H(r)){m=!1;break}}I(g.$modelValue)&&isNaN(g.$modelValue)&&(g.$modelValue=p(e));var s=g.$modelValue,o=g.$options&&g.$options.allowInvalid;g.$$rawModelValue=r,o&&(g.$modelValue=r,u()),g.$$runValidators(r,g.$$lastCommittedViewValue,function(e){o||(g.$modelValue=e?r:n,u())})},this.$$writeModelToScope=function(){d(e,g.$modelValue),x(g.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){g.$viewValue=e,(!g.$options||g.$options.updateOnDefault)&&g.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n=0,r=g.$options,i;r&&B(r.debounce)&&(i=r.debounce,I(i)?n=i:I(i[t])?n=i[t]:I(i["default"])&&(n=i["default"])),u.cancel(v),n?v=u(function(){g.$commitViewValue()},n):a.$$phase?g.$commitViewValue():e.$apply(function(){g.$commitViewValue()})},e.$watch(function(){var r=p(e);if(r!==g.$modelValue){g.$modelValue=g.$$rawModelValue=r,m=n;var i=g.$formatters,s=i.length,o=r;while(s--)o=i[s](o);g.$viewValue!==o&&(g.$viewValue=g.$$lastCommittedViewValue=o,g.$render(),g.$$runValidators(r,o,_))}return r})}],xo=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:So,priority:1,compile:function(n){return n.addClass(mo).addClass(yo).addClass(po),{pre:function(t,n,r,i){var s=i[0],o=i[1]||gs;s.$$setOptions(i[2]&&i[2].$options),o.$addControl(s),r.$observe("name",function(e){s.$name!==e&&o.$$renameControl(s,e)}),t.$on("$destroy",function(){o.$removeControl(s)})},post:function(n,r,i,s){var o=s[0];o.$options&&o.$options.updateOn&&r.on(o.$options.updateOn,function(e){o.$$debounceViewValueCommit(e&&e.type)}),r.on("blur",function(t){if(o.$touched)return;e.$$phase?n.$evalAsync(o.$setTouched):n.$apply(o.$setTouched)})}}}}}],To=/(\s+|^)default(\s+|$)/,No=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var r=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=G(this.$options.updateOn.replace(To,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Lo=ds({terminal:!0,priority:1e3}),Ao=["$locale","$interpolate",function(e,t){var n=/{}/g,r=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(i,s,u){function y(e){s.text(e||"")}var a=u.count,f=u.$attr.when&&s.attr(u.$attr.when),l=u.offset||0,c=i.$eval(f)||{},h={},p=t.startSymbol(),d=t.endSymbol(),v=p+a+"-"+l+d,m=b.noop,g;x(u,function(e,t){var n=r.exec(t);if(n){var i=(n[1]?"-":"")+o(n[2]);c[i]=s.attr(u.$attr[t])}}),x(c,function(e,r){h[r]=t(e.replace(n,v))}),i.$watch(a,function(n){var r=parseFloat(n),s=isNaN(r);!s&&!(r in c)&&(r=e.pluralCat(r-l)),r!==g&&(!s||!isNaN(g))&&(m(),m=i.$watch(h[r],y),g=r)})}}}],Oo=["$parse","$animate",function(e,i){var s="$$NG_REMOVED",o=r("ngRepeat"),u=function(e,t,n,r,i,s,o){e[n]=r,i&&(e[i]=s),e.$index=t,e.$first=t===0,e.$last=t===o-1,e.$middle=!e.$first&&!e.$last,e.$odd=!(e.$even=(t&1)===0)},a=function(e){return e.clone[0]},f=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(l,c){var p=c.ngRepeat,d=t.createComment(" end ngRepeat: "+p+" "),v=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!v)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var m=v[1],g=v[2],y=v[3],b=v[4];v=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!v)throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var w=v[3]||v[1],E=v[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var T,N,C,k,L={$id:jn};return b?T=e(b):(C=function(e,t){return jn(t)},k=function(e){return e}),function(t,r,l,c,v){T&&(N=function(e,n,r){return E&&(L[E]=e),L[w]=n,L.$index=r,T(t,L)});var m=Bt();t.$watchCollection(g,function(l){var c,g,b=r[0],T,L=Bt(),A,O,M,_,D,P,H,B,j;y&&(t[y]=l);if(S(l))P=l,D=N||C;else{D=N||k,P=[];for(var F in l)l.hasOwnProperty(F)&&F.charAt(0)!="$"&&P.push(F);P.sort()}A=P.length,B=new Array(A);for(c=0;c<A;c++){O=l===P?c:P[c],M=l[O],_=D(O,M,c);if(m[_])H=m[_],delete m[_],L[_]=H,B[c]=H;else{if(L[_])throw x(B,function(e){e&&e.scope&&(m[e.id]=e)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,_,M);B[c]={id:_,scope:n,clone:n},L[_]=!0}}for(var I in m){H=m[I],j=Ht(H.clone),i.leave(j);if(j[0].parentNode)for(c=0,g=j.length;c<g;c++)j[c][s]=!0;H.scope.$destroy()}for(c=0;c<A;c++){O=l===P?c:P[c],M=l[O],H=B[c];if(H.scope){T=b;do T=T.nextSibling;while(T&&T[s]);a(H)!=T&&i.move(Ht(H.clone),null,h(b)),b=f(H),u(H.scope,c,w,M,E,O,A)}else v(function(t,n){H.scope=n;var r=d.cloneNode(!1);t[t.length++]=r,i.enter(t,null,h(b)),b=r,H.clone=t,L[H.id]=H,u(H.scope,c,w,M,E,O,A)})}m=L})}}}}],Mo="ng-hide",_o="ng-hide-animate",Do=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(r){e[r?"removeClass":"addClass"](n,Mo,{tempClasses:_o})})}}}],Po=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(r){e[r?"addClass":"removeClass"](n,Mo,{tempClasses:_o})})}}}],Ho=ds(function(e,t,n){e.$watchCollection(n.ngStyle,function(n,r){r&&n!==r&&x(r,function(e,n){t.css(n,"")}),n&&t.css(n)})}),Bo=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,s){var o=i.ngSwitch||i.on,u=[],a=[],f=[],l=[],c=function(e,t){return function(){e.splice(t,1)}};n.$watch(o,function(r){var i,o;for(i=0,o=f.length;i<o;++i)e.cancel(f[i]);f.length=0;for(i=0,o=l.length;i<o;++i){var h=Ht(a[i].clone);l[i].$destroy();var p=f[i]=e.leave(h);p.then(c(f,i))}a.length=0,l.length=0,(u=s.cases["!"+r]||s.cases["?"])&&x(u,function(n){n.transclude(function(r,i){l.push(i);var s=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:r};a.push(o),e.enter(r,s.parent(),s)})})})}}}],jo=ds({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Fo=ds({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),Io=ds({restrict:"EAC",link:function(e,t,n,i,s){if(!s)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",dt(t));s(function(e){t.empty(),t.append(e)})}}),qo=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if(n.type=="text/ng-template"){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Ro=r("ngOptions"),Uo=P({restrict:"A",terminal:!0}),zo=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:_};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r=this,i={},o=s,u,a;r.databound=n.ngModel,r.init=function(e,t,n){o=e,u=t,a=n},r.addOption=function(t,n){Dt(t,'"option value"'),i[t]=!0,o.$viewValue==t&&(e.val(t),a.parent()&&a.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},r.removeOption=function(e){this.hasOption(e)&&(delete i[e],o.$viewValue===e&&this.renderUnknownOption(e))},r.renderUnknownOption=function(t){var n="? "+jn(t)+" ?";a.val(n),e.prepend(a),e.val(n),a.prop("selected",!0)},r.hasOption=function(e){return i.hasOwnProperty(e)},t.$on("$destroy",function(){r.renderUnknownOption=_})}],link:function(s,o,u,a){function C(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(w.parent()&&w.remove(),t.val(e),e===""&&m.prop("selected",!0)):H(e)&&m?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){w.parent()&&w.remove(),n.$setViewValue(t.val())})})}function k(e,t,n){var r;n.$render=function(){var e=new Fn(n.$viewValue);x(t.find("option"),function(t){t.selected=B(e.get(t.value))})},e.$watch(function(){ot(r,n.$viewValue)||(r=st(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];x(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function L(t,s,o){function M(e,n,r){return O[l]=r,w&&(O[w]=n),e(t,O)}function _(){t.$apply(function(){var e=N(t)||[],n;if(p)n=[],x(s.val(),function(t){t=k?L[t]:t,n.push(D(t,e[t]))});else{var r=k?L[s.val()]:s.val();n=D(r,e[r])}o.$setViewValue(n),I()})}function D(e,t){if(e==="?")return n;if(e==="")return null;var r=m?m:S;return M(r,e,t)}function P(){var e=N(t),n;if(e&&R(e)){n=new Array(e.length);for(var r=0,i=e.length;r<i;r++)n[r]=M(a,r,e[r]);return n}if(e){n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=M(a,s,e[s]))}return n}function H(e){var t;if(p)if(k&&R(e)){t=new Fn([]);for(var n=0;n<e.length;n++)t.put(M(k,null,e[n]),!0)}else t=new Fn(e);else k&&(e=M(k,null,e));return function(r,i){var s;return k?s=k:m?s=m:s=S,p?B(t.remove(M(s,r,i))):e===M(s,r,i)}}function j(){g||(t.$$postDigest(I),g=!0)}function F(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function I(){g=!1;var e={"":[]},n=[""],r,i,u,l,h,d,m=o.$viewValue,S=N(t)||[],C=w?T(S):S,_,D,P,j,I,q,R={},U,z=H(m),W=!1,X,V,$,J;L={};for(q=0;j=C.length,q<j;q++){_=q;if(w){_=C[q];if(_.charAt(0)==="$")continue}D=S[_],r=M(E,_,D)||"",(i=e[r])||(i=e[r]=[],n.push(r)),U=z(_,D),W=W||U,$=M(a,_,D),$=B($)?$:"",J=k?k(t,O):w?C[q]:q,k&&(L[J]=_),i.push({id:J,label:$,selected:U})}p||(v||m===null?e[""].unshift({id:"",label:"",selected:!W}):W||e[""].unshift({id:"?",label:"",selected:!0}));for(I=0,P=n.length;I<P;I++){r=n[I],i=e[r],A.length<=I?(l={element:b.clone().attr("label",r),label:i.label},h=[l],A.push(h),s.append(l.element)):(h=A[I],l=h[0],l.label!=r&&l.element.attr("label",l.label=r)),X=null;for(q=0,j=i.length;q<j;q++)u=i[q],(d=h[q+1])?(X=d.element,d.label!==u.label&&(F(R,d.label,!1),F(R,u.label,!0),X.text(d.label=u.label),X.prop("label",d.label)),d.id!==u.id&&X.val(d.id=u.id),X[0].selected!==u.selected&&(X.prop("selected",d.selected=u.selected),c&&X.prop("selected",d.selected))):(u.id===""&&v?V=v:(V=y.clone()).val(u.id).prop("selected",u.selected).attr("selected",u.selected).prop("label",u.label).text(u.label),h.push(d={element:V,label:u.label,id:u.id,selected:u.selected}),F(R,u.label,!0),X?X.after(V):l.element.append(V),X=V);q++;while(h.length>q)u=h.pop(),F(R,u.label,!1),u.element.remove()}while(A.length>I){i=A.pop();for(q=1;q<i.length;++q)F(R,i[q].label,!1);i[0].element.remove()}x(R,function(e,t){e>0?f.addOption(t):e<0&&f.removeOption(t)})}var u;if(!(u=d.match(i)))throw Ro("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",d,dt(s));var a=r(u[2]||u[1]),l=u[4]||u[6],h=/ as /.test(u[0])&&u[1],m=h?r(h):null,w=u[5],E=r(u[3]||""),S=r(u[2]?u[1]:l),N=r(u[7]),C=u[8],k=C?r(u[8]):null,L={},A=[[{element:s,label:""}]],O={};v&&(e(v)(t),v.removeClass("ng-scope"),v.remove()),s.empty(),s.on("change",_),o.$render=I,t.$watchCollection(N,j),t.$watchCollection(P,j),p&&t.$watchCollection(function(){return o.$modelValue},j)}if(!a[1])return;var f=a[0],l=a[1],p=u.multiple,d=u.ngOptions,v=!1,m,g=!1,y=h(t.createElement("option")),b=h(t.createElement("optgroup")),w=y.clone();for(var E=0,S=o.children(),N=S.length;E<N;E++)if(S[E].value===""){m=v=S.eq(E);break}f.init(l,v,w),p&&(l.$isEmpty=function(e){return!e||e.length===0}),d?L(s,o,l):p?k(s,o,l):C(s,o,l,f)}}}],Wo=["$interpolate",function(e){var t={addOption:_,removeOption:_};return{restrict:"E",priority:100,compile:function(n,r){if(H(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var s="$selectController",o=n.parent(),u=o.data(s)||o.parent().data(s);if(!u||!u.databound)u=t;i?e.$watch(i,function(t,i){r.$set("value",t),i!==t&&u.removeOption(i),u.addOption(t,n)}):u.addOption(r.value,n),n.on("$destroy",function(){u.removeOption(r.value)})}}}}],Xo=P({restrict:"E",terminal:!1}),Vo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()})}}},$o=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,s){if(!s)return;var o,u=i.ngPattern||i.pattern;i.$observe("pattern",function(e){F(e)&&e.length>0&&(e=new RegExp("^"+e+"$"));if(e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",u,e,dt(t));o=e||n,s.$validate()}),s.$validators.pattern=function(e){return s.$isEmpty(e)||H(o)||o.test(e)}}}},Jo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;var i=-1;n.$observe("maxlength",function(e){var t=O(e);i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}},Ko=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(!r)return;var i=0;n.$observe("minlength",function(e){i=O(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}};if(e.angular.bootstrap){console.log("WARNING: Tried to load angular more than once.");return}Ot(),Vt(b),h(t).ready(function(){St(t,xt)})}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),define("angular",["jquery"],function(e){return function(){var t,n;return t||e.angular}}(this)),function(e,t,n){function r(e,n){n=n||{},t.forEach(n,function(e,t){delete n[t]});for(var r in e)!e.hasOwnProperty(r)||"$"===r.charAt(0)&&"$"===r.charAt(1)||(n[r]=e[r]);return n}var i=t.$$minErr("$resource"),s=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;t.module("ngResource",["ng"]).provider("$resource",function(){var e=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(o,u){function a(t,n){this.template=t,this.defaults=p({},e.defaults,n),this.urlParams={}}function l(g,y,b,S){function x(e,t){var r={};return t=p({},y,t),h(t,function(t,o){m(t)&&(t=t());var u;if(t&&t.charAt&&"@"==t.charAt(0)){u=e;var a=t.substr(1);if(null==a||""===a||"hasOwnProperty"===a||!s.test("."+a))throw i("badmember",a);for(var a=a.split("."),f=0,l=a.length;f<l&&u!==n;f++){var c=a[f];u=null!==u?u[c]:n}}else u=t;r[o]=u}),r}function T(e){return e.resource}function N(e){r(e||{},this)}var k=new a(g,S);return b=p({},e.defaults.actions,b),N.prototype.toJSON=function(){var e=p({},this);return delete e.$promise,delete e.$resolved,e},h(b,function(e,s){var a=/^(POST|PUT|PATCH)$/i.test(e.method);N[s]=function(f,l,g,y){var b={},S,C,L;switch(arguments.length){case 4:L=y,C=g;case 3:case 2:if(!m(l)){b=f,S=l,C=g;break}if(m(f)){C=f,L=l;break}C=l,L=g;case 1:m(f)?C=f:a?S=f:b=f;break;case 0:break;default:throw i("badargs",arguments.length)}var A=this instanceof N,O=A?S:e.isArray?[]:new N(S),M={},_=e.interceptor&&e.interceptor.response||T,P=e.interceptor&&e.interceptor.responseError||n;return h(e,function(e,t){"params"!=t&&"isArray"!=t&&"interceptor"!=t&&(M[t]=v(e))}),a&&(M.data=S),k.setUrlParams(M,p({},x(S,e.params||{}),b),e.url),b=o(M).then(function(n){var o=n.data,u=O.$promise;if(o){if(t.isArray(o)!==!!e.isArray)throw i("badcfg",s,e.isArray?"array":"object",t.isArray(o)?"array":"object");e.isArray?(O.length=0,h(o,function(e){"object"==typeof e?O.push(new N(e)):O.push(e)})):(r(o,O),O.$promise=u)}return O.$resolved=!0,n.resource=O,n},function(e){return O.$resolved=!0,(L||c)(e),u.reject(e)}),b=b.then(function(e){var t=_(e);return(C||c)(t,e.headers),t},P),A?b:(O.$promise=b,O.$resolved=!1,O)},N.prototype["$"+s]=function(e,t,n){return m(e)&&(n=t,t=e,e={}),e=N[s].call(this,e,this,t,n),e.$promise||e}}),N.bind=function(e){return l(g,p({},y,e),b)},N}var c=t.noop,h=t.forEach,p=t.extend,v=t.copy,m=t.isFunction;return a.prototype={setUrlParams:function(e,n,r){var s=this,o=r||s.template,u,a,f=s.urlParams={};h(o.split(/\W/),function(e){if("hasOwnProperty"===e)throw i("badname");!/^\d+$/.test(e)&&e&&(new RegExp("(^|[^\\\\]):"+e+"(\\W|$)")).test(o)&&(f[e]=!0)}),o=o.replace(/\\:/g,":"),n=n||{},h(s.urlParams,function(e,r){u=n.hasOwnProperty(r)?n[r]:s.defaults[r],t.isDefined(u)&&null!==u?(a=encodeURIComponent(u).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),o=o.replace(new RegExp(":"+r+"(\\W|$)","g"),function(e,t){return a+t})):o=o.replace(new RegExp("(/?):"+r+"(\\W|$)","g"),function(e,t,n){return"/"==n.charAt(0)?n:t+n})}),s.defaults.stripTrailingSlashes&&(o=o.replace(/\/+$/,"")||"/"),o=o.replace(/\/\.(?=\w+($|\?))/,"."),e.url=o.replace(/\/\\\./,"/."),h(n,function(t,n){s.urlParams[n]||(e.params=e.params||{},e.params[n]=t)})}},l}]})}(window,window.angular),define("angular-resource",["angular"],function(){}),function(e,t,n){t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(e,n,r){r=r.ngAnimateChildren,t.isString(r)&&0===r.length?n.data("$$ngAnimateChildren",!0):e.$watch(r,function(e){n.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){t(n.offsetWidth)})}}]).config(["$provide","$animateProvider",function(r,i){function s(e){for(var t=0;t<e.length;t++){var n=e[t];if(1==n.nodeType)return n}}function o(e,t){return s(e)==s(t)}var u=t.noop,a=t.forEach,l=i.$$selectors,c=t.isArray,h=t.isString,p=t.isObject,d={running:!0},v;r.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,n,r,m,y,b,E,S,x,T){function N(e,t){var n=e.data("$$ngAnimateState")||{};return t&&(n.running=!0,n.structural=!0,e.data("$$ngAnimateState",n)),n.disabled||n.running&&n.structural}function C(e){var t,r=n.defer();return r.promise.$$cancelFn=function(){t&&t()},E.$$postDigest(function(){t=e(function(){r.resolve()})}),r.promise}function k(e){if(p(e))return e.tempClasses&&h(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e}function L(e,t,n){n=n||{};var r={};a(n,function(e,t){a(t.split(" "),function(t){r[t]=e})});var i=Object.create(null);a((e.attr("class")||"").split(/\s+/),function(e){i[e]=!0});var s=[],o=[];return a(t&&t.classes||[],function(e,t){var n=i[t],u=r[t]||{};!1===e?(n||"addClass"==u.event)&&o.push(t):!0===e&&(n&&"removeClass"!=u.event||s.push(t))}),0<s.length+o.length&&[s.join(" "),o.join(" ")]}function A(e){if(e){var t=[],n={};e=e.substr(1).split("."),(m.transitions||m.animations)&&t.push(r.get(l[""]));for(var i=0;i<e.length;i++){var s=e[i],o=l[s];o&&!n[s]&&(t.push(r.get(o)),n[s]=!0)}return t}}function O(e,n,r,i){function s(e,t){var n=e[t],r=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(n||r)return"leave"==t&&(r=n,n=null),S.push({event:t,fn:n}),b.push({event:t,fn:r}),!0}function o(t,n,s){var o=[];a(t,function(e){e.fn&&o.push(e)});var f=0;a(o,function(t,a){var l=function(){e:{if(n){(n[a]||u)();if(++f<o.length)break e;n=null}s()}};switch(t.event){case"setClass":n.push(t.fn(e,h,p,l,i));break;case"animate":n.push(t.fn(e,r,i.from,i.to,l));break;case"addClass":n.push(t.fn(e,h||r,l,i));break;case"removeClass":n.push(t.fn(e,p||r,l,i));break;default:n.push(t.fn(e,l,i))}}),n&&0===n.length&&s()}var l=e[0];if(l){i&&(i.to=i.to||{},i.from=i.from||{});var h,p;c(r)&&(h=r[0],p=r[1],h?p?r=h+" "+p:(r=h,n="addClass"):(r=p,n="removeClass"));var d="setClass"==n,v=d||"addClass"==n||"removeClass"==n||"animate"==n,m=e.attr("class")+" "+r;if(F(m)){var g=u,y=[],b=[],w=u,E=[],S=[],m=(" "+m).replace(/\s+/g,".");return a(A(m),function(e){!s(e,n)&&d&&(s(e,"addClass"),s(e,"removeClass"))}),{node:l,event:n,className:r,isClassBased:v,isSetClassOperation:d,applyStyles:function(){i&&e.css(t.extend(i.from||{},i.to||{}))},before:function(e){g=e,o(b,y,function(){g=u,e()})},after:function(e){w=e,o(S,E,function(){w=u,e()})},cancel:function(){y&&(a(y,function(e){(e||u)(!0)}),g(!0)),E&&(a(E,function(e){(e||u)(!0)}),w(!0))}}}}}function M(e,n,r,i,s,o,l,c){function h(t){var i="$animate:"+t;w&&w[i]&&0<w[i].length&&b(function(){r.triggerHandler(i,{event:e,className:n})})}function p(){h("before")}function d(){h("after")}function m(){m.hasBeenRun||(m.hasBeenRun=!0,o())}function g(){if(!g.hasBeenRun){y&&y.applyStyles(),g.hasBeenRun=!0,l&&l.tempClasses&&a(l.tempClasses,function(e){v.removeClass(r,e)});var t=r.data("$$ngAnimateState");t&&(y&&y.isClassBased?D(r,n):(b(function(){var t=r.data("$$ngAnimateState")||{};N==t.index&&D(r,n,e)}),r.data("$$ngAnimateState",t))),h("close"),c()}}var y=O(r,e,n,l);if(!y)return m(),p(),d(),g(),u;e=y.event,n=y.className;var w=t.element._data(y.node),w=w&&w.events;i||(i=s?s.parent():r.parent());if(P(r,i))return m(),p(),d(),g(),u;i=r.data("$$ngAnimateState")||{};var E=i.active||{},S=i.totalActive||0,x=i.last;s=!1;if(0<S){S=[];if(y.isClassBased)"setClass"==x.event?(S.push(x),D(r,n)):E[n]&&(T=E[n],T.event==e?s=!0:(S.push(T),D(r,n)));else if("leave"==e&&E["ng-leave"])s=!0;else{for(var T in E)S.push(E[T]);i={},D(r,!0)}0<S.length&&a(S,function(e){e.cancel()})}!y.isClassBased||y.isSetClassOperation||"animate"==e||s||(s="addClass"==e==r.hasClass(n));if(s)return m(),p(),d(),h("close"),c(),u;E=i.active||{},S=i.totalActive||0,"leave"==e&&r.one("$destroy",function(e){e=t.element(this);var n=e.data("$$ngAnimateState");n&&(n=n.active["ng-leave"])&&(n.cancel(),D(e,"ng-leave"))}),v.addClass(r,"ng-animate"),l&&l.tempClasses&&a(l.tempClasses,function(e){v.addClass(r,e)});var N=B++;return S++,E[n]=y,r.data("$$ngAnimateState",{last:y,active:E,index:N,totalActive:S}),p(),y.before(function(t){var i=r.data("$$ngAnimateState");t=t||!i||!i.active[n]||y.isClassBased&&i.active[n].event!=e,m(),!0===t?g():(d(),y.after(g))}),y.cancel}function _(e){if(e=s(e))e=t.isFunction(e.getElementsByClassName)?e.getElementsByClassName("ng-animate"):e.querySelectorAll(".ng-animate"),a(e,function(e){e=t.element(e),(e=e.data("$$ngAnimateState"))&&e.active&&a(e.active,function(e){e.cancel()})})}function D(e,t){if(o(e,y))d.disabled||(d.running=!1,d.structural=!1);else if(t){var n=e.data("$$ngAnimateState")||{},r=!0===t;!r&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]);if(r||!n.totalActive)v.removeClass(e,"ng-animate"),e.removeData("$$ngAnimateState")}}function P(e,n){if(d.disabled)return!0;if(o(e,y))return d.running;var r,i,s;do{if(0===n.length)break;var u=o(n,y),a=u?d:n.data("$$ngAnimateState")||{};if(a.disabled)return!0;u&&(s=!0),!1!==r&&(u=n.data("$$ngAnimateChildren"),t.isDefined(u)&&(r=u)),i=i||a.running||a.last&&!a.last.isClassBased}while(n=n.parent());return!s||!r&&i}v=T,y.data("$$ngAnimateState",d);var H=E.$watch(function(){return x.totalPendingRequests},function(e,t){0===e&&(H(),E.$$postDigest(function(){E.$$postDigest(function(){d.running=!1})}))}),B=0,j=i.classNameFilter(),F=j?function(e){return j.test(e)}:function(){return!0};return{animate:function(e,n,r,i,o){return i=i||"ng-inline-animate",o=k(o)||{},o.from=r?n:null,o.to=r?r:n,C(function(n){return M("animate",i,t.element(s(e)),null,null,u,o,n)})},enter:function(n,r,i,o){return o=k(o),n=t.element(n),r=r&&t.element(r),i=i&&t.element(i),N(n,!0),e.enter(n,r,i),C(function(e){return M("enter","ng-enter",t.element(s(n)),r,i,u,o,e)})},leave:function(n,r){return r=k(r),n=t.element(n),_(n),N(n,!0),C(function(i){return M("leave","ng-leave",t.element(s(n)),null,null,function(){e.leave(n)},r,i)})},move:function(n,r,i,o){return o=k(o),n=t.element(n),r=r&&t.element(r),i=i&&t.element(i),_(n),N(n,!0),e.move(n,r,i),C(function(e){return M("move","ng-move",t.element(s(n)),r,i,u,o,e)})},addClass:function(e,t,n){return this.setClass(e,t,[],n)},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},setClass:function(n,r,i,o){o=k(o),n=t.element(n),n=t.element(s(n));if(N(n))return e.$$setClassImmediately(n,r,i,o);var u,l=n.data("$$animateClasses"),h=!!l;return l||(l={classes:{}}),u=l.classes,r=c(r)?r:r.split(" "),a(r,function(e){e&&e.length&&(u[e]=!0)}),i=c(i)?i:i.split(" "),a(i,function(e){e&&e.length&&(u[e]=!1)}),h?(o&&l.options&&(l.options=t.extend(l.options||{},o)),l.promise):(n.data("$$animateClasses",l={classes:u,options:o}),l.promise=C(function(t){var r,i,o,u=s(n);u&&(r=n.data("$$animateClasses"),n.removeData("$$animateClasses"),o=n.parent(),i=u.parentNode);if(!(!i||i.$$NG_REMOVED||u.$$NG_REMOVED)){i=n.data("$$ngAnimateState")||{};var a=L(n,r,i.active);return a?M("setClass",a,n,o,null,function(){a[0]&&e.$$addClassImmediately(n,a[0]),a[1]&&e.$$removeClassImmediately(n,a[1])},r.options,t):t()}t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)D(t);else{var n=t.data("$$ngAnimateState")||{};n.disabled=!0,t.data("$$ngAnimateState",n)}break;case 1:d.disabled=!e;break;default:e=!d.disabled}return!!e}}}]),i.register("",["$window","$sniffer","$timeout","$$animateReflow",function(r,i,o,l){function p(){F||(F=l(function(){j=[],F=null,H={}}))}function d(e,t){F&&F(),j.push(t),F=l(function(){a(j,function(e){e()}),j=[],F=null,H={}})}function m(e,n){var r=s(e);e=t.element(r),R.push(e),r=Date.now()+n,r<=q||(o.cancel(I),q=r,I=o(function(){y(R),R=[]},n,!1))}function y(e){a(e,function(e){(e=e.data("$$ngAnimateCSS3Data"))&&a(e.closeAnimationFns,function(e){e()})})}function b(e,t){var n=t?H[t]:null;if(!n){var i=0,s=0,o=0,u=0;a(e,function(e){if(1==e.nodeType){e=r.getComputedStyle(e)||{},i=Math.max(w(e[M+"Duration"]),i),s=Math.max(w(e[M+"Delay"]),s),u=Math.max(w(e[D+"Delay"]),u);var t=w(e[D+"Duration"]);0<t&&(t*=parseInt(e[D+"IterationCount"],10)||1),o=Math.max(t,o)}}),n={total:0,transitionDelay:s,transitionDuration:i,animationDelay:u,animationDuration:o},t&&(H[t]=n)}return n}function w(e){var t=0;return e=h(e)?e.split(/\s*,\s*/):[],a(e,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function E(e,t,n,r){e=0<=["ng-enter","ng-leave","ng-move"].indexOf(n);var i,o=t.parent(),u=o.data("$$ngAnimateKey");u||(o.data("$$ngAnimateKey",++B),u=B),i=u+"-"+s(t).getAttribute("class");var o=i+" "+n,u=H[o]?++H[o].total:0,a={};if(0<u){var f=n+"-stagger",a=i+" "+f;(i=!H[a])&&v.addClass(t,f),a=b(t,a),i&&v.removeClass(t,f)}v.addClass(t,n);var f=t.data("$$ngAnimateCSS3Data")||{},l=b(t,o);return i=l.transitionDuration,l=l.animationDuration,e&&0===i&&0===l?(v.removeClass(t,n),!1):(n=r||e&&0<i,e=0<l&&0<a.animationDelay&&0===a.animationDuration,t.data("$$ngAnimateCSS3Data",{stagger:a,cacheKey:o,running:f.running||0,itemIndex:u,blockTransition:n,closeAnimationFns:f.closeAnimationFns||[]}),o=s(t),n&&(x(o,!0),r&&t.css(r)),e&&(o.style[D+"PlayState"]="paused"),!0)}function S(e,t,n,r,i){function u(){t.off(k,f),v.removeClass(t,c),v.removeClass(t,h),A&&o.cancel(A),L(t,n);var e=s(t),r;for(r in p)e.style.removeProperty(p[r])}function f(e){e.stopPropagation();var t=e.originalEvent||e;e=t.$manualTimeStamp||t.timeStamp||Date.now(),t=parseFloat(t.elapsedTime.toFixed(3)),Math.max(e-C,0)>=N&&t>=T&&r()}var l=s(t);e=t.data("$$ngAnimateCSS3Data");if(-1!=l.getAttribute("class").indexOf(n)&&e){var c="",h="";a(n.split(" "),function(e,t){var n=(0<t?" ":"")+e;c+=n+"-active",h+=n+"-pending"});var p=[],d=e.itemIndex,y=e.stagger,w=0;if(0<d){w=0,0<y.transitionDelay&&0===y.transitionDuration&&(w=y.transitionDelay*d);var E=0;0<y.animationDelay&&0===y.animationDuration&&(E=y.animationDelay*d,p.push(O+"animation-play-state")),w=Math.round(100*Math.max(w,E))/100}w||(v.addClass(t,c),e.blockTransition&&x(l,!1));var S=b(t,e.cacheKey+" "+c),T=Math.max(S.transitionDuration,S.animationDuration);if(0!==T){!w&&i&&0<Object.keys(i).length&&(S.transitionDuration||(t.css("transition",S.animationDuration+"s linear all"),p.push("transition")),t.css(i));var d=Math.max(S.transitionDelay,S.animationDelay),N=1e3*d;0<p.length&&(y=l.getAttribute("style")||"",";"!==y.charAt(y.length-1)&&(y+=";"),l.setAttribute("style",y+" "));var C=Date.now(),k=P+" "+_,d=1e3*(w+1.5*(d+T)),A;return 0<w&&(v.addClass(t,h),A=o(function(){A=null,0<S.transitionDuration&&x(l,!1),0<S.animationDuration&&(l.style[D+"PlayState"]=""),v.addClass(t,c),v.removeClass(t,h),i&&(0===S.transitionDuration&&t.css("transition",S.animationDuration+"s linear all"),t.css(i),p.push("transition"))},1e3*w,!1)),t.on(k,f),e.closeAnimationFns.push(function(){u(),r()}),e.running++,m(t,d),u}v.removeClass(t,c),L(t,n),r()}else r()}function x(e,t){e.style[M+"Property"]=t?"none":""}function T(e,t,n,r){if(E(e,t,n,r))return function(e){e&&L(t,n)}}function C(e,t,n,r,i){if(t.data("$$ngAnimateCSS3Data"))return S(e,t,n,r,i);L(t,n),r()}function k(e,t,n,r,i){var s=T(e,t,n,i.from);if(s){var o=s;return d(t,function(){o=C(e,t,n,r,i.to)}),function(e){(o||u)(e)}}p(),r()}function L(e,t){v.removeClass(e,t);var n=e.data("$$ngAnimateCSS3Data");n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData("$$ngAnimateCSS3Data"))}function A(e,t){var n="";return e=c(e)?e:e.split(/\s+/),a(e,function(e,r){e&&0<e.length&&(n+=(0<r?" ":"")+e+t)}),n}var O="",M,_,D,P;e.ontransitionend===n&&e.onwebkittransitionend!==n?(O="-webkit-",M="WebkitTransition",_="webkitTransitionEnd transitionend"):(M="transition",_="transitionend"),e.onanimationend===n&&e.onwebkitanimationend!==n?(O="-webkit-",D="WebkitAnimation",P="webkitAnimationEnd animationend"):(D="animation",P="animationend");var H={},B=0,j=[],F,I=null,q=0,R=[];return{animate:function(e,t,n,r,i,s){return s=s||{},s.from=n,s.to=r,k("animate",e,t,i,s)},enter:function(e,t,n){return n=n||{},k("enter",e,"ng-enter",t,n)},leave:function(e,t,n){return n=n||{},k("leave",e,"ng-leave",t,n)},move:function(e,t,n){return n=n||{},k("move",e,"ng-move",t,n)},beforeSetClass:function(e,t,n,r,i){i=i||{},t=A(n,"-remove")+" "+A(t,"-add");if(i=T("setClass",e,t,i.from))return d(e,r),i;p(),r()},beforeAddClass:function(e,t,n,r){r=r||{};if(t=T("addClass",e,A(t,"-add"),r.from))return d(e,n),t;p(),n()},beforeRemoveClass:function(e,t,n,r){r=r||{};if(t=T("removeClass",e,A(t,"-remove"),r.from))return d(e,n),t;p(),n()},setClass:function(e,t,n,r,i){return i=i||{},n=A(n,"-remove"),t=A(t,"-add"),C("setClass",e,n+" "+t,r,i.to)},addClass:function(e,t,n,r){return r=r||{},C("addClass",e,A(t,"-add"),n,r.to)},removeClass:function(e,t,n,r){return r=r||{},C("removeClass",e,A(t,"-remove"),n,r.to)}}}])}])}(window,window.angular),define("angular-animate",["angular"],function(){}),!function(e,t){return"function"==typeof define&&define.amd?void define("angular-ngtable",["angular"],function(e){return t(e)}):t(e)}(angular||null,function(e){var t=e.module("ngTable",[]);return t.value("ngTableDefaults",{params:{},settings:{}}),t.factory("NgTableParams",["$q","$log","ngTableDefaults",function(t,n,r){var i=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},s=function(s,o){var u=this,f=function(){h.debugMode&&n.debug&&n.debug.apply(this,arguments)};this.data=[],this.parameters=function(t,n){if(n=n||!1,e.isDefined(t)){for(var r in t){var s=t[r];if(n&&r.indexOf("[")>=0){for(var o=r.split(/\[(.*)\]/).reverse(),u="",c=0,h=o.length;h>c;c++){var p=o[c];if(""!==p){var d=s;s={},s[u=p]=i(d)?parseFloat(d):d}}"sorting"===u&&(l[u]={}),l[u]=e.extend(l[u]||{},s[u])}else l[r]=i(t[r])?parseFloat(t[r]):t[r]}return f("ngTable: set parameters",l),this}return l},this.settings=function(t){return e.isDefined(t)?(e.isArray(t.data)&&(t.total=t.data.length),h=e.extend(h,t),f("ngTable: set settings",h),this):h},this.page=function(t){return e.isDefined(t)?this.parameters({page:t}):l.page},this.total=function(t){return e.isDefined(t)?this.settings({total:t}):h.total},this.count=function(t){return e.isDefined(t)?this.parameters({count:t,page:1}):l.count},this.filter=function(t){return e.isDefined(t)?this.parameters({filter:t,page:1}):l.filter},this.sorting=function(t){if(2==arguments.length){var n={};return n[t]=arguments[1],this.parameters({sorting:n}),this}return e.isDefined(t)?this.parameters({sorting:t}):l.sorting},this.isSortBy=function(t,n){return e.isDefined(l.sorting[t])&&e.equals(l.sorting[t],n)},this.orderBy=function(){var e=[];for(var t in l.sorting)e.push(("asc"===l.sorting[t]?"+":"-")+t);return e},this.getData=function(t,n){return t.resolve(e.isArray(this.data)&&e.isObject(n)?this.data.slice((n.page()-1)*n.count(),n.page()*n.count()):[]),t.promise},this.getGroups=function(n,r){var i=t.defer();return i.promise.then(function(t){var i={};e.forEach(t,function(t){var n=e.isFunction(r)?r(t):t[r];i[n]=i[n]||{data:[]},i[n].value=n,i[n].data.push(t)});var s=[];for(var o in i)s.push(i[o]);f("ngTable: refresh groups",s),n.resolve(s)}),this.getData(i,u)},this.generatePagesArray=function(e,t,n){var r,i,s,o,u,a;if(r=11,a=[],u=Math.ceil(t/n),u>1){a.push({type:"prev",number:Math.max(1,e-1),active:e>1}),a.push({type:"first",number:1,active:e>1,current:1===e}),s=Math.round((r-5)/2),o=Math.max(2,e-s),i=Math.min(u-1,e+2*s-(e-o)),o=Math.max(2,o-(2*s-(i-o)));for(var f=o;i>=f;)a.push(f===o&&2!==f||f===i&&f!==u-1?{type:"more",active:!1}:{type:"page",number:f,active:e!==f,current:e===f}),f++;a.push({type:"last",number:u,active:e!==u,current:e===u}),a.push({type:"next",number:Math.min(u,e+1),active:u>e})}return a},this.url=function(t){t=t||!1;var n=t?[]:{};for(var r in l)if(l.hasOwnProperty(r)){var i=l[r],s=encodeURIComponent(r);if("object"==typeof i){for(var o in i)if(!e.isUndefined(i[o])&&""!==i[o]){var u=s+"["+encodeURIComponent(o)+"]";t?n.push(u+"="+i[o]):n[u]=i[o]}}else e.isFunction(i)||e.isUndefined(i)||""===i||(t?n.push(s+"="+encodeURIComponent(i)):n[s]=encodeURIComponent(i))}return n},this.reload=function(){var e=t.defer(),n=this,r=null;if(h.$scope)return h.$loading=!0,r=h.groupBy?h.getGroups(e,h.groupBy,this):h.getData(e,this),f("ngTable: reload data"),r||(r=e.promise),r.then(function(e){return h.$loading=!1,f("ngTable: current scope",h.$scope),h.groupBy?(n.data=e,h.$scope&&(h.$scope.$groups=e)):(n.data=e,h.$scope&&(h.$scope.$data=e)),h.$scope&&(h.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())),h.$scope.$emit("ngTableAfterReloadData"),e})},this.reloadPages=function(){var e=this;h.$scope.pages=e.generatePagesArray(e.page(),e.total(),e.count())};var l=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null};e.extend(l,r.params);var h={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],sortingIndicator:"span",getGroups:this.getGroups,getData:this.getData};return e.extend(h,r.settings),this.settings(o),this.parameters(s,!0),this};return s}]),t.factory("ngTableParams",["NgTableParams",function(e){return e}]),t.controller("ngTableController",["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","ngTableColumn",function(t,n,r,i,s,o,u,f){function l(){t.params.$params.page=1}var c=!0;t.$filterRow={},t.$loading=!1,t.hasOwnProperty("params")||(t.params=new n,t.params.isNullInstance=!0),t.params.settings().$scope=t;var h=function(){var e=0;return function(t,n){r.cancel(e),e=r(t,n)}}();t.$watch("params.$params",function(n,r){if(n!==r){if(t.params.settings().$scope=t,e.equals(n.filter,r.filter))t.params.reload();else{var i=c?e.noop:l;h(function(){i(),t.params.reload()},t.params.settings().filterDelay)}t.params.isNullInstance||(c=!1)}},!0),this.compileDirectiveTemplates=function(){if(!u.hasClass("ng-table")){t.templates={header:o.templateHeader?o.templateHeader:"ng-table/header.html",pagination:o.templatePagination?o.templatePagination:"ng-table/pager.html"},u.addClass("ng-table");var n=null;0===u.find("> thead").length&&(n=e.element(document.createElement("thead")).attr("ng-include","templates.header"),u.prepend(n));var r=e.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});u.after(r),n&&s(n)(t),s(r)(t)}},this.loadFilterData=function(n){e.forEach(n,function(n){var r;return r=n.filterData(t,{$column:n}),r?e.isObject(r)&&e.isObject(r.promise)?(delete n.filterData,r.promise.then(function(t){e.isArray(t)||e.isFunction(t)||e.isObject(t)?e.isArray(t)&&t.unshift({title:"-",id:""}):t=[],n.data=t})):n.data=r:void delete n.filterData})},this.buildColumns=function(e){return e.map(function(e){return f.buildColumn(e,t)})},this.setupBindingsToInternalScope=function(n){var r=i(n);t.$watch(r,function(n){e.isUndefined(n)||(t.paramsModel=r,t.params=n)},!1),o.showFilter&&t.$parent.$watch(o.showFilter,function(e){t.show_filter=e}),o.disableFilter&&t.$parent.$watch(o.disableFilter,function(e){t.$filterRow.disabled=e})},t.sortBy=function(e,n){var r=e.sortable&&e.sortable();if(r){var i=t.params.settings().defaultSort,s="asc"===i?"desc":"asc",o=t.params.sorting()&&t.params.sorting()[r]&&t.params.sorting()[r]===i,u=n.ctrlKey||n.metaKey?t.params.sorting():{};u[r]=o?s:i,t.params.parameters({sorting:u})}}}]),t.factory("ngTableColumn",[function(){function t(t,r){var i=Object.create(t);for(var s in n)void 0===i[s]&&(i[s]=n[s]),e.isFunction(i[s])||!function(e){i[e]=function(){return t[e]}}(s),function(e){var n=i[e];i[e]=function(){return 0===arguments.length?n.call(t,r):n.apply(t,arguments)}}(s);return i}var n={"class":function(){return""},filter:function(){return!1},filterData:e.noop,headerTemplateURL:function(){return!1},headerTitle:function(){return" "},sortable:function(){return!1},show:function(){return!0},title:function(){return" "},titleAlt:function(){return""}};return{buildColumn:t}}]),t.directive("ngTable",["$q","$parse",function(t,n){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(t){var r=[],i=0,s=null;return e.forEach(e.element(t.find("tr")),function(t){t=e.element(t),t.hasClass("ng-table-group")||s||(s=t)}),s?(e.forEach(s.find("td"),function(t){var s=e.element(t);if(!s.attr("ignore-cell")||"true"!==s.attr("ignore-cell")){var o=function(e){return s.attr("x-data-"+e)||s.attr("data-"+e)||s.attr(e)},u=function(t){var i=o(t);return i?function(t,s){return n(i)(t,e.extend(s||{},{$columns:r}))}:void 0},f=o("title-alt")||o("title");f&&s.attr("data-title-text","{{"+f+"}}"),r.push({id:i++,title:u("title"),titleAlt:u("title-alt"),headerTitle:u("header-title"),sortable:u("sortable"),"class":u("header-class"),filter:u("filter"),headerTemplateURL:u("header"),filterData:u("filter-data"),show:s.attr("ng-show")?function(e){return n(s.attr("ng-show"))(e)}:void 0})}}),function(e,t,n,i){e.$columns=r=i.buildColumns(r),i.setupBindingsToInternalScope(n.ngTable),i.loadFilterData(r),i.compileDirectiveTemplates()}):void 0}}}]),t.directive("ngTableDynamic",["$parse",function(t){function n(e){if(!e||e.indexOf(" with ")>-1){var t=e.split(/\s+with\s+/);return{tableParams:t[0],columns:t[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")}return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(r){var i;return e.forEach(e.element(r.find("tr")),function(t){t=e.element(t),t.hasClass("ng-table-group")||i||(i=t)}),i?(e.forEach(i.find("td"),function(t){var n=e.element(t),r=function(e){return n.attr("x-data-"+e)||n.attr("data-"+e)||n.attr(e)},i=r("title");i||n.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}");var s=n.attr("ng-show");s||n.attr("ng-show","$columns[$index].show(this)")}),function(e,r,i,s){var o=n(i.ngTableDynamic),u=t(o.columns)(e)||[];e.$columns=s.buildColumns(u),s.setupBindingsToInternalScope(o.tableParams),s.loadFilterData(e.$columns),s.compileDirectiveTemplates()}):void 0}}}]),t.directive("ngTablePagination",["$compile",function(t){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(n,r){n.params.settings().$scope.$on("ngTableAfterReloadData",function(){n.pages=n.params.generatePagesArray(n.params.page(),n.params.total(),n.params.count())},!0),n.$watch("templateUrl",function(i){if(!e.isUndefined(i)){var s=e.element(document.createElement("div"));s.attr({"ng-include":"templateUrl"}),r.append(s),t(s)(n)}})}}}]),e.module("ngTable").run(["$templateCache",function(e){e.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{name}}"> </select>'),e.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{name}}"> </select>'),e.put("ng-table/filters/text.html",'<input type="text" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),e.put("ng-table/header.html",'<tr> <th title="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" ng-class="{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\' }" ng-click="sortBy($column, $event)" ng-show="$column.show(this)" ng-init="template=$column.headerTemplateURL(this)" class="header {{$column.class(this)}}"> <div ng-if="!template" ng-show="!template" class="ng-table-header" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'div\'}"> <span ng-bind="$column.title(this)" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'span\'}"></span> </div> <div ng-if="template" ng-show="template" ng-include="template"></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-show="$column.show(this)" class="filter"> <div ng-repeat="(name, filter) in $column.filter(this)"> <div ng-if="filter.indexOf(\'/\') !==-1" ng-include="filter"></div> <div ng-if="filter.indexOf(\'/\')===-1" ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </th> </tr> '),e.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager" ng-if="params.data.length"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> ')}]),t}),function(){var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var n=t.which;switch(n){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)}};angular.element.prototype.querySelectorAll===undefined&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),angular.element.prototype.closest===undefined&&(angular.element.prototype.closest=function(e){var t=this[0],n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;while(t){if(n.bind(t)(e))return t;t=t.parentElement}return!1});var t=0,n=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,generateId:function(){return t++},appendToBody:!1}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),n=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(n)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,n,r,i){i(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n&&t?t.replace(new RegExp(e(n),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);n.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile",function(e,t,n,r){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var n=t.parent().attr("theme")||e.theme;return n+"/choices.tpl.html"},compile:function(i,s){if(!s.repeat)throw n("repeat","Expected 'repeat' expression.");return function(s,o,u,a,f){var l=u.groupBy;a.parseRepeatAttr(u.repeat,l),a.disableChoiceExpression=u.uiDisableChoice,a.onHighlightCallback=u.onHighlight;if(l){var c=o.querySelectorAll(".ui-select-choices-group");if(c.length!==1)throw n("rows","Expected 1 .ui-select-choices-group but got '{0}'.",c.length);c.attr("ng-repeat",t.getGroupNgRepeatExpression())}var h=o.querySelectorAll(".ui-select-choices-row");if(h.length!==1)throw n("rows","Expected 1 .ui-select-choices-row but got '{0}'.",h.length);h.attr("ng-repeat",t.getNgRepeatExpression(a.parserResult.itemName,"$select.items",a.parserResult.trackByExp,l)).attr("ng-if","$select.open").attr("ng-mouseenter","$select.setActiveItem("+a.parserResult.itemName+")").attr("ng-click","$select.select("+a.parserResult.itemName+",false,$event)");var p=o.querySelectorAll(".ui-select-choices-row-inner");if(p.length!==1)throw n("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",p.length);p.attr("uis-transclude-append",""),r(o,f)(s),s.$watch("$select.search",function(e){e&&!a.open&&a.multiple&&a.activate(!1,!0),a.activeIndex=a.tagging.isActivated?-1:0,a.refresh(u.refresh)}),u.$observe("refreshDelay",function(){var t=s.$eval(u.refreshDelay);a.refreshDelay=t!==undefined?t:e.refreshDelay})}}}}]),n.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig",function(t,n,r,i,s,o,u){function l(){if(a.resetSearchInput||a.resetSearchInput===undefined&&u.resetSearchInput)a.search=f,a.selected&&a.items.length&&!a.multiple&&(a.activeIndex=a.items.indexOf(a.selected))}function p(t){var n=!0;switch(t){case e.DOWN:!a.open&&a.multiple?a.activate(!1,!0):a.activeIndex<a.items.length-1&&a.activeIndex++;break;case e.UP:!a.open&&a.multiple?a.activate(!1,!0):(a.activeIndex>0||a.search.length===0&&a.tagging.isActivated&&a.activeIndex>-1)&&a.activeIndex--;break;case e.TAB:(!a.multiple||a.open)&&a.select(a.items[a.activeIndex],!0);break;case e.ENTER:a.open&&a.activeIndex>=0?a.select(a.items[a.activeIndex]):a.activate(!1,!0);break;case e.ESC:a.close();break;default:n=!1}return n}function d(){var e=n.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw o("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(a.activeIndex<0)return;var r=t[a.activeIndex],i=r.offsetTop+r.clientHeight-e[0].scrollTop,s=e[0].offsetHeight;i>s?e[0].scrollTop+=i-s:i<r.clientHeight&&(a.isGrouped&&a.activeIndex===0?e[0].scrollTop=0:e[0].scrollTop-=r.clientHeight-i)}var a=this,f="";a.placeholder=u.placeholder,a.searchEnabled=u.searchEnabled,a.sortable=u.sortable,a.refreshDelay=u.refreshDelay,a.removeSelected=!1,a.closeOnSelect=!0,a.search=f,a.activeIndex=0,a.items=[],a.open=!1,a.focus=!1,a.disabled=!1,a.selected=undefined,a.focusser=undefined,a.resetSearchInput=!0,a.multiple=undefined,a.disableChoiceExpression=undefined,a.tagging={isActivated:!1,fct:undefined},a.taggingTokens={isActivated:!1,tokens:undefined},a.lockChoiceExpression=undefined,a.clickTriggeredSelect=!1,a.$filter=i,a.searchInput=n.querySelectorAll("input.ui-select-search");if(a.searchInput.length!==1)throw o("searchInput","Expected 1 input.ui-select-search but got '{0}'.",a.searchInput.length);a.isEmpty=function(){return angular.isUndefined(a.selected)||a.selected===null||a.selected===""},a.activate=function(e,n){!a.disabled&&!a.open&&(n||l(),t.$broadcast("uis:activate"),a.open=!0,a.activeIndex=a.activeIndex>=a.items.length?0:a.activeIndex,a.activeIndex===-1&&a.taggingLabel!==!1&&(a.activeIndex=0),r(function(){a.search=e||a.search,a.searchInput[0].focus()}))},a.findGroupByName=function(e){return a.groups&&a.groups.filter(function(t){return t.name===e})[0]},a.parseRepeatAttr=function(e,n){function r(e){a.groups=[],angular.forEach(e,function(e){var r=t.$eval(n),i=angular.isFunction(r)?r(e):e[r],s=a.findGroupByName(i);s?s.items.push(e):a.groups.push({name:i,items:[e]})}),a.items=[],a.groups.forEach(function(e){a.items=a.items.concat(e.items)})}function i(e){a.items=e}a.setItemsFn=n?r:i,a.parserResult=s.parse(e),a.isGrouped=!!n,a.itemProperty=a.parserResult.itemName,a.refreshItems=function(e){e=e||a.parserResult.source(t);var n=a.selected;if(angular.isArray(n)&&!n.length||!a.removeSelected)a.setItemsFn(e);else if(e!==undefined){var r=e.filter(function(e){return n.indexOf(e)<0});a.setItemsFn(r)}},t.$watchCollection(a.parserResult.source,function(e){if(e===undefined||e===null)a.items=[];else{if(!angular.isArray(e))throw o("items","Expected an array but got '{0}'.",e);a.refreshItems(e),a.ngModel.$modelValue=null}})};var c;a.refresh=function(e){e!==undefined&&(c&&r.cancel(c),c=r(function(){t.$eval(e)},a.refreshDelay))},a.setActiveItem=function(e){a.activeIndex=a.items.indexOf(e)},a.isActive=function(e){if(!a.open)return!1;var t=a.items.indexOf(e[a.itemProperty]),n=t===a.activeIndex;return!n||t<0&&a.taggingLabel!==!1||t<0&&a.taggingLabel===!1?!1:(n&&!angular.isUndefined(a.onHighlightCallback)&&e.$eval(a.onHighlightCallback),n)},a.isDisabled=function(e){if(!a.open)return;var t=a.items.indexOf(e[a.itemProperty]),n=!1,r;return t>=0&&!angular.isUndefined(a.disableChoiceExpression)&&(r=a.items[t],n=!!e.$eval(a.disableChoiceExpression),r._uiSelectChoiceDisabled=n),n},a.select=function(e,n,i){if(e===undefined||!e._uiSelectChoiceDisabled){if(!a.items&&!a.search)return;if(!e||!e._uiSelectChoiceDisabled){if(a.tagging.isActivated){if(a.taggingLabel===!1)if(a.activeIndex<0){e=a.tagging.fct!==undefined?a.tagging.fct(a.search):a.search;if(!e||angular.equals(a.items[0],e))return}else e=a.items[a.activeIndex];else if(a.activeIndex===0){if(e===undefined)return;if(a.tagging.fct!==undefined&&typeof e=="string"){e=a.tagging.fct(a.search);if(!e)return}else typeof e=="string"&&(e=e.replace(a.taggingLabel,"").trim())}if(a.selected&&angular.isArray(a.selected)&&a.selected.filter(function(t){return angular.equals(t,e)}).length>0){a.close(n);return}}t.$broadcast("uis:select",e);var s={};s[a.parserResult.itemName]=e,r(function(){a.onSelectCallback(t,{$item:e,$model:a.parserResult.modelMapper(t,s)})}),a.closeOnSelect&&a.close(n),i&&i.type==="click"&&(a.clickTriggeredSelect=!0)}}},a.close=function(e){if(!a.open)return;a.ngModel&&a.ngModel.$setTouched&&a.ngModel.$setTouched(),l(),a.open=!1,t.$broadcast("uis:close",e)},a.setFocus=function(){a.focus||a.focusInput[0].focus()},a.clear=function(e){a.select(undefined),e.stopPropagation(),a.focusser[0].focus()},a.toggle=function(e){a.open?(a.close(),e.preventDefault(),e.stopPropagation()):a.activate()},a.isLocked=function(e,t){var n,r=a.selected[t];return r&&!angular.isUndefined(a.lockChoiceExpression)&&(n=!!e.$eval(a.lockChoiceExpression),r._uiSelectChoiceLocked=n),n};var h=null;a.sizeSearchInput=function(){var e=a.searchInput[0],n=a.searchInput.parent().parent()[0],i=function(){return n.clientWidth*!!e.offsetParent},s=function(t){if(t===0)return!1;var n=t-e.offsetLeft-10;return n<50&&(n=t),a.searchInput.css("width",n+"px"),!0};a.searchInput.css("width","10px"),r(function(){h===null&&!s(i())&&(h=t.$watch(i,function(e){s(e)&&(h(),h=null)}))})},a.searchInput.on("keydown",function(n){var i=n.which;t.$apply(function(){var t=!1;if(a.items.length>0||a.tagging.isActivated){p(i);if(a.taggingTokens.isActivated){for(var s=0;s<a.taggingTokens.tokens.length;s++)a.taggingTokens.tokens[s]===e.MAP[n.keyCode]&&a.search.length>0&&(t=!0);t&&r(function(){a.searchInput.triggerHandler("tagged");var t=a.search.replace(e.MAP[n.keyCode],"").trim();a.tagging.fct&&(t=a.tagging.fct(t)),t&&a.select(t,!0)})}}}),e.isVerticalMovement(i)&&a.items.length>0&&d()}),a.searchInput.on("paste",function(e){var t=e.originalEvent.clipboardData.getData("text/plain");if(t&&t.length>0&&a.taggingTokens.isActivated&&a.tagging.fct){var n=t.split(a.taggingTokens.tokens[0]);n&&n.length>0&&(angular.forEach(n,function(e){var t=a.tagging.fct(e);t&&a.select(t,!0)}),e.preventDefault(),e.stopPropagation())}}),a.searchInput.on("tagged",function(){r(function(){l()})}),t.$on("$destroy",function(){a.searchInput.off("keyup keydown tagged blur paste")})}]),n.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,n,r,i,s,o){return{restrict:"EA",templateUrl:function(e,n){var r=n.theme||t.theme;return r+(angular.isDefined(n.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(i,u){return angular.isDefined(u.multiple)?i.append("<ui-select-multiple/>").removeAttr("multiple"):i.append("<ui-select-single/>"),function(i,u,a,f,l){function p(e){if(!c.open)return;var t=!1;window.jQuery?t=window.jQuery.contains(u[0],e.target):t=u[0].contains(e.target);if(!t&&!c.clickTriggeredSelect){var n=["input","button","textarea"],r=angular.element(e.target).scope(),s=r&&r.$select&&r.$select!==c;s||(s=~n.indexOf(e.target.tagName.toLowerCase())),c.close(s),i.$digest()}c.clickTriggeredSelect=!1}function g(){var t=r(u);v=angular.element('<div class="ui-select-placeholder"></div>'),v[0].style.width=t.width+"px",v[0].style.height=t.height+"px",u.after(v),m=u[0].style.width,e.find("body").append(u),u[0].style.position="absolute",u[0].style.left=t.left+"px",u[0].style.top=t.top+"px",u[0].style.width=t.width+"px"}function y(){if(v===null)return;v.replaceWith(u),v=null,u[0].style.position="",u[0].style.left="",u[0].style.top="",u[0].style.width=m}var c=f[0],h=f[1];c.generatedId=t.generateId(),c.baseTitle=a.title||"Select box",c.focusserTitle=c.baseTitle+" focus",c.focusserId="focusser-"+c.generatedId,c.closeOnSelect=function(){return angular.isDefined(a.closeOnSelect)?s(a.closeOnSelect)():t.closeOnSelect}(),c.onSelectCallback=s(a.onSelect),c.onRemoveCallback=s(a.onRemove),c.ngModel=h,c.choiceGrouped=function(e){return c.isGrouped&&e&&e.name},a.tabindex&&a.$observe("tabindex",function(e){c.focusInput.attr("tabindex",e),u.removeAttr("tabindex")}),i.$watch("searchEnabled",function(){var e=i.$eval(a.searchEnabled);c.searchEnabled=e!==undefined?e:t.searchEnabled}),i.$watch("sortable",function(){var e=i.$eval(a.sortable);c.sortable=e!==undefined?e:t.sortable}),a.$observe("disabled",function(){c.disabled=a.disabled!==undefined?a.disabled:!1}),a.$observe("resetSearchInput",function(){var e=i.$eval(a.resetSearchInput);c.resetSearchInput=e!==undefined?e:!0}),a.$observe("tagging",function(){if(a.tagging!==undefined){var e=i.$eval(a.tagging);c.tagging={isActivated:!0,fct:e!==!0?e:undefined}}else c.tagging={isActivated:!1,fct:undefined}}),a.$observe("taggingLabel",function(){a.tagging!==undefined&&(a.taggingLabel==="false"?c.taggingLabel=!1:c.taggingLabel=a.taggingLabel!==undefined?a.taggingLabel:"(new)")}),a.$observe("taggingTokens",function(){if(a.tagging!==undefined){var e=a.taggingTokens!==undefined?a.taggingTokens.split("|"):[",","ENTER"];c.taggingTokens={isActivated:!0,tokens:e}}}),angular.isDefined(a.autofocus)&&o(function(){c.setFocus()}),angular.isDefined(a.focusOn)&&i.$on(a.focusOn,function(){o(function(){c.setFocus()})}),e.on("click",p),i.$on("$destroy",function(){e.off("click",p)}),l(i,function(e){var t=angular.element("<div>").append(e),r=t.querySelectorAll(".ui-select-match");r.removeAttr("ui-select-match"),r.removeAttr("data-ui-select-match");if(r.length!==1)throw n("transcluded","Expected 1 .ui-select-match but got '{0}'.",r.length);u.querySelectorAll(".ui-select-match").replaceWith(r);var i=t.querySelectorAll(".ui-select-choices");i.removeAttr("ui-select-choices"),i.removeAttr("data-ui-select-choices");if(i.length!==1)throw n("transcluded","Expected 1 .ui-select-choices but got '{0}'.",i.length);u.querySelectorAll(".ui-select-choices").replaceWith(i)});var d=i.$eval(a.appendToBody);if(d!==undefined?d:t.appendToBody)i.$watch("$select.open",function(e){e?g():y()}),i.$on("$destroy",function(){y()});var v=null,m=""}}}}]),n.directive("uiSelectMatch",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){var n=t.parent().attr("theme")||e.theme,r=t.parent().attr("multiple");return n+(r?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,n,r,i){function s(e){i.allowClear=angular.isDefined(e)?e===""?!0:e.toLowerCase()==="true":!1}i.lockChoiceExpression=r.uiLockChoice,r.$observe("placeholder",function(t){i.placeholder=t!==undefined?t:e.placeholder}),r.$observe("allowClear",s),s(r.allowClear),i.multiple&&i.sizeSearchInput()}}}]),n.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n=this,r=e.$select,i;e.$evalAsync(function(){i=e.ngModel}),n.activeMatchIndex=-1,n.updateModel=function(){i.$setViewValue(Date.now()),n.refreshComponent()},n.refreshComponent=function(){r.refreshItems(),r.sizeSearchInput()},n.removeChoice=function(i){var s=r.selected[i];if(s._uiSelectChoiceLocked)return;var o={};o[r.parserResult.itemName]=s,r.selected.splice(i,1),n.activeMatchIndex=-1,r.sizeSearchInput(),t(function(){r.onRemoveCallback(e,{$item:s,$model:r.parserResult.modelMapper(e,o)})}),n.updateModel()},n.getPlaceholder=function(){if(r.selected.length)return;return r.placeholder}}],controllerAs:"$selectMultiple",link:function(r,i,s,o){function l(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function c(t){function p(){switch(t){case e.LEFT:return~f.activeMatchIndex?c:s;case e.RIGHT:return!~f.activeMatchIndex||o===s?(u.activate(),!1):a;case e.BACKSPACE:return~f.activeMatchIndex?(f.removeChoice(o),c):s;case e.DELETE:return~f.activeMatchIndex?(f.removeChoice(f.activeMatchIndex),o):!1}}var n=l(u.searchInput[0]),r=u.selected.length,i=0,s=r-1,o=f.activeMatchIndex,a=f.activeMatchIndex+1,c=f.activeMatchIndex-1,h=o;return n>0||u.search.length&&t==e.RIGHT?!1:(u.close(),h=p(),!u.selected.length||h===!1?f.activeMatchIndex=-1:f.activeMatchIndex=Math.min(s,Math.max(i,h)),!0)}function h(e){if(e===undefined||u.search===undefined)return!1;var t=e.filter(function(e){return u.search.toUpperCase()===undefined||e===undefined?!1:e.toUpperCase()===u.search.toUpperCase()}).length>0;return t}function p(e,t){var n=-1;if(angular.isArray(e)){var r=angular.copy(e);for(var i=0;i<r.length;i++)if(u.tagging.fct===undefined)r[i]+" "+u.taggingLabel===t&&(n=i);else{var s=r[i];s.isTag=!0,angular.equals(s,t)&&(n=i)}}return n}var u=o[0],a=r.ngModel=o[1],f=r.$selectMultiple;u.multiple=!0,u.removeSelected=!0,u.focusInput=u.searchInput,a.$parsers.unshift(function(){var e={},t,n=[];for(var i=u.selected.length-1;i>=0;i--)e={},e[u.parserResult.itemName]=u.selected[i],t=u.parserResult.modelMapper(r,e),n.unshift(t);return n}),a.$formatters.unshift(function(e){var t=u.parserResult.source(r,{$select:{search:""}}),n={},i;if(!t)return e;var s=[],o=function(e,t){if(!e||!e.length)return;for(var o=e.length-1;o>=0;o--){n[u.parserResult.itemName]=e[o],i=u.parserResult.modelMapper(r,n);if(u.parserResult.trackByExp){var a=/\.(.+)/.exec(u.parserResult.trackByExp);if(a.length>0&&i[a[1]]==t[a[1]])return s.unshift(e[o]),!0}if(angular.equals(i,t))return s.unshift(e[o]),!0}return!1};if(!e)return s;for(var a=e.length-1;a>=0;a--)o(u.selected,e[a])||o(t,e[a])||s.unshift(e[a]);return s}),r.$watchCollection(function(){return a.$modelValue},function(e,t){t!=e&&(a.$modelValue=null,f.refreshComponent())}),a.$render=function(){if(!angular.isArray(a.$viewValue)){if(!angular.isUndefined(a.$viewValue)&&a.$viewValue!==null)throw t("multiarr","Expected model value to be array but got '{0}'",a.$viewValue);u.selected=[]}u.selected=a.$viewValue,r.$evalAsync()},r.$on("uis:select",function(e,t){u.selected.push(t),f.updateModel()}),r.$on("uis:activate",function(){f.activeMatchIndex=-1}),r.$watch("$select.disabled",function(e,t){t&&!e&&u.sizeSearchInput()}),u.searchInput.on("keydown",function(t){var n=t.which;r.$apply(function(){var r=!1;e.isHorizontalMovement(n)&&(r=c(n)),r&&n!=e.TAB&&(t.preventDefault(),t.stopPropagation())})}),u.searchInput.on("keyup",function(t){e.isVerticalMovement(t.which)||r.$evalAsync(function(){u.activeIndex=u.taggingLabel===!1?-1:0});if(u.tagging.isActivated&&u.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which))return;u.activeIndex=u.taggingLabel===!1?-1:0;if(u.taggingLabel===!1)return;var n=angular.copy(u.items),i=angular.copy(u.items),s,o,a=!1,f=-1,l,c;if(u.tagging.fct!==undefined){l=u.$filter("filter")(n,{isTag:!0}),l.length>0&&(c=l[0]),n.length>0&&c&&(a=!0,n=n.slice(1,n.length),i=i.slice(1,i.length)),s=u.tagging.fct(u.search),s.isTag=!0;if(i.filter(function(e){return angular.equals(e,u.tagging.fct(u.search))}).length>0)return;s.isTag=!0}else{l=u.$filter("filter")(n,function(e){return e.match(u.taggingLabel)}),l.length>0&&(c=l[0]),o=n[0],o!==undefined&&n.length>0&&c&&(a=!0,n=n.slice(1,n.length),i=i.slice(1,i.length)),s=u.search+" "+u.taggingLabel;if(p(u.selected,u.search)>-1)return;if(h(i.concat(u.selected))){a&&(n=i,r.$evalAsync(function(){u.activeIndex=0,u.items=n}));return}if(h(i)){a&&(u.items=i.slice(1,i.length));return}}a&&(f=p(u.selected,s)),f>-1?n=n.slice(f+1,n.length-1):(n=[],n.push(s),n=n.concat(i)),r.$evalAsync(function(){u.activeIndex=0,u.items=n})}}),u.searchInput.on("blur",function(){n(function(){f.activeMatchIndex=-1})})}}}]),n.directive("uiSelectSingle",["$timeout","$compile",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(r,i,s,o){var u=o[0],a=o[1];a.$parsers.unshift(function(e){var t={},n;return t[u.parserResult.itemName]=e,n=u.parserResult.modelMapper(r,t),n}),a.$formatters.unshift(function(e){var t=u.parserResult.source(r,{$select:{search:""}}),n={},i;if(t){var s=function(t){return n[u.parserResult.itemName]=t,i=u.parserResult.modelMapper(r,n),i==e};if(u.selected&&s(u.selected))return u.selected;for(var o=t.length-1;o>=0;o--)if(s(t[o]))return t[o]}return e}),r.$watch("$select.selected",function(e){a.$viewValue!==e&&a.$setViewValue(e)}),a.$render=function(){u.selected=a.$viewValue},r.$on("uis:select",function(e,t){u.selected=t}),r.$on("uis:close",function(e,n){t(function(){u.focusser.prop("disabled",!1),n||u.focusser[0].focus()},0,!1)}),r.$on("uis:activate",function(){f.prop("disabled",!0)});var f=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");n(f)(r),u.focusser=f,u.focusInput=f,i.parent().append(f),f.bind("focus",function(){r.$evalAsync(function(){u.focus=!0})}),f.bind("blur",function(){r.$evalAsync(function(){u.focus=!1})}),f.bind("keydown",function(t){if(t.which===e.BACKSPACE){t.preventDefault(),t.stopPropagation(),u.select(undefined),r.$apply();return}if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC)return;if(t.which==e.DOWN||t.which==e.UP||t.which==e.ENTER||t.which==e.SPACE)t.preventDefault(),t.stopPropagation(),u.activate();r.$digest()}),f.bind("keyup input",function(t){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE)return;u.activate(f.val()),f.val(""),r.$digest()})}}}]),n.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,n){return{require:"^uiSelect",link:function(t,r,i,s){if(t[i.uiSelectSort]===null)throw n("sort","Expected a list to sort");var o=angular.extend({axis:"horizontal"},t.$eval(i.uiSelectSortOptions)),u=o.axis,a="dragging",f="dropping",l="dropping-before",c="dropping-after";t.$watch(function(){return s.sortable},function(e){e?r.attr("draggable",!0):r.removeAttr("draggable")}),r.on("dragstart",function(e){r.addClass(a),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text/plain",t.$index)}),r.on("dragend",function(){r.removeClass(a)});var h=function(e,t){this.splice(t,0,this.splice(e,1)[0])},p=function(e){e.preventDefault();var t=u==="vertical"?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this[u==="vertical"?"offsetHeight":"offsetWidth"]/2?(r.removeClass(c),r.addClass(l)):(r.removeClass(l),r.addClass(c))},d,v=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text/plain"),10);e.cancel(d),d=e(function(){m(n)},20)},m=function(e){var n=t.$eval(i.uiSelectSort),s=n[e],o=null;r.hasClass(l)?e<t.$index?o=t.$index-1:o=t.$index:e<t.$index?o=t.$index:o=t.$index+1,h.apply(n,[e,o]),t.$apply(function(){t.$emit("uiSelectSort:change",{array:n,item:s,from:e,to:o})}),r.removeClass(f),r.removeClass(l),r.removeClass(c),r.off("drop",v)};r.on("dragenter",function(){if(r.hasClass(a))return;r.addClass(f),r.on("dragover",p),r.on("drop",v)}),r.on("dragleave",function(e){if(e.target!=r)return;r.removeClass(f),r.removeClass(l),r.removeClass(c),r.off("dragover",p),r.off("drop",v)})}}}]),n.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var n=this;n.parse=function(n){var r=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!r)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);return{itemName:r[2],source:t(r[3]),trackByExp:r[4],modelMapper:t(r[1]||r[2])}},n.getGroupNgRepeatExpression=function(){return"$group in $select.groups"},n.getNgRepeatExpression=function(e,t,n,r){var i=e+" in "+(r?"$group.items":t);return n&&(i+=" track by "+n),i}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="javascript:void(0)" class="ui-select-choices-row-inner"></a></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),e.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]),define("angular-ui-select",["angular"],function(){}),function(e,t,n){function r(e){var n=[];return a(n,t.noop).chars(e),n.join("")}function i(e){var t={};e=e.split(",");var n;for(n=0;n<e.length;n++)t[e[n]]=!0;return t}function s(e,n){function r(e,r,s,u){r=t.lowercase(r);if(S[r])for(;a.last()&&x[a.last()];)i("",a.last());E[r]&&a.last()==r&&i("",r),(u=w[r]||!!u)||a.push(r);var f={};s.replace(h,function(e,t,n,r,i){f[t]=o(n||r||i||"")}),n.start&&n.start(r,f,u)}function i(e,r){var i=0,s;if(r=t.lowercase(r))for(i=a.length-1;0<=i&&a[i]!=r;i--);if(0<=i){for(s=a.length-1;s>=i;s--)n.end&&n.end(a[s]);a.length=i}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var s,u,a=[],y=e,b;for(a.last=function(){return a[a.length-1]};e;){b="",u=!0;if(a.last()&&T[a.last()])e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+a.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(g,"$1"),n.chars&&n.chars(o(t)),""}),i("",a.last());else{if(0===e.indexOf("<!--"))s=e.indexOf("--",4),0<=s&&e.lastIndexOf("-->",s)===s&&(n.comment&&n.comment(e.substring(4,s)),e=e.substring(s+3),u=!1);else if(m.test(e)){if(s=e.match(m))e=e.replace(s[0],""),u=!1}else if(d.test(e)){if(s=e.match(c))e=e.substring(s[0].length),s[0].replace(c,i),u=!1}else p.test(e)&&((s=e.match(l))?(s[4]&&(e=e.substring(s[0].length),s[0].replace(l,r)),u=!1):(b+="<",e=e.substring(1)));u&&(s=e.indexOf("<"),b+=0>s?e:e.substring(0,s),e=0>s?"":e.substring(s),n.chars&&n.chars(o(b)))}if(e==y)throw f("badparse",e);y=e}i()}function o(e){return e?(L.innerHTML=e.replace(/</g,"&lt;"),L.textContent):""}function u(e){return e.replace(/&/g,"&amp;").replace(y,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(b,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,s,o){e=t.lowercase(e),!r&&T[e]&&(r=e),r||!0!==N[e]||(i("<"),i(e),t.forEach(s,function(r,s){var o=t.lowercase(s),a="img"===e&&"src"===o||"background"===o;!0!==k[o]||!0===C[o]&&!n(r,a)||(i(" "),i(s),i('="'),i(u(r)),i('"'))}),i(o?"/>":">"))},end:function(e){e=t.lowercase(e),r||!0!==N[e]||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(u(e))}}}var f=t.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,c=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,d=/^<\//,v=/\x3c!--(.*?)--\x3e/g,m=/<!DOCTYPE([^>]*?)>/i,g=/<!\[CDATA\[(.*?)]]\x3e/g,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^\#-~| |!])/g,w=i("area,br,col,hr,img,wbr");e=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),n=i("rp,rt");var E=t.extend({},n,e),S=t.extend({},e,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),x=t.extend({},n,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));e=i("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");var T=i("script,style"),N=t.extend({},w,S,x,E,e),C=i("background,cite,href,longdesc,src,usemap,xlink:href");e=i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),n=i("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan");var k=t.extend({},C,n,e),L=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return s(t,a(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/,i=/^mailto:/;return function(s,o){function u(e){e&&c.push(r(e))}function a(e,n){c.push("<a "),t.isDefined(o)&&c.push('target="',o,'" '),c.push('href="',e.replace(/"/g,"&quot;"),'">'),u(n),c.push("</a>")}if(!s)return s;for(var f,l=s,c=[],h,p;f=l.match(n);)h=f[0],f[2]||f[4]||(h=(f[3]?"http://":"mailto:")+h),p=f.index,u(l.substr(0,p)),a(h,f[0].replace(i,"")),l=l.substring(p+f[0].length);return u(l),e(c.join(""))}}])}(window,window.angular),define("angular-sanitize",["angular"],function(){}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function r(e){for(var t in e)if(void 0!==s.style[t])return e[t]}var i=function(r,s,o){o=o||{};var u=e.defer(),f=i[o.animation?"animationEndEventName":"transitionEndEventName"],l=function(){n.$apply(function(){r.unbind(f,l),u.resolve(r)})};return f&&r.bind(f,l),t(function(){angular.isString(s)?r.addClass(s):angular.isFunction(s)?s(r):angular.isObject(s)&&r.css(s),f||u.resolve(r)}),u.promise.cancel=function(){f&&r.unbind(f,l),u.reject("Transition cancelled")},u.promise},s=document.createElement("trans"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},u={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return i.transitionEndEventName=r(o),i.animationEndEventName=r(u),i}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,r){function i(t){function r(){l===i&&(l=void 0)}var i=e(n,t);return l&&l.cancel(),l=i,i.then(r,r),i}function s(){c?(c=!1,o()):(n.removeClass("collapse").addClass("collapsing"),i({height:n[0].scrollHeight+"px"}).then(o))}function o(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function u(){c?(c=!1,f(),n.css({height:0})):(n.css({height:n[0].scrollHeight+"px"}),n[0].offsetWidth,n.removeClass("collapse in").addClass("collapsing"),i({height:0}).then(f))}function f(){n.removeClass("collapsing"),n.addClass("collapse")}var l,c=!0;t.$watch(r.collapse,function(e){e?u():s()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(r){var i=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;i&&angular.forEach(this.groups,function(e){e!==r&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,r){r.addGroup(e),e.$watch("isOpen",function(t){t&&r.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,r,i){r.setHeading(i(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,r){e.$watch(function(){return r[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,n,r,i){e(function(){i.close()},parseInt(r.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,r){var i=r[0],s=r[1];s.$render=function(){t.toggleClass(i.activeClass,angular.equals(s.$modelValue,e.$eval(n.btnRadio)))},t.bind(i.toggleEvent,function(){var r=t.hasClass(i.activeClass);(!r||angular.isDefined(n.uncheckable))&&e.$apply(function(){s.$setViewValue(r?null:e.$eval(n.btnRadio)),s.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,r){function i(){return o(n.btnCheckboxTrue,!0)}function s(){return o(n.btnCheckboxFalse,!1)}function o(t,n){var r=e.$eval(t);return angular.isDefined(r)?r:n}var u=r[0],a=r[1];a.$render=function(){t.toggleClass(u.activeClass,angular.equals(a.$modelValue,i()))},t.bind(u.toggleEvent,function(){e.$apply(function(){a.$setViewValue(t.hasClass(u.activeClass)?s():i()),a.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,n,r){function i(){s();var t=+e.interval;!isNaN(t)&&t>0&&(u=n(o,t))}function s(){u&&(n.cancel(u),u=null)}function o(){var t=+e.interval;a&&!isNaN(t)&&t>0?e.next():e.pause()}var u,a,f=this,l=f.slides=e.slides=[],c=-1;f.currentSlide=null;var h=!1;f.select=e.select=function(n,s){function o(){h||(f.currentSlide&&angular.isString(s)&&!e.noTransition&&n.$element?(n.$element.addClass(s),n.$element[0].offsetWidth,angular.forEach(l,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(n,{direction:s,active:!0,entering:!0}),angular.extend(f.currentSlide||{},{direction:s,leaving:!0}),e.$currentTransition=r(n.$element,{}),function(t,n){e.$currentTransition.then(function(){u(t,n)},function(){u(t,n)})}(n,f.currentSlide)):u(n,f.currentSlide),f.currentSlide=n,c=a,i())}function u(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var a=l.indexOf(n);void 0===s&&(s=a>c?"next":"prev"),n&&n!==f.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(o)):o())},e.$on("$destroy",function(){h=!0}),f.indexOfSlide=function(e){return l.indexOf(e)},e.next=function(){var t=(c+1)%l.length;return e.$currentTransition?void 0:f.select(l[t],"next")},e.prev=function(){var t=0>c-1?l.length-1:c-1;return e.$currentTransition?void 0:f.select(l[t],"prev")},e.isActive=function(e){return f.currentSlide===e},e.$watch("interval",i),e.$on("$destroy",s),e.play=function(){a||(a=!0,i())},e.pause=function(){e.noPause||(a=!1,s())},f.addSlide=function(t,n){t.$element=n,l.push(t),1===l.length||t.active?(f.select(l[l.length-1]),1==l.length&&e.play()):t.active=!1},f.removeSlide=function(e){var t=l.indexOf(e);l.splice(t,1),l.length>0&&e.active?f.select(t>=l.length?l[t-1]:l[t]):c>t&&c--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,r){r.addSlide(e,t),e.$on("$destroy",function(){r.removeSlide(e)}),e.$watch("active",function(t){t&&r.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e){var n=[],r=e.split("");return angular.forEach(i,function(t,i){var s=e.indexOf(i);if(s>-1){e=e.split(""),r[s]="("+t.regex+")",e[s]="$";for(var o=s+1,u=s+i.length;u>o;o++)r[o]="",e[o]="$";e=e.join(""),n.push({index:s,apply:t.apply})}}),{regex:new RegExp("^"+r.join("")+"$"),map:t(n,"index")}}function r(e,t,n){return 1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}this.parsers={};var i={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,i){if(!angular.isString(t)||!i)return t;i=e.DATETIME_FORMATS[i]||i,this.parsers[i]||(this.parsers[i]=n(i));var s=this.parsers[i],o=s.regex,u=s.map,f=t.match(o);if(f&&f.length){for(var l,h={year:1900,month:0,date:1,hours:0},p=1,v=f.length;v>p;p++){var m=u[p-1];m.apply&&m.apply.call(h,f[p])}return r(h.year,h.month,h.date)&&(l=new Date(h.year,h.month,h.date,h.hours)),l}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function r(e){return"static"===(n(e,"position")||"static")}var i=function(t){for(var n=e[0],i=t.offsetParent||n;i&&i!==n&&r(i);)i=i.offsetParent;return i||n};return{position:function(t){var n=this.offset(t),r={top:0,left:0},s=i(t[0]);s!=e[0]&&(r=this.offset(angular.element(s)),r.top+=s.clientTop-s.scrollTop,r.left+=s.clientLeft-s.scrollLeft);var o=t[0].getBoundingClientRect();return{width:o.width||t.prop("offsetWidth"),height:o.height||t.prop("offsetHeight"),top:n.top-r.top,left:n.left-r.left}},offset:function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,r){var i,s,o,u,a=n.split("-"),f=a[0],l=a[1]||"center";i=r?this.offset(e):this.position(e),s=t.prop("offsetWidth"),o=t.prop("offsetHeight");var c={center:function(){return i.left+i.width/2-s/2},left:function(){return i.left},right:function(){return i.left+i.width}},h={center:function(){return i.top+i.height/2-o/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(f){case"right":u={top:h[l](),left:c[f]()};break;case"left":u={top:h[l](),left:i.left-s};break;case"bottom":u={top:h[f](),left:c[l]()};break;default:u={top:i.top-o,left:c[l]()}}return u}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,r,i,s,o,u){var a=this,f={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(n,i){a[n]=angular.isDefined(t[n])?8>i?r(t[n])(e.$parent):e.$parent.$eval(t[n]):u[n]}),angular.forEach(["minDate","maxDate"],function(r){t[r]?e.$parent.$watch(n(t[r]),function(e){a[r]=e?new Date(e):null,a.refreshView()}):a[r]=u[r]?new Date(u[r]):null}),e.datepickerMode=e.datepickerMode||u.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===a.compare(t.date,a.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){f=e,f.$render=function(){a.render()}},this.render=function(){if(f.$modelValue){var e=new Date(f.$modelValue),t=!isNaN(e);t?this.activeDate=e:s.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),f.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=f.$modelValue?new Date(f.$modelValue):null;f.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=f.$modelValue?new Date(f.$modelValue):null;return{date:e,label:o(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===a.minMode){var n=f.$modelValue?new Date(f.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),f.$setViewValue(n),f.$render()}else a.activeDate=t,e.datepickerMode=a.modes[a.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=a.activeDate.getFullYear()+e*(a.step.years||0),n=a.activeDate.getMonth()+e*(a.step.months||0);a.activeDate.setFullYear(t,n,1),a.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===a.maxMode&&1===t||e.datepickerMode===a.minMode&&-1===t||(e.datepickerMode=a.modes[a.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var l=function(){i(function(){a.element[0].focus()},0,!1)};e.$on("datepicker.focus",l),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===n||"space"===n){if(a.isDisabled(a.activeDate))return;e.select(a.activeDate),l()}else!t.ctrlKey||"up"!==n&&"down"!==n?(a.handleKeyDown(n,t),a.refreshView()):(e.toggleMode("up"===n?1:-1),l())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,r){var i=r[0],s=r[1];s&&i.init(s)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,r,i){function s(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?f[t]:29}function o(e,t){var n=new Array(t),r=new Date(e),i=0;for(r.setHours(12);t>i;)n[i++]=new Date(r),r.setDate(r.getDate()+1);return n}function u(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=i.showWeeks,i.step={months:1},i.element=n;var f=[31,28,31,30,31,30,31,31,30,31,30,31];i._refreshView=function(){var n=i.activeDate.getFullYear(),r=i.activeDate.getMonth(),s=new Date(n,r,1),f=i.startingDay-s.getDay(),l=f>0?7-f:-f,c=new Date(s);l>0&&c.setDate(-l+1);for(var p=o(c,42),d=0;42>d;d++)p[d]=angular.extend(i.createDateObject(p[d],i.formatDay),{secondary:p[d].getMonth()!==r,uid:t.uniqueId+"-"+d});t.labels=new Array(7);for(var v=0;7>v;v++)t.labels[v]={abbr:e(p[v].date,i.formatDayHeader),full:e(p[v].date,"EEEE")};if(t.title=e(i.activeDate,i.formatDayTitle),t.rows=i.split(p,7),t.showWeeks){t.weekNumbers=[];for(var m=u(t.rows[0][0].date),y=t.rows.length;t.weekNumbers.push(m++)<y;);}},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.handleKeyDown=function(e){var t=i.activeDate.getDate();if("left"===e)t-=1;else if("up"===e)t-=7;else if("right"===e)t+=1;else if("down"===e)t+=7;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getMonth()+("pageup"===e?-1:1);i.activeDate.setMonth(n,1),t=Math.min(s(i.activeDate.getFullYear(),i.activeDate.getMonth()),t)}else"home"===e?t=1:"end"===e&&(t=s(i.activeDate.getFullYear(),i.activeDate.getMonth()));i.activeDate.setDate(t)},i.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,r,i){i.step={years:1},i.element=n,i._refreshView=function(){for(var n=new Array(12),r=i.activeDate.getFullYear(),s=0;12>s;s++)n[s]=angular.extend(i.createDateObject(new Date(r,s,1),i.formatMonth),{uid:t.uniqueId+"-"+s});t.title=e(i.activeDate,i.formatMonthTitle),t.rows=i.split(n,3)},i.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},i.handleKeyDown=function(e){var t=i.activeDate.getMonth();if("left"===e)t-=1;else if("up"===e)t-=3;else if("right"===e)t+=1;else if("down"===e)t+=3;else if("pageup"===e||"pagedown"===e){var n=i.activeDate.getFullYear()+("pageup"===e?-1:1);i.activeDate.setFullYear(n)}else"home"===e?t=0:"end"===e&&(t=11);i.activeDate.setMonth(t)},i.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,r){function i(e){return parseInt((e-1)/s,10)*s+1}var s=r.yearRange;r.step={years:s},r.element=t,r._refreshView=function(){for(var t=new Array(s),n=0,o=i(r.activeDate.getFullYear());s>n;n++)t[n]=angular.extend(r.createDateObject(new Date(o+n,0,1),r.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[s-1].label].join(" - "),e.rows=r.split(t,5)},r.compare=function(e,t){return e.getFullYear()-t.getFullYear()},r.handleKeyDown=function(e){var t=r.activeDate.getFullYear();"left"===e?t-=1:"up"===e?t-=5:"right"===e?t+=1:"down"===e?t+=5:"pageup"===e||"pagedown"===e?t+=("pageup"===e?-1:1)*r.step.years:"home"===e?t=i(r.activeDate.getFullYear()):"end"===e&&(t=i(r.activeDate.getFullYear())+s-1),r.activeDate.setFullYear(t)},r.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,r,i,s,o){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(u,l,h,p){function v(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function m(e){if(e){if(angular.isDate(e)&&!isNaN(e))return p.$setValidity("date",!0),e;if(angular.isString(e)){var t=s.parse(e,y)||new Date(e);return isNaN(t)?void p.$setValidity("date",!1):(p.$setValidity("date",!0),t)}return void p.$setValidity("date",!1)}return p.$setValidity("date",!0),null}var y,w=angular.isDefined(h.closeOnDateSelection)?u.$parent.$eval(h.closeOnDateSelection):o.closeOnDateSelection,E=angular.isDefined(h.datepickerAppendToBody)?u.$parent.$eval(h.datepickerAppendToBody):o.appendToBody;u.showButtonBar=angular.isDefined(h.showButtonBar)?u.$parent.$eval(h.showButtonBar):o.showButtonBar,u.getText=function(e){return u[e+"Text"]||o[e+"Text"]},h.$observe("datepickerPopup",function(e){y=e||o.datepickerPopup,p.$render()});var S=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");S.attr({"ng-model":"date","ng-change":"dateSelection()"});var x=angular.element(S.children()[0]);h.datepickerOptions&&angular.forEach(u.$parent.$eval(h.datepickerOptions),function(e,t){x.attr(v(t),e)}),u.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(h[e]){var n=t(h[e]);if(u.$parent.$watch(n,function(t){u.watchData[e]=t}),x.attr(v(e),"watchData."+e),"datepickerMode"===e){var r=n.assign;u.$watch("watchData."+e,function(e,t){e!==t&&r(u.$parent,e)})}}}),h.dateDisabled&&x.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),p.$parsers.unshift(m),u.dateSelection=function(e){angular.isDefined(e)&&(u.date=e),p.$setViewValue(u.date),p.$render(),w&&(u.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){u.$apply(function(){u.date=p.$modelValue})}),p.$render=function(){var e=p.$viewValue?i(p.$viewValue,y):"";l.val(e),u.date=m(p.$modelValue)};var T=function(e){u.isOpen&&e.target!==l[0]&&u.$apply(function(){u.isOpen=!1})},N=function(e){u.keydown(e)};l.bind("keydown",N),u.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),u.close()):40!==e.which||u.isOpen||(u.isOpen=!0)},u.$watch("isOpen",function(e){e?(u.$broadcast("datepicker.focus"),u.position=E?r.offset(l):r.position(l),u.position.top=u.position.top+l.prop("offsetHeight"),n.bind("click",T)):n.unbind("click",T)}),u.select=function(e){if("today"===e){var t=new Date;angular.isDate(p.$modelValue)?(e=new Date(p.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}u.dateSelection(e)},u.close=function(){u.isOpen=!1,l[0].focus()};var C=e(S)(u);S.remove(),E?n.find("body").append(C):l.after(C),u.$on("$destroy",function(){C.remove(),l.unbind("keydown",N),n.unbind("click",T)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(i){t||(e.bind("click",n),e.bind("keydown",r)),t&&t!==i&&(t.isOpen=!1),t=i},this.close=function(i){t===i&&(t=null,e.unbind("click",n),e.unbind("keydown",r))};var n=function(e){if(t){var n=t.getToggleElement();e&&n&&n[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},r=function(e){27===e.which&&(t.focusToggleElement(),n())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,n,r,i,s){var o,u=this,a=e.$new(),f=r.openClass,l=angular.noop,c=t.onToggle?n(t.onToggle):angular.noop;this.init=function(r){u.$element=r,t.isOpen&&(o=n(t.isOpen),l=o.assign,e.$watch(o,function(e){a.isOpen=!!e}))},this.toggle=function(e){return a.isOpen=arguments.length?!!e:!a.isOpen},this.isOpen=function(){return a.isOpen},a.getToggleElement=function(){return u.toggleElement},a.focusToggleElement=function(){u.toggleElement&&u.toggleElement[0].focus()},a.$watch("isOpen",function(t,n){s[t?"addClass":"removeClass"](u.$element,f),t?(a.focusToggleElement(),i.open(a)):i.close(a),l(e,t),angular.isDefined(t)&&t!==n&&c(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){a.isOpen=!1}),e.$on("$destroy",function(){a.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,r){r.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,r){if(r){r.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){r.toggle()})};t.bind("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(r.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",i)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,r=0;r<e.length;r++)if(t==e[r].key){n=r;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,n,r){t.backdropClass=r.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,r,i){r.addClass(i.windowClass||""),n.size=i.size,t(function(){n.animate=!0,r[0].querySelectorAll("[autofocus]").length||r[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,r,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,r,i,s){function o(){for(var e=-1,t=p.keys(),n=0;n<t.length;n++)p.get(t[n]).value.backdrop&&(e=n);return e}function u(e){var t=n.find("body").eq(0),r=p.get(e).value;p.remove(e),f(r.modalDomEl,r.modalScope,300,function(){r.modalScope.$destroy(),t.toggleClass(h,p.length()>0),a()})}function a(){if(l&&-1==o()){var e=c;f(l,c,150,function(){e.$destroy(),e=null}),l=void 0,c=void 0}}function f(n,r,i,s){function o(){o.done||(o.done=!0,n.remove(),s&&s())}r.animate=!1;var u=e.transitionEndEventName;if(u){var a=t(o,i);n.bind(u,function(){t.cancel(a),o(),r.$apply()})}else t(o)}var l,c,h="modal-open",p=s.createNew(),d={};return i.$watch(o,function(e){c&&(c.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=p.top(),t&&t.value.keyboard&&(e.preventDefault(),i.$apply(function(){d.dismiss(t.key,"escape key press")})))}),d.open=function(e,t){p.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var s=n.find("body").eq(0),u=o();if(u>=0&&!l){c=i.$new(!0),c.index=u;var a=angular.element("<div modal-backdrop></div>");a.attr("backdrop-class",t.backdropClass),l=r(a)(c),s.append(l)}var f=angular.element("<div modal-window></div>");f.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:p.length()-1,animate:"animate"}).html(t.content);var d=r(f)(t.scope);p.top().value.modalDomEl=d,s.append(d),s.addClass(h)},d.close=function(e,t){var n=p.get(e);n&&(n.value.deferred.resolve(t),u(e))},d.dismiss=function(e,t){var n=p.get(e);n&&(n.value.deferred.reject(t),u(e))},d.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},d.getTop=function(){return p.top()},d}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,r,i,s,o,u){function f(e){return e.template?r.when(e.template):i.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:s}).then(function(e){return e.data})}function l(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(r.when(t.invoke(e)))}),n}var c={};return c.open=function(t){var i=r.defer(),s=r.defer(),c={result:i.promise,opened:s.promise,close:function(e){u.close(c,e)},dismiss:function(e){u.dismiss(c,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var p=r.all([f(t)].concat(l(t.resolve)));return p.then(function(e){var r=(t.scope||n).$new();r.$close=c.close,r.$dismiss=c.dismiss;var s,a={},f=1;t.controller&&(a.$scope=r,a.$modalInstance=c,angular.forEach(t.resolve,function(t,n){a[n]=e[f++]}),s=o(t.controller,a),t.controllerAs&&(r[t.controllerAs]=s)),u.open(c,{scope:r,deferred:i,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){i.reject(e)}),p.then(function(){s.resolve(!0)},function(){s.reject(!1)}),c},c}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var r=this,i={$setViewValue:angular.noop},s=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(s,o){i=s,this.config=o,i.$render=function(){r.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){r.itemsPerPage=parseInt(t,10),e.totalPages=r.calculateTotalPages()}):this.itemsPerPage=o.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(i.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(i.$setViewValue(t),i.$render())},e.getText=function(t){return e[t+"Text"]||r.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=r.calculateTotalPages()}),e.$watch("totalPages",function(t){s(e.$parent,t),e.page>t?e.selectPage(t):i.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,r,i,s){function o(e,t,n){return{number:e,text:t,active:n}}function u(e,t){var n=[],r=1,i=t,s=angular.isDefined(c)&&t>c;s&&(h?(r=Math.max(e-Math.floor(c/2),1),i=r+c-1,i>t&&(i=t,r=i-c+1)):(r=(Math.ceil(e/c)-1)*c+1,i=Math.min(r+c-1,t)));for(var u=r;i>=u;u++){var a=o(u,u,u===e);n.push(a)}if(s&&!h){if(r>1){var f=o(r-1,"...",!1);n.unshift(f)}if(t>i){var l=o(i+1,"...",!1);n.push(l)}}return n}var f=s[0],l=s[1];if(l){var c=angular.isDefined(i.maxSize)?n.$parent.$eval(i.maxSize):t.maxSize,h=angular.isDefined(i.rotate)?n.$parent.$eval(i.rotate):t.rotate;n.boundaryLinks=angular.isDefined(i.boundaryLinks)?n.$parent.$eval(i.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(i.directionLinks)?n.$parent.$eval(i.directionLinks):t.directionLinks,f.init(l,t),i.maxSize&&n.$parent.$watch(e(i.maxSize),function(e){c=parseInt(e,10),f.render()});var p=f.render;f.render=function(){p(),n.page>0&&n.page<=n.totalPages&&(n.pages=u(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"¬´ Previous",nextText:"Next ¬ª",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,r,i){var s=i[0],o=i[1];o&&(t.align=angular.isDefined(r.align)?t.$parent.$eval(r.align):e.align,s.init(o,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},r={};this.options=function(e){angular.extend(r,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(i,s,o,u,f,l){return function(i,p,v){function m(e){var t=e||y.trigger||v,r=n[t]||t;return{show:t,hide:r}}var y=angular.extend({},t,r),w=e(i),E=l.startSymbol(),S=l.endSymbol(),x="<div "+w+'-popup title="'+E+"title"+S+'" content="'+E+"content"+S+'" placement="'+E+"placement"+S+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var e=s(x);return function(t,n,r){function s(){D.isOpen?c():l()}function l(){(!_||t.$eval(r[p+"Enable"]))&&(E(),D.popupDelay?A||(A=o(d,D.popupDelay,!1),A.then(function(e){e()})):d()())}function c(){t.$apply(function(){v()})}function d(){return A=null,L&&(o.cancel(L),L=null),D.content?(b(),N.css({top:0,left:0,display:"block"}),D.$digest(),P(),D.isOpen=!0,D.$digest(),P):angular.noop}function v(){D.isOpen=!1,o.cancel(A),A=null,D.animation?L||(L=o(w,500)):w()}function b(){N&&w(),C=D.$new(),N=e(C,function(e){O?u.find("body").append(e):n.after(e)})}function w(){L=null,N&&(N.remove(),N=null),C&&(C.$destroy(),C=null)}function E(){S(),x()}function S(){var e=r[p+"Placement"];D.placement=angular.isDefined(e)?e:y.placement}function x(){var e=r[p+"PopupDelay"],t=parseInt(e,10);D.popupDelay=isNaN(t)?y.popupDelay:t}function T(){var e=r[p+"Trigger"];H(),M=m(e),M.show===M.hide?n.bind(M.show,s):(n.bind(M.show,l),n.bind(M.hide,c))}var N,C,L,A,O=angular.isDefined(y.appendToBody)?y.appendToBody:!1,M=m(void 0),_=angular.isDefined(r[p+"Enable"]),D=t.$new(!0),P=function(){var e=f.positionElements(n,N,D.placement,O);e.top+="px",e.left+="px",N.css(e)};D.isOpen=!1,r.$observe(i,function(e){D.content=e,!e&&D.isOpen&&v()}),r.$observe(p+"Title",function(e){D.title=e});var H=function(){n.unbind(M.show,l),n.unbind(M.hide,c)};T();var B=t.$eval(r[p+"Animation"]);D.animation=angular.isDefined(B)?!!B:y.animation;var j=t.$eval(r[p+"AppendToBody"]);O=angular.isDefined(j)?j:O,O&&t.$on("$locationChangeSuccess",function(){D.isOpen&&v()}),t.$on("$destroy",function(){o.cancel(L),o.cancel(A),H(),w(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var r=this,i=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.addBar=function(t,n){i||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,r.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var r={$setViewValue:angular.noop};this.init=function(i){r=i,r.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var s=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(s)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(r.$setViewValue(t),r.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=r.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=r.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,r){var i=r[0],s=r[1];s&&i.init(s)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var i=n.indexOf(e);if(e.active&&n.length>1&&!r){var s=i==n.length-1?i-1:i+1;t.select(n[s])}n.splice(i,1)};var r;e.$on("$destroy",function(){r=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,r){return function(t,n,i,s){t.$watch("active",function(e){e&&s.select(t)}),t.disabled=!1,i.disabled&&t.$parent.$watch(e(i.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},s.addTab(t),t.$on("$destroy",function(){s.removeTab(t)}),t.$transcludeFn=r}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,r){var i=t.$eval(r.tabContentTransclude);i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,r,i,s){function o(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===v[1]&&(t+=12)),t):void 0}function u(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function a(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function f(e){l(),d.$setViewValue(new Date(p)),c(e)}function l(){d.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function c(t){var n=p.getHours(),r=p.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:a(n),e.minutes="m"===t?r:a(r),e.meridian=p.getHours()<12?v[0]:v[1]}function h(e){var t=new Date(p.getTime()+6e4*e);p.setHours(t.getHours(),t.getMinutes()),f()}var p=new Date,d={$setViewValue:angular.noop},v=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):s.meridians||i.DATETIME_FORMATS.AMPMS;this.init=function(n,r){d=n,d.$render=this.render;var i=r.eq(0),o=r.eq(1),u=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):s.mousewheel;u&&this.setupMousewheelEvents(i,o),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):s.readonlyInput,this.setupInputEvents(i,o)};var m=s.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){m=parseInt(e,10)});var g=s.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){g=parseInt(e,10)}),e.showMeridian=s.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,d.$error.time){var n=o(),r=u();angular.isDefined(n)&&angular.isDefined(r)&&(p.setHours(n),f())}else c()}),this.setupMousewheelEvents=function(t,n){var r=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(r(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(r(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void (e.updateMinutes=angular.noop);var r=function(t,n){d.$setViewValue(null),d.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=o();angular.isDefined(e)?(p.setHours(e),f("h")):r(!0)},t.bind("blur",function(){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=a(e.hours)})}),e.updateMinutes=function(){var e=u();angular.isDefined(e)?(p.setMinutes(e),f("m")):r(void 0,!0)},n.bind("blur",function(){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=a(e.minutes)})})},this.render=function(){var e=d.$modelValue?new Date(d.$modelValue):null;isNaN(e)?(d.$setValidity("time",!1),r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(p=e),l(),c())},e.incrementHours=function(){h(60*m)},e.decrementHours=function(){h(60*-m)},e.incrementMinutes=function(){h(g)},e.decrementMinutes=function(){h(-g)},e.toggleMeridian=function(){h(720*(p.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,r){var i=r[0],s=r[1];s&&i.init(s,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var r=n.match(t);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:r[3],source:e(r[4]),viewMapper:e(r[2]||r[1]),modelMapper:e(r[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,r,i,s,o){var u=[9,13,27,38,40];return{require:"ngModel",link:function(l,p,v,m){var y,w=l.$eval(v.typeaheadMinLength)||1,E=l.$eval(v.typeaheadWaitMs)||0,S=l.$eval(v.typeaheadEditable)!==!1,x=t(v.typeaheadLoading).assign||angular.noop,T=t(v.typeaheadOnSelect),N=v.typeaheadInputFormatter?t(v.typeaheadInputFormatter):void 0,C=v.typeaheadAppendToBody?l.$eval(v.typeaheadAppendToBody):!1,k=l.$eval(v.typeaheadFocusFirst)!==!1,L=t(v.ngModel).assign,A=o.parse(v.typeahead),O=l.$new();l.$on("$destroy",function(){O.$destroy()});var M="typeahead-"+O.$id+"-"+Math.floor(1e4*Math.random());p.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":M});var _=angular.element("<div typeahead-popup></div>");_.attr({id:M,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(v.typeaheadTemplateUrl)&&_.attr("template-url",v.typeaheadTemplateUrl);var D=function(){O.matches=[],O.activeIdx=-1,p.attr("aria-expanded",!1)},P=function(e){return M+"-option-"+e};O.$watch("activeIdx",function(e){0>e?p.removeAttr("aria-activedescendant"):p.attr("aria-activedescendant",P(e))});var H=function(e){var t={$viewValue:e};x(l,!0),n.when(A.source(l,t)).then(function(n){var r=e===m.$viewValue;if(r&&y)if(n.length>0){O.activeIdx=k?0:-1,O.matches.length=0;for(var i=0;i<n.length;i++)t[A.itemName]=n[i],O.matches.push({id:P(i),label:A.viewMapper(O,t),model:n[i]});O.query=e,O.position=C?s.offset(p):s.position(p),O.position.top=O.position.top+p.prop("offsetHeight"),p.attr("aria-expanded",!0)}else D();r&&x(l,!1)},function(){D(),x(l,!1)})};D(),O.query=void 0;var B,j=function(e){B=r(function(){H(e)},E)},F=function(){B&&r.cancel(B)};m.$parsers.unshift(function(e){return y=!0,e&&e.length>=w?E>0?(F(),j(e)):H(e):(x(l,!1),F(),D()),S?e:e?void m.$setValidity("editable",!1):(m.$setValidity("editable",!0),e)}),m.$formatters.push(function(e){var t,n,r={};return N?(r.$model=e,N(l,r)):(r[A.itemName]=e,t=A.viewMapper(l,r),r[A.itemName]=void 0,n=A.viewMapper(l,r),t!==n?t:e)}),O.select=function(e){var t,n,i={};i[A.itemName]=n=O.matches[e].model,t=A.modelMapper(l,i),L(l,t),m.$setValidity("editable",!0),T(l,{$item:n,$model:t,$label:A.viewMapper(l,i)}),D(),r(function(){p[0].focus()},0,!1)},p.bind("keydown",function(e){0!==O.matches.length&&-1!==u.indexOf(e.which)&&(-1!=O.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(O.activeIdx=(O.activeIdx+1)%O.matches.length,O.$digest()):38===e.which?(O.activeIdx=(O.activeIdx>0?O.activeIdx:O.matches.length)-1,O.$digest()):13===e.which||9===e.which?O.$apply(function(){O.select(O.activeIdx)}):27===e.which&&(e.stopPropagation(),D(),O.$digest()))}),p.bind("blur",function(){y=!1});var I=function(e){p[0]!==e.target&&(D(),O.$digest())};i.bind("click",I),l.$on("$destroy",function(){i.unbind("click",I),C&&q.remove()});var q=e(_)(O);C?i.find("body").append(q):p.after(q)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,r){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,s,o){var u=r(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e.get(u,{cache:t}).success(function(e){s.replaceWith(n(e.trim())(i))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),define("angular-bootstrap",["angular"],function(){}),function(){angular.module("toaster",["ngAnimate"]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(e,t){this.pop=function(t,n,r,i,s,o,u,a){if(angular.isObject(t)){var f=t;this.toast={type:f.type,title:f.title,body:f.body,timeout:f.timeout,bodyOutputType:f.bodyOutputType,clickHandler:f.clickHandler,showCloseButton:f.showCloseButton},u=f.toasterId}else this.toast={type:t,title:n,body:r,timeout:i,bodyOutputType:s,clickHandler:o,showCloseButton:a};e.$emit("toaster-newToast",u)},this.clear=function(){e.$emit("toaster-clearToasts")};for(var n in t["icon-classes"])this[n]=function(e){return function(t,n,r,i,s,o,u){angular.isString(t)?this.pop(e,t,n,r,i,s,o,u):this.pop(angular.extend(t,{type:e}))}}(n)}]).factory("toasterEventRegistry",["$rootScope",function(e){var t=null,n=null,r=[],i=[],s;return s={setup:function(){t||(t=e.$on("toaster-newToast",function(e,t){for(var n=0,i=r.length;n<i;n++)r[n](e,t)})),n||(n=e.$on("toaster-clearToasts",function(e){for(var t=0,n=i.length;t<n;t++)i[t](e)}))},subscribeToNewToastEvent:function(e){r.push(e)},subscribeToClearToastsEvent:function(e){i.push(e)},unsubscribeToNewToastEvent:function(e){var n=r.indexOf(e);n>=0&&r.splice(n,1),r.length===0&&(t(),t=null)},unsubscribeToClearToastsEvent:function(e){var t=i.indexOf(e);t>=0&&i.splice(t,1),i.length===0&&(n(),n=null)}},{setup:s.setup,subscribeToNewToastEvent:s.subscribeToNewToastEvent,subscribeToClearToastsEvent:s.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:s.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:s.unsubscribeToClearToastsEvent}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(e,t,n,r,i,s,o){return{replace:!0,restrict:"EA",scope:!0,link:function(t,u,a){function c(e,r){e.timeoutPromise=n(function(){t.removeToast(e.id)},r,1)}function h(n){n.type=l["icon-classes"][n.type],n.type||(n.type=l["icon-class"]);if(l["prevent-duplicates"]===!0&&t.toasters.length>0&&t.toasters[t.toasters.length-1].body===n.body)return;n.id=++f;var i=l["close-button"];if(typeof n.showCloseButton!="boolean")if(typeof i=="boolean")n.showCloseButton=i;else if(typeof i=="object"){var s=i[n.type];typeof s!="undefined"&&s!==null&&(n.showCloseButton=s)}else n.showCloseButton=!1;n.bodyOutputType=n.bodyOutputType||l["body-output-type"];switch(n.bodyOutputType){case"trustedHtml":n.html=r.trustAsHtml(n.body);break;case"template":n.bodyTemplate=n.body||l["body-template"];break;case"templateWithData":var o=e(n.body||l["body-template"]),u=o(t);n.bodyTemplate=u.template,n.data=u.data}t.configureTimer(n),l["newest-on-top"]===!0?(t.toasters.unshift(n),l.limit>0&&t.toasters.length>l.limit&&t.toasters.pop()):(t.toasters.push(n),l.limit>0&&t.toasters.length>l.limit&&t.toasters.shift())}function p(e){var r=t.toasters[e];r&&(r.timeoutPromise&&n.cancel(r.timeoutPromise),t.toasters.splice(e,1))}function d(){for(var e=t.toasters.length;e>=0;e--)p(e)}var f=0,l;l=angular.extend({},i,t.$eval(a.toasterOptions)),t.config={toasterId:l["toaster-id"],position:l["position-class"],title:l["title-class"],message:l["message-class"],tap:l["tap-to-dismiss"],closeButton:l["close-button"],animation:l["animation-class"],mouseoverTimer:l["mouseover-timer-stop"]},t.$on("$destroy",function(){o.unsubscribeToNewToastEvent(t._onNewToast),o.unsubscribeToClearToastsEvent(t._onClearToasts)}),t.configureTimer=function(e){var t=angular.isNumber(e.timeout)?e.timeout:l["time-out"];t>0&&c(e,t)},t.removeToast=function(e){var n,r,i;for(n=0,r=t.toasters.length;n<r;n++)if(t.toasters[n].id===e){p(n);break}},t.toasters=[],t._onNewToast=function(e,n){(t.config.toasterId===undefined&&n===undefined||n!==undefined&&n===t.config.toasterId)&&h(s.toast)},t._onClearToasts=function(e){d()},o.setup(),o.subscribeToNewToastEvent(t._onNewToast),o.subscribeToClearToastsEvent(t._onClearToasts)},controller:["$scope","$element","$attrs",function(e,t,r){e.stopTimer=function(t){e.config.mouseoverTimer===!0&&t.timeoutPromise&&(n.cancel(t.timeoutPromise),t.timeoutPromise=null)},e.restartTimer=function(t){e.config.mouseoverTimer===!0?t.timeoutPromise||e.configureTimer(t):t.timeoutPromise===null&&e.removeToast(t.id)},e.click=function(t){if(e.config.tap===!0||t.showCloseButton===!0){var n=!0;t.clickHandler&&(angular.isFunction(t.clickHandler)?n=t.clickHandler(t,t.showCloseButton):angular.isFunction(e.$parent.$eval(t.clickHandler))?n=e.$parent.$eval(t.clickHandler)(t,t.showCloseButton):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),n&&e.removeToast(t.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),define("toaster",["angular"],function(){}),typeof module!="undefined"&&typeof exports!="undefined"&&module.exports===exports&&(module.exports="ui.router"),function(e,t,n){function c(e,t){return f(new(f(function(){},{prototype:e})),t)}function h(e){return a(arguments,function(t){t!==e&&a(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function p(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function d(e){if(Object.keys)return Object.keys(e);var n=[];return t.forEach(e,function(e,t){n.push(t)}),n}function v(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,r=Number(arguments[2])||0;r=r<0?Math.ceil(r):Math.floor(r),r<0&&(r+=n);for(;r<n;r++)if(r in e&&e[r]===t)return r;return-1}function m(e,t,n,r){var i=p(n,r),s,o={},u=[];for(var a in i){if(!i[a].params)continue;s=d(i[a].params);if(!s.length)continue;for(var l in s){if(v(u,s[l])>=0)continue;u.push(s[l]),o[s[l]]=e[s[l]]}}return f({},o,t)}function g(e,t,n){if(!n){n=[];for(var r in e)n.push(r)}for(var i=0;i<n.length;i++){var s=n[i];if(e[s]!=t[s])return!1}return!0}function y(e,t){var n={};return a(e,function(e){n[e]=t[e]}),n}function b(e,t){var n={};return a(e,function(e){n[e[t]]=e}),n}function w(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return a(n,function(n){n in e&&(t[n]=e[n])}),t}function E(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var r in e)v(n,r)==-1&&(t[r]=e[r]);return t}function S(e,t){var n=u(e)?[]:{};return a(e,function(e,r){n[r]=i(t)?t(e):e[t]}),n}function x(e,t){var n=u(e),r=n?[]:{};return a(e,function(e,i){t(e,i)&&(r[n?r.length:i]=e)}),r}function T(e,t){var n=u(e)?[]:{};return a(e,function(e,r){n[r]=t(e,r)}),n}function N(e,t){var i=1,u=2,l={},c=[],p=l,m=f(e.when(l),{$$promises:l,$$values:l});this.study=function(l){function S(e,n){if(w[n]===u)return;b.push(n);if(w[n]===i)throw b.splice(0,v(b,n)),new Error("Cyclic dependency: "+b.join(" -> "));w[n]=i;if(s(e))y.push(n,[function(){return t.get(e)}],c);else{var r=t.annotate(e);a(r,function(e){e!==n&&l.hasOwnProperty(e)&&S(l[e],e)}),y.push(n,e,r)}b.pop(),w[n]=u}function x(e){return o(e)&&e.then&&e.$$promises}if(!o(l))throw new Error("'invocables' must be an object");var g=d(l||{}),y=[],b=[],w={};return a(l,S),l=b=w=null,function(i,s,u){function S(){--b||(w||h(v,s.$$values),c.$$values=v,c.$$promises=c.$$promises||!0,delete c.$$inheritedValues,l.resolve(v))}function T(e){c.$$failure=e,l.reject(e)}function k(n,s,o){function h(e){f.reject(e),T(e)}function p(){if(r(c.$$failure))return;try{f.resolve(t.invoke(s,u,v)),f.promise.then(function(e){v[n]=e,S()},h)}catch(e){h(e)}}var f=e.defer(),l=0;a(o,function(e){d.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(l++,d[e].then(function(t){v[e]=t,--l||p()},h))}),l||p(),d[n]=f.promise}x(i)&&u===n&&(u=s,s=i,i=null);if(!i)i=p;else if(!o(i))throw new Error("'locals' must be an object");if(!s)s=m;else if(!x(s))throw new Error("'parent' must be a promise returned by $resolve.resolve()");var l=e.defer(),c=l.promise,d=c.$$promises={},v=f({},i),b=1+y.length/3,w=!1;if(r(s.$$failure))return T(s.$$failure),c;s.$$inheritedValues&&h(v,E(s.$$inheritedValues,g)),f(d,s.$$promises),s.$$values?(w=h(v,E(s.$$values,g)),c.$$inheritedValues=E(s.$$values,g),S()):(s.$$inheritedValues&&(c.$$inheritedValues=E(s.$$inheritedValues,g)),s.then(S,T));for(var N=0,C=y.length;N<C;N+=3)i.hasOwnProperty(y[N])?S():k(y[N],y[N+1],y[N+2]);return c}},this.resolve=function(e,t,n,r){return this.study(e)(t,n,r)}}function C(e,t,n){this.fromConfig=function(e,t,n){return r(e.template)?this.fromString(e.template,t):r(e.templateUrl)?this.fromUrl(e.templateUrl,t):r(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return i(e)?e(t):e},this.fromUrl=function(n,r){return i(n)&&(n=n(r)),n==null?null:e.get(n,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data})},this.fromProvider=function(e,t,r){return n.invoke(e,null,r||{params:t})}}function L(e,t,r){function m(t,n,r,i){v.push(t);if(p[t])return p[t];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(d[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return d[t]=new k.Param(t,n,r,i),d[t]}function g(e,t,n){var r=["",""],i=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return i;switch(n){case!1:r=["(",")"];break;case!0:r=["?(",")?"];break;default:r=["("+n+"|",")?"]}return i+r[0]+t+r[1]}function y(n,r){var i,s,o,u,f,l;return i=n[2]||n[3],f=t.params[i],o=e.substring(a,n.index),s=r?n[4]:n[4]||(n[1]=="*"?".*":null),u=k.type(s||"string")||c(k.type("string"),{pattern:new RegExp(s)}),{id:i,regexp:s,segment:o,type:u,cfg:f}}t=f({params:{}},o(t)?t:{});var i=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,s=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u="^",a=0,l,h=this.segments=[],p=r?r.params:{},d=this.params=r?r.params.$$new():new k.ParamSet,v=[];this.source=e;var b,w,E;while(l=i.exec(e)){b=y(l,!1);if(b.segment.indexOf("?")>=0)break;w=m(b.id,b.type,b.cfg,"path"),u+=g(b.segment,w.type.pattern.source,w.squash),h.push(b.segment),a=i.lastIndex}E=e.substring(a);var S=E.indexOf("?");if(S>=0){var x=this.sourceSearch=E.substring(S);E=E.substring(0,S),this.sourcePath=e.substring(0,a+S);if(x.length>0){a=0;while(l=s.exec(x))b=y(l,!0),w=m(b.id,b.type,b.cfg,"search"),a=i.lastIndex}}else this.sourcePath=e,this.sourceSearch="";u+=g(E)+(t.strict===!1?"/?":"")+"$",h.push(E),this.regexp=new RegExp(u,t.caseInsensitive?"i":n),this.prefix=h[0],this.$$paramNames=v}function A(e){f(this,e)}function O(){function p(e){return e!=null?e.toString().replace(/\//g,"%2F"):e}function m(e){return e!=null?e.toString().replace(/%2F/g,"/"):e}function g(e){return this.pattern.test(e)}function N(){return{strict:l,caseInsensitive:e}}function C(e){return i(e)||u(e)&&i(e[e.length-1])}function M(){while(w.length){var e=w.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(y[e.name],E.invoke(e.def))}}function _(e){f(this,e||{})}k=this;var e=!1,l=!0,h=!1,y={},b=!0,w=[],E,S={string:{encode:p,decode:m,is:g,pattern:/[^/]*/},"int":{encode:p,decode:function(e){return parseInt(e,10)},is:function(e){return r(e)&&this.decode(e.toString())===e},pattern:/\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return parseInt(e,10)!==0},is:function(e){return e===!0||e===!1},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^/]*/},any:{encode:t.identity,decode:t.identity,is:t.identity,equals:t.equals,pattern:/.*/}};O.$$getDefaultValue=function(e){if(!C(e.value))return e.value;if(!E)throw new Error("Injectable functions cannot be called at configuration time");return E.invoke(e.value)},this.caseInsensitive=function(t){return r(t)&&(e=t),e},this.strictMode=function(e){return r(e)&&(l=e),l},this.defaultSquashPolicy=function(e){if(!r(e))return h;if(e!==!0&&e!==!1&&!s(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return h=e,e},this.compile=function(e,t){return new L(e,f(N(),t))},this.isMatcher=function(e){if(!o(e))return!1;var t=!0;return a(L.prototype,function(n,s){i(n)&&(t=t&&r(e[s])&&i(e[s]))}),t},this.type=function(e,t,n){if(!r(t))return y[e];if(y.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return y[e]=new A(f({name:e},t)),n&&(w.push({name:e,def:n}),b||M()),this},a(S,function(e,t){y[t]=new A(f({name:t},e))}),y=c(y,{}),this.$get=["$injector",function(e){return E=e,b=!1,M(),a(S,function(e,t){y[t]||(y[t]=new A(e))}),this}],this.Param=function(t,i,a,l){function w(e){var t=o(e)?d(e):[],n=v(t,"value")===-1&&v(t,"type")===-1&&v(t,"squash")===-1&&v(t,"array")===-1;return n&&(e={value:e}),e.$$fn=C(e.value)?e.value:function(){return e.value},e}function S(e,n,r){if(e.type&&n)throw new Error("Param '"+t+"' has two type configurations.");return n?n:e.type?e.type instanceof A?e.type:new A(e.type):r==="config"?y.any:y.string}function N(){var e={array:l==="search"?"auto":!1},n=t.match(/\[\]$/)?{array:!0}:{};return f(e,n,a).array}function k(e,t){var n=e.squash;if(!t||n===!1)return!1;if(!r(n)||n==null)return h;if(n===!0||s(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function L(e,t,r,i){var o,a,f=[{from:"",to:r||t?n:""},{from:null,to:r||t?n:""}];return o=u(e.replace)?e.replace:[],s(i)&&o.push({from:i,to:n}),a=T(o,function(e){return e.from}),x(f,function(e){return v(a,e.from)===-1}).concat(o)}function O(){if(!E)throw new Error("Injectable functions cannot be called at configuration time");return E.invoke(a.$$fn)}function M(e){function t(e){return function(t){return t.from===e}}function n(e){var n=T(x(c.replace,t(e)),function(e){return e.to});return n.length?n[0]:e}return e=n(e),r(e)?c.type.decode(e):O()}function _(){return"{Param:"+t+" "+i+" squash: '"+g+"' optional: "+m+"}"}var c=this;a=w(a),i=S(a,i,l);var p=N();i=p?i.$asArray(p,l==="search"):i,i.name==="string"&&!p&&l==="path"&&a.value===n&&(a.value="");var m=a.value!==n,g=k(a,m),b=L(a,p,m,g);f(this,{id:t,type:i,location:l,array:p,squash:g,replace:b,isOptional:m,value:M,dynamic:n,config:a,toString:_})},_.prototype={$$new:function(){return c(this,f(new _,{$$parent:this}))},$$keys:function(){var e=[],t=[],n=this,r=d(_.prototype);while(n)t.push(n),n=n.$$parent;return t.reverse(),a(t,function(t){a(d(t),function(t){v(e,t)===-1&&v(r,t)===-1&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return a(n.$$keys(),function(r){t[r]=n[r].value(e&&e[r])}),t},$$equals:function(e,t){var n=!0,r=this;return a(r.$$keys(),function(i){var s=e&&e[i],o=t&&t[i];r[i].type.equals(s,o)||(n=!1)}),n},$$validates:function(t){var n=!0,r,i,s,o=this;return a(this.$$keys(),function(e){s=o[e],i=t[e],r=!i&&s.isOptional,n=n&&(r||!!s.type.is(i))}),n},$$parent:n},this.ParamSet=_}function M(e,o){function p(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return t!=null?t[1].replace(/\\(.)/g,"$1"):""}function d(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t[n==="$"?0:Number(n)]})}function v(e,t,n){if(!n)return!1;var i=e.invoke(t,t,{$match:n});return r(i)?i:!0}function m(r,i,o,u){function v(e,t,n){return f==="/"?e:t?f.slice(0,-1)+e:n?f.slice(1)+e:e}function m(e){function i(e){var t=e(o,r);return t?(s(t)&&r.replace().url(t),!0):!1}if(e&&e.defaultPrevented)return;var t=d&&r.url()===d;d=n;if(t)return!0;var u=a.length,f;for(f=0;f<u;f++)if(i(a[f]))return;l&&i(l)}function g(){return h=h||i.$on("$locationChangeSuccess",m),h}var f=u.baseHref(),p=r.url(),d;return c||g(),{sync:function(){m()},listen:function(){return g()},update:function(e){if(e){p=r.url();return}if(r.url()===p)return;r.url(p),r.replace()},push:function(e,t,i){r.url(e.format(t||{})),d=i&&i.$$avoidResync?r.url():n,i&&i.replace&&r.replace()},href:function(n,i,s){if(!n.validates(i))return null;var o=e.html5Mode();t.isObject(o)&&(o=o.enabled);var u=n.format(i);s=s||{},!o&&u!==null&&(u="#"+e.hashPrefix()+u),u=v(u,o,s.absolute);if(!s.absolute||!u)return u;var a=!o&&u?"/":"",f=r.port();return f=f===80||f===443?"":":"+f,[r.protocol(),"://",r.host(),f,a,u].join("")}}}var a=[],l=null,c=!1,h;this.rule=function(e){if(!i(e))throw new Error("'rule' must be a function");return a.push(e),this},this.otherwise=function(e){if(s(e)){var t=e;e=function(){return t}}else if(!i(e))throw new Error("'rule' must be a function");return l=e,this},this.when=function(e,t){var n,r=s(t);s(e)&&(e=o.compile(e));if(!r&&!i(t)&&!u(t))throw new Error("invalid 'handler' in when()");var a={matcher:function(e,t){return r&&(n=o.compile(t),t=["$match",function(e){return n.format(e)}]),f(function(n,r){return v(n,t,e.exec(r.path(),r.search()))},{prefix:s(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return r&&(n=t,t=["$match",function(e){return d(n,e)}]),f(function(n,r){return v(n,t,e.exec(r.path()))},{prefix:p(e)})}},l={matcher:o.isMatcher(e),regex:e instanceof RegExp};for(var c in l)if(l[c])return this.rule(a[c](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),c=e},this.$get=m,m.$inject=["$location","$rootScope","$injector","$browser"]}function _(e,h){function N(e){return e.indexOf(".")===0||e.indexOf("^")===0}function C(e,t){if(!e)return n;var r=s(e),i=r?e:e.name,o=N(i);if(o){if(!t)throw new Error("No reference point given for path '"+i+"'");t=C(t);var u=i.split("."),a=0,f=u.length,l=t;for(;a<f;a++){if(u[a]===""&&a===0){l=t;continue}if(u[a]==="^"){if(!l.parent)throw new Error("Path '"+i+"' not valid for state '"+t.name+"'");l=l.parent;continue}break}u=u.slice(a).join("."),i=l.name+(l.name&&u?".":"")+u}var c=b[i];return c&&(r||!r&&(c===e||c.self===e))?c:n}function L(e,t){E[e]||(E[e]=[]),E[e].push(t)}function A(e){var t=E[e]||[];while(t.length)O(t.shift())}function O(t){t=c(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!s(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(b.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var r=n.indexOf(".")!==-1?n.substring(0,n.lastIndexOf(".")):s(t.parent)?t.parent:o(t.parent)&&s(t.parent.name)?t.parent.name:"";if(r&&!b[r])return L(r,t.self);for(var u in x)i(x[u])&&(t[u]=x[u](t,x.$delegates[u]));return b[n]=t,!t[S]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){(w.$current.navigable!=t||!g(e,n))&&w.transitionTo(t,e,{inherit:!0,location:!1})}]),A(n),t}function M(e){return e.indexOf("*")>-1}function _(e){var t=e.split("."),n=w.$current.name.split(".");t[0]==="**"&&(n=n.slice(v(n,t[1])),n.unshift("**")),t[t.length-1]==="**"&&(n.splice(v(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**"));if(t.length!=n.length)return!1;for(var r=0,i=t.length;r<i;r++)t[r]==="*"&&(n[r]="*");return n.join("")===t.join("")}function D(e,t){return s(e)&&!r(t)?x[e]:!i(t)||!s(e)?this:(x[e]&&!x.$delegates[e]&&(x.$delegates[e]=x[e]),x[e]=t,this)}function P(e,t){return o(e)?t=e:t.name=e,O(t),this}function H(e,o,h,v,E,x,N,k,L){function H(t,n,r,i){var s=e.$broadcast("$stateNotFound",t,n,r);if(s.defaultPrevented)return N.update(),D;if(!s.retry)return null;if(i.$retry)return N.update(),P;var u=w.transition=o.when(s.retry);return u.then(function(){return u!==w.transition?A:(t.options.$retry=!0,w.transitionTo(t.to,t.toParams,t.options))},function(){return D}),N.update(),u}function j(e,n,r,s,f,l){var c=r?n:y(e.params.$$keys(),n),p={$stateParams:c};f.resolve=E.resolve(e.resolve,p,f.resolve,e);var d=[f.resolve.then(function(e){f.globals=e})];return s&&d.push(s),a(e.views,function(n,r){var s=n.resolve&&n.resolve!==e.resolve?n.resolve:{};s.$template=[function(){return h.load(r,{view:n,locals:p,params:c,notify:l.notify})||""}],d.push(E.resolve(s,p,f.resolve,e).then(function(o){if(i(n.controllerProvider)||u(n.controllerProvider)){var a=t.extend({},s,p);o.$$controller=v.invoke(n.controllerProvider,null,a)}else o.$$controller=n.controller;o.$$state=e,o.$$controllerAs=n.controllerAs,f[r]=o}))}),o.all(d).then(function(e){return f})}var A=o.reject(new Error("transition superseded")),O=o.reject(new Error("transition prevented")),D=o.reject(new Error("transition aborted")),P=o.reject(new Error("transition failed"));return p.locals={resolve:null,globals:{$stateParams:{}}},w={params:{},current:p.self,$current:p,transition:null},w.reload=function(){return w.transitionTo(w.current,x,{reload:!0,inherit:!1,notify:!0})},w.go=function(t,n,r){return w.transitionTo(t,n,f({inherit:!0,relative:w.$current},r))},w.transitionTo=function(n,i,s){i=i||{},s=f({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},s||{});var u=w.$current,a=w.params,h=u.path,d,g=C(n,s.relative);if(!r(g)){var b={to:n,toParams:i,options:s},E=H(b,u.self,a,s);if(E)return E;n=b.to,i=b.toParams,s=b.options,g=C(n,s.relative);if(!r(g))throw s.relative?new Error("Could not resolve '"+n+"' from state '"+s.relative+"'"):new Error("No such state '"+n+"'")}if(g[S])throw new Error("Cannot transition to abstract state '"+n+"'");s.inherit&&(i=m(x,i||{},w.$current,g));if(!g.params.$$validates(i))return P;i=g.params.$$values(i),n=g;var T=n.path,k=0,L=T[k],M=p.locals,_=[];if(!s.reload)while(L&&L===h[k]&&L.ownParams.$$equals(i,a))M=_[k]=L.locals,k++,L=T[k];if(B(n,u,M,s))return n.self.reloadOnSearch!==!1&&N.update(),w.transition=null,o.when(w.current);i=y(n.params.$$keys(),i||{});if(s.notify&&e.$broadcast("$stateChangeStart",n.self,i,u.self,a).defaultPrevented)return N.update(),O;var D=o.when(M);for(var F=k;F<T.length;F++,L=T[F])M=_[F]=c(M),D=j(L,i,L===n,D,M,s);var I=w.transition=D.then(function(){var t,r,o;if(w.transition!==I)return A;for(t=h.length-1;t>=k;t--)o=h[t],o.self.onExit&&v.invoke(o.self.onExit,o.self,o.locals.globals),o.locals=null;for(t=k;t<T.length;t++)r=T[t],r.locals=_[t],r.self.onEnter&&v.invoke(r.self.onEnter,r.self,r.locals.globals);return w.transition!==I?A:(w.$current=n,w.current=n.self,w.params=i,l(w.params,x),w.transition=null,s.location&&n.navigable&&N.push(n.navigable.url,n.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:s.location==="replace"}),s.notify&&e.$broadcast("$stateChangeSuccess",n.self,i,u.self,a),N.update(!0),w.current)},function(t){return w.transition!==I?A:(w.transition=null,d=e.$broadcast("$stateChangeError",n.self,i,u.self,a,t),d.defaultPrevented||N.update(),o.reject(t))});return I},w.is=function(t,i,s){s=f({relative:w.$current},s||{});var o=C(t,s.relative);return r(o)?w.$current!==o?!1:i?g(o.params.$$values(i),x):!0:n},w.includes=function(t,i,o){o=f({relative:w.$current},o||{});if(s(t)&&M(t)){if(!_(t))return!1;t=w.$current.name}var u=C(t,o.relative);return r(u)?r(w.$current.includes[u.name])?i?g(u.params.$$values(i),x,d(i)):!0:!1:n},w.href=function(t,i,s){s=f({lossy:!0,inherit:!0,absolute:!1,relative:w.$current},s||{});var o=C(t,s.relative);if(!r(o))return null;s.inherit&&(i=m(x,i||{},w.$current,o));var u=o&&s.lossy?o.navigable:o;return!u||u.url===n||u.url===null?null:N.href(u.url,y(o.params.$$keys(),i||{}),{absolute:s.absolute})},w.get=function(e,t){if(arguments.length===0)return T(d(b),function(e){return b[e].self});var n=C(e,t||w.$current);return n&&n.self?n.self:null},w}function B(e,t,n,r){if(e===t&&(n===t.locals&&!r.reload||e.self.reloadOnSearch===!1))return!0}var p,b={},w,E={},S="abstract",x={parent:function(e){if(r(e.parent)&&e.parent)return C(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?C(t[1]):p},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=f({},e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(s(t))return t.charAt(0)=="^"?h.compile(t.substring(1),n):(e.parent.navigable||p).url.concat(t,n);if(!t||h.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new k.ParamSet;return a(e.params||{},function(e,n){t[n]||(t[n]=new k.Param(n,null,e,"config"))}),t},params:function(e){return e.parent&&e.parent.params?f(e.parent.params.$$new(),e.ownParams):new k.ParamSet},views:function(e){var t={};return a(r(e.views)?e.views:{"":e},function(n,r){r.indexOf("@")<0&&(r+="@"+e.parent.name),t[r]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?f({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};p=O({name:"",url:"^",views:null,"abstract":!0}),p.navigable=null,this.decorator=D,this.state=P,this.$get=H,H.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function D(){function e(e,t){return{load:function(r,i){var s,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return i=f(o,i),i.view&&(s=t.fromConfig(i.view,i.params,i.locals)),s&&i.notify&&e.$broadcast("$viewContentLoading",i),s}}}this.$get=e,e.$inject=["$rootScope","$templateFactory"]}function P(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){n(function(){e[0].scrollIntoView()},0,!1)}}]}function H(e,n,r,i){function s(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(t){return null}}}function f(e,t){var n=function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}};if(a)return{enter:function(e,t,n){var r=a.enter(e,null,t,n);r&&r.then&&r.then(n)},leave:function(e,t){var n=a.leave(e,t);n&&n.then&&n.then(t)}};if(u){var r=u&&u(t,e);return{enter:function(e,t,n){r.enter(e,null,t),n()},leave:function(e,t){r.leave(e),t()}}}return n()}var o=s(),u=o("$animator"),a=o("$animate"),l={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,s,o){return function(n,s,u){function m(){a&&(a.remove(),a=null),c&&(c.$destroy(),c=null),l&&(v.leave(l,function(){a=null}),a=l,l=null)}function g(a){var f,g=j(n,u,s,i),y=g&&e.$current&&e.$current.locals[g];if(!a&&y===h)return;f=n.$new(),h=e.$current.locals[g];var b=o(f,function(e){v.enter(e,s,function(){c&&c.$emit("$viewContentAnimationEnded"),(t.isDefined(d)&&!d||n.$eval(d))&&r(e)}),m()});l=b,c=f,c.$emit("$viewContentLoaded"),c.$eval(p)}var a,l,c,h,p=u.onload||"",d=u.autoscroll,v=f(u,n);n.$on("$stateChangeSuccess",function(){g(!1)}),n.$on("$viewContentLoading",function(){g(!1)}),g(!0)}}};return l}function B(e,t,n,r){return{restrict:"ECA",priority:-400,compile:function(i){var s=i.html();return function(i,o,u){var a=n.$current,f=j(i,u,o,r),l=a&&a.locals[f];if(!l)return;o.data("$uiView",{name:f,state:l.$$state}),o.html(l.$template?l.$template:s);var c=e(o.contents());if(l.$$controller){l.$scope=i;var h=t(l.$$controller,l);l.$$controllerAs&&(i[l.$$controllerAs]=h),o.data("$ngControllerController",h),o.children().data("$ngControllerController",h)}c(i)}}}}function j(e,t,n,r){var i=r(t.uiView||t.name||"")(e),s=n.inheritedData("$uiView");return i.indexOf("@")>=0?i:i+"@"+(s?s.state.name:"")}function F(e,t){var n=e.match(/^\s*({[^}]*})\s*$/),r;n&&(e=t+"("+n[1]+")"),r=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!r||r.length!==4)throw new Error("Invalid state ref '"+e+"'");return{state:r[1],paramExpr:r[3]||null}}function I(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function q(e,n){var r=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,s,o,u){var a=F(o.uiSref,e.current.name),f=null,l=null,c=I(s)||e.$current,h=null,p=s.prop("tagName")==="A",d=s[0].nodeName==="FORM",v=d?"action":"href",m=!0,g={relative:c,inherit:!0},y=i.$eval(o.uiSrefOpts)||{};t.forEach(r,function(e){e in y&&(g[e]=y[e])});var b=function(n){n&&(f=t.copy(n));if(!m)return;h=e.href(a.state,f,g);var r=u[1]||u[0];r&&r.$$setStateInfo(a.state,f);if(h===null)return m=!1,!1;o.$set(v,h)};a.paramExpr&&(i.$watch(a.paramExpr,function(e,t){e!==f&&b(e)},!0),f=t.copy(i.$eval(a.paramExpr))),b();if(d)return;s.bind("click",function(t){var r=t.which||t.button;if(!(r>1||t.ctrlKey||t.metaKey||t.shiftKey||s.attr("target"))){var i=n(function(){e.go(a.state,f,g)});t.preventDefault();var o=p&&!h?1:0;t.preventDefault=function(){o--<=0&&n.cancel(i)}}})}}}function R(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,r,i){function a(){f()?r.addClass(u):r.removeClass(u)}function f(){return typeof i.uiSrefActiveEq!="undefined"?s&&e.is(s.name,o):s&&e.includes(s.name,o)}var s,o,u;u=n(i.uiSrefActiveEq||i.uiSrefActive||"",!1)(t),this.$$setStateInfo=function(t,n){s=e.get(t,I(r)),o=n,a()},t.$on("$stateChangeSuccess",a)}]}}function U(e){var t=function(t){return e.is(t)};return t.$stateful=!0,t}function z(e){var t=function(t){return e.includes(t)};return t.$stateful=!0,t}var r=t.isDefined,i=t.isFunction,s=t.isString,o=t.isObject,u=t.isArray,a=t.forEach,f=t.extend,l=t.copy;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),N.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",N),C.$inject=["$http","$templateCache","$injector"],t.module("ui.router.util").service("$templateFactory",C);var k;L.prototype.concat=function(e,t){var n={caseInsensitive:k.caseInsensitive(),strict:k.strictMode(),squash:k.defaultSquashPolicy()};return new L(this.sourcePath+e+this.sourceSearch,f(n,t),this)},L.prototype.toString=function(){return this.source},L.prototype.exec=function(e,t){function c(e){function t(e){return e.split("").reverse().join("")}function n(e){return e.replace(/\\-/,"-")}var r=t(e).split(/-(?!\\)/),i=T(r,t);return T(i,n).reverse()}var n=this.regexp.exec(e);if(!n)return null;t=t||{};var r=this.parameters(),i=r.length,s=this.segments.length-1,o={},u,a,f,l;if(s!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(u=0;u<s;u++){l=r[u];var h=this.params[l],p=n[u+1];for(a=0;a<h.replace;a++)h.replace[a].from===p&&(p=h.replace[a].to);p&&h.array===!0&&(p=c(p)),o[l]=h.value(p)}for(;u<i;u++)l=r[u],o[l]=this.params[l].value(t[l]);return o},L.prototype.parameters=function(e){return r(e)?this.params[e]||null:this.$$paramNames},L.prototype.validates=function(e){return this.params.$$validates(e)},L.prototype.format=function(e){function c(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var t=this.segments,n=this.parameters(),r=this.params;if(!this.validates(e))return null;var i,o=!1,a=t.length-1,f=n.length,l=t[0];for(i=0;i<f;i++){var h=i<a,p=n[i],d=r[p],v=d.value(e[p]),m=d.isOptional&&d.type.equals(d.value(),v),g=m?d.squash:!1,y=d.type.encode(v);if(h){var b=t[i+1];if(g===!1)y!=null&&(u(y)?l+=T(y,c).join("-"):l+=encodeURIComponent(y)),l+=b;else if(g===!0){var w=l.match(/\/$/)?/\/?(.*)/:/(.*)/;l+=b.match(w)[1]}else s(g)&&(l+=g+b)}else{if(y==null||m&&g!==!1)continue;u(y)||(y=[y]),y=T(y,encodeURIComponent).join("&"+p+"="),l+=(o?"&":"?")+(p+"="+y),o=!0}}return l},A.prototype.is=function(e,t){return!0},A.prototype.encode=function(e,t){return e},A.prototype.decode=function(e,t){return e},A.prototype.equals=function(e,t){return e==t},A.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},A.prototype.pattern=/.*/,A.prototype.toString=function(){return"{Type:"+this.name+"}"},A.prototype.$asArray=function(e,t){function i(e,t){function i(e,t){return function(){return e[t].apply(e,arguments)}}function s(e){return u(e)?e:r(e)?[e]:[]}function o(e){switch(e.length){case 0:return n;case 1:return t==="auto"?e[0]:e;default:return e}}function a(e){return!e}function f(e,t){return function(r){r=s(r);var i=T(r,e);return t===!0?x(i,a).length===0:o(i)}}function l(e){return function(n,r){var i=s(n),o=s(r);if(i.length!==o.length)return!1;for(var u=0;u<i.length;u++)if(!e(i[u],o[u]))return!1;return!0}}this.encode=f(i(e,"encode")),this.decode=f(i(e,"decode")),this.is=f(i(e,"is"),!0),this.equals=l(i(e,"equals")),this.pattern=e.pattern,this.$arrayMode=t}if(!e)return this;if(e==="auto"&&!t)throw new Error("'auto' array mode is for query parameters only");return new i(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",O),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),M.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",M),_.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").value("$stateParams",{}).provider("$state",_),D.$inject=[],t.module("ui.router.state").provider("$view",D),t.module("ui.router.state").provider("$uiViewScroll",P),H.$inject=["$state","$injector","$uiViewScroll","$interpolate"],B.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",H),t.module("ui.router.state").directive("uiView",B),q.$inject=["$state","$timeout"],R.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",q).directive("uiSrefActive",R).directive("uiSrefActiveEq",R),U.$inject=["$state"],z.$inject=["$state"],t.module("ui.router.state").filter("isState",U).filter("includedByState",z)}(window,window.angular),define("angular-ui-router",["angular"],function(){});if(typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery),+function(e){function r(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})}var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function o(){s.detach().trigger("closed.bs.alert").remove()}var r=e(this),i=r.attr("data-target");i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var s=e(i);t&&t.preventDefault(),s.length||(s=r.closest(".alert")),s.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o()};var i=e.fn.alert;e.fn.alert=r,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),+function(e){function n(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),s=typeof n=="object"&&n;i||r.data("bs.button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};t.VERSION="3.3.4",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",s.resetText==null&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](s[t]==null?this.options[t]:s[t]),t=="loadingText"?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");n.prop("type")=="radio"&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),n.call(r,"toggle"),t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){function n(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("bs.carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.pause().cycle()})}var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.4",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r=e=="prev"&&n===0||e=="next"&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i=e=="prev"?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(this.sliding)return;return this.slide("next")},t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")},t.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(n,i),o=this.interval,u=n=="next"?"left":"right",a=this;if(s.hasClass("active"))return this.sliding=!1;var f=s[0],l=e.Event("slide.bs.carousel",{relatedTarget:f,direction:u});this.$element.trigger(l);if(l.isDefaultPrevented())return;this.sliding=!0,o&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=e(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:f,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(n),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([n,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(h)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),o&&this.cycle(),this};var r=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(t){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(!s.hasClass("carousel"))return;var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),n.call(s,o),u&&s.data("bs.carousel").to(u),t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){function n(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function r(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);!i&&s.toggle&&/show|hide/.test(n)&&(s.toggle=!1),i||r.data("bs.collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],'+'[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};t.VERSION="3.3.4",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(i&&i.length){n=i.data("bs.collapse");if(n&&n.transitioning)return}var s=e.Event("show.bs.collapse");this.$element.trigger(s);if(s.isDefaultPrevented())return;i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var a=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][a])},t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var n=e.Event("hide.bs.collapse");this.$element.trigger(n);if(n.isDefaultPrevented())return;var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var i=e(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=r,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var s=n(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();r.call(s,u)})}(jQuery),+function(e){function i(r){if(r&&r.which===3)return;e(t).remove(),e(n).each(function(){var t=e(this),n=s(t),i={relatedTarget:this};if(!n.hasClass("open"))return;n.trigger(r=e.Event("hide.bs.dropdown",i));if(r.isDefaultPrevented())return;t.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",i)})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function o(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})}var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.4",r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=s(n),o=r.hasClass("open");i();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i);var u={relatedTarget:this};r.trigger(t=e.Event("show.bs.dropdown",u));if(t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1},r.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var i=s(r),o=i.hasClass("open");if(!o&&t.which!=27||o&&t.which==27)return t.which==27&&i.find(n).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",a=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(!a.length)return;var f=a.index(t.target);t.which==38&&f>0&&f--,t.which==40&&f<a.length-1&&f++,~f||(f=0),a.eq(f).trigger("focus")};var u=e.fn.dropdown;e.fn.dropdown=o,e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',r.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',r.prototype.keydown)}(jQuery),+function(e){function n(n,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);s||i.data("bs.modal",s=new t(this,o)),typeof n=="string"?s[n](r):o.show&&s.show(r)})}var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};t.VERSION="3.3.4",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,i=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i);if(this.isShown||i.isDefaultPrevented())return;this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)})},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n);if(!this.isShown||n.isDefaultPrevented())return;this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]!==e.target&&!this.$element.has(e.target).length&&this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!n)return;s?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&t.preventDefault(),s.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(s,o,this)})}(jQuery),+function(e){function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};t.VERSION="3.3.4",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);if(this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focusin",a=o=="hover"?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n&&n.$tip&&n.$tip.is(":visible")){n.hoverState="in";return}n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u=typeof this.options.placement=="function"?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,f=a.test(u);f&&(u=u.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var l=this.getPosition(),c=s[0].offsetWidth,h=s[0].offsetHeight;if(f){var p=u,d=this.options.container?e(this.options.container):this.$element.parent(),v=this.getPosition(d);u=u=="bottom"&&l.bottom+h>v.bottom?"top":u=="top"&&l.top-h<v.top?"bottom":u=="right"&&l.right+c>v.width?"left":u=="left"&&l.left-c<v.left?"right":u,s.removeClass(p).addClass(u)}var m=this.getCalculatedOffset(u,l,c,h);this.applyPlacement(m,u);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,e=="out"&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top=t.top+o,t.left=t.left+u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;n=="top"&&f!=s&&(t.top=t.top+s-f);var l=this.getViewportAdjustedDelta(n,t,a,f);l.left?t.left+=l.left:t.top+=l.top;var c=/top|bottom/.test(n),h=c?l.left*2-i+a:l.top*2-s+f,p=c?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(h,r[0][p],c)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){function o(){r.hoverState!="in"&&i.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}var r=this,i=e(this.$tip),s=e.Event("hide.bs."+this.type);this.$element.trigger(s);if(s.isDefaultPrevented())return;return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r=n.tagName=="BODY",i=n.getBoundingClientRect();i.width==null&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.width&&(i.left=o.left+o.width-l)}return i},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.getUID=function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=n,e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){function n(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;if(!i&&/destroy|hide/.test(n))return;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.4",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=n,e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){function t(n,r){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s=typeof n=="object"&&n;i||r.data("bs.scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.getScrollHeight(),n=this.options.offset+t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;this.scrollHeight!=t&&this.refresh();if(e>=n)return s!=(o=i[i.length-1])&&this.activate(o);if(s&&e<r[0])return this.activeTarget=null,this.clear();for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(r[o+1]===undefined||e<r[o+1])&&this.activate(i[o])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),typeof n=="string"&&i[n]()})}var t=function(t){this.element=e(t)};t.VERSION="3.3.4",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});i.trigger(s),t.trigger(o);if(o.isDefaultPrevented()||s.isDefaultPrevented())return;var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})},t.prototype.activate=function(n,r,i){function u(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var s=r.find("> .active"),o=i&&e.support.transition&&(s.length&&s.hasClass("fade")||!!r.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",u).emulateTransitionEnd(t.TRANSITION_DURATION):u(),s.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){function n(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s=typeof n=="object"&&n;i||r.data("bs.affix",i=new t(this,s)),typeof n=="string"&&i[n]()})}var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};t.VERSION="3.3.4",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(n!=null&&this.affixed=="top")return i<n?"top":!1;if(this.affixed=="bottom")return n!=null?i+this.unpin<=s.top?!1:"bottom":i+o<=e-r?!1:"bottom";var u=this.affixed==null,a=u?i:s.top,f=u?o:t;return n!=null&&i<=n?"top":r!=null&&a+f>=e-r?"bottom":!1},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=e(document.body).height();typeof r!="object"&&(s=i=r),typeof i=="function"&&(i=r.top(this.$element)),typeof s=="function"&&(s=r.bottom(this.$element));var u=this.getState(o,n,i,s);if(this.affixed!=u){this.unpin!=null&&this.$element.css("top","");var a="affix"+(u?"-"+u:""),f=e.Event(a+".bs.affix");this.$element.trigger(f);if(f.isDefaultPrevented())return;this.affixed=u,this.unpin=u=="bottom"?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}u=="bottom"&&this.$element.offset({top:o-n-s})};var r=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},r.offsetBottom!=null&&(r.offset.bottom=r.offsetBottom),r.offsetTop!=null&&(r.offset.top=r.offsetTop),n.call(t,r)})})}(jQuery),define("bootstrap",["jquery"],function(){}),!function(e,t,n){function r(t,n){this.element=e(t),this.settings=e.extend({},s,n),this._defaults=s,this._name=i,this.init()}var i="metisMenu",s={toggle:!0,doubleTapToGo:!1};r.prototype={init:function(){var t=this.element,r=this.settings.toggle,s=this;this.isIE()<=9?(t.find("li.active").has("ul").children("ul").collapse("show"),t.find("li").not(".active").has("ul").children("ul").collapse("hide")):(t.find("li.active").has("ul").children("ul").addClass("collapse in"),t.find("li").not(".active").has("ul").children("ul").addClass("collapse")),s.settings.doubleTapToGo&&t.find("li.active").has("ul").children("a").addClass("doubleTapToGo"),t.find("li").has("ul").children("a").on("click."+i,function(t){return t.preventDefault(),s.settings.doubleTapToGo&&s.doubleTapToGo(e(this))&&"#"!==e(this).attr("href")&&""!==e(this).attr("href")?(t.stopPropagation(),void (n.location=e(this).attr("href"))):(e(this).parent("li").toggleClass("active").children("ul").collapse("toggle"),void (r&&e(this).parent("li").siblings().removeClass("active").children("ul.in").collapse("hide")))})},isIE:function(){for(var e,t=3,r=n.createElement("div"),i=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",i[0];)return t>4?t:e},doubleTapToGo:function(e){var t=this.element;return e.hasClass("doubleTapToGo")?(e.removeClass("doubleTapToGo"),!0):e.parent().children("ul").length?(t.find(".doubleTapToGo").removeClass("doubleTapToGo"),e.addClass("doubleTapToGo"),!1):void 0},remove:function(){this.element.off("."+i),this.element.removeData(i)}},e.fn[i]=function(t){return this.each(function(){var n=e(this);n.data(i)&&n.data(i).remove(),n.data(i,new r(this,t))}),this}}(jQuery,window,document),define("metisMenu",["jquery"],function(){}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()}(this,function(){function e(){return kr.apply(null,arguments)}function t(e){kr=e}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function s(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,r){return Tt(e,t,n,r,!0).utc()}function f(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&void 0===e._pf.bigHour)),e._isValid}function l(e){var t=a(0/0);return null!=e?u(t._pf,e):t._pf.userInvalidated=!0,t}function c(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ar.length>0)for(n in Ar)r=Ar[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function h(t){c(this,t),this._d=new Date(+t._d),Or===!1&&(Or=!0,e.updateOffset(this),Or=!1)}function p(e){return e instanceof h||null!=e&&o(e,"_isAMomentObject")}function d(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function v(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&d(e[r])!==d(t[r]))&&o++;return o+s}function m(){}function g(e){return e?e.toLowerCase().replace("_","-"):e}function y(e){for(var t,n,r,i,s=0;s<e.length;){for(i=g(e[s]).split("-"),t=i.length,n=g(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=b(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&v(i,n,!0)>=t-1)break;t--}s++}return null}function b(e){var t=null;if(!Mr[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Lr._abbr,require("./locale/"+e),w(t)}catch(n){}return Mr[e]}function w(e,t){var n;return e&&(n="undefined"==typeof t?S(e):E(e,t),n&&(Lr=n)),Lr._abbr}function E(e,t){return null!==t?(t.abbr=e,Mr[e]||(Mr[e]=new m),Mr[e].set(t),w(e),Mr[e]):(delete Mr[e],null)}function S(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Lr;if(!r(e)){if(t=b(e))return t;e=[e]}return y(e)}function x(e,t){var n=e.toLowerCase();_r[n]=_r[n+"s"]=_r[t]=e}function T(e){return"string"==typeof e?_r[e]||_r[e.toLowerCase()]:void 0}function N(e){var t,n,r={};for(n in e)o(e,n)&&(t=T(n),t&&(r[t]=e[n]));return r}function C(t,n){return function(r){return null!=r?(L(this,t,r),e.updateOffset(this,n),this):k(this,t)}}function k(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function L(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function A(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=T(e),"function"==typeof this[e])return this[e](t);return this}function O(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function M(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Br[e]=i),t&&(Br[t[0]]=function(){return O(i.apply(this,arguments),t[1],t[2])}),n&&(Br[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function _(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function D(e){var t,n,r=e.match(Dr);for(t=0,n=r.length;n>t;t++)r[t]=Br[r[t]]?Br[r[t]]:_(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function P(e,t){return e.isValid()?(t=H(t,e.localeData()),Hr[t]||(Hr[t]=D(t)),Hr[t](e)):e.localeData().invalidDate()}function H(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Pr.lastIndex=0;r>=0&&Pr.test(e);)e=e.replace(Pr,n),Pr.lastIndex=0,r-=1;return e}function B(e,t,n){Gr[e]="function"==typeof t?t:function(e){return e&&n?n:t}}function j(e,t){return o(Gr,e)?Gr[e](t._strict,t._locale):new RegExp(F(e))}function F(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function I(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=d(e)}),n=0;n<e.length;n++)Yr[e[n]]=r}function q(e,t){I(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function R(e,t,n){null!=t&&o(Yr,e)&&Yr[e](t,n._a,n,e)}function U(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function z(e){return this._months[e.month()]}function W(e){return this._monthsShort[e.month()]}function X(e,t,n){var r,i,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=a([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function V(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),U(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function $(t){return null!=t?(V(this,t),e.updateOffset(this,!0),this):k(this,"Month")}function J(){return U(this.year(),this.month())}function K(e){var t,n=e._a;return n&&-2===e._pf.overflow&&(t=n[ei]<0||n[ei]>11?ei:n[ti]<1||n[ti]>U(n[Zr],n[ei])?ti:n[ni]<0||n[ni]>24||24===n[ni]&&(0!==n[ri]||0!==n[ii]||0!==n[si])?ni:n[ri]<0||n[ri]>59?ri:n[ii]<0||n[ii]>59?ii:n[si]<0||n[si]>999?si:-1,e._pf._overflowDayOfYear&&(Zr>t||t>ti)&&(t=ti),e._pf.overflow=t),e}function Q(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function G(e,t){var n=!0;return u(function(){return n&&(Q(e),n=!1),t.apply(this,arguments)},t)}function Y(e,t){ai[e]||(Q(t),ai[e]=!0)}function Z(e){var t,n,r=e._i,i=fi.exec(r);if(i){for(e._pf.iso=!0,t=0,n=li.length;n>t;t++)if(li[t][1].exec(r)){e._f=li[t][0]+(i[6]||" ");break}for(t=0,n=ci.length;n>t;t++)if(ci[t][1].exec(r)){e._f+=ci[t][0];break}r.match(Jr)&&(e._f+="Z"),yt(e)}else e._isValid=!1}function et(t){var n=hi.exec(t._i);return null!==n?void (t._d=new Date(+n[1])):(Z(t),void (t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function tt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return 1970>e&&u.setFullYear(e),u}function nt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function rt(e){return it(e)?366:365}function it(e){return e%4===0&&e%100!==0||e%400===0}function st(){return it(this.year())}function ot(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=Nt(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ut(e){return ot(e,this._week.dow,this._week.doy).week}function at(){return this._week.dow}function ft(){return this._week.doy}function lt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ct(e){var t=ot(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function ht(e,t,n,r,i){var s,o,u=nt(e,0,1).getUTCDay();return u=0===u?7:u,n=null!=n?n:i,s=i-u+(u>r?7:0)-(i>u?7:0),o=7*(t-1)+(n-i)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:rt(e-1)+o}}function pt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function dt(e,t,n){return null!=e?e:null!=t?t:n}function vt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function mt(e){var t,n,r,i,s=[];if(!e._d){for(r=vt(e),e._w&&null==e._a[ti]&&null==e._a[ei]&&gt(e),e._dayOfYear&&(i=dt(e._a[Zr],r[Zr]),e._dayOfYear>rt(i)&&(e._pf._overflowDayOfYear=!0),n=nt(i,0,e._dayOfYear),e._a[ei]=n.getUTCMonth(),e._a[ti]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ni]&&0===e._a[ri]&&0===e._a[ii]&&0===e._a[si]&&(e._nextDay=!0,e._a[ni]=0),e._d=(e._useUTC?nt:tt).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ni]=24)}}function gt(e){var t,n,r,i,s,o,u;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,o=4,n=dt(t.GG,e._a[Zr],ot(Nt(),1,4).year),r=dt(t.W,1),i=dt(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=dt(t.gg,e._a[Zr],ot(Nt(),s,o).year),r=dt(t.w,1),null!=t.d?(i=t.d,s>i&&++r):i=null!=t.e?t.e+s:s),u=ht(n,r,i,o,s),e._a[Zr]=u.year,e._dayOfYear=u.dayOfYear}function yt(t){if(t._f===e.ISO_8601)return void Z(t);t._a=[],t._pf.empty=!0;var n,r,i,s,o,u=""+t._i,a=u.length,f=0;for(i=H(t._f,t._locale).match(Dr)||[],n=0;n<i.length;n++)s=i[n],r=(u.match(j(s,t))||[])[0],r&&(o=u.substr(0,u.indexOf(r)),o.length>0&&t._pf.unusedInput.push(o),u=u.slice(u.indexOf(r)+r.length),f+=r.length),Br[s]?(r?t._pf.empty=!1:t._pf.unusedTokens.push(s),R(s,r,t)):t._strict&&!r&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=a-f,u.length>0&&t._pf.unusedInput.push(u),t._pf.bigHour===!0&&t._a[ni]<=12&&(t._pf.bigHour=void 0),t._a[ni]=bt(t._locale,t._a[ni],t._meridiem),mt(t),K(t)}function bt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function wt(e){var t,r,i,s,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void (e._d=new Date(0/0));for(s=0;s<e._f.length;s++)o=0,t=c({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=n(),t._f=e._f[s],yt(t),f(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==i||i>o)&&(i=o,r=t));u(e,r||t)}function Et(e){if(!e._d){var t=N(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],mt(e)}}function St(e){var t,n=e._i,i=e._f;return e._locale=e._locale||S(e._l),null===n||void 0===i&&""===n?l({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),p(n)?new h(K(n)):(r(i)?wt(e):i?yt(e):xt(e),t=new h(K(e)),t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t))}function xt(t){var n=t._i;void 0===n?t._d=new Date:i(n)?t._d=new Date(+n):"string"==typeof n?et(t):r(n)?(t._a=s(n.slice(0),function(e){return parseInt(e,10)}),mt(t)):"object"==typeof n?Et(t):"number"==typeof n?t._d=new Date(n):e.createFromInputFallback(t)}function Tt(e,t,r,i,s){var o={};return"boolean"==typeof r&&(i=r,r=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=r,o._i=e,o._f=t,o._strict=i,o._pf=n(),St(o)}function Nt(e,t,n,r){return Tt(e,t,n,r,!1)}function Ct(e,t){var n,i;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return Nt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function kt(){var e=[].slice.call(arguments,0);return Ct("isBefore",e)}function Lt(){var e=[].slice.call(arguments,0);return Ct("isAfter",e)}function At(e){var t=N(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*f+6e4*a+36e5*u,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=S(),this._bubble()}function Ot(e){return e instanceof At}function Mt(e,t){M(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+O(~~(e/60),2)+t+O(~~e%60,2)})}function _t(e){var t=(e||"").match(Jr)||[],n=t[t.length-1]||[],r=(n+"").match(gi)||["-",0,0],i=+(60*r[1])+d(r[2]);return"+"===r[0]?i:-i}function Dt(t,n){var r,s;return n._isUTC?(r=n.clone(),s=(p(t)||i(t)?+t:+Nt(t))- +r,r._d.setTime(+r._d+s),e.updateOffset(r,!1),r):Nt(t).local()}function Pt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ht(t,n){var r,i=this._offset||0;return null!=t?("string"==typeof t&&(t=_t(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(r=Pt(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?Gt(this,Vt(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Pt(this)}function Bt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function jt(e){return this.utcOffset(0,e)}function Ft(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Pt(this),"m")),this}function It(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(_t(this._i)),this}function qt(e){return e=e?Nt(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Rt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ut(){if(this._a){var e=this._isUTC?a(this._a):Nt(this._a);return this.isValid()&&v(this._a,e.toArray())>0}return!1}function zt(){return!this._isUTC}function Wt(){return this._isUTC}function Xt(){return this._isUTC&&0===this._offset}function Vt(e,t){var n,r,i,s=e,u=null;return Ot(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(u=yi.exec(e))?(n="-"===u[1]?-1:1,s={y:0,d:d(u[ti])*n,h:d(u[ni])*n,m:d(u[ri])*n,s:d(u[ii])*n,ms:d(u[si])*n}):(u=bi.exec(e))?(n="-"===u[1]?-1:1,s={y:$t(u[2],n),M:$t(u[3],n),d:$t(u[4],n),h:$t(u[5],n),m:$t(u[6],n),s:$t(u[7],n),w:$t(u[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(i=Kt(Nt(s.from),Nt(s.to)),s={},s.ms=i.milliseconds,s.M=i.months),r=new At(s),Ot(e)&&o(e,"_locale")&&(r._locale=e._locale),r}function $t(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Jt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function Kt(e,t){var n;return t=Dt(t,e),e.isBefore(t)?n=Jt(e,t):(n=Jt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qt(e,t){return function(n,r){var i,s;return null===r||isNaN(+r)||(Y(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=Vt(n,r),Gt(this,i,e),this}}function Gt(t,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=null==i?!0:i,s&&t._d.setTime(+t._d+s*r),o&&L(t,"Date",k(t,"Date")+o*r),u&&V(t,k(t,"Month")+u*r),i&&e.updateOffset(t,o||u)}function Yt(e){var t=e||Nt(),n=Dt(t,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,Nt(t)))}function Zt(){return new h(this)}function en(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=p(e)?e:Nt(e),+this>+e):(n=p(e)?+e:+Nt(e),n<+this.clone().startOf(t))}function tn(e,t){var n;return t=T("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=p(e)?e:Nt(e),+e>+this):(n=p(e)?+e:+Nt(e),+this.clone().endOf(t)<n)}function nn(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function rn(e,t){var n;return t=T(t||"millisecond"),"millisecond"===t?(e=p(e)?e:Nt(e),+this===+e):(n=+Nt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function sn(e){return 0>e?Math.ceil(e):Math.floor(e)}function on(e,t,n){var r,i,s=Dt(e,this),o=6e4*(s.utcOffset()-this.utcOffset());return t=T(t),"year"===t||"month"===t||"quarter"===t?(i=un(this,s),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-s,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?i:sn(i)}function un(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(i,"months");return 0>t-s?(n=e.clone().add(i-1,"months"),r=(t-s)/(s-n)):(n=e.clone().add(i+1,"months"),r=(t-s)/(n-s)),-(i+r)}function an(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fn(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():P(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ln(t){var n=P(this,t||e.defaultFormat);return this.localeData().postformat(n)}function cn(e,t){return Vt({to:this,from:e}).locale(this.locale()).humanize(!t)}function hn(e){return this.from(Nt(),e)}function pn(e){var t;return void 0===e?this._locale._abbr:(t=S(e),null!=t&&(this._locale=t),this)}function dn(){return this._locale}function vn(e){switch(e=T(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function mn(e){return e=T(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function gn(){return+this._d-6e4*(this._offset||0)}function yn(){return Math.floor(+this/1e3)}function bn(){return this._offset?new Date(+this):this._d}function wn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function En(){return f(this)}function Sn(){return u({},this._pf)}function xn(){return this._pf.overflow}function Tn(e,t){M(0,[e,e.length],0,t)}function Nn(e,t,n){return ot(Nt([e,11,31+t-n]),t,n).week}function Cn(e){var t=ot(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function kn(e){var t=ot(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Ln(){return Nn(this.year(),1,4)}function An(){var e=this.localeData()._week;return Nn(this.year(),e.dow,e.doy)}function On(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Mn(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function _n(e){return this._weekdays[e.day()]}function Dn(e){return this._weekdaysShort[e.day()]}function Pn(e){return this._weekdaysMin[e.day()]}function Hn(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Nt([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Bn(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Mn(e,this.localeData()),this.add(e-t,"d")):t}function jn(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Fn(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function In(e,t){M(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function qn(e,t){return t._meridiemParse}function Rn(e){return"p"===(e+"").toLowerCase().charAt(0)}function Un(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function zn(e){M(0,[e,3],0,"millisecond")}function Wn(){return this._isUTC?"UTC":""}function Xn(){return this._isUTC?"Coordinated Universal Time":""}function Vn(e){return Nt(1e3*e)}function $n(){return Nt.apply(null,arguments).parseZone()}function Jn(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}function Kn(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function Qn(){return this._invalidDate}function Gn(e){return this._ordinal.replace("%d",e)}function Yn(e){return e}function Zn(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)}function er(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function tr(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function nr(e,t,n,r){var i=S(),s=a().set(r,t);return i[n](s,e)}function rr(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return nr(e,t,n,i);var s,o=[];for(s=0;r>s;s++)o[s]=nr(e,s,n,i);return o}function ir(e,t){return rr(e,t,"months",12,"month")}function sr(e,t){return rr(e,t,"monthsShort",12,"month")}function or(e,t){return rr(e,t,"weekdays",7,"day")}function ur(e,t){return rr(e,t,"weekdaysShort",7,"day")}function ar(e,t){return rr(e,t,"weekdaysMin",7,"day")}function fr(){var e=this._data;return this._milliseconds=Ri(this._milliseconds),this._days=Ri(this._days),this._months=Ri(this._months),e.milliseconds=Ri(e.milliseconds),e.seconds=Ri(e.seconds),e.minutes=Ri(e.minutes),e.hours=Ri(e.hours),e.months=Ri(e.months),e.years=Ri(e.years),this}function lr(e,t,n,r){var i=Vt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function cr(e,t){return lr(this,e,t,1)}function hr(e,t){return lr(this,e,t,-1)}function pr(){var e,t,n,r=this._milliseconds,i=this._days,s=this._months,o=this._data,u=0;return o.milliseconds=r%1e3,e=sn(r/1e3),o.seconds=e%60,t=sn(e/60),o.minutes=t%60,n=sn(t/60),o.hours=n%24,i+=sn(n/24),u=sn(dr(i)),i-=sn(vr(u)),s+=sn(i/30),i%=30,u+=sn(s/12),s%=12,o.days=i,o.months=s,o.years=u,this}function dr(e){return 400*e/146097}function vr(e){return 146097*e/400}function mr(e){var t,n,r=this._milliseconds;if(e=T(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+12*dr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(vr(this._months/12)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 24*t*60+r/6e4;case"second":return 24*t*60*60+r/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+r;default:throw new Error("Unknown unit "+e)}}function gr(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*d(this._months/12)}function yr(e){return function(){return this.as(e)}}function br(e){return e=T(e),this[e+"s"]()}function wr(e){return function(){return this._data[e]}}function Er(){return sn(this.days()/7)}function Sr(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function xr(e,t,n){var r=Vt(e).abs(),i=rs(r.as("s")),s=rs(r.as("m")),o=rs(r.as("h")),u=rs(r.as("d")),a=rs(r.as("M")),f=rs(r.as("y")),l=i<is.s&&["s",i]||1===s&&["m"]||s<is.m&&["mm",s]||1===o&&["h"]||o<is.h&&["hh",o]||1===u&&["d"]||u<is.d&&["dd",u]||1===a&&["M"]||a<is.M&&["MM",a]||1===f&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,Sr.apply(null,l)}function Tr(e,t){return void 0===is[e]?!1:void 0===t?is[e]:(is[e]=t,!0)}function Nr(e){var t=this.localeData(),n=xr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Cr(){var e=ss(this.years()),t=ss(this.months()),n=ss(this.days()),r=ss(this.hours()),i=ss(this.minutes()),s=ss(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(0>o?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}var kr,Lr,Ar=e.momentProperties=[],Or=!1,Mr={},_r={},Dr=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Pr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hr={},Br={},jr=/\d/,Fr=/\d\d/,Ir=/\d{3}/,qr=/\d{4}/,Rr=/[+-]?\d{6}/,Ur=/\d\d?/,zr=/\d{1,3}/,Wr=/\d{1,4}/,Xr=/[+-]?\d{1,6}/,Vr=/\d+/,$r=/[+-]?\d+/,Jr=/Z|[+-]\d\d:?\d\d/gi,Kr=/[+-]?\d+(\.\d{1,3})?/,Qr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Gr={},Yr={},Zr=0,ei=1,ti=2,ni=3,ri=4,ii=5,si=6;M("M",["MM",2],"Mo",function(){return this.month()+1}),M("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),M("MMMM",0,0,function(e){return this.localeData().months(this,e)}),x("month","M"),B("M",Ur),B("MM",Ur,Fr),B("MMM",Qr),B("MMMM",Qr),I(["M","MM"],function(e,t){t[ei]=d(e)-1}),I(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ei]=i:n._pf.invalidMonth=e});var oi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ui="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ai={};e.suppressDeprecationWarnings=!1;var fi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,li=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ci=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=G("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),M(0,["YY",2],0,function(){return this.year()%100}),M(0,["YYYY",4],0,"year"),M(0,["YYYYY",5],0,"year"),M(0,["YYYYYY",6,!0],0,"year"),x("year","y"),B("Y",$r),B("YY",Ur,Fr),B("YYYY",Wr,qr),B("YYYYY",Xr,Rr),B("YYYYYY",Xr,Rr),I(["YYYY","YYYYY","YYYYYY"],Zr),I("YY",function(t,n){n[Zr]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return d(e)+(d(e)>68?1900:2e3)};var pi=C("FullYear",!1);M("w",["ww",2],"wo","week"),M("W",["WW",2],"Wo","isoWeek"),x("week","w"),x("isoWeek","W"),B("w",Ur),B("ww",Ur,Fr),B("W",Ur),B("WW",Ur,Fr),q(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=d(e)});var di={dow:0,doy:6};M("DDD",["DDDD",3],"DDDo","dayOfYear"),x("dayOfYear","DDD"),B("DDD",zr),B("DDDD",Ir),I(["DDD","DDDD"],function(e,t,n){n._dayOfYear=d(e)}),e.ISO_8601=function(){};var vi=G("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Nt.apply(null,arguments);return this>e?this:e}),mi=G("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Nt.apply(null,arguments);return e>this?this:e});Mt("Z",":"),Mt("ZZ",""),B("Z",Jr),B("ZZ",Jr),I(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=_t(e)});var gi=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var yi=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,bi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Vt.fn=At.prototype;var wi=Qt(1,"add"),Ei=Qt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Si=G("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});M(0,["gg",2],0,function(){return this.weekYear()%100}),M(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Tn("gggg","weekYear"),Tn("ggggg","weekYear"),Tn("GGGG","isoWeekYear"),Tn("GGGGG","isoWeekYear"),x("weekYear","gg"),x("isoWeekYear","GG"),B("G",$r),B("g",$r),B("GG",Ur,Fr),B("gg",Ur,Fr),B("GGGG",Wr,qr),B("gggg",Wr,qr),B("GGGGG",Xr,Rr),B("ggggg",Xr,Rr),q(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=d(e)}),q(["gg","GG"],function(t,n,r,i){n[i]=e.parseTwoDigitYear(t)}),M("Q",0,0,"quarter"),x("quarter","Q"),B("Q",jr),I("Q",function(e,t){t[ei]=3*(d(e)-1)}),M("D",["DD",2],"Do","date"),x("date","D"),B("D",Ur),B("DD",Ur,Fr),B("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),I(["D","DD"],ti),I("Do",function(e,t){t[ti]=d(e.match(Ur)[0],10)});var xi=C("Date",!0);M("d",0,"do","day"),M("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),M("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),M("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),M("e",0,0,"weekday"),M("E",0,0,"isoWeekday"),x("day","d"),x("weekday","e"),x("isoWeekday","E"),B("d",Ur),B("e",Ur),B("E",Ur),B("dd",Qr),B("ddd",Qr),B("dddd",Qr),q(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:n._pf.invalidWeekday=e}),q(["d","e","E"],function(e,t,n,r){t[r]=d(e)});var Ti="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ni="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ci="Su_Mo_Tu_We_Th_Fr_Sa".split("_");M("H",["HH",2],0,"hour"),M("h",["hh",2],0,function(){return this.hours()%12||12}),In("a",!0),In("A",!1),x("hour","h"),B("a",qn),B("A",qn),B("H",Ur),B("h",Ur),B("HH",Ur,Fr),B("hh",Ur,Fr),I(["H","HH"],ni),I(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),I(["h","hh"],function(e,t,n){t[ni]=d(e),n._pf.bigHour=!0});var ki=/[ap]\.?m?\.?/i,Li=C("Hours",!0);M("m",["mm",2],0,"minute"),x("minute","m"),B("m",Ur),B("mm",Ur,Fr),I(["m","mm"],ri);var Ai=C("Minutes",!1);M("s",["ss",2],0,"second"),x("second","s"),B("s",Ur),B("ss",Ur,Fr),I(["s","ss"],ii);var Oi=C("Seconds",!1);M("S",0,0,function(){return~~(this.millisecond()/100)}),M(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),zn("SSS"),zn("SSSS"),x("millisecond","ms"),B("S",zr,jr),B("SS",zr,Fr),B("SSS",zr,Ir),B("SSSS",Vr),I(["S","SS","SSS","SSSS"],function(e,t){t[si]=d(1e3*("0."+e))});var Mi=C("Milliseconds",!1);M("z",0,0,"zoneAbbr"),M("zz",0,0,"zoneName");var _i=h.prototype;_i.add=wi,_i.calendar=Yt,_i.clone=Zt,_i.diff=on,_i.endOf=mn,_i.format=ln,_i.from=cn,_i.fromNow=hn,_i.get=A,_i.invalidAt=xn,_i.isAfter=en,_i.isBefore=tn,_i.isBetween=nn,_i.isSame=rn,_i.isValid=En,_i.lang=Si,_i.locale=pn,_i.localeData=dn,_i.max=mi,_i.min=vi,_i.parsingFlags=Sn,_i.set=A,_i.startOf=vn,_i.subtract=Ei,_i.toArray=wn,_i.toDate=bn,_i.toISOString=fn,_i.toJSON=fn,_i.toString=an,_i.unix=yn,_i.valueOf=gn,_i.year=pi,_i.isLeapYear=st,_i.weekYear=Cn,_i.isoWeekYear=kn,_i.quarter=_i.quarters=On,_i.month=$,_i.daysInMonth=J,_i.week=_i.weeks=lt,_i.isoWeek=_i.isoWeeks=ct,_i.weeksInYear=An,_i.isoWeeksInYear=Ln,_i.date=xi,_i.day=_i.days=Bn,_i.weekday=jn,_i.isoWeekday=Fn,_i.dayOfYear=pt,_i.hour=_i.hours=Li,_i.minute=_i.minutes=Ai,_i.second=_i.seconds=Oi,_i.millisecond=_i.milliseconds=Mi,_i.utcOffset=Ht,_i.utc=jt,_i.local=Ft,_i.parseZone=It,_i.hasAlignedHourOffset=qt,_i.isDST=Rt,_i.isDSTShifted=Ut,_i.isLocal=zt,_i.isUtcOffset=Wt,_i.isUtc=Xt,_i.isUTC=Xt,_i.zoneAbbr=Wn,_i.zoneName=Xn,_i.dates=G("dates accessor is deprecated. Use date instead.",xi),_i.months=G("months accessor is deprecated. Use month instead",$),_i.years=G("years accessor is deprecated. Use year instead",pi),_i.zone=G("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Bt);var Di=_i,Pi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Hi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Bi="Invalid date",ji="%d",Fi=/\d{1,2}/,Ii={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},qi=m.prototype;qi._calendar=Pi,qi.calendar=Jn,qi._longDateFormat=Hi,qi.longDateFormat=Kn,qi._invalidDate=Bi,qi.invalidDate=Qn,qi._ordinal=ji,qi.ordinal=Gn,qi._ordinalParse=Fi,qi.preparse=Yn,qi.postformat=Yn,qi._relativeTime=Ii,qi.relativeTime=Zn,qi.pastFuture=er,qi.set=tr,qi.months=z,qi._months=oi,qi.monthsShort=W,qi._monthsShort=ui,qi.monthsParse=X,qi.week=ut,qi._week=di,qi.firstDayOfYear=ft,qi.firstDayOfWeek=at,qi.weekdays=_n,qi._weekdays=Ti,qi.weekdaysMin=Pn,qi._weekdaysMin=Ci,qi.weekdaysShort=Dn,qi._weekdaysShort=Ni,qi.weekdaysParse=Hn,qi.isPM=Rn,qi._meridiemParse=ki,qi.meridiem=Un,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===d(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=G("moment.lang is deprecated. Use moment.locale instead.",w),e.langData=G("moment.langData is deprecated. Use moment.localeData instead.",S);var Ri=Math.abs,Ui=yr("ms"),zi=yr("s"),Wi=yr("m"),Xi=yr("h"),Vi=yr("d"),$i=yr("w"),Ji=yr("M"),Ki=yr("y"),Qi=wr("milliseconds"),Gi=wr("seconds"),Yi=wr("minutes"),Zi=wr("hours"),es=wr("days"),ts=wr("months"),ns=wr("years"),rs=Math.round,is={s:45,m:45,h:22,d:26,M:11},ss=Math.abs,os=At.prototype;os.abs=fr,os.add=cr,os.subtract=hr,os.as=mr,os.asMilliseconds=Ui,os.asSeconds=zi,os.asMinutes=Wi,os.asHours=Xi,os.asDays=Vi,os.asWeeks=$i,os.asMonths=Ji,os.asYears=Ki,os.valueOf=gr,os._bubble=pr,os.get=br,os.milliseconds=Qi,os.seconds=Gi,os.minutes=Yi,os.hours=Zi,os.days=es,os.weeks=Er,os.months=ts,os.years=ns,os.humanize=Nr,os.toISOString=Cr,os.toString=Cr,os.toJSON=Cr,os.locale=pn,os.localeData=dn,os.toIsoString=G("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Cr),os.lang=Si,M("X",0,0,"unix"),M("x",0,0,"valueOf"),B("x",$r),B("X",Kr),I("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),I("x",function(e,t,n){n._d=new Date(d(e))}),e.version="2.10.2",t(Nt),e.fn=Di,e.min=kt,e.max=Lt,e.utc=a,e.unix=Vn,e.months=ir,e.isDate=i,e.locale=w,e.invalid=l,e.duration=Vt,e.isMoment=p,e.weekdays=or,e.parseZone=$n,e.localeData=S,e.isDuration=Ot,e.monthsShort=sr,e.weekdaysMin=ar,e.defineLocale=E,e.weekdaysShort=ur,e.normalizeUnits=T,e.relativeTimeThreshold=Tr;var us=e;return us}),angular.module("cgBusy",[]),angular.module("cgBusy").factory("_cgBusyTrackerFactory",["$timeout","$q",function(e,t){return function(){var n={};n.promises=[],n.delayPromise=null,n.durationPromise=null,n.delayJustFinished=!1,n.reset=function(t){n.minDuration=t.minDuration,n.promises=[],angular.forEach(t.promises,function(e){e&&!e.$cgBusyFulfilled&&r(e)}),0!==n.promises.length&&(n.delayJustFinished=!1,t.delay&&(n.delayPromise=e(function(){n.delayPromise=null,n.delayJustFinished=!0},parseInt(t.delay,10))),t.minDuration&&(n.durationPromise=e(function(){n.durationPromise=null},parseInt(t.minDuration,10)+(t.delay?parseInt(t.delay,10):0))))},n.isPromise=function(e){var t=e&&(e.then||e.$then||e.$promise&&e.$promise.then);return"undefined"!=typeof t},n.callThen=function(e,n,r){var i;e.then||e.$then?i=e:e.$promise?i=e.$promise:e.denodeify&&(i=t.when(e));var s=i.then||i.$then;s.call(i,n,r)};var r=function(e){if(!n.isPromise(e))throw new Error("cgBusy expects a promise (or something that has a .promise or .$promise");-1===n.promises.indexOf(e)&&(n.promises.push(e),n.callThen(e,function(){e.$cgBusyFulfilled=!0,-1!==n.promises.indexOf(e)&&n.promises.splice(n.promises.indexOf(e),1)},function(){e.$cgBusyFulfilled=!0,-1!==n.promises.indexOf(e)&&n.promises.splice(n.promises.indexOf(e),1)}))};return n.active=function(){return n.delayPromise?!1:n.delayJustFinished?(n.delayJustFinished=!1,0===n.promises.length&&(n.durationPromise=null),n.promises.length>0):n.durationPromise?!0:n.promises.length>0},n}}]),angular.module("cgBusy").value("cgBusyDefaults",{}),angular.module("cgBusy").directive("cgBusy",["$compile","$templateCache","cgBusyDefaults","$http","_cgBusyTrackerFactory",function(e,t,n,r,i){return{restrict:"A",link:function(s,o,u){var f=o.css("position");("static"===f||""===f||"undefined"==typeof f)&&o.css("position","relative");var l,h,p,v,m,g=i(),y={templateUrl:"angular-busy.html",delay:0,minDuration:0,backdrop:!0,message:"Please Wait...",wrapperClass:"cg-busy cg-busy-animation"};angular.extend(y,n),s.$watchCollection(u.cgBusy,function(n){if(n||(n={promise:null}),angular.isString(n))throw new Error("Invalid value for cg-busy. cgBusy no longer accepts string ids to represent promises/trackers.");(angular.isArray(n)||g.isPromise(n))&&(n={promise:n}),n=angular.extend(angular.copy(y),n),n.templateUrl||(n.templateUrl=y.templateUrl),angular.isArray(n.promise)||(n.promise=[n.promise]),v||(v=s.$new()),v.$message=n.message,angular.equals(g.promises,n.promise)||g.reset({promises:n.promise,delay:n.delay,minDuration:n.minDuration}),v.$cgBusyIsActive=function(){return g.active()},l&&p===n.templateUrl&&m===n.backdrop||(l&&l.remove(),h&&h.remove(),p=n.templateUrl,m=n.backdrop,r.get(p,{cache:t}).success(function(t){if(n.backdrop="undefined"==typeof n.backdrop?!0:n.backdrop,n.backdrop){var r='<div class="cg-busy cg-busy-backdrop cg-busy-backdrop-animation ng-hide" ng-show="$cgBusyIsActive()"></div>';h=e(r)(v),o.append(h)}var i='<div class="'+n.wrapperClass+' ng-hide" ng-show="$cgBusyIsActive()">'+t+"</div>";l=e(i)(v),angular.element(l.children()[0]).css("position","absolute").css("top",0).css("left",0).css("right",0).css("bottom",0),o.append(l)}).error(function(e){throw new Error("Template specified for cgBusy ("+n.templateUrl+") could not be loaded. "+e)}))},!0)}}}]),angular.module("cgBusy").run(["$templateCache",function(e){e.put("angular-busy.html",'<div class="cg-busy-default-wrapper">\n\n   <div class="cg-busy-default-sign">\n\n      <div class="cg-busy-default-spinner">\n         <div class="bar1"></div>\n         <div class="bar2"></div>\n         <div class="bar3"></div>\n         <div class="bar4"></div>\n         <div class="bar5"></div>\n         <div class="bar6"></div>\n         <div class="bar7"></div>\n         <div class="bar8"></div>\n         <div class="bar9"></div>\n         <div class="bar10"></div>\n         <div class="bar11"></div>\n         <div class="bar12"></div>\n      </div>\n\n      <div class="cg-busy-default-text">{{$message}}</div>\n\n   </div>\n\n</div>')}]),define("angular-busy",["angular"],function(){}),"format amd",!function(){function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null,statefulFilters:!0}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,r,i,s){return function(o,u,l){function h(){var e;if(i.serverTime){var t=(new Date).getTime(),r=t-C+i.serverTime;e=n(r)}else e=n();return e}function p(){w&&(t.clearTimeout(w),w=null)}function v(e){var n=h().diff(e,"day"),r=T&&n>=T;if(u.text(r?e.format(N):e.from(h(),S)),x&&!u.attr("title")&&u.attr("title",e.local().format(x)),!r){var i=Math.abs(h().diff(e,"minute")),s=3600;1>i?s=1:60>i?s=30:180>i&&(s=300),w=t.setTimeout(function(){v(e)},1e3*s)}}function m(e){A&&u.attr("datetime",e)}function g(){if(p(),y){var e=r.preprocessDate(y,k,E);v(e),m(e.toISOString())}}var y,w=null,E=s.format,S=i.withoutSuffix,x=i.titleFormat,T=i.fullDateThreshold,N=i.fullDateFormat,C=(new Date).getTime(),k=s.preprocess,L=l.amTimeAgo,A="TIME"===u[0].nodeName.toUpperCase();o.$watch(L,function(e){return"undefined"==typeof e||null===e||""===e?(p(),void (y&&(u.text(""),m(""),y=null))):(y=e,void g())}),e.isDefined(l.amWithoutSuffix)&&o.$watch(l.amWithoutSuffix,function(e){"boolean"==typeof e?(S=e,g()):S=i.withoutSuffix}),l.$observe("amFormat",function(e){"undefined"!=typeof e&&(E=e,g())}),l.$observe("amPreprocess",function(e){k=e,g()}),l.$observe("amFullDateThreshold",function(e){T=e,g()}),l.$observe("amFullDateFormat",function(e){N=e,g()}),o.$on("$destroy",function(){p()}),o.$on("amMoment:localeChanged",function(){g()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,r,i){this.preprocessors={utc:t.utc,unix:t.unix},this.changeLocale=function(r,i){var s=t.locale(r,i);return e.isDefined(r)&&n.$broadcast("amMoment:localeChanged"),s},this.changeTimezone=function(e){i.timezone=e,n.$broadcast("amMoment:timezoneChanged")},this.preprocessDate=function(n,s,o){return e.isUndefined(s)&&(s=i.preprocess),this.preprocessors[s]?this.preprocessors[s](n,o):(s&&r.warn("angular-moment: Ignoring unsupported value for preprocess: "+s),!isNaN(parseFloat(n))&&isFinite(n)?t(parseInt(n,10)):t(n,o))},this.applyTimezone=function(e,t){return t=t||i.timezone,e&&t&&(e.tz?e=e.tz(t):r.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),e}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,r);var i=e(n);return i.isValid()?t.applyTimezone(i).calendar():""}return r.$stateful=n.statefulFilters,r}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,i,s,o,u){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,o);var f=e(n);if(!f.isValid())return"";var l;if("undefined"==typeof r||null===r)l=e();else if(r=t.preprocessDate(r,u),l=e(r),!l.isValid())return"";return t.applyTimezone(f).diff(t.applyTimezone(l),i,s)}return r.$stateful=n.statefulFilters,r}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,i,s){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,i);var o=e(n);return o.isValid()?t.applyTimezone(o,s).format(r):""}return r.$stateful=n.statefulFilters,r}]).filter("amDurationFormat",["moment","angularMomentConfig",function(e,t){function n(t,n,r){return"undefined"==typeof t||null===t?"":e.duration(t,n).humanize(r)}return n.$stateful=t.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(e,t,n){function r(n,r,i){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,r);var s=e(n);return s.isValid()?t.applyTimezone(s).fromNow(i):""}return r.$stateful=n.statefulFilters,r}])}"function"==typeof define&&define.amd?define("angular-moment",["angular","moment"],e):"undefined"!=typeof module&&module&&module.exports?(e(angular,require("moment")),module.exports="angularMoment"):e(angular,window.moment)}(),function(e){"function"==typeof define&&define.amd?define("jquery-ui",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,t.href&&s&&"map"===i.nodeName.toLowerCase()?(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o)):!1):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function r(e){for(var t,n;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(g.inline?g.dpDiv.parent()[0]:g.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function u(t,n){e.extend(t,n);for(var r in n)null==n[r]&&(t[r]=n[r]);return t}function a(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&"static"===t.css("position")?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&s.length?s:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function r(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===n?["Left","Right"]:["Top","Bottom"],s=n.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return void 0===t?o["inner"+n].call(this):this.each(function(){e(this).css(s,r(this,t)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?o["outer"+n].call(this,t):this.each(function(){e(this).css(s,r(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var n,r,i=e(this[0]);i.length&&i[0]!==document;){if(n=i.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(r=parseInt(i.css("zIndex"),10),!isNaN(r)&&0!==r))return r;i=i.parent()}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(s&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;s.length>i;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};var f=0,l=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;null!=(i=n[s]);s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){return e.isFunction(r)?(a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,s=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=s,t}}(),void 0):(a[t]=r,void 0)}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,r,i=l.call(arguments,1),s=0,o=i.length;o>s;s++)for(n in i[s])r=i[s][n],i[s].hasOwnProperty(n)&&void 0!==r&&(t[n]=e.isPlainObject(r)?e.isPlainObject(t[n])?e.widget.extend({},t[n],r):e.widget.extend({},r):r);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(i){var s="string"==typeof i,o=l.call(arguments,1),u=this;return s?this.each(function(){var n,s=e.data(this,r);return"instance"===i?(u=s,!1):s?e.isFunction(s[i])&&"_"!==i.charAt(0)?(n=s[i].apply(s,o),n!==s&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+i+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+i+"'")}):(o.length&&(i=e.widget.extend.apply(null,[i].concat(o))),this.each(function(){var t=e.data(this,r);t?(t.option(i||{}),t._init&&t._init()):e.data(this,r,new n(i,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=f++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},r=t.split("."),t=r.shift(),r.length){for(i=o[t]=e.widget.extend({},this.options[t]),s=0;r.length-1>s;s++)i[r[s]]=i[r[s]]||{},i=i[r[s]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.widget;var c=!1;e(document).mouseup(function(){c=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!c){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=1===t.which,i="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return r&&!i&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),c=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function r(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var i,s,o=Math.max,u=Math.abs,a=Math.round,f=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==i)return i;var t,n,r=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return e("body").append(r),t=s.offsetWidth,r.css("overflow","scroll"),n=s.offsetWidth,t===n&&(n=r[0].clientWidth),r.remove(),i=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:r,isDocument:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r||i?n.width():n.outerWidth(),height:r||i?n.height():n.outerHeight()}}},e.fn.position=function(i){if(!i||!i.of)return d.apply(this,arguments);i=e.extend({},i);var p,v,m,g,y,b,w=e(i.of),E=e.position.getWithinInfo(i.within),S=e.position.getScrollInfo(E),x=(i.collision||"flip").split(" "),T={};return b=r(w),w[0].preventDefault&&(i.at="left top"),v=b.width,m=b.height,g=b.offset,y=e.extend({},g),e.each(["my","at"],function(){var e,t,n=(i[this]||"").split(" ");1===n.length&&(n=f.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=f.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",e=c.exec(n[0]),t=c.exec(n[1]),T[this]=[e?e[0]:0,t?t[0]:0],i[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===i.at[0]?y.left+=v:"center"===i.at[0]&&(y.left+=v/2),"bottom"===i.at[1]?y.top+=m:"center"===i.at[1]&&(y.top+=m/2),p=t(T.at,v,m),y.left+=p[0],y.top+=p[1],this.each(function(){var r,f,l=e(this),c=l.outerWidth(),h=l.outerHeight(),d=n(this,"marginLeft"),b=n(this,"marginTop"),N=c+d+n(this,"marginRight")+S.width,C=h+b+n(this,"marginBottom")+S.height,L=e.extend({},y),A=t(T.my,l.outerWidth(),l.outerHeight());"right"===i.my[0]?L.left-=c:"center"===i.my[0]&&(L.left-=c/2),"bottom"===i.my[1]?L.top-=h:"center"===i.my[1]&&(L.top-=h/2),L.left+=A[0],L.top+=A[1],s||(L.left=a(L.left),L.top=a(L.top)),r={marginLeft:d,marginTop:b},e.each(["left","top"],function(t,n){e.ui.position[x[t]]&&e.ui.position[x[t]][n](L,{targetWidth:v,targetHeight:m,elemWidth:c,elemHeight:h,collisionPosition:r,collisionWidth:N,collisionHeight:C,offset:[p[0]+A[0],p[1]+A[1]],my:i.my,at:i.at,within:E,elem:l})}),i.using&&(f=function(e){var t=g.left-L.left,n=t+v-c,r=g.top-L.top,s=r+m-h,a={target:{element:w,left:g.left,top:g.top,width:v,height:m},element:{element:l,left:L.left,top:L.top,width:c,height:h},horizontal:0>n?"left":t>0?"right":"center",vertical:0>s?"top":r>0?"bottom":"middle"};c>v&&v>u(t+n)&&(a.horizontal="center"),h>m&&m>u(r+s)&&(a.vertical="middle"),a.important=o(u(t),u(n))>o(u(r),u(s))?"horizontal":"vertical",i.using.call(this,e,a)}),l.offset(e.extend(L,{using:f}))})},e.ui.position={fit:{left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,u=e.left-t.collisionPosition.marginLeft,a=i-u,f=u+t.collisionWidth-s-i;t.collisionWidth>s?a>0&&0>=f?(n=e.left+a+t.collisionWidth-s-i,e.left+=a-n):e.left=f>0&&0>=a?i:a>f?i+s-t.collisionWidth:i:a>0?e.left+=a:f>0?e.left-=f:e.left=o(e.left-u,e.left)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,u=e.top-t.collisionPosition.marginTop,a=i-u,f=u+t.collisionHeight-s-i;t.collisionHeight>s?a>0&&0>=f?(n=e.top+a+t.collisionHeight-s-i,e.top+=a-n):e.top=f>0&&0>=a?i:a>f?i+s-t.collisionHeight:i:a>0?e.top+=a:f>0?e.top-=f:e.top=o(e.top-u,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,s=i.offset.left+i.scrollLeft,o=i.width,a=i.isWindow?i.scrollLeft:i.offset.left,f=e.left-t.collisionPosition.marginLeft,l=f-a,c=f+t.collisionWidth-o-a,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,d=-2*t.offset[0];0>l?(n=e.left+h+p+d+t.collisionWidth-o-s,(0>n||u(l)>n)&&(e.left+=h+p+d)):c>0&&(r=e.left-t.collisionPosition.marginLeft+h+p+d-a,(r>0||c>u(r))&&(e.left+=h+p+d))},top:function(e,t){var n,r,i=t.within,s=i.offset.top+i.scrollTop,o=i.height,a=i.isWindow?i.scrollTop:i.offset.top,f=e.top-t.collisionPosition.marginTop,l=f-a,c=f+t.collisionHeight-o-a,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,v=-2*t.offset[1];0>l?(r=e.top+p+d+v+t.collisionHeight-o-s,(0>r||u(l)>r)&&(e.top+=p+d+v)):c>0&&(n=e.top-t.collisionPosition.marginTop+p+d+v-a,(n>0||c>u(n))&&(e.top+=p+d+v))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,o,u=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(u?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},u&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in r)t.style[o]=r[o];t.appendChild(a),n=u||document.documentElement,n.insertBefore(t,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",i=e(a).offset().left,s=i>10&&11>i,t.innerHTML="",n.removeChild(t)}()}(),e.ui.position,e.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var e=this.headers,t=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide(),t&&(this._off(e.not(this.headers)),this._off(t.not(this.panels)))},_refresh:function(){var t,n=this.options,r=n.heightStyle,i=this.element.parent();this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),n=t.uniqueId().attr("id"),r=t.next(),i=r.uniqueId().attr("id");t.attr("aria-controls",i),r.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===r?(t=i.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");"absolute"!==r&&"fixed"!==r&&(t-=n.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===r&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault(),s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1||(n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-hidden":"true"}),r.prev().attr({"aria-selected":"false","aria-expanded":"false"}),n.length&&r.length?r.prev().attr({tabIndex:-1,"aria-expanded":"false"}):n.length&&this.headers.filter(function(){return 0===parseInt(e(this).attr("tabIndex"),10)}).attr("tabIndex",-1),n.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(e,t,n){var r,i,s,o=this,u=0,a=e.css("box-sizing"),f=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},c=f&&l.down||l,h=function(){o._toggleComplete(n)};return"number"==typeof c&&(s=c),"string"==typeof c&&(i=c),i=i||c.easing||l.easing,s=s||c.duration||l.duration,t.length?e.length?(r=e.show().outerHeight(),t.animate(this.hideProps,{duration:s,easing:i,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:s,easing:i,complete:h,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?"content-box"===a&&(u+=n.now):"content"!==o.options.heightStyle&&(n.now=Math.round(r-t.outerHeight()-u),u=0)}}),void 0):t.animate(this.hideProps,s,i,h):e.animate(this.showProps,s,i,h)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target);!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.currentTarget);n.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var n,r,i,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,n=this._filterMenuItems(i),n=s&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),n=this._filterMenuItems(i)),n.length?(this.focus(t,n),this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,n,r=this,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.parent(),r=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",n.attr("id"))}),t=s.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);r._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),n.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.outerHeight(),0>i?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]()),this.focus(n,r)},nextPage:function(t){var n,r,i;return this.active?(this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),0>n.offset().top-r-i}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var n,r,i;return this.active?(this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(e.trim(e(this).text()))})}}),e.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s="textarea"===i,o="input"===i;this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly"))return t=!0,r=!0,n=!0,void 0;t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault(),void 0;if(!n){var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}}},input:function(e){return r?(r=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===n||e.contains(n,r.target)||t.close()})})},menufocus:function(t,n){var r,i;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(i=n.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:i})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value),r=n.item.attr("aria-label")||i.value,r&&e.trim(r).length&&(this.liveRegion.children().hide(),e("<div>").text(r).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),r=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!n&&!r)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").text(n.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}}),e.ui.autocomplete;var h,p="ui-button ui-widget ui-state-default ui-corner-all",d="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",v=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},m=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),i=r?e(r).find("[name='"+n+"'][type=radio]"):e("[name='"+n+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,v),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,r="checkbox"===this.type||"radio"===this.type,i=r?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===h&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||e(this).removeClass(i)}).bind("click"+this.eventNamespace,function(e){n.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return n.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var r=t.element[0];m(r).not(r).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return n.disabled?!1:(e(this).addClass("ui-state-active"),h=this,t.document.one("mouseup",function(){h=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return n.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return n.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+d).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?m(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(d),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),n=this.element.find(this.options.items),r=n.filter(":ui-button");n.not(":ui-button").button(),r.button("refresh"),this.buttons=n.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var g;e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i="div"===r||"span"===r,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),"input"===r?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]),r.hasClass(this.markerClassName)||(this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),("focus"===r||"both"===r)&&t.focus(this._showDatepicker),("button"===r||"both"===r)&&(i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(n=0,r=0,i=0;e.length>i;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block"))},_dialogDatepicker:function(t,n,r,i,s){var o,a,f,l,c,h=this._dialogInst;return h||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},e.data(this._dialogInput[0],"datepicker",h)),u(h.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(a=document.documentElement.clientWidth,f=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+l,f/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var n,r=e(t),i=e.data(t,"datepicker");r.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===n?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===n||"span"===n)&&r.removeClass(this.markerClassName).empty(),g===i&&(g=null))},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");i.hasClass(this.markerClassName)&&(n=t.nodeName.toLowerCase(),"input"===n?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===n||"span"===n)&&(r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,r){var i,s,o,a,f=this._getInst(t);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):f?"all"===n?e.extend({},f.settings):this._get(f,n):null:(i=n||{},"string"==typeof n&&(i={},i[n]=r),f&&(this._curInst===f&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),a=this._getMinMaxDate(f,"max"),u(f.settings,i),null!==o&&void 0!==i.dateFormat&&void 0===i.minDate&&(f.settings.minDate=this._formatDate(f,o)),null!==a&&void 0!==i.dateFormat&&void 0===i.maxDate&&(f.settings.maxDate=this._formatDate(f,a)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),f),this._autoSize(f),this._setDate(f,s),this._updateAlternate(f),this._updateDatepicker(f)),void 0)},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);return e.datepicker._get(i,"constrainInput")?(n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">r||!n||n.indexOf(r)>-1):void 0},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var n,i,s,o,a,f,l;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(n,"beforeShow"),s=i?i.apply(t,[t,n]):{},s!==!1&&(u(n.settings,s),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),a=e.datepicker._checkOffset(n,a,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),n.inline||(f=e.datepicker._get(n,"showAnim"),l=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",r(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[f]?n.dpDiv.show(f,e.datepicker._get(n,"showOptions"),l):n.dpDiv[f||"show"](f?l:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n))}},_updateDatepicker:function(t){this.maxRows=4,g=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,r=this._getNumberOfMonths(t),i=r[1],s=17,u=t.dpDiv.find("."+this._dayOverClass+" a");u.length>0&&o.apply(u.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),t.dpDiv[(1!==r[0]||1!==r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){for(var n,r=this._getInst(t),i=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(n=this._get(o,"showAnim"),r=this._get(o,"duration"),i=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),r,i):o.dpDiv["slideDown"===n?"slideUp":"fadeIn"===n?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&0===n.parents("#"+e.datepicker._mainDivId).length&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(s,n+("M"===r?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s))},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+("M"===r?"Month":"Year")]=s["draw"+("M"===r?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=null!=n?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(null==t||null==n)throw"Invalid arguments";if(n="object"==typeof n?""+n:n+"",""===n)return null;var i,s,o,u,a=0,f=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof f?f:(new Date).getFullYear()%100+parseInt(f,10),c=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,h=(r?r.dayNames:null)||this._defaults.dayNames,p=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,d=(r?r.monthNames:null)||this._defaults.monthNames,v=-1,m=-1,g=-1,y=-1,b=!1,w=function(e){var n=t.length>i+1&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,i="y"===e?r:1,s=RegExp("^\\d{"+i+","+r+"}"),o=n.substring(a).match(s);if(!o)throw"Missing number at position "+a;return a+=o[0].length,parseInt(o[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var r=t[1];return n.substr(a,r.length).toLowerCase()===r.toLowerCase()?(s=t[0],a+=r.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+a},x=function(){if(n.charAt(a)!==t.charAt(i))throw"Unexpected literal at position "+a;a++};for(i=0;t.length>i;i++)if(b)"'"!==t.charAt(i)||w("'")?x():b=!1;else switch(t.charAt(i)){case"d":g=E("d");break;case"D":S("D",c,h);break;case"o":y=E("o");break;case"m":m=E("m");break;case"M":m=S("M",p,d);break;case"y":v=E("y");break;case"@":u=new Date(E("@")),v=u.getFullYear(),m=u.getMonth()+1,g=u.getDate();break;case"!":u=new Date((E("!")-this._ticksTo1970)/1e4),v=u.getFullYear(),m=u.getMonth()+1,g=u.getDate();break;case"'":w("'")?x():b=!0;break;default:x()}if(n.length>a&&(o=n.substr(a),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===v?v=(new Date).getFullYear():100>v&&(v+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=v?0:-100)),y>-1)for(m=1,g=y;;){if(s=this._getDaysInMonth(v,m-1),s>=g)break;m++,g-=s}if(u=this._daylightSavingAdjust(new Date(v,m-1,g)),u.getFullYear()!==v||u.getMonth()+1!==m||u.getDate()!==g)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=e.length>r+1&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))for(;n>r.length;)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;e.length>r;r++)if(h)"'"!==e.charAt(r)||a("'")?c+=e.charAt(r):h=!1;else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=e.length>t+1&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;e.length>t;t++)if(r)"'"!==e.charAt(t)||i("'")?n+=e.charAt(t):r=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}for(var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);f;){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=7*parseInt(f[1],10);break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=null==n||""===n?r:"string"==typeof n?s(n):"number"==typeof n?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&"Invalid Date"==""+o?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),i===e.selectedMonth&&s===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;if(0>Z&&(Z+=12,et--),Y)for(t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&G>t?G:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",S=0;V[0]>S;S++){for(x="",this.maxRows=4,T=0;V[1]>T;T++){if(N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="",K){if(k+="<div class='ui-datepicker-group",V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}for(k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&0===S?U?s:r:"")+(/all|right/.test(C)&&0===S?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",E=0;7>E;E++)A=(E+l)%7,L+="<th scope='col'"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";for(k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M)),H=0;D>H;H++){for(k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"",E=0;7>E;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&G>P||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(F&&!g||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",l=0;12>l;l++)(!a||l>=r.getMonth())&&(!f||i.getMonth()>=l)&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}if(y||(b+=w+(!s&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";v>=d;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!s&&m&&g?"":"&#xa0;")+w),b+="</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===n||"Y"===n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&n>t?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(0>t?t:i[0]*i[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||u>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var n=this.options;return this._blurActiveElement(t),this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=this.document[0];if(this.handleElement.is(t.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&e(n.activeElement).blur()}catch(r){}},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!r||"valid"===this.options.revert&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];return this.relativeContainer=null,i.containment?"window"===i.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===i.containment?(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):i.containment.constructor===Array?(this.containment=i.containment,void 0):("parent"===i.containment&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0],r&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;return u&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(a=this.originalPageX),"x"===o.axis&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,r._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];o!==u&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--)a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height,a-v>g||m>f+v||l-v>b||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)?(r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1):("inner"!==d.snapMode&&(i=v>=Math.abs(l-b),s=v>=Math.abs(c-y),o=v>=Math.abs(a-g),u=v>=Math.abs(f-m),i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,"outer"!==d.snapMode&&(i=v>=Math.abs(l-y),s=v>=Math.abs(c-b),o=v>=Math.abs(a-m),u=v>=Math.abs(f-g),i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});o.length&&(i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}}),e.ui.draggable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n,r,i,s,o=this,u=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},n=0;t.length>n;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){u.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){u.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)r=e(this.handles[n])[0],(r===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];return this._updatePrevProperties(),a?(n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),s.maxWidth>n&&(s.maxWidth=n),s.maxHeight>i&&(s.maxHeight=i)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.position.top+this.size.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseInt(r[t],10)||0,n[t]+=parseInt(i[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;h&&(a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u}))},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(u[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a="number"==typeof r.grid?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&p>r.maxWidth,m=r.maxHeight&&d>r.maxHeight,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l),/^(se|s|e)$/.test(u)?(n.size.width=p,n.size.height=d):/^(ne)$/.test(u)?(n.size.width=p,n.size.height=d,n.position.top=o.top-h):/^(sw)$/.test(u)?(n.size.width=p,n.size.height=d,n.position.left=o.left-c):((0>=d-l||0>=p-f)&&(t=n._getPaddingPlusBorderDimensions(this)),d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=f-t.width,n.size.width=p,n.position.left=o.left+s.width-p))}}),e.ui.resizable,e.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n,r=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{n=this.document[0].activeElement,n&&"body"!==n.nodeName.toLowerCase()&&e(n).blur()}catch(i){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var r=!1,i=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),s=Math.max.apply(null,i);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),r=!0),r&&!n&&this._trigger("focus",t),r},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){i.focus()}),t.preventDefault()):(this._delay(function(){r.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,i){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",r,t(i))},drag:function(e,r){n._trigger("drag",e,t(r))},stop:function(i,s){var o=s.offset.left-n.document.scrollLeft(),u=s.offset.top-n.document.scrollTop();r.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(u>=0?"+":"")+u,of:n.window},e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",i,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,r=this.options,i=r.resizable,s=this.uiDialog.css("position"),o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(r,i){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",r,t(i))},resize:function(e,r){n._trigger("resize",e,t(r))},stop:function(i,s){var o=n.uiDialog.offset(),u=o.left-n.document.scrollLeft(),a=o.top-n.document.scrollTop();r.height=n.uiDialog.height(),r.width=n.uiDialog.width(),r.position={my:"left top",at:"left"+(u>=0?"+":"")+u+" "+"top"+(a>=0?"+":"")+a,of:n.window},e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",i,t(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);-1!==n&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,r=!1,i={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(r=!0),e in n.resizableRelatedOptions&&(i[e]=t)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(e,t){var n,r,i=this.uiDialog;"dialogClass"===e&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){if("accept"===t)this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if("scope"===t){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,n){return e>=t&&t+n>e}return function(t,n,r,i){if(!n.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,u=s+t.helperProportions.width,a=o+t.helperProportions.height,f=n.offset.left,l=n.offset.top,c=f+n.proportions().width,h=l+n.proportions().height;switch(r){case"fit":return s>=f&&c>=u&&o>=l&&h>=a;case"intersect":return s+t.helperProportions.width/2>f&&c>u-t.helperProportions.width/2&&o+t.helperProportions.height/2>l&&h>a-t.helperProportions.height/2;case"pointer":return e(i.pageY,l,n.proportions().height)&&e(i.pageX,f,n.proportions().width);case"touch":return(o>=l&&h>=o||a>=l&&h>=a||l>o&&a>h)&&(s>=f&&c>=s||u>=f&&c>=u||f>s&&u>c);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;s.length>r;r++)if(!(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))){for(i=0;u.length>i;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible="none"!==s[r].element.css("display"),s[r].visible&&("mousedown"===o&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}))}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance,n),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),s.length&&(r=e(s[0]).droppable("instance"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,n),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,n)))}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.ui.droppable;var y="ui-effects-",b=e;e.effects={effect:{}},function(e,t){function n(e,t,n){var r=c[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:e>r.max?r.max:e)}function r(n){var r=f(),i=r._rgba=[];return n=n.toLowerCase(),d(a,function(e,s){var o,u=s.re.exec(n),a=u&&s.parse(u),f=s.space||"rgba";return a?(o=r[f](a),r[l[f].cache]=o[l[f].cache],i=r._rgba=o._rgba,!1):t}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),r):s[n]}function i(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",u=/^([\-+])=\s*(\d+\.?\d*)/,a=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],f=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},l={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},c={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=f.support={},p=e("<p>")[0],d=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,d(l,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),f.fn=e.extend(f.prototype,{parse:function(i,o,u,a){if(i===t)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=e(i).css(o),o=t);var c=this,h=e.type(i),p=this._rgba=[];return o!==t&&(i=[i,o,u,a],h="array"),"string"===h?this.parse(r(i)||s._default):"array"===h?(d(l.rgba.props,function(e,t){p[t.idx]=n(i[t.idx],t)}),this):"object"===h?(i instanceof f?d(l,function(e,t){i[t.cache]&&(c[t.cache]=i[t.cache].slice())}):d(l,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!c[s]&&r.to){if("alpha"===e||null==i[e])return;c[s]=r.to(c._rgba)}c[s][t.idx]=n(i[e],t,!0)}),c[s]&&0>e.inArray(null,c[s].slice(0,3))&&(c[s][3]=1,r.from&&(c._rgba=r.from(c[s])))}),this):t},is:function(e){var n=f(e),r=!0,i=this;return d(l,function(e,s){var o,u=n[s.cache];return u&&(o=i[s.cache]||s.to&&s.to(i._rgba)||[],d(s.props,function(e,n){return null!=u[n.idx]?r=u[n.idx]===o[n.idx]:t})),r}),r},_space:function(){var e=[],t=this;return d(l,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=f(e),i=r._space(),s=l[i],o=0===this.alpha()?f("transparent"):this,u=o[s.cache]||s.to(o._rgba),a=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],f=r[s],l=c[i.type]||{};null!==f&&(null===o?a[s]=f:(l.mod&&(f-o>l.mod/2?o+=l.mod:o-f>l.mod/2&&(o-=l.mod)),a[s]=n((f-o)*t+o,i)))}),this[i](a)},blend:function(t){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=f(t)._rgba;return f(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(255*r)),"#"+e.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,l.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,r=e[0]/255,i=e[1]/255,s=e[2]/255,o=e[3],u=Math.max(r,i,s),a=Math.min(r,i,s),f=u-a,l=u+a,c=.5*l;return t=a===u?0:r===u?60*(i-s)/f+360:i===u?60*(s-r)/f+120:60*(r-i)/f+240,n=0===f?0:.5>=c?f/l:f/(2-l),[Math.round(t)%360,n,c,null==o?1:o]},l.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=.5>=r?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(255*i(u,o,t+1/3)),Math.round(255*i(u,o,t)),Math.round(255*i(u,o,t-1/3)),s]},d(l,function(r,i){var s=i.props,o=i.cache,a=i.to,l=i.from;f.fn[r]=function(r){if(a&&!this[o]&&(this[o]=a(this._rgba)),r===t)return this[o].slice();var i,u=e.type(r),c="array"===u||"object"===u?r:arguments,h=this[o].slice();return d(s,function(e,t){var r=c["object"===u?e:t.idx];null==r&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=f(l(h)),i[o]=h,i):f(h)},d(s,function(t,n){f.fn[t]||(f.fn[t]=function(i){var s,o=e.type(i),a="alpha"===t?this._hsla?"hsla":"rgba":r,f=this[a](),l=f[n.idx];return"undefined"===o?l:("function"===o&&(i=i.call(this,l),o=e.type(i)),null==i&&n.empty?this:("string"===o&&(s=u.exec(i),s&&(i=l+parseFloat(s[2])*("+"===s[1]?1:-1))),f[n.idx]=i,this[a](f)))})})}),f.hook=function(t){var n=t.split(" ");d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if("transparent"!==i&&("string"!==e.type(i)||(s=r(i)))){if(i=f(s||i),!h.rgba&&1!==i._rgba[3]){for(o="backgroundColor"===n?t.parentNode:t;(""===u||"transparent"===u)&&o&&o.style;)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(a){}i=i.blend(u&&"transparent"!==u?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(a){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=f(t.elem,n),t.end=f(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]])for(r=i.length;r--;)n=i[r],"string"==typeof i[n]&&(s[e.camelCase(n)]=i[n]);else for(n in i)"string"==typeof i[n]&&(s[n]=i[n]);return s}function n(t,n){var r,s,o={};for(r in n)s=n[r],t[r]!==s&&(i[r]||(e.fx.step[r]||!isNaN(parseFloat(s)))&&(o[r]=s));return o}var r=["add","remove","toggle"],i={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(b.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(i,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s,o=e(this),u=o.attr("class")||"",f=a.children?o.find("*").addBack():o;f=f.map(function(){var n=e(this);return{el:n,start:t(this)}}),s=function(){e.each(r,function(e,t){i[t]&&o[t+"Class"](i[t])})},s(),f=f.map(function(){return this.end=t(this.el[0]),this.diff=n(this.start,this.end),this}),o.attr("class",u),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,r,i,s,o){return"boolean"==typeof r||void 0===r?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,i,s)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function t(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.11.4",save:function(e,t){for(var n=0;t.length>n;n++)null!==t[n]&&e.data(y+t[n],e[0].style[t[n]])},restore:function(e,t){var n,r;for(r=0;t.length>r;r++)null!==t[r]&&(n=e.data(y+t[r]),void 0===n&&(n=""),e.css(t[r],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function n(t){function n(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=r.complete,u=r.mode;(i.is(":hidden")?"hide"===u:"show"===u)?(i[u](),n()):o.call(i[0],r,n)}var r=t.apply(this,arguments),i=r.mode,s=r.queue,o=e.effects.effect[r.effect];return e.fx.off||!o?i?this[i](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)}):s===!1?this.each(n):this.queue(s||"fx",n)},show:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(r){if(n(r)||"boolean"==typeof r)return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;((t=Math.pow(2,--n))-1)/11>e;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,n){var r,i,s,o=e(this),u=/up|down|vertical/,a=/up|left|vertical|horizontal/,f=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(o,t.mode||"hide"),c=t.direction||"up",h=u.test(c),p=h?"height":"width",d=h?"top":"left",v=a.test(c),m={},g="show"===l;o.parent().is(".ui-effects-wrapper")?e.effects.save(o.parent(),f):e.effects.save(o,f),o.show(),r=e.effects.createWrapper(o).css({overflow:"hidden"}),i=r[p](),s=parseFloat(r.css(d))||0,m[p]=g?i:0,v||(o.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),m[d]=g?s:i+s),g&&(r.css(p,0),v||r.css(d,s+i)),r.animate(m,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===l&&o.hide(),e.effects.restore(o,f),e.effects.removeWrapper(o),n()}})},e.effects.effect.bounce=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"effect"),f="hide"===a,l="show"===a,c=t.direction||"up",h=t.distance,p=t.times||5,d=2*p+(l||f?1:0),v=t.duration/d,m=t.easing,g="up"===c||"down"===c?"top":"left",y="up"===c||"left"===c,b=o.queue(),w=b.length;for((l||f)&&u.push("opacity"),e.effects.save(o,u),o.show(),e.effects.createWrapper(o),h||(h=o["top"===g?"outerHeight":"outerWidth"]()/3),l&&(s={opacity:1},s[g]=0,o.css("opacity",0).css(g,y?2*-h:2*h).animate(s,v,m)),f&&(h/=Math.pow(2,p-1)),s={},s[g]=0,r=0;p>r;r++)i={},i[g]=(y?"-=":"+=")+h,o.animate(i,v,m).animate(s,v,m),h=f?2*h:h/2;f&&(i={opacity:0},i[g]=(y?"-=":"+=")+h,o.animate(i,v,m)),o.queue(function(){f&&o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,d+1))),o.dequeue()},e.effects.effect.clip=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(o,t.mode||"hide"),f="show"===a,l=t.direction||"vertical",c="vertical"===l,h=c?"height":"width",p=c?"top":"left",d={};e.effects.save(o,u),o.show(),r=e.effects.createWrapper(o).css({overflow:"hidden"}),i="IMG"===o[0].tagName?r:o,s=i[h](),f&&(i.css(h,0),i.css(p,s/2)),d[h]=f?s:0,d[p]=f?0:s/2,i.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f||o.hide(),e.effects.restore(o,u),e.effects.removeWrapper(o),n()}})},e.effects.effect.drop=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","opacity","height","width"],o=e.effects.setMode(i,t.mode||"hide"),u="show"===o,a=t.direction||"left",f="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a?"pos":"neg",c={opacity:u?1:0};e.effects.save(i,s),i.show(),e.effects.createWrapper(i),r=t.distance||i["top"===f?"outerHeight":"outerWidth"](!0)/2,u&&i.css("opacity",0).css(f,"pos"===l?-r:r),c[f]=(u?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+r,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}})},e.effects.effect.explode=function(t,n){function r(){b.push(this),b.length===c*h&&i()}function i(){p.css({visibility:"visible"}),e(b).remove(),v||p.hide(),n()}var s,o,u,a,f,l,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=c,p=e(this),d=e.effects.setMode(p,t.mode||"hide"),v="show"===d,m=p.show().css("visibility","hidden").offset(),g=Math.ceil(p.outerWidth()/h),y=Math.ceil(p.outerHeight()/c),b=[];for(s=0;c>s;s++)for(a=m.top+s*y,l=s-(c-1)/2,o=0;h>o;o++)u=m.left+o*g,f=o-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*g,top:-s*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g,height:y,left:u+(v?f*g:0),top:a+(v?l*y:0),opacity:v?0:1}).animate({left:u+(v?0:f*g),top:a+(v?0:l*y),opacity:v?1:0},t.duration||500,t.easing,r)},e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})},e.effects.effect.fold=function(t,n){var r,i,s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a="show"===u,f="hide"===u,l=t.size||15,c=/([0-9]+)%/.exec(l),h=!!t.horizFirst,p=a!==h,d=p?["width","height"]:["height","width"],v=t.duration/2,m={},g={};e.effects.save(s,o),s.show(),r=e.effects.createWrapper(s).css({overflow:"hidden"}),i=p?[r.width(),r.height()]:[r.height(),r.width()],c&&(l=parseInt(c[1],10)/100*i[f?0:1]),a&&r.css(h?{height:0,width:l}:{height:l,width:0}),m[d[0]]=a?i[0]:l,g[d[1]]=a?i[1]:0,r.animate(m,v,t.easing).animate(g,v,t.easing,function(){f&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),n()})},e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};"hide"===s&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&r.hide(),e.effects.restore(r,i),n()}})},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||"effect"!==p,v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===t.mode&&"show"===p?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||("show"===p?b:r),o.to=t.to||("hide"===p?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}},("box"===v||"both"===v)&&(s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to))),("content"===v||"both"===v)&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from),("content"===v||"both"===v)&&(c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),e.effects.restore(o,y),d||("static"===g?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return"auto"===n?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:"horizontal"!==u?o/100:1,x:"vertical"!==u?o/100:1};i.effect="size",i.queue=!1,i.complete=n,"effect"!==s&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&("show"===s&&(i.from.opacity=0,i.to.opacity=1),"hide"===s&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s="hide"===i,o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.pulsate=function(t,n){var r,i=e(this),s=e.effects.setMode(i,t.mode||"show"),o="show"===s,u="hide"===s,a=o||"hide"===s,f=2*(t.times||5)+(a?1:0),l=t.duration/f,c=0,h=i.queue(),p=h.length;for((o||!i.is(":visible"))&&(i.css("opacity",0).show(),c=1),r=1;f>r;r++)i.animate({opacity:c},l,t.easing),c=1-c;i.animate({opacity:c},l,t.easing),i.queue(function(){u&&i.hide(),n()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,f+1))),i.dequeue()},e.effects.effect.shake=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","height","width"],o=e.effects.setMode(i,t.mode||"effect"),u=t.direction||"left",a=t.distance||20,f=t.times||3,l=2*f+1,c=Math.round(t.duration/l),h="up"===u||"down"===u?"top":"left",p="up"===u||"left"===u,d={},v={},m={},g=i.queue(),y=g.length;for(e.effects.save(i,s),i.show(),e.effects.createWrapper(i),d[h]=(p?"-=":"+=")+a,v[h]=(p?"+=":"-=")+2*a,m[h]=(p?"-=":"+=")+2*a,i.animate(d,c,t.easing),r=1;f>r;r++)i.animate(v,c,t.easing).animate(m,c,t.easing);i.animate(v,c,t.easing).animate(d,c/2,t.easing).queue(function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,l+1))),i.dequeue()},e.effects.effect.slide=function(t,n){var r,i=e(this),s=["position","top","bottom","left","right","width","height"],o=e.effects.setMode(i,t.mode||"show"),u="show"===o,a=t.direction||"left",f="up"===a||"down"===a?"top":"left",l="up"===a||"left"===a,c={};e.effects.save(i,s),i.show(),r=t.distance||i["top"===f?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(i).css({overflow:"hidden"}),u&&i.css(f,l?isNaN(r)?"-"+r:-r:r),c[f]=(u?l?"+=":"-=":l?"-=":"+=")+r,i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),n()}})},e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s="fixed"===i.css("position"),o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})},e.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return void 0===e?this.options.value:(this.options.value=this._constrainedValue(e),this._refreshValue(),void 0)},_constrainedValue:function(e){return void 0===e&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),e.widget("ui.selectable",e.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");return i?(r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;n&&n.element!==r.element[0]&&("touch"===i.tolerance?f=!(n.left>u||s>n.right||n.top>a||o>n.bottom):"fit"===i.tolerance&&(f=n.left>s&&u>n.right&&n.top>o&&a>n.bottom),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var e=this.element.uniqueId().attr("id");this.ids={element:e,button:e+"-button",menu:e+"-menu"},this._drawButton(),this._drawMenu(),this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=e("label[for='"+this.ids.element+"']").attr("for",this.ids.button),this._on(this.label,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element),e("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button),this.buttonText=e("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button),this._setText(this.buttonText,this.element.find("option:selected").text()),this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){t.menuItems||t._refreshMenu()}),this._hoverable(this.button),this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo()),this.menuInstance=this.menu.menu({role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var r=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&r.index!==t.focusIndex&&(t._trigger("focus",e,{item:r}),t.isOpen||t._select(r,e)),t.focusIndex=r.index,t.button.attr("aria-activedescendant",t.menuItems.eq(r.index).attr("id"))}}).menu("instance"),this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this._setText(this.buttonText,this._getSelectedItem().text()),this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var e,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,n){var r=this,i="";e.each(n,function(n,s){s.optgroup!==i&&(e("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(s.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:s.optgroup}).appendTo(t),i=s.optgroup),r._renderItemData(t,s)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var r=e("<li>");return n.disabled&&r.addClass("ui-state-disabled"),this._setText(r,n.label),r.appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,r,i=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex):(n=this.menuItems.eq(this.element[0].selectedIndex),i+=":not(.ui-state-disabled)"),r="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](i).eq(-1):n[e+"All"](i).eq(0),r.length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this._setText(this.buttonText,e.label),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){"icons"===e&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button),this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"disabled"===e&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)),"width"===e&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen),this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;e||(e=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(e)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var n=[];t.each(function(t,r){var i=e(r),s=i.parent("optgroup");n.push({element:i,index:t,value:i.val(),label:i.text(),optgroup:s.attr("label")||"",disabled:s.prop("disabled")||i.prop("disabled")})}),this.items=n},_destroy:function(){this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.label.attr("for",this.ids.element)}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n)),t=i.length;n>t;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))&&(i=n,s=e(this),o=t)}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),0>r&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>r||1===t&&r>n)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var r,i,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(r=this.options.values,i=arguments[0],s=0;r.length>s;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===n?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;i>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),r=0;n.length>r;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,r=Math.floor(+(e-t).toFixed(this._precision())/n)*n;e=r+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=100*((a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())),l["horizontal"===a.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&("horizontal"===a.orientation?(0===r&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(0===r&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?100*((r-i)/(s-i)):0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),"max"===o&&"horizontal"===this.orientation&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),"max"===o&&"vertical"===this.orientation&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var n,r,i,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,o),n===!1))return}switch(s=this.options.step,r=i=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-s)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&t+n>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(r=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target)),r?!this.options.handle||n||(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),i)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,r){var i,s,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?u=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(u=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?u=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(u=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r),s&&r.instance===this.currentContainer&&i!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],i):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};s&&"x"!==s||(o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c="x"===this.options.axis||r+f>u&&a>r+f,h="y"===this.options.axis||t+l>s&&o>t+l,p=c&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>s&&o>n-this.helperProportions.width/2&&r+this.helperProportions.height/2>u&&a>i-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return r?this.floating?s&&"right"===s||"down"===i?2:1:i&&("down"===i?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function n(){u.push(this)}var r,i,s,o,u=[],a=[],f=this._connectWith();if(f&&t)for(r=f.length-1;r>=0;r--)for(s=e(f[r],this.document[0]),i=s.length-1;i>=0;i--)o=e.data(s[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&a.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=a.length-1;r>=0;r--)a[r][0].each(n);return e(u)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;t.length>n;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--)for(i=e(h[n],this.document[0]),r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(n=c.length-1;n>=0;n--)for(o=c[n][1],u=c[n][0],r=0,f=u.length;f>r;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--)r=this.items[n],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){(!n||r.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"clientX":"clientY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[p].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),i>Math.abs(t[c]-a)&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function n(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var r,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)("auto"===this._storedCSS[r]||"static"===this._storedCSS[r])&&(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),r=this.containers.length-1;r>=0;r--)t||i.push(n("deactivate",this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(n("out",this,this.containers[r])),this.containers[r].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(r=0;i.length>r;r++)i[r].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,r){var i=n.attr(r);void 0!==i&&i.length&&(t[r]=i)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r}))}var r;r=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,r=e.ui.keyCode;switch(t.keyCode){case r.UP:return this._repeat(null,1,t),!0;case r.DOWN:return this._repeat(null,-1,t),!0;case r.PAGE_UP:return this._repeat(null,n.page,t),!0;case r.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return t=null!==r.min?r.min:0,n=e-t,n=Math.round(n/r.step)*r.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==r.max&&e>r.max?r.max:null!==r.min&&r.min>e?r.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:a(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:a(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:a(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:a(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:a(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(a(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var e=/#.*$/;return function(t){var n,r;t=t.cloneNode(!1),n=t.href.replace(e,""),r=location.href.replace(e,"");try{n=decodeURIComponent(n)}catch(i){}try{r=decodeURIComponent(r)}catch(i){}return t.hash.length>1&&n===r}}(),_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(n.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);return null===t&&(r&&this.tabs.each(function(n,i){return e(i).attr("aria-controls")===r?(t=n,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(r),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||t.metaKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function r(){return t>i&&(t=0),0>t&&(t=i),t}for(var i=this.tabs.length-1;-1!==e.inArray(r(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,n=this.tabs,r=this.anchors,i=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,s,o,u=e(r).uniqueId().attr("id"),a=e(r).closest("li"),f=a.attr("aria-controls");t._isLocal(r)?(i=r.hash,o=i.substring(1),s=t.element.find(t._sanitizeSelector(i))):(o=a.attr("aria-controls")||e({}).uniqueId()[0].id,i="#"+o,s=t.element.find(i),s.length||(s=t._createPanel(o),s.insertAfter(t.panels[n-1]||t.tablist)),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),f&&a.data("ui-tabs-aria-controls",f),a.attr({"aria-controls":o,"aria-labelledby":u}),s.attr("aria-labelledby",u)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel"),n&&(this._off(n.not(this.tabs)),this._off(r.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,r=0;n=this.tabs[r];r++)t===!0||-1!==e.inArray(r,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();"fill"===t?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1||(n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),f.length||a.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l))},_toggle:function(t,n){function r(){s.running=!1,s._trigger("activate",t,n)}function i(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,r):(o.show(),r())}var s=this,o=n.newPanel,u=n.oldPanel;this.running=!0,u.length&&this.options.hide?this._hide(u,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u.hide(),i()),u.attr("aria-hidden","true"),n.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),o.length&&u.length?n.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false"),n.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);r[0]!==this.active[0]&&(r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tablist.unbind(this.eventNamespace),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var n=this.options.disabled;n!==!1&&(void 0===t?n=!1:(t=this._getIndex(t),n=e.isArray(n)?e.map(n,function(e){return e!==t?e:null}):e.map(this.tabs,function(e,n){return n!==t?n:null})),this._setupDisabled(n))},disable:function(t){var n=this.options.disabled;if(n!==!0){if(void 0===t)n=!0;else{if(t=this._getIndex(t),-1!==e.inArray(t,n))return;n=e.isArray(n)?e.merge([t],n).sort():[t]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),s=i.find(".ui-tabs-anchor"),o=this._getPanelForTab(i),u={tab:i,panel:o},a=function(e,t){"abort"===t&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr};this._isLocal(s[0])||(this.xhr=e.ajax(this._ajaxSettings(s,n,u)),this.xhr&&"canceled"!==this.xhr.statusText&&(i.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){o.html(e),r._trigger("load",n,u),a(i,t)},1)}).fail(function(e,t){setTimeout(function(){a(e,t)},1)})))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);-1!==i&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,n){var r=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){r._updateContent(t.element)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r.element[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);r.length&&!r.data("ui-tooltip-id")&&(r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&r.parents().each(function(){var t,r=e(this);r.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),r.attr("title")&&(r.uniqueId(),n.parents[this.id]={element:this,title:r.attr("title")},r.attr("title",""))}),this._registerCloseHandlers(t,r),this._updateContent(r,t))},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;return"string"==typeof r?this._open(t,e,r):(n=r.call(e[0],function(n){i._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=s),this._open(t,e,n))})}),n&&this._open(t,e,n),void 0)},_open:function(t,n,r){function i(e){f.of=e,o.is(":hidden")||o.position(f)}var s,o,u,a,f=e.extend({},this.options.position);if(r){if(s=this._find(n))return s.tooltip.find(".ui-tooltip-content").html(r),void 0;n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),s=this._tooltip(n),o=s.tooltip,this._addDescribedBy(n,o.attr("id")),o.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),r.clone?(a=r.clone(),a.removeAttr("id").find("[id]").removeAttr("id")):a=r,e("<div>").html(a).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:i}),i(t)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){o.is(":visible")&&(i(f.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,n){var r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var r=e.Event(t);r.currentTarget=n[0],this.close(r,!0)}}};n[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(r.mouseleave="close"),t&&"focusin"!==t.type||(r.focusout="close"),this._on(!0,n,r)},close:function(t){var n,r=this,i=e(t?t.currentTarget:this.element),s=this._find(i);return s?(n=s.tooltip,s.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),s.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){r._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),s.closing=!0,this._trigger("close",t,{tooltip:n}),s.hiding||(s.closing=!1)),void 0):(i.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var n=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),r=n.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[r]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur"),s=r.element;i.target=i.currentTarget=s[0],t.close(i,!0),e("#"+n).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})}),function(){function e(e){function a(i,a){var l,h,m=i==window,g=a&&a.message!==undefined?a.message:undefined;a=e.extend({},e.blockUI.defaults,a||{});if(a.ignoreIfBlocked&&e(i).data("blockUI.isBlocked"))return;a.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,a.overlayCSS||{}),l=e.extend({},e.blockUI.defaults.css,a.css||{}),a.onOverlayClick&&(a.overlayCSS.cursor="pointer"),h=e.extend({},e.blockUI.defaults.themedCSS,a.themedCSS||{}),g=g===undefined?a.message:g,m&&o&&f(window,{fadeOut:0});if(g&&typeof g!="string"&&(g.parentNode||g.jquery)){var y=g.jquery?g[0]:g,b={};e(i).data("blockUI.history",b),b.el=y,b.parent=y.parentNode,b.display=y.style.display,b.position=y.style.position,b.parent&&b.parent.removeChild(y)}e(i).data("blockUI.onUnblock",a.onUnblock);var w=a.baseZ,E,S,x,T;n||a.forceIframe?E=e('<iframe class="blockUI" style="z-index:'+w++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+a.iframeSrc+'"></iframe>'):E=e('<div class="blockUI" style="display:none"></div>'),a.theme?S=e('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+w++ +';display:none"></div>'):S=e('<div class="blockUI blockOverlay" style="z-index:'+w++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),a.theme&&m?(T='<div class="blockUI '+a.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:fixed">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):a.theme?(T='<div class="blockUI '+a.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(w+10)+';display:none;position:absolute">',a.title&&(T+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(a.title||"&nbsp;")+"</div>"),T+='<div class="ui-widget-content ui-dialog-content"></div>',T+="</div>"):m?T='<div class="blockUI '+a.blockMsgClass+' blockPage" style="z-index:'+(w+10)+';display:none;position:fixed"></div>':T='<div class="blockUI '+a.blockMsgClass+' blockElement" style="z-index:'+(w+10)+';display:none;position:absolute"></div>',x=e(T),g&&(a.theme?(x.css(h),x.addClass("ui-widget-content")):x.css(l)),a.theme||S.css(a.overlayCSS),S.css("position",m?"fixed":"absolute"),(n||a.forceIframe)&&E.css("opacity",0);var N=[E,S,x],C=m?e("body"):e(i);e.each(N,function(){this.appendTo(C)}),a.theme&&a.draggable&&e.fn.draggable&&x.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var k=s&&(!e.support.boxModel||e("object,embed",m?null:i).length>0);if(r||k){m&&a.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%");if((r||!e.support.boxModel)&&!m)var L=v(i,"borderTopWidth"),A=v(i,"borderLeftWidth"),O=L?"(0 - "+L+")":0,M=A?"(0 - "+A+")":0;e.each(N,function(e,t){var n=t[0].style;n.position="absolute";if(e<2)m?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+a.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),m?n.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),M&&n.setExpression("left",M),O&&n.setExpression("top",O);else if(a.centerY)m&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!a.centerY&&m){var r=a.css&&a.css.top?parseInt(a.css.top,10):0,i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"';n.setExpression("top",i)}})}g&&(a.theme?x.find(".ui-widget-content").append(g):x.append(g),(g.jquery||g.nodeType)&&e(g).show()),(n||a.forceIframe)&&a.showOverlay&&E.show();if(a.fadeIn){var _=a.onBlock?a.onBlock:t,D=a.showOverlay&&!g?_:t,P=g?_:t;a.showOverlay&&S._fadeIn(a.fadeIn,D),g&&x._fadeIn(a.fadeIn,P)}else a.showOverlay&&S.show(),g&&x.show(),a.onBlock&&a.onBlock.bind(x)();c(1,i,a),m?(o=x[0],u=e(a.focusableElements,o),a.focusInput&&setTimeout(p,20)):d(x[0],a.centerX,a.centerY);if(a.timeout){var H=setTimeout(function(){m?e.unblockUI(a):e(i).unblock(a)},a.timeout);e(i).data("blockUI.timeout",H)}}function f(t,n){var r,i=t==window,s=e(t),a=s.data("blockUI.history"),f=s.data("blockUI.timeout");f&&(clearTimeout(f),s.removeData("blockUI.timeout")),n=e.extend({},e.blockUI.defaults,n||{}),c(0,t,n),n.onUnblock===null&&(n.onUnblock=s.data("blockUI.onUnblock"),s.removeData("blockUI.onUnblock"));var h;i?h=e("body").children().filter(".blockUI").add("body > .blockUI"):h=s.find(">.blockUI"),n.cursorReset&&(h.length>1&&(h[1].style.cursor=n.cursorReset),h.length>2&&(h[2].style.cursor=n.cursorReset)),i&&(o=u=null),n.fadeOut?(r=h.length,h.stop().fadeOut(n.fadeOut,function(){--r===0&&l(h,a,n,t)})):l(h,a,n,t)}function l(t,n,r,i){var s=e(i);if(s.data("blockUI.isBlocked"))return;t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.el.style.cursor="default",n.parent&&n.parent.appendChild(n.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),typeof r.onUnblock=="function"&&r.onUnblock(i,r);var o=e(document.body),u=o.width(),a=o[0].style.width;o.width(u-1).width(u),o[0].style.width=a}function c(t,n,r){var i=n==window,s=e(n);if(!t&&(i&&!o||!i&&!s.data("blockUI.isBlocked")))return;s.data("blockUI.isBlocked",t);if(!i||!r.bindEvents||t&&!r.showOverlay)return;var u="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(u,r,h):e(document).unbind(u,h)}function h(t){if(t.type==="keydown"&&t.keyCode&&t.keyCode==9&&o&&t.data.constrainTabKey){var n=u,r=!t.shiftKey&&t.target===n[n.length-1],i=t.shiftKey&&t.target===n[0];if(r||i)return setTimeout(function(){p(i)},10),!1}var s=t.data,a=e(t.target);return a.hasClass("blockOverlay")&&s.onOverlayClick&&s.onOverlayClick(t),a.parents("div."+s.blockMsgClass).length>0?!0:a.parents().children().filter("div.blockUI").length===0}function p(e){if(!u)return;var t=u[e===!0?u.length-1:0];t&&t.focus()}function d(e,t,n){var r=e.parentNode,i=e.style,s=(r.offsetWidth-e.offsetWidth)/2-v(r,"borderLeftWidth"),o=(r.offsetHeight-e.offsetHeight)/2-v(r,"borderTopWidth");t&&(i.left=s>0?s+"px":"0"),n&&(i.top=o>0?o+"px":"0")}function v(t,n){return parseInt(e.css(t,n),10)||0}e.fn._fadeIn=e.fn.fadeIn;var t=e.noop||function(){},n=/MSIE/.test(navigator.userAgent),r=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),i=document.documentMode||0,s=e.isFunction(document.createElement("div").style.setExpression);e.blockUI=function(e){a(window,e)},e.unblockUI=function(e){f(window,e)},e.growlUI=function(t,n,r,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),n&&s.append("<h2>"+n+"</h2>"),r===undefined&&(r=3e3);var o=function(t){t=t||{},e.blockUI({message:s,fadeIn:typeof t.fadeIn!="undefined"?t.fadeIn:700,fadeOut:typeof t.fadeOut!="undefined"?t.fadeOut:1e3,timeout:typeof t.timeout!="undefined"?t.timeout:r,centerY:!1,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})};o();var u=s.css("opacity");s.mouseover(function(){o({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(t){if(this[0]===window)return e.blockUI(t),this;var n=e.extend({},e.blockUI.defaults,t||{});return this.each(function(){var t=e(this);if(n.ignoreIfBlocked&&t.data("blockUI.isBlocked"))return;t.unblock({fadeOut:0})}),this.each(function(){e.css(this,"position")=="static"&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,a(this,t)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){f(this,t)})},e.blockUI.version=2.7,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var o=null,u=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define("jquery-blockui",["jquery"],e):e(jQuery)}();var SaikuChartRenderer=function(e,t){this.rawdata=e,this.cccOptions={},this.data=null,this.hasProcessed=!1,this.hasRendered=!1;if(!t&&!t.hasOwnProperty("htmlObject"))throw"You need to supply a html object in the options for the SaikuChartRenderer!";this.el=$(t.htmlObject),this.id=_.uniqueId("chart_"),$(this.el).html('<div class="canvas_wrapper" style="display:none;"><div id="canvas_'+this.id+'"></div></div>'),this.zoom=t.zoom;if(t.zoom){var n=this,r="<span style='float:left;' class='zoombuttons'><a href='#' class='button rerender' title='Re-render chart'></a><a href='#' class='button zoomout' style='display:none;' title='Zoom back out'></a></span>";$(r).prependTo($(this.el).find(".canvas_wrapper")),$(this.el).find(".zoomout").on("click",function(e){e.preventDefault(),n.zoomout()}),$(this.el).find(".zoomin").on("click",function(e){e.preventDefault(),n.zoomin()}),$(this.el).find(".rerender").on("click",function(e){e.preventDefault(),$(n.el).find(".zoomout").hide(),n.switch_chart(n.type)})}t.chartDefinition&&(this.chartDefinition=t.chartDefinition),this.cccOptions.canvas="canvas_"+this.id,this.data=null,this.adjustSizeTo=null,t.adjustSizeTo?this.adjustSizeTo=t.adjustSizeTo:this.adjustSizeTo=t.htmlObject,this.rawdata&&(this.type=="sunburst"?this.process_data_tree({data:this.rawdata}):this.process_data_tree({data:this.rawdata},!0,!0)),t.mode?this.switch_chart(t.mode):this.switch_chart("stackedBar"),this.adjust()};SaikuChartRenderer.prototype.adjust=function(){var e=this,t=function(){e.hasRendered&&$(e.el).is(":visible")&&e.switch_chart(e.type)},n=_.debounce(t,300);$(window).resize(function(){$(e.el).find(".canvas_wrapper").fadeOut(150),n()})},SaikuChartRenderer.prototype.zoomin=function(){$(this.el).find(".canvas_wrapper").hide();var e=this.chart.root,t=e.data;t.datums(null,{selected:!1}).each(function(e){e.setVisible(!1)}),t.clearSelected(),e.render(!0,!0,!1),this.render_chart_element()},SaikuChartRenderer.prototype.zoomout=function(){var e=this.chart.root,t=e.data,n=e.keptVisibleDatumSet;if(n==null||n.length==0)$(this.el).find(".zoomout").hide();else if(n.length==1)$(this.el).find(".zoomout").hide(),e.keptVisibleDatumSet=[],pvc.data.Data.setVisible(t.datums(null,{visible:!1}),!0);else if(n.length>1){e.keptVisibleDatumSet.splice(n.length-1,1);var r=t.datums(null,{visible:!1}).array(),i=e.keptVisibleDatumSet[n.length-1];_.intersection(i,r).forEach(function(e){e.setVisible(!0)})}e.render(!0,!0,!1)},SaikuChartRenderer.prototype.render=function(){_.delay(this.render_chart_element,0,this)},SaikuChartRenderer.prototype.switch_chart=function(e){var t={stackedBar:{type:"BarChart",stacked:!0},bar:{type:"BarChart"},multiplebar:{type:"BarChart",multiChartIndexes:[1],dataMeasuresInColumns:!0,orientation:"vertical",smallTitlePosition:"top",multiChartMax:30,multiChartColumnsMax:Math.floor(this.cccOptions.width/200),smallWidth:200,smallHeight:150},line:{type:"LineChart"},pie:{type:"PieChart",multiChartIndexes:[0]},heatgrid:{type:"HeatGridChart"},stackedBar100:{type:"NormalizedBarChart"},area:{type:"StackedAreaChart"},dot:{type:"DotChart"},waterfall:{type:"WaterfallChart"},treemap:{type:"TreemapChart"},sunburst:{type:"SunburstChart"}};if(e=="suanburst")$(this.el).find(".zoombuttons a").hide(),this.type=e,this.sunburst(),this.hasProcessed&&this.render();else if(t.hasOwnProperty(e)){$(this.el).find(".zoombuttons a").hide(),this.type=e;var n=t[e];this.cccOptions=this.getQuickOptions(n),this.define_chart(),this.hasProcessed&&this.render()}else alert("Do not support chart type: '"+e+"'")},SaikuChartRenderer.prototype.sunburst=function(){function n(e){return e.parentNode?n(e.parentNode)+"."+e.nodeName:e.nodeName}this.type="sunburst";var e=this.process_data_tree({data:this.rawdata}),t=this.getQuickOptions({}),r="",i=pv.dom(e).nodes(),s={delayIn:200,delayOut:80,offset:2,html:!0,gravity:"nw",fade:!1,followMouse:!0,corners:!0,arrow:!1,opacity:1},o=pv.colors(t.colors).by(function(e){return e.parentNode&&e.parentNode.nodeName}),u=(new pv.Panel).width(t.width).height(t.height).canvas(t.canvas),a=u.add(pv.Layout.Partition.Fill).nodes(i).size(function(e){return e.nodeValue}).order("descending").orient("radial");a.node.add(pv.Wedge).fillStyle(pv.colors(t.colors).by(function(e){return e.parentNode&&e.parentNode.nodeName})).visible(function(e){return e.depth>0}).strokeStyle("#000").lineWidth(.5).text(function(e){var t="";return typeof e.nodeValue!="undefined"&&(t=" : "+e.nodeValue),e.nodeName+t}).cursor("pointer").events("all").event("mousemove",pv.Behavior.tipsy(s)),a.label.add(pv.Label).visible(function(e){return e.angle*e.outerRadius>=6}),this.chart=u},SaikuChartRenderer.prototype.cccOptionsDefault={Base:{animate:!1,selectable:!0,valuesVisible:!1,legend:!0,legendPosition:"top",legendAlign:"right",compatVersion:2,legendSizeMax:"30%",axisSizeMax:"40%",plotFrameVisible:!1,orthoAxisMinorTicks:!1,colors:["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"]},HeatGridChart:{orientation:"horizontal",useShapes:!0,shape:"circle",nullShape:"cross",colorNormByCategory:!1,sizeRole:"value",legendPosition:"right",legend:!0,hoverable:!0,axisComposite:!0,colors:["red","yellow","lightgreen","darkgreen"],yAxisSize:"20%"},WaterfallChart:{orientation:"horizontal"},PieChart:{multiChartColumnsMax:3,multiChartMax:30,smallTitleFont:"bold 14px sans-serif",valuesVisible:!0,valuesMask:"{value.percent}",explodedSliceRadius:"10%",extensionPoints:{slice_innerRadiusEx:"40%",slice_offsetRadius:function(e){return e.isSelected()?"10%":0}},clickable:!0},LineChart:{extensionPoints:{area_interpolate:"monotone",line_interpolate:"monotone"}},StackedAreaChart:{extensionPoints:{area_interpolate:"monotone",line_interpolate:"monotone"}},TreemapChart:{legendPosition:"right",multiChartIndexes:0,extensionPoints:{leaf_lineWidth:2},layoutMode:"slice-and-dice",valuesVisible:!0},SunburstChart:{valuesVisible:!1,hoverable:!1,selectable:!0,clickable:!1,multiChartIndexes:[0],multiChartMax:30}},SaikuChartRenderer.prototype.getQuickOptions=function(e){var t=e&&e.type||"BarChart",n=_.extend({type:t,canvas:"canvas_"+this.id},this.cccOptionsDefault.Base,this.cccOptionsDefault[t],e);if(this.adjustSizeTo){var r=$(this.adjustSizeTo);if(r&&r.length>0){var i=r.width()-40,s=r.height()-40;i>0&&(n.width=i),s>0&&(n.height=s)}}return this.data!=null&&this.data.resultset.length>5&&n.type!=="HeatGridChart"&&n.orientation!=="horizontal"&&(n.extensionPoints=_.extend(Object.create(n.extensionPoints||{}),{xAxisLabel_textAngle:-Math.PI/2,xAxisLabel_textAlign:"right",xAxisLabel_textBaseline:"middle"})),n},SaikuChartRenderer.prototype.define_chart=function(e){this.hasProcessed||this.process_data_tree({data:this.rawdata},!0,!0);var t=this,n=this.adjustSizeTo?$(this.adjustSizeTo):$(this.el),r=this.data!=null&&this.data.height<80&&this.data.width<80,i=this.data!=null&&this.data.height<300&&this.data.width<300,s=!r&&!i,o=!1,u=r,a=n.width()-40,f=n.height()-40,l=_.clone(this.cccOptions);e&&e.width&&(a=e.width),e&&e.height&&(f=e.height),a>0&&(l.width=a),f>0&&(l.height=f),s&&(l.hasOwnProperty("extensionPoints")&&l.extensionPoints.hasOwnProperty("line_interpolate")&&delete l.extensionPoints.line_interpolate,l.hasOwnProperty("extensionPoints")&&l.extensionPoints.hasOwnProperty("area_interpolate")&&delete l.extensionPoints.area_interpolate);var c={legend:{scenes:{item:{execute:function(){var e=this.chart();e.hasOwnProperty("keptVisibleDatumSet")||(e.keptVisibleDatumSet=[]);var t=e.keptVisibleDatumSet.length>0?e.keptVisibleDatumSet[e.keptVisibleDatumSet.length-1]:[],n=t.length>0;n?_.intersection(this.datums().array(),t).forEach(function(e){e.toggleVisible()}):pvc.data.Data.toggleVisible(this.datums()),this.chart().render(!0,!0,!1)}}}},userSelectionAction:function(e){if(e.length==0)return[];var n=t.chart.root,r=n.data,i=this.chart;i.hasOwnProperty("keptVisibleDatumSet")||(i.keptVisibleDatumSet=[]);if(r.datums().count()>1500)pvc.data.Data.setSelected(e,!0);else if(r.datums(null,{visible:true}).count()==r.datums().count()){$(t.el).find(".zoomout, .rerender").show();var s=r.datums().array();_.each(_.difference(s,e),function(e){e.setVisible(!1)}),i.keptVisibleDatumSet=[],i.keptVisibleDatumSet.push(e)}else{var o=i.keptVisibleDatumSet.length>0?i.keptVisibleDatumSet[i.keptVisibleDatumSet.length-1]:[],u=r.datums(null,{visible:!0}).array(),a=o;u.length<o.length&&(a=u,i.keptVisibleDatumSet.push(u));var f=[];_.each(_.difference(u,e),function(e){e.setVisible(!1)}),_.each(_.intersection(u,e),function(e){f.push(e)}),f.length>0&&i.keptVisibleDatumSet.push(f)}return n.render(!0,!0,!1),[]}};l=_.extend(l,{hoverable:u,animate:o},this.chartDefinition),t.zoom&&(l=_.extend(l,c)),l.type=="TreemapChart"&&(l.legend.scenes.item.labelText=function(){var e="",t=this.group;if(t){var n=t.depth;switch(n){case 0:return"";case 1:break;case 2:e=" ‚îî ";break;default:e=(new Array(2*(n-2)+1)).join("¬†")+" ‚îî "}}return e+this.base()}),this.chart=new pvc[l.type](l),this.chart.setData(this.data,{crosstabMode:!0,seriesInRows:!1})},SaikuChartRenderer.prototype.render_chart_element=function(e){var t=e||this,n=t.data!=null&&t.data.height<80&&t.data.width<80,r=t.data!=null&&t.data.height<300&&t.data.width<300,i=!n&&!r,s=!1;t.chart.options&&t.chart.options.animate&&(s=!0),(!s||$(t.el).find(".canvas_wrapper").is(":visible"))&&$(t.el).find(".canvas_wrapper").hide();try{s&&$(t.el).find(".canvas_wrapper").show(),t.chart.render(),t.hasRendered=!0}catch(o){$("#canvas_"+t.id).text("Could not render chart"+o)}return t.chart.options&&t.chart.options.animate?!1:(isIE||i?$(t.el).find(".canvas_wrapper").show():$(t.el).find(".canvas_wrapper").fadeIn(400),!1)},SaikuChartRenderer.prototype.process_data_tree=function(e,t,n){var r=this,i={};t&&(i.resultset=[],i.metadata=[],i.height=0,i.width=0);var s=i;if(typeof e=="undefined"||typeof e.data=="undefined")return;if(e.data!=null&&e.data.error!=null)return;if(e.data==null||e.data.cellset&&e.data.cellset.length===0)return;var o=e.data.cellset;if(o&&o.length>0){var u=0,a=0,f=!1;for(var l=0,c=o.length;a==0&&l<c;l++)for(var h=0,p=o[l].length;h<p;h++){if(!f)while(o[l][h].type=="COLUMN_HEADER"&&o[l][h].value=="null")l++;f=!0;if(o[l][h].type=="ROW_HEADER_HEADER"){while(o[l][h].type=="ROW_HEADER_HEADER")t&&i.metadata.push({colIndex:h,colType:"String",colName:o[l][h].value}),h++;u=h-1}if(o[l][h].type=="COLUMN_HEADER"){var d=0,v=[];while(d<=l)o[d][h].value!=="null"&&v.push(o[d][h].value),d++;t&&i.metadata.push({colIndex:h,colType:"Numeric",colName:v.join(" ~ ")}),a=l+1}}var m={},g=[];for(var y=0;y<=u;y++)g.push(null);for(var l=a,c=o.length;l<c;l++)if(o[l][0].value!==""){var b=[],w=[],E=null,S=null;for(var y=0;y<=u;y++){if(o[l]&&o[l][y].value==="null"){s=i;var x=0;for(;x<u&&o[l][x].value==="null";x++)s=s[g[x]];x>y&&(y=x)}if(o[l]&&o[l][y].value!=="null"){if(y==0)for(var T=0;T<=u;T++)g[T]=null;typeof s=="number"&&(E[S]={},s=E[S]),S=o[l][y].value,g[y]=S,s.hasOwnProperty(S)||(s[S]={}),E=s,s=s[S]}}w=_.clone(g);for(var N=u+1,C=o[l].length;N<C;N++){var k=o[l][N],L=k.value||0,A=L!=0,O=k.properties.raw;O&&O!=="null"?L=parseFloat(O):typeof k.value!="number"&&parseFloat(k.value.replace(/[^a-zA-Z 0-9.]+/g,""))&&(L=parseFloat(k.value.replace(/[^a-zA-Z 0-9.]+/g,"")),A=!1),L>0&&A&&(L=k.value&&k.value.indexOf("%")>=0?L*100:L),b.push(L),w.push({f:k.value,v:L})}t&&i.resultset.push(w);var M=_.reduce(b,function(e,t){return e+t},0);S=S==null?"null":S,E[S]=M,s=i}return n&&(r.rawdata=e.data,r.data=i,r.hasProcessed=!0,r.data.height=r.data.resultset.length),i}$(r.el).find(".canvas_wrapper").text("No results").show()},define("saiku-chart-renderer",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.2";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o=x.keys(e),i=0,s=o.length;s>i;i++)if(t.call(r,e[o[i]],o[i],e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return arguments.length<2||n?e[x.random(e.length-1)]:x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={},s=null==n?x.identity:k(n);return T(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)}),i}};x.groupBy=L(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):o||n.trailing===!1||(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this,i=arguments,o=new Date;var a=function(){var f=new Date-o;t>f?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i)))},f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i)),u}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},x.pairs=function(e){for(var t=x.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){for(var t={},n=x.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if("[object Array]"==i){if(a=e.length,l=a==t.length)for(;a--&&(l=M(e[a],t[a],n,r)););}else{for(var c in e)if(x.has(e,c)&&(a++,!(l=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this));var SaikuRendererOptions={mode:null,dataMode:null,htmlObject:null,width:null,height:null},SaikuRenderer=function(e,t){this._options=_.extend(SaikuRendererOptions,t),this._hasProcessed=!1,typeof Backbone!="undefined"&&_.extend(this,Backbone.Events),e&&(this._data=e,this.processData(e,t),this._hasProcessed=!0)};SaikuRenderer.prototype.render=function(e,t){var n=null;return typeof Backbone!="undefined"&&this.trigger("render:start",this),this.hasProcessedData()||this.processData(e,t),n=this._render(e,t),typeof Backbone!="undefined"&&this.trigger("render:end",this),n},SaikuRenderer.prototype.processData=function(e,t){typeof Backbone!="undefined"&&this.trigger("processData:start",this),this._processData(e,t),typeof Backbone!="undefined"&&this.trigger("processData:end",this)},SaikuRenderer.prototype.hasProcessedData=function(){return this._hasProcessed},SaikuRenderer.prototype._render=function(e,t){},SaikuRenderer.prototype._processData=function(e,t){},define("saiku-renderer",function(){});var SaikuTableRenderer=_.extend(SaikuRenderer,{key:"table"});SaikuTableRenderer.prototype._render=function(e,t){var n=this;e&&(this._data=e),t&&(this._options=_.extend({},SaikuRendererOptions,t));if(typeof this._data=="undefined")return;if(this._data!=null&&this._data.error!=null)return;if(this._data==null||this._data.cellset&&this._data.cellset.length===0)return;if(!this._options.htmlObject){var r=this.internalRender(this._data,n._options);return r}n._options.hasOwnProperty("batch")&&$(n._options.htmlObject).parent().parent().unbind("scroll"),_.defer(function(e){n._options.hasOwnProperty("batch")&&!n._options.hasOwnProperty("batchSize")&&(n._options.batchSize=1e3);var t=n.internalRender(n._data,n._options);return $(n._options.htmlObject).html(t),_.defer(function(e){if(n._options.hasOwnProperty("batch")&&n._options.hasBatchResult){var t=0,r=!1,i=n._options.hasOwnProperty("batchIntervalSize")?n._options.batchIntervalSize:20,s=n._options.hasOwnProperty("batchIntervalTime")?n._options.batchIntervalTime:20,o=n._options.batchResult.length,u=function(){if(!r&&o>0&&t<o){r=!0;var e="",s=t;for(var u=0;t<o&&u<i;u++,t++)e+=n._options.batchResult[t];t>s&&$(n._options.htmlObject).append($(e)),r=!1}t>=o&&$(n._options.htmlObject).parent().parent().unbind("scroll")},a=_.debounce(u,s);$(n._options.htmlObject).parent().parent().scroll(function(){a()})}}),t})},SaikuTableRenderer.prototype.clear=function(e,t){var n=this;this._options.htmlObject&&this._options.hasOwnProperty("batch")&&$(n._options.htmlObject).parent().parent().unbind("scroll")},SaikuTableRenderer.prototype._processData=function(e,t){this._hasProcessed=!0};var ROWS="ROWS",COLUMNS="COLUMNS";SaikuTableRenderer.prototype.internalRender=function(e,t){var n="",r="",i=e.cellset,s=i?i:[],o,u,a,f=!1,l,c,h,p,d=!1,v=0,m=[],g=null,y=!1,b=!1,w=!1,E=[],S=!0;t&&(g=t.hasOwnProperty("batchSize")?t.batchSize:null,S=t.hasOwnProperty("wrapContent")?t.wrapContent:!0);var x={};x[COLUMNS]=e.rowTotalsLists,x[ROWS]=e.colTotalsLists;var T={},N={},C=[ROWS,COLUMNS];for(var k=0;k<C.length;k++)T[C[k]]=new Array,N[C[k]]=new Array;if(x[COLUMNS])for(var k=0;k<x[COLUMNS].length;k++)N[COLUMNS][k]=0,T[COLUMNS][k]=x[COLUMNS][k][N[COLUMNS][k]].width;for(var L=0,A=s.length;L<A;L++){var O=L-e.topOffset;o=1,u="",a=!1,c=!1,h=!1,b=!1;var M=!1;if(x[ROWS])for(var k=0;k<x[ROWS].length;k++)N[ROWS][k]=0,T[ROWS][k]=x[ROWS][k][N[ROWS][k]].width;r="<tr>",L===0&&(r="<thead>"+r);for(var _=0,D=s[L].length;_<D;_++){var P=_-e.leftOffset,H=i[L][_];H.type==="COLUMN_HEADER"&&(b=!0);if(H.type==="COLUMN_HEADER"&&H.value==="null"&&(l==null||_<l))r+='<th class="all_null">&nbsp;</th>';else if(H.type==="COLUMN_HEADER"){l==null&&(l=_),s[L].length==_+1?c=!0:p=i[L][_+1];if(c)H.value=="null"?r+='<th class="col_null">&nbsp;</th>':(x[ROWS]&&(o=x[ROWS][L+1][N[ROWS][L+1]].span),r+='<th class="col" style="text-align: center;" colspan="'+o+'" title="'+H.value+'">'+(S?'<div rel="'+L+":"+_+'">'+H.value+"</div>":H.value)+"</th>");else{var B=_>1&&L>1&&!a&&_>l?i[L-1][_+1].value!=i[L-1][_].value||i[L-1][_+1].properties.uniquename!=i[L-1][_].properties.uniquename:!1,j=o>999?!0:!1;H.value!=p.value||nextParentsDiffer(i,L,_)||a||B||j?(H.value=="null"?r+='<th class="col_null" colspan="'+o+'">&nbsp;</th>':(x[ROWS]&&(o=x[ROWS][L+1][N[ROWS][L+1]].span),r+='<th class="col" style="text-align: center;" colspan="'+(o==0?1:o)+'" title="'+H.value+'">'+(S?'<div rel="'+L+":"+_+'">'+H.value+"</div>":H.value)+"</th>"),o=1):o++}x[ROWS]&&(r+=genTotalHeaderCells(_-e.leftOffset+1,L+1,T[ROWS],N[ROWS],x[ROWS],S))}else if(H.type==="ROW_HEADER"&&H.value==="null")r+='<th class="row_null">&nbsp;</th>';else if(H.type==="ROW_HEADER"){v==_?a=!0:p=i[L][_+1];var F=i[L-1],I=!M&&!a&&(_==0||!topParentsDiffer(i,L,_))&&H.value===F[_].value;M=!I;var q=I?"<div>&nbsp;</div>":'<div rel="'+L+":"+_+'">'+H.value+"</div>";S||(q=I?"&nbsp;":H.value);var R="",U=I?"row_null":"row",z=0;if(!a&&(typeof p=="undefined"||p.value==="null")){z=1;var W=H.properties.dimension,X=H.properties.level,V=W in m?m[W].length-m[W].indexOf(X):1;for(var $=_+1;z<V&&$<=v+1&&i[L][$]!=="null";$++)z=$-_;_=_+z-1}r+='<th class="'+U+'" '+(z>0?' colspan="'+z+'"':"")+R+">"+q+"</th>"}else if(H.type==="ROW_HEADER_HEADER"){r+='<th class="row_header">'+(S?"<div>"+H.value+"</div>":H.value)+"</th>",a=!0,d=!0,v=_;if(H.properties.hasOwnProperty("dimension")){var W=H.properties.dimension;W in m||(m[W]=[]),m[W].push(H.properties.level)}}else if(H.type==="DATA_CELL"){y=!0;var J="",K=H.value,Q="";if(H.properties.hasOwnProperty("image")){var G=H.properties.hasOwnProperty("image_height")?" height='"+H.properties.image_height+"'":"",Y=H.properties.hasOwnProperty("image_width")?" width='"+H.properties.image_width+"'":"";K="<img "+G+" "+Y+" style='padding-left: 5px' src='"+H.properties.image+"' border='0'>"}H.properties.hasOwnProperty("style")&&(J=" style='background-color: "+H.properties.style+"' "),H.properties.hasOwnProperty("link")&&(K="<a target='__blank' href='"+H.properties.link+"'>"+K+"</a>"),H.properties.hasOwnProperty("arrow")&&(Q="<img height='10' width='10' style='padding-left: 5px' src='./images/arrow-"+H.properties.arrow+".gif' border='0'>"),r+='<td class="data" '+J+">"+(S?'<div class="datadiv" alt="'+H.properties.raw+'" rel="'+H.properties.position+'">':"")+K+Q+(S?"</div>":"")+"</td>",x[ROWS]&&(r+=genTotalDataCells(P+1,O,T[ROWS],N[ROWS],x,S))}}r+="</tr>";var Z="";x[COLUMNS]&&O>=0&&(Z+=genTotalHeaderRowCells(O+1,T,N,x,S)),y&&g?L<=g?(!b&&!w&&(n+="</thead><tbody>",w=!0),n+=r,Z.length>0&&(n+=Z)):(E.push(r),Z.length>0&&E.push(Z)):(!b&&!w&&(n+="</thead><tbody>",w=!0),n+=r,Z.length>0&&(n+=Z))}return t&&(t.batchResult=E,t.hasBatchResult=E.length>0),"<table class='table table-striped'>"+n+"</tbody></table>"},define("saiku-table-renderer",["backbone","jquery-blockui","saiku-renderer"],function(){}),Array.prototype.map||(Array.prototype.map=function(e,t){for(var n=this.length,r=new Array(n),i=0;n>i;i++)i in this&&(r[i]=e.call(t,this[i],i,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){for(var n=this.length,r=new Array,i=0;n>i;i++)if(i in this){var s=this[i];e.call(t,s,i,this)&&r.push(s)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.reduce||(Array.prototype.reduce=function(e,t){var n=this.length;if(!n&&1==arguments.length)throw new Error("reduce: empty array, no initial value");var r=0;if(arguments.length<2)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new Error("reduce: no values, no initial value")}for(;n>r;r++)r in this&&(t=e(t,this[r],r,this));return t}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=this.length>>>0,r=!isFinite(t)||0>t?0:t>this.length?this.length:t;n>r;r++)if(this[r]===e)return r;return-1}),Date.now||(Date.now=function(){return+(new Date)}),Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t});var pv={};pv.version={major:3,minor:3},pv.identity=function(e){return e},pv.index=function(){return this.index},pv.child=function(){return this.childIndex},pv.parent=function(){return this.parent.index},!function(){pv.extend=function(e){return Object.create(e.prototype||e)},pv.extendType=function(e,t){var n=e.prototype=pv.extend(t);return n.constructor=e,e},pv.parse=function(e){for(var t,n,r=new RegExp("function\\s*(\\b\\w+)?\\s*\\([^)]*\\)\\s*","mg"),i=0,s="";t=r.exec(e);){var o=t.index+t[0].length;if("{"!=e.charAt(o)){s+=e.substring(i,o)+"{return ",i=o;for(var u=0;u>=0&&o<e.length;o++){var a=e.charAt(o);switch(a){case'"':case"'":for(;++o<e.length&&(n=e.charAt(o))!=a;)"\\"==n&&o++;break;case"[":case"(":u++;break;case"]":case")":u--;break;case";":case",":0==u&&u--}}s+=pv.parse(e.substring(i,--o))+";}",i=o}r.lastIndex=o}return s+=e.substring(i),s},pv.error=function(e){"undefined"!=typeof console&&console.error?console.error(e):alert(e)},pv.listen=function(e,t,n){return n=pv.listener(n),"load"===t||"onload"===t?pv.listenForPageLoad(n):(e.addEventListener?e.addEventListener(t,n,!1):(e===window&&(e=document.documentElement),e.attachEvent("on"+t,n)),n)},pv.unlisten=function(e,t,n){n.$listener&&(n=n.$listener),e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},pv.listenForPageLoad=function(e){"complete"!==document.readyState?document.addEventListener?window.addEventListener("load",e,!1):document.attachEvent&&window.attachEvent("onload",e):e(null)},pv.listener=function(e){return e.$listener||(e.$listener=function(t){try{return pv.event=t=t&&pv.fixEvent(t),e.call(this,t)}catch(n){pv.error(n)}finally{delete pv.event}})},pv.fixEvent=function(e){if(null==e.pageX&&null!=e.clientX){var t=e.target&&e.target.ownerDocument||document,n=t.documentElement,r=t.body;e.pageX=1*e.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e.pageY=1*e.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0)}return e},pv.ancestor=function(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1},pv.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},pv.getWindow=function(e){return null!=e&&e==e.window?e:9===e.nodeType?e.defaultView||e.parentWindow:!1};var e=/\-([a-z])/g;pv.hiphen2camel=function(t){return e.test(t)?t.replace(e,function(e,t){return t.toUpperCase()}):t};var t=window.getComputedStyle;pv.css=function(e,n){return t?t.call(window,e,null).getPropertyValue(n):e.currentStyle["float"===n?"styleFloat":pv.hiphen2camel(n)]},pv.cssStyle=function(e){var n;return t?(n=t.call(window,e,null),function(e){return n.getPropertyValue(e)}):(n=e.currentStyle,function(e){return n["float"===e?"styleFloat":pv.hiphen2camel(e)]})},pv._getElementsByClass=function(e,t){null==t&&(t=document);for(var n=[],r=t.getElementsByTagName("*"),i=r.length,s=new RegExp("(^|\\s)"+e+"(\\s|$)"),o=0,u=0;i>o;o++)s.test(r[o].className)&&(n[u]=r[o],u++);return n},pv.getElementsByClassName=function(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):pv._getElementsByClass(t,e)},pv.elementOffset=function(e){var t=e&&e.ownerDocument;if(t){var n=t.body;if(n!==e){var r;r="undefined"!=typeof e.getBoundingClientRect?e.getBoundingClientRect():{top:0,left:0};var i=pv.getWindow(t),s=t.documentElement,o=s.clientTop||n.clientTop||0,u=s.clientLeft||n.clientLeft||0,a=i.pageYOffset||s.scrollTop,f=i.pageXOffset||s.scrollLeft;return{top:r.top+a-o,left:r.left+f-u}}}},pv.renderer=function(){var e=document.svgImplementation||"nativesvg";return pv.renderer=function(){return e},e};var n=1;pv.id=function(){return n++},pv.functor=function(e){return"function"==typeof e?e:function(){return e}},pv.get=function(e,t,n){var r;return e&&null!=(r=e[t])?r:n};var r=Object.prototype.hasOwnProperty;pv.lazyArrayOwn=function(e,t){var n;return e&&r.call(e,t)&&(n=e[t])?n:e[t]=[]}}(),pv.listen(window,"load",function(){pv.$={i:0,x:document.getElementsByTagName("script")},pv.$.xlen=pv.$.x.length;for(;pv.$.i<pv.$.xlen;pv.$.i++){pv.$.s=pv.$.x[pv.$.i];if("text/javascript+protovis"==pv.$.s.type)try{window.eval(pv.parse(pv.$.s.text))}catch(e){pv.error(e)}}delete pv.$}),pv.Format={},pv.Format.re=function(e){return e.replace(/[\\\^\$\*\+\?\[\]\(\)\.\{\}]/g,"\\$&")},pv.Format.pad=function(e,t,n){var r=t-String(n).length;return 1>r?n:(new Array(r+1)).join(e)+n},pv.Format.date=function(e){function t(t){return e.replace(/%[a-zA-Z0-9]/g,function(e){switch(e){case"%a":return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()];case"%A":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()];case"%h":case"%b":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];case"%B":return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()];case"%c":return t.toLocaleString();case"%C":return n("0",2,Math.floor(t.getFullYear()/100)%100);case"%d":return n("0",2,t.getDate());case"%x":case"%D":return n("0",2,t.getMonth()+1)+"/"+n("0",2,t.getDate())+"/"+n("0",2,t.getFullYear()%100);case"%e":return n(" ",2,t.getDate());case"%H":return n("0",2,t.getHours());case"%I":var r=t.getHours()%12;return r?n("0",2,r):12;case"%m":return n("0",2,t.getMonth()+1);case"%M":return n("0",2,t.getMinutes());case"%n":return"\n";case"%p":return t.getHours()<12?"AM":"PM";case"%T":case"%X":case"%r":var r=t.getHours()%12;return(r?n("0",2,r):12)+":"+n("0",2,t.getMinutes())+":"+n("0",2,t.getSeconds())+" "+(t.getHours()<12?"AM":"PM");case"%R":return n("0",2,t.getHours())+":"+n("0",2,t.getMinutes());case"%S":return n("0",2,t.getSeconds());case"%Q":return n("0",3,t.getMilliseconds());case"%t":return"	";case"%u":var i=t.getDay();return i?i:1;case"%w":return t.getDay();case"%y":return n("0",2,t.getFullYear()%100);case"%Y":return t.getFullYear();case"%%":return"%"}return e})}var n=pv.Format.pad;return t.format=t,t.parse=function(t){var n=1970,r=0,i=1,s=0,o=0,u=0,a=[function(){}],f=pv.Format.re(e).replace(/%[a-zA-Z0-9]/g,function(e){switch(e){case"%b":return a.push(function(e){r={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[e]}),"([A-Za-z]+)";case"%h":case"%B":return a.push(function(e){r={January:0,February:1,March:2,April:3,May:4,June:5,July:6,August:7,September:8,October:9,November:10,December:11}[e]}),"([A-Za-z]+)";case"%e":case"%d":return a.push(function(e){i=e}),"([0-9]+)";case"%I":case"%H":return a.push(function(e){s=e}),"([0-9]+)";case"%m":return a.push(function(e){r=e-1}),"([0-9]+)";case"%M":return a.push(function(e){o=e}),"([0-9]+)";case"%p":return a.push(function(e){12==s?"am"==e&&(s=0):"pm"==e&&(s=Number(s)+12)}),"(am|pm)";case"%S":return a.push(function(e){u=e}),"([0-9]+)";case"%y":return a.push(function(e){e=Number(e),n=e+(e>=0&&69>e?2e3:e>=69&&100>e?1900:0)}),"([0-9]+)";case"%Y":return a.push(function(e){n=e}),"([0-9]+)";case"%%":return a.push(function(){}),"%"}return e}),l=t.match(f);return l&&l.forEach(function(e,t){a[t](e)}),new Date(n,r,i,s,o,u)},t},pv.Format.time=function(e){function t(t){t=Number(t);switch(e){case"short":return t>=31536e6?(t/31536e6).toFixed(1)+" years":t>=6048e5?(t/6048e5).toFixed(1)+" weeks":t>=864e5?(t/864e5).toFixed(1)+" days":t>=36e5?(t/36e5).toFixed(1)+" hours":t>=6e4?(t/6e4).toFixed(1)+" minutes":(t/1e3).toFixed(1)+" seconds";case"long":var r=[],i=t%6e4/1e3>>0,s=t%36e5/6e4>>0;r.push(n("0",2,i));if(t>=36e5){var o=t%864e5/36e5>>0;r.push(n("0",2,s)),t>=864e5?(r.push(n("0",2,o)),r.push(Math.floor(t/864e5).toFixed())):r.push(o.toFixed())}else r.push(s.toFixed());return r.reverse().join(":")}}var n=pv.Format.pad;return t.format=t,t.parse=function(t){switch(e){case"short":for(var n,r=/([0-9,.]+)\s*([a-z]+)/g,i=0;n=r.exec(t);){var s=parseFloat(n[0].replace(",","")),o=0;switch(n[2].toLowerCase()){case"year":case"years":o=31536e6;break;case"week":case"weeks":o=6048e5;break;case"day":case"days":o=864e5;break;case"hour":case"hours":o=36e5;break;case"minute":case"minutes":o=6e4;break;case"second":case"seconds":o=1e3}i+=s*o}return i;case"long":var n=t.replace(",","").split(":").reverse(),i=0;return n.length&&(i+=1e3*parseFloat(n[0])),n.length>1&&(i+=6e4*parseFloat(n[1])),n.length>2&&(i+=36e5*parseFloat(n[2])),n.length>3&&(i+=864e5*parseFloat(n[3])),i}},t},pv.Format.number=function(){function e(e){1/0>s&&(e=Math.round(e*o)/o);var d=String(Math.abs(e)).split("."),v=d[0];v.length>n&&(v=v.substring(v.length-n)),f&&v.length<t&&(v=(new Array(t-v.length+1)).join(u)+v),v.length>3&&(v=v.replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),!f&&v.length<r&&(v=(new Array(r-v.length+1)).join(u)+v),d[0]=0>e?h+v+p:v;var m=d[1]||"";return m.length>s&&(m=d[1]=m.substr(0,s)),m.length<i&&(d[1]=m+(new Array(i-m.length+1)).join(a)),d.join(l)}var t=0,n=1/0,r=0,i=0,s=0,o=1,u="0",a="0",f=!0,l=".",c=",",h="‚àí",p="";return e.format=e,e.parse=function(e){var t=pv.Format.re,r=String(e).split(l);1==r.length&&(r[1]=""),r[0].replace(new RegExp("^("+t(u)+")*"),""),r[1].replace(new RegExp("("+t(a)+")*$"),"");var i=r[0].replace(new RegExp(t(c),"g"),"");i.length>n&&(i=i.substring(i.length-n));var f=r[1]?Number("0."+r[1]):0;return 1/0>s&&(f=Math.round(f*o)/o),Math.round(i)+f},e.integerDigits=function(e,i){return arguments.length?(t=Number(e),n=arguments.length>1?Number(i):t,r=t+Math.floor(t/3)*c.length,this):[t,n]},e.fractionDigits=function(e,t){return arguments.length?(i=Number(e),s=arguments.length>1?Number(t):i,o=Math.pow(10,s),this):[i,s]},e.integerPad=function(e){return arguments.length?(u=String(e),f=/\d/.test(u),this):u},e.fractionPad=function(e){return arguments.length?(a=String(e),this):a},e.decimal=function(e){return arguments.length?(l=String(e),this):l},e.group=function(e){return arguments.length?(c=e?String(e):"",r=t+Math.floor(t/3)*c.length,this):c},e.negativeAffix=function(e,t){return arguments.length?(h=String(e||""),p=String(t||""),this):[h,p]},e},!function(){var e;pv.Text={},pv.Text.createCache=function(){return new t},pv.Text.usingCache=function(n,r,i){if(!(n instanceof t))throw new Error("Not a valid cache.");var s=e;e=n;try{return r.call(i)}finally{e=s}},pv.Text.measure=function(t,n){t=null==t?"":String(t);var r=e&&e.get(n,t);return r||(r=t?this.measureCore(t,n):{width:0,height:0},e&&e.put(n,t,r)),r},pv.Text.measureWidth=function(e,t){return pv.Text.measure(e,t).width},pv.Text.fontHeight=function(e){return pv.Text.measure("M",e).height},pv.Text.measureCore=function(){function e(){return n||(n=t())}function t(){var e=document.createElement("div");e.id="pvSVGText_"+(new Date).getTime();var t=e.style;t.position="absolute",t.visibility="hidden",t.width=0,t.height=0,t.left=0,t.top=0,t.lineHeight=1,t.textTransform="none",t.letterSpacing="normal",t.whiteSpace="nowrap";var n=pv.SvgScene.create("svg");n.setAttribute("font-size","10px"),n.setAttribute("font-family","sans-serif"),e.appendChild(n);var r=pv.SvgScene.create("text");return n.appendChild(r),r.appendChild(document.createTextNode("")),document.body.appendChild(e),r}var n,r="10px sans-serif";return function(t,n){n||(n=null);var i=e();r!==n&&(r=n,pv.SvgScene.setStyle(i,{font:n})),i.firstChild.nodeValue=String(t);var s;try{s=i.getBBox()}catch(o){throw"function"==typeof console.error&&console.error("GetBBox failed: ",o),o}return{width:s.width,height:s.height}}}();var t=function(){this._fontsCache={}},n=Object.prototype.hasOwnProperty;t.prototype._getFont=function(e){return e=e||"",n.call(this._fontsCache,e)?this._fontsCache[e]:this._fontsCache[e]={}},t.prototype.get=function(e,t){t=t||"";var r=this._getFont(e);return n.call(r,t)?r[t]:null},t.prototype.put=function(e,t,n){return this._getFont(e)[t||""]=n}}(),pv.map=function(e,t){var n={};return t?e.map(function(e,r){return n.index=r,t.call(n,e)}):e.slice()},pv.repeat=function(e,t){return 1==arguments.length&&(t=2),pv.blend(pv.range(t).map(function(){return e}))},pv.array=function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},pv.cross=function(e,t){for(var n=[],r=0,i=e.length,s=t.length;i>r;r++)for(var o=0,u=e[r];s>o;o++)n.push([u,t[o]]);return n},pv.blend=function(e){return Array.prototype.concat.apply([],e)},pv.transpose=function(e){var t=e.length,n=pv.max(e,function(e){return e.length});if(n>t){e.length=n;for(var r=t;n>r;r++)e[r]=new Array(t);for(var r=0;t>r;r++)for(var i=r+1;n>i;i++){var s=e[r][i];e[r][i]=e[i][r],e[i][r]=s}}else{for(var r=0;n>r;r++)e[r].length=t;for(var r=0;t>r;r++)for(var i=0;r>i;i++){var s=e[r][i];e[r][i]=e[i][r],e[i][r]=s}}e.length=n;for(var r=0;n>r;r++)e[r].length=t;return e},pv.normalize=function(e,t){for(var n=pv.map(e,t),r=pv.sum(n),i=0;i<n.length;i++)n[i]/=r;return n},pv.permute=function(e,t,n){n||(n=pv.identity);var r=new Array(t.length),i={};return t.forEach(function(t,s){i.index=t,r[s]=n.call(i,e[t])}),r},pv.numerate=function(e,t){t||(t=pv.identity);var n={},r={};return e.forEach(function(e,i){r.index=i,n[t.call(r,e)]=i}),n},pv.uniq=function(e,t){t||(t=pv.identity);var n,r={},i=[],s={};return e.forEach(function(e,u){s.index=u,n=t.call(s,e),n in r||(r[n]=i.push(n))}),i},pv.naturalOrder=function(e,t){return t>e?-1:e>t?1:0},pv.reverseOrder=function(e,t){return e>t?-1:t>e?1:0},pv.search=function(e,t,n){n||(n=pv.identity);for(var r=0,i=e.length-1;i>=r;){var s=r+i>>1,o=n(e[s]);if(t>o)r=s+1;else{if(!(o>t))return s;i=s-1}}return-r-1},pv.search.index=function(e,t,n){var r=pv.search(e,t,n);return 0>r?-r-1:r},pv.range=function(e,t,n){1==arguments.length&&(t=e,e=0),void 0==n&&(n=1);if((t-e)/n==1/0)throw new Error("range must be finite");var r,i=[],s=0;t-=1e-10*(t-e);if(0>n)for(;(r=e+n*s++)>t;)i.push(r);else for(;(r=e+n*s++)<t;)i.push(r);return i},pv.random=function(e,t,n){return 1==arguments.length&&(t=e,e=0),void 0==n&&(n=1),n?Math.floor(Math.random()*(t-e)/n)*n+e:Math.random()*(t-e)+e},pv.sum=function(e,t){var n={};return e.reduce(t?function(e,r,i){return n.index=i,e+t.call(n,r)}:function(e,t){return e+t},0)},pv.max=function(e,t){return t==pv.index?e.length-1:Math.max.apply(null,t?pv.map(e,t):e)},pv.max.index=function(e,t){if(!e.length)return-1;if(t==pv.index)return e.length-1;t||(t=pv.identity);for(var n=0,r=-1/0,i={},s=0;s<e.length;s++){i.index=s;var o=t.call(i,e[s]);o>r&&(r=o,n=s)}return n},pv.min=function(e,t){return t==pv.index?0:Math.min.apply(null,t?pv.map(e,t):e)},pv.min.index=function(e,t){if(!e.length)return-1;if(t==pv.index)return 0;t||(t=pv.identity);for(var n=0,r=1/0,i={},s=0;s<e.length;s++){i.index=s;var o=t.call(i,e[s]);r>o&&(r=o,n=s)}return n},pv.mean=function(e,t){return pv.sum(e,t)/e.length},pv.median=function(e,t){if(t==pv.index)return(e.length-1)/2;e=pv.map(e,t).sort(pv.naturalOrder);if(e.length%2)return e[Math.floor(e.length/2)];var n=e.length/2;return(e[n-1]+e[n])/2},pv.variance=function(e,t){if(e.length<1)return 0/0;if(1==e.length)return 0;var n=pv.mean(e,t),r=0,i={};t||(t=pv.identity);for(var s=0;s<e.length;s++){i.index=s;var o=t.call(i,e[s])-n;r+=o*o}return r},pv.deviation=function(e,t){return Math.sqrt(pv.variance(e,t)/(e.length-1))},pv.log=function(e,t){return Math.log(e)/Math.log(t)},pv.logSymmetric=function(e,t){return 0==e?0:0>e?-pv.log(-e,t):pv.log(e,t)},pv.logAdjusted=function(e,t){if(!isFinite(e))return e;var n=0>e;return t>e&&(e+=(t-e)/t),n?-pv.log(e,t):pv.log(e,t)},pv.logFloor=function(e,t){return e>0?Math.pow(t,Math.floor(pv.log(e,t))):-Math.pow(t,-Math.floor(-pv.log(-e,t)))},pv.logCeil=function(e,t){return e>0?Math.pow(t,Math.ceil(pv.log(e,t))):-Math.pow(t,-Math.ceil(-pv.log(-e,t)))},!function(){var e=Math.PI/180,t=180/Math.PI;pv.radians=function(t){return e*t},pv.degrees=function(e){return t*e}}(),pv.keys=function(e){var t=[];for(var n in e)t.push(n);return t},pv.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},pv.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},pv.dict=function(e,t){for(var n={},r={},i=0;i<e.length;i++)if(i in e){var s=e[i];r.index=i,n[s]=t.call(r,s)}return n},pv.hasOwnProp=Object.prototype.hasOwnProperty,pv.copyOwn=function(e,t){if(t){var n=pv.hasOwnProp;for(var r in t)n.call(t,r)&&(e[r]=t[r])}return e},pv.dom=function(e){return new pv.Dom(e)},pv.Dom=function(e){this.$map=e},pv.Dom.prototype.$leaf=function(e){return"object"!=typeof e},pv.Dom.prototype.leaf=function(e){return arguments.length?(this.$leaf=e,this):this.$leaf},pv.Dom.prototype.root=function(e){function t(e){var r=new pv.Dom.Node;for(var i in e){var s=e[i];r.appendChild(n(s)?new pv.Dom.Node(s):t(s)).nodeName=i}return r}var n=this.$leaf,r=t(this.$map);return r.nodeName=e,r},pv.Dom.prototype.nodes=function(){return this.root().nodes()},pv.Dom.Node=function(e){void 0!==e&&(this.nodeValue=e)},pv.Dom.Node.prototype.nodeValue=void 0,pv.Dom.Node.prototype.childNodes=[],pv.Dom.Node.prototype.parentNode=null,pv.Dom.Node.prototype.firstChild=null,pv.Dom.Node.prototype.lastChild=null,pv.Dom.Node.prototype.previousSibling=null,pv.Dom.Node.prototype.nextSibling=null,pv.Dom.Node.prototype._firstDirtyChildIndex=1/0,pv.Dom.Node.prototype._childIndex=-1,pv.Dom.Node.prototype.findChildIndex=function(e){if(!e)throw new Error("Argument 'n' required");if(e.parentNode===this){var t=e.childIndex(!0);if(t>-1)return t}throw new Error("child not found")},pv.Dom.Node.prototype._childRemoved=function(){},pv.Dom.Node.prototype._childAdded=function(){},pv.Dom.Node.prototype.removeChild=function(e){var t=this.findChildIndex(e);return this.removeAt(t)},pv.Dom.Node.prototype.appendChild=function(e){var t=e.parentNode;t&&t.removeChild(e);var n=this.lastChild;e.parentNode=this,e.previousSibling=n,n?(n.nextSibling=e,e._childIndex=n._childIndex+1):(this.firstChild=e,e._childIndex=0),this.lastChild=e;var r=pv.lazyArrayOwn(this,"childNodes").push(e);return this._childAdded(e,r-1),e},pv.Dom.Node.prototype.insertBefore=function(e,t){if(!t)return this.appendChild(e);var n=this.findChildIndex(t);return this.insertAt(e,n)},pv.Dom.Node.prototype.insertAt=function(e,t){if(null==t)return this.appendChild(e);var n=this.childNodes,r=n.length;if(t===r)return this.appendChild(e);if(0>t||t>r)throw new Error("Index out of range.");var i=e.parentNode;i&&i.removeChild(e);var s=t+1;s<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=s);var o=n[t];e.parentNode=this,e.nextSibling=o,e._childIndex=t;var u=e.previousSibling=o.previousSibling;return o.previousSibling=e,u?u.nextSibling=e:(o===this.lastChild&&(this.lastChild=e),this.firstChild=e),n.splice(t,0,e),this._childAdded(e,t),e},pv.Dom.Node.prototype.removeAt=function(e){var t=this.childNodes,n=t.length;if(!(0>e||e>=n)){var r=t[e];t.splice(e,1),n-1>e&&e<this._firstDirtyChildIndex&&(this._firstDirtyChildIndex=e);var i=r.previousSibling,s=r.nextSibling;return i?i.nextSibling=s:this.firstChild=s,s?s.previousSibling=i:this.lastChild=i,r.nextSibling=r.previousSibling=r.parentNode=null,this._childRemoved(r,e),r}},pv.Dom.Node.prototype.replaceChild=function(e,t){var n=this.findChildIndex(t),r=e.parentNode;r&&r.removeChild(e),e.parentNode=this,e.nextSibling=t.nextSibling,e._childIndex=t._childIndex;var i=e.previousSibling=t.previousSibling;i?i.nextSibling=e:this.firstChild=e;var s=t.nextSibling;return s?s.previousSibling=e:this.lastChild=e,this.childNodes[n]=e,this._childRemoved(t,n),this._childAdded(e,n),t},pv.Dom.Node.prototype.childIndex=function(e){var t=this.parentNode;if(t){var n=t._firstDirtyChildIndex;if(1/0>n){var r=t.childNodes;if(!e)return r.indexOf(this);for(var i=r.length;i>n;)r[n]._childIndex=n,n++;t._firstDirtyChildIndex=1/0}return this._childIndex}return-1},pv.Dom.Node.prototype.visitBefore=function(e){function t(n,r){e(n,r);for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1)}t(this,0)},pv.Dom.Node.prototype.visitAfter=function(e){function t(n,r){for(var i=n.firstChild;i;i=i.nextSibling)t(i,r+1);e(n,r)}t(this,0)},pv.Dom.Node.prototype.sort=function(e){if(this.firstChild){this._firstDirtyChildIndex=1/0;var t=this.childNodes;t.sort(e);var n,r=this.firstChild=t[0];delete r.previousSibling,r._childIndex=0;for(var i=1,s=t.length;s>i;i++)r.sort(e),n=t[i],n._childIndex=i,n.previousSibling=r,r=r.nextSibling=n;this.lastChild=r,delete r.nextSibling,r.sort(e)}return this},pv.Dom.Node.prototype.reverse=function(){var e=[];return this.visitAfter(function(t){this._firstDirtyChildIndex=1/0;for(var n;n=t.lastChild;)e.push(t.removeChild(n));if(e.length)for(;n=e.pop();)t.insertBefore(n,t.firstChild)}),this},pv.Dom.Node.prototype.nodes=function(){var e=[];return this.visitBefore(function(t){e.push(t)}),e},pv.Dom.Node.prototype.toggle=function(e){if(e)return this.toggled?this.visitBefore(function(e){e.toggled&&e.toggle()}):this.visitAfter(function(e){e.toggled||e.toggle()});var t,n=this;if(n.toggled){for(;t=n.toggled.pop();)n.appendChild(t);delete n.toggled}else if(t=n.lastChild){n.toggled=[];do n.toggled.push(n.removeChild(t));while(t=n.lastChild)}},pv.nodes=function(e){for(var t=new pv.Dom.Node,n=0,r=e.length;r>n;n++)t.appendChild(new pv.Dom.Node(e[n]));return t.nodes()},pv.tree=function(e){return new pv.Tree(e)},pv.Tree=function(e){this.array=e},pv.Tree.prototype.keys=function(e){return this.k=e,this},pv.Tree.prototype.value=function(e){return this.v=e,this},pv.Tree.prototype.map=function(){for(var e={},t={},n=0;n<this.array.length;n++){t.index=n;for(var r=this.array[n],i=this.k.call(t,r),s=e,o=0;o<i.length-1;o++)s=s[i[o]]||(s[i[o]]={});s[i[o]]=this.v?this.v.call(t,r):r}return e},pv.nest=function(e){return new pv.Nest(e)},pv.Nest=function(e){this.array=e,this.keys=[]},pv.Nest.prototype.key=function(e){return this.keys.push(e),this},pv.Nest.prototype.sortKeys=function(e){return this.keys[this.keys.length-1].order=e||pv.naturalOrder,this},pv.Nest.prototype.sortValues=function(e){return this.order=e||pv.naturalOrder,this},pv.Nest.prototype.map=function(){for(var e,t={},n=[],r=0;r<this.array.length;r++){var i=this.array[r],s=t;for(e=0;e<this.keys.length-1;e++){var o=this.keys[e](i);s[o]||(s[o]={}),s=s[o]}o=this.keys[e](i);if(!s[o]){var u=[];n.push(u),s[o]=u}s[o].push(i)}if(this.order)for(var e=0;e<n.length;e++)n[e].sort(this.order);return t},pv.Nest.prototype.entries=function(){function e(t){var n=[];for(var r in t){var i=t[r];n.push({key:r,values:i instanceof Array?i:e(i)})}return n}function t(e,n){var r=this.keys[n].order;r&&e.sort(function(e,t){return r(e.key,t.key)});if(++n<this.keys.length)for(var i=0;i<e.length;i++)t.call(this,e[i].values,n);return e}return t.call(this,e(this.map()),0)},pv.Nest.prototype.rollup=function(e){function t(n){for(var r in n){var i=n[r];i instanceof Array?n[r]=e(i):t(i)}return n}return t(this.map())},pv.flatten=function(e){return new pv.Flatten(e)},pv.Flatten=function(e){this.map=e,this.keys=[]},pv.Flatten.prototype.key=function(e,t){return this.keys.push({name:e,value:t}),delete this.$leaf,this},pv.Flatten.prototype.leaf=function(e){return this.keys.length=0,this.$leaf=e,this},pv.Flatten.prototype.array=function(){function e(t,i){if(s(t))n.push({keys:r.slice(),value:t});else for(var o in t)r.push(o),e(t[o],i+1),r.pop()}function t(e,s){if(s<i.length-1)for(var o in e)r.push(o),t(e[o],s+1),r.pop();else n.push(r.concat(e))}var n=[],r=[],i=this.keys,s=this.$leaf;return s?(e(this.map,0),n):(t(this.map,0),n.map(function(e){for(var t={},n=0;n<i.length;n++){var r=i[n],s=e[n];t[r.name]=r.value?r.value.call(null,s):s}return t}))},pv.Transform=function(){},pv.Transform.prototype={k:1,x:0,y:0},pv.Transform.identity=new pv.Transform,pv.Transform.prototype.translate=function(e,t){var n=new pv.Transform;return n.k=this.k,n.x=this.k*e+this.x,n.y=this.k*t+this.y,n},pv.Transform.prototype.scale=function(e){var t=new pv.Transform;return t.k=this.k*e,t.x=this.x,t.y=this.y,t},pv.Transform.prototype.invert=function(){var e=new pv.Transform,t=1/this.k;return e.k=t,e.x=-this.x*t,e.y=-this.y*t,e},pv.Transform.prototype.times=function(e){var t=new pv.Transform;return t.k=this.k*e.k,t.x=this.k*e.x+this.x,t.y=this.k*e.y+this.y,t},pv.Scale=function(){},pv.Scale.interpolator=function(e,t){if("number"==typeof e)return function(n){return n*(t-e)+e};var n=e.type&&"solid"!==e.type,r=t.type&&"solid"!==t.type;return n||r?(e=n?e:pv.color(e).rgb(),t=r?t:pv.color(t).rgb(),function(n){return.5>n?e:t}):(e=pv.color(e).rgb(),t=pv.color(t).rgb(),function(n){var r=e.a*(1-n)+t.a*n;return 1e-5>r&&(r=0),0==e.a?pv.rgb(t.r,t.g,t.b,r):0==t.a?pv.rgb(e.r,e.g,e.b,r):pv.rgb(Math.round(e.r*(1-n)+t.r*n),Math.round(e.g*(1-n)+t.g*n),Math.round(e.b*(1-n)+t.b*n),r)})},pv.Scale.common={by:function(e){function t(){return n(e.apply(this,arguments))}var n=this;for(var r in n)t[r]=n[r];return t},by1:function(e){function t(t){return n(e.call(this,t))}var n=this;for(var r in n)t[r]=n[r];return t},transform:function(e){function t(){return e.call(this,n.apply(n,arguments))}var n=this;for(var r in n)t[r]=n[r];return t}},pv.Scale.quantitative=function(){function e(e){return new Date(e)}function t(e){var t=pv.search(o,e);return 0>t&&(t=-t-2),t=Math.max(0,Math.min(f.length-1,t)),f[t]((h(e)-u[t])/(u[t+1]-u[t]))}var n,r,i,s,o=[0,1],u=[0,1],a=[0,1],f=[pv.identity],l=Number,c=!1,h=pv.identity,p=pv.identity,d=String,v=null;return t.transform=function(e,t){return h=function(t){return c?-e(-t):e(t)},p=function(e){return c?-t(-e):t(e)},u=o.map(h),this},t.domain=function(t,n,r){if(arguments.length){var i;return t instanceof Array?(arguments.length<2&&(n=pv.identity),arguments.length<3&&(r=n),i=t.length&&n(t[0]),o=t.length?[pv.min(t,n),pv.max(t,r)]:[]):(i=t,o=Array.prototype.slice.call(arguments).map(Number)),o.length?1==o.length&&(o=[o[0],o[0]]):o=[-1/0,1/0],c=(o[0]||o[o.length-1])<0,u=o.map(h),l=i instanceof Date?e:Number,this}return o.map(l)},t.range=function(){if(arguments.length){a=Array.prototype.slice.call(arguments),a.length?1==a.length&&(a=[a[0],a[0]]):a=[-1/0,1/0],f=[];for(var e=0;e<a.length-1;e++)f.push(pv.Scale.interpolator(a[e],a[e+1]));return this}return a},t.invert=function(e){var t=pv.search(a,e);return 0>t&&(t=-t-2),t=Math.max(0,Math.min(f.length-1,t)),l(p(u[t]+(e-a[t])/(a[t+1]-a[t])*(u[t+1]-u[t])))},t.ticks=function(t,u){function a(e,t){switch(t){case 31536e6:e.setMonth(0);case 2592e6:e.setDate(1);case 6048e5:6048e5==t&&e.setDate(e.getDate()-e.getDay());case 864e5:e.setHours(0);case 36e5:e.setMinutes(0);case 6e4:e.setSeconds(0);case 1e3:e.setMilliseconds(0)}}var f=o[0],c=o[o.length-1],h=f>c,p=h?c:f,v=h?f:c,m=v-p;if(!m||!isFinite(m))return l==e&&(d=pv.Format.date("%x")),[l(p)];var g=pv.get(u,"roundInside",!0);if(l==e){var y,b,w,E=null==t?5:t,S=1;m>=31536e6*E?(y=31536e6,b="%Y",w=function(e){e.setFullYear(e.getFullYear()+S)}):m>=2592e6*E?(y=2592e6,b="%m/%Y",w=function(e){e.setMonth(e.getMonth()+S)}):m>=6048e5*E?(y=6048e5,b="%m/%d",w=function(e){e.setDate(e.getDate()+7*S)}):m>=864e5*E?(y=864e5,b="%m/%d",w=function(e){e.setDate(e.getDate()+S)}):m>=36e5*E?(y=36e5,b="%I:%M %p",w=function(e){e.setHours(e.getHours()+S)}):m>=6e4*E?(y=6e4,b="%I:%M %p",w=function(e){e.setMinutes(e.getMinutes()+S)}):m>=1e3*E?(y=1e3,b="%I:%M:%S",w=function(e){e.setSeconds(e.getSeconds()+S)}):(y=1,b="%S.%Qs",w=function(e){e.setTime(e.getTime()+S)}),y=r?r:y,b=n?n:b,i=y,d=pv.Format.date(b);var x=new Date(p),T=[];a(x,y);var N=m/y;if(N>10)switch(y){case 36e5:S=N>20?6:3,x.setHours(Math.floor(x.getHours()/S)*S);break;case 2592e6:S=N>24?3:N>12?2:1,x.setMonth(Math.floor(x.getMonth()/S)*S);break;case 6048e5:S=N>15?3:N>10?2:1,x.setDate(1+7*Math.floor(x.getDate()/(7*S))*S);break;case 864e5:S=N>=30?5:N>=15?3:2,x.setDate(1+Math.floor(x.getDate()/S)*S);break;case 6e4:S=N>30?15:N>15?10:5,x.setMinutes(Math.floor(x.getMinutes()/S)*S);break;case 1e3:S=N>90?15:N>60?10:5,x.setSeconds(Math.floor(x.getSeconds()/S)*S);break;case 1:S=N>1e3?250:N>200?100:N>100?50:N>50?25:5,x.setMilliseconds(Math.floor(x.getMilliseconds()/S)*S);break;default:S=pv.logCeil(N/15,10),2>N/S?S/=5:5>N/S&&(S/=2),x.setFullYear(Math.floor(x.getFullYear()/S)*S)}r&&(S=1,w=function(e){e.setSeconds(e.getSeconds()+S*r/1e3)});if(g)for(;;){w(x);if(x>v)break;T.push(new Date(x))}else{v=new Date(v),w(v);do T.push(new Date(x)),w(x);while(v>=x)}return h?T.reverse():T}null==t&&(t=10);var C=pv.get(u,"numberExponentMin",-1/0),k=pv.get(u,"numberExponentMax",1/0),L=Math.floor(pv.log(m/t,10)),A=!1;L>k?(L=k,A=!0):C>L&&(L=C,A=!0),S=Math.pow(10,L);var O=m/S,M=t/O;.15>=M&&k-1>L?(S*=10,O/=10):.35>=M?(S*=5,O/=5):.75>=M&&(S*=2,O/=2),L=Math.floor(pv.log(S,10)+1e-10),f=S*Math[g?"ceil":"floor"](p/S),c=S*Math[g?"floor":"ceil"](v/S),s=Math.max(0,-L),d=pv.Format.number().fractionDigits(s),2===t&&O>=2&&(S=c-f);var _=pv.range(f,c+S,S);return h&&_.reverse(),_.roundInside=g,_.step=S,_.exponent=L,_.exponentOverflow=A,_.exponentMin=C,_.exponentMax=k,_},t.dateTickFormat=function(){return arguments.length?(n=arguments[0],this):n},t.dateTickPrecision=function(){return arguments.length?(r=arguments[0],this):r},t.tickFormatter=function(e){return arguments.length?(v=e,this):v},t.tickFormat=function(e){var t;return t=v?v(e,l!==Number?i:s):d(e),null==t?"":""+t},t.nice=function(){if(2!=o.length)return this;var e=o[0],t=o[o.length-1],n=e>t,r=n?t:e,i=n?e:t,s=i-r;if(!s||!isFinite(s))return this;var a=Math.pow(10,Math.round(Math.log(s)/Math.log(10))-1);return o=[Math.floor(r/a)*a,Math.ceil(i/a)*a],n&&o.reverse(),u=o.map(h),this},pv.copyOwn(t,pv.Scale.common),t.domain.apply(t,arguments),t},pv.Scale.linear=function(){var e=pv.Scale.quantitative();return e.domain.apply(e,arguments),e},pv.Scale.log=function(){var e,t,n=pv.Scale.quantitative(1,10),r=function(e){return Math.log(e)/t},i=function(t){return Math.pow(e,t)};return n.ticks=function(){var t=n.domain(),s=t[0]<0,o=Math.floor(s?-r(-t[0]):r(t[0])),u=Math.ceil(s?-r(-t[1]):r(t[1])),a=[];if(s){a.push(-i(-o));for(;o++<u;)for(var f=e-1;f>0;f--)a.push(-i(-o)*f)}else{for(;u>o;o++)for(var f=1;e>f;f++)a.push(i(o)*f);a.push(i(o))}for(o=0;a[o]<t[0];o++);for(u=a.length;a[u-1]>t[1];u--);return a.slice(o,u)},n.tickFormat=function(e){return e.toPrecision(1)},n.nice=function(){var t=n.domain();return n.domain(pv.logFloor(t[0],e),pv.logCeil(t[1],e))},n.base=function(s){return arguments.length?(e=Number(s),t=Math.log(e),n.transform(r,i),this):e},n.domain.apply(n,arguments),n.base(10)},pv.Scale.root=function(){var e=pv.Scale.quantitative();return e.power=function(t){if(arguments.length){var n=Number(t),r=1/n;return e.transform(function(e){return Math.pow(e,r)},function(e){return Math.pow(e,n)}),this}return n},e.domain.apply(e,arguments),e.power(2)},pv.Scale.ordinal=function(){function e(e){return e in n||(n[e]=t.push(e)-1),r[n[e]%r.length]}var t=[],n={},r=[];return e.domain=function(e,r){if(arguments.length){e=e instanceof Array?arguments.length>1?pv.map(e,r):e:Array.prototype.slice.call(arguments),t=[];for(var s={},o=0;o<e.length;o++){var u=e[o];u in s||(s[u]=!0,t.push(u))}return n=pv.numerate(t),this}return t},e.range=function(e,t){return arguments.length?(r=e instanceof Array?arguments.length>1?pv.map(e,t):e:Array.prototype.slice.call(arguments),"string"==typeof r[0]&&(r=r.map(pv.fillStyle)),r.min=r[0],r.max=r[r.length-1],this):r},e.split=function(e,t){var n=t-e,i=this.domain().length,s=0;return 0===n?r=pv.array(i,e):i&&(s=(t-e)/i,r=pv.range(e+s/2,t,s)),r.min=e,r.max=t,r.step=s,this},e.splitBandedCenter=function(t,n,i){return e.split(t,n),null==i&&(i=1),r.band=r.step*i,r.margin=r.step-r.band,r.min=t,r.max=n,this},e.splitBandedFlushCenter=function(e,t,n){null==n&&(n=1);var i=t-e,s=this.domain().length,o=0,u=0,a=0;return 0===i?r=pv.array(s,e):s&&(u=i*n/s,a=s>1?(i-s*u)/(s-1):0,o=a+u,r=pv.range(e+u/2,t,o)),r.step=o,r.band=u,r.margin=a,r.min=e,r.max=t,this},e.splitFlush=function(e,t){var n=this.domain().length,i=(t-e)/(n-1);return r=1==n?[(e+t)/2]:pv.range(e,t+i/2,i),r.min=e,r.max=t,this},e.splitBanded=function(e,t,n){arguments.length<3&&(n=1);if(0>n){var i=this.domain().length,s=-n*i,o=t-e-s,u=o/(i+1);r=pv.range(e+u,t,u-n),r.band=-n}else{var a=(t-e)/(this.domain().length+(1-n));r=pv.range(e+a*(1-n),t,a),r.band=a*n,r.step=a,r.margin=a-r.band}return r.min=e,r.max=t,this},e.invertIndex=function(e,t){var n=this.domain().length;if(0===n)return-1;var r=this.range(),i=r.max-r.min;if(0===i)return 0;var s=i/n;if(e>=r.max)return n;if(e<r.min)return 0;var o=(e-r.min)/s;return t?o:Math.round(o)},pv.copyOwn(e,pv.Scale.common),e.domain.apply(e,arguments),e},pv.Scale.quantile=function(){function e(e){return s(Math.max(0,Math.min(n,pv.search.index(r,e)-1))/n)}var t=-1,n=-1,r=[],i=[],s=pv.Scale.linear();return e.quantiles=function(e){if(arguments.length){t=Number(e);if(0>t)r=[i[0]].concat(i),n=i.length-1;else{r=[],r[0]=i[0];for(var s=1;t>=s;s++)r[s]=i[~~(s*(i.length-1)/t)];n=t-1}return this}return r},e.domain=function(n,r){return arguments.length?(i=n instanceof Array?pv.map(n,r):Array.prototype.slice.call(arguments),i.sort(pv.naturalOrder),e.quantiles(t),this):i},e.range=function(){return arguments.length?(s.range.apply(s,arguments),this):s.range()},pv.copyOwn(e,pv.Scale.common),e.domain.apply(e,arguments),e},pv.histogram=function(e,t){var n=!0;return{bins:function(r){var i=pv.map(e,t),s=[];arguments.length||(r=pv.Scale.linear(i).ticks());for(var o=0;o<r.length-1;o++){var u=s[o]=[];u.x=r[o],u.dx=r[o+1]-r[o],u.y=0}for(var o=0;o<i.length;o++){var a=pv.search.index(r,i[o])-1,u=s[Math.max(0,Math.min(s.length-1,a))];u.y++,u.push(e[o])}if(!n)for(var o=0;o<s.length;o++)s[o].y/=i.length;return s},frequency:function(e){return arguments.length?(n=Boolean(e),this):n}}},!function(){pv.Shape=function(){};var e={x:1,y:1};pv.Shape.dist2=function(t,n,r){r=r||e;var i=t.x-n.x,s=t.y-n.y,o=i*i,u=s*s;return{cost:o+u,dist2:r.x*o+r.y*u}};var t=Math.PI,n=2*t,r=Math.atan2;pv.Shape.normalizeAngle=function(e){return e%=n,0>e&&(e+=n),e},pv.Shape.atan2Norm=function(e,t){var i=r(e,t);return 0>i&&(i+=n),i},pv.Shape.prototype.hasArea=function(){return!0}}(),!function(){var e=pv.Shape.dist2,t=Math.cos,n=Math.sin,r=Math.sqrt;pv.vector=function(e,t){return new i(e,t)},pv.Vector=function(e,t){this.x=e,this.y=t};var i=pv.Shape.Point=pv.Vector;pv.Vector.prototype=pv.extend(pv.Shape),pv.Vector.prototype.perp=function(){return new i(-this.y,this.x)},pv.Vector.prototype.rotate=function(e){var r=t(e),s=n(e);return new i(r*this.x-s*this.y,s*this.x+r*this.y)},pv.Vector.prototype.norm=function(){var e=this.length();return this.times(e?1/e:1)},pv.Vector.prototype.length=function(){return r(this.x*this.x+this.y*this.y)},pv.Vector.prototype.times=function(e){return new i(this.x*e,this.y*e)},pv.Vector.prototype.plus=function(e,t){return 1==arguments.length?new i(this.x+e.x,this.y+e.y):new i(this.x+e,this.y+t)},pv.Vector.prototype.minus=function(e,t){return 1==arguments.length?new i(this.x-e.x,this.y-e.y):new i(this.x-e,this.y-t)},pv.Vector.prototype.dot=function(e,t){return 1==arguments.length?this.x*e.x+this.y*e.y:this.x*e+this.y*t},pv.Vector.prototype.hasArea=function(){return!1},pv.Vector.prototype.clone=function(){return new i(this.x,this.y)},pv.Vector.prototype.apply=function(e){return new i(e.x+e.k*this.x,e.y+e.k*this.y)},pv.Vector.prototype.intersectsRect=function(e){return this.x>=e.x&&this.x<=e.x2&&this.y>=e.y&&this.y<=e.y2},pv.Vector.prototype.containsPoint=function(e){return this.x===e.x&&this.y===e.y},pv.Vector.prototype.points=function(){return[this]},pv.Vector.prototype.edges=function(){return[]},pv.Vector.prototype.center=function(){return this},pv.Vector.prototype.distance2=function(t,n){return e(this,t,n)}}(),!function(){var e=pv.Shape.Point,t=pv.Shape.dist2;pv.Shape.Line=function(e,t,n,r){this.x=e||0,this.y=t||0,this.x2=n||0,this.y2=r||0};var n=pv.Shape.Line;n.prototype=pv.extend(pv.Shape),n.prototype.hasArea=function(){return!1},n.prototype.clone=function(){return new n(this.x,this.y,this.x2,this.x2)},n.prototype.apply=function(e){var t=e.x+e.k*this.x,r=e.y+e.k*this.y,i=e.x+e.k*this.x2,s=e.y+e.k*this.y2;return new n(t,r,i,s)},n.prototype.points=function(){return[new e(this.x,this.y),new e(this.x2,this.y2)]},n.prototype.edges=function(){return[this]},n.prototype.center=function(){return new e((this.x+this.x2)/2,(this.y+this.y2)/2)},n.prototype.normal=function(e,t){var n=this.points(),r=n[1].minus(n[0]).perp().norm();if(t){var i=n[0].minus(t);i.dot(r)<0&&(r=r.times(-1))}return r},n.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=e.edges();n=i.length;for(t=0;n>t;t++)if(this.intersectsLine(i[t]))return!0;return!1},n.prototype.containsPoint=function(e){var t=this.x,n=this.x2,r=this.y,i=this.y2;return t<=e.x&&e.x<=n&&(t===n?Math.min(r,i)<=e.y&&e.y<=Math.max(r,i):Math.abs((i-r)/(n-t)*(e.x-t)+r-e.y)<=1e-10)},n.prototype.intersectsLine=function(e){var t=this,n=t.x2-t.x,r=t.y2-t.y,i=e.x2-e.x,s=e.y2-e.y,o=s*n-i*r;if(0===o)return!1;var u=t.y-e.y,a=t.x-e.x,f=i*u-s*a,l=n*u-r*a;if(0===o)return 0===f&&0===l;var c=f/o;if(0>c||c>1)return!1;var h=l/o;return 0>h||h>1?!1:!0},n.prototype.distance2=function(e,n){var r=this,i={x:this.x2,y:this.y2},s=t(r,i).dist2;if(1e-10>=s)return t(e,r,n);var o=i.x-r.x,u=i.y-r.y,a=((e.x-r.x)*o+(e.y-r.y)*u)/s;if(0>a)return t(e,r,n);if(a>1)return t(e,i,n);var f={x:r.x+a*o,y:r.y+a*u};return t(e,f,n)}}(),!function(){var e=pv.Shape.Point,t=pv.Shape.Line;pv.Shape.Polygon=function(e){this._points=e||[]};var n=pv.Shape.Polygon;n.prototype=pv.extend(pv.Shape),n.prototype.points=function(){return this._points},n.prototype.clone=function(){return new n(this.points().slice())},n.prototype.apply=function(e){for(var t=this.points(),r=t.length,i=new Array(r),s=0;r>s;s++)i[s]=t[s].apply(e);return new n(i)},n.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=this.edges();n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},n.prototype.edges=function(){var e=this._edges;if(!e){e=this._edges=[];var n=this.points(),r=n.length;if(r){for(var i,s=n[0],o=s,u=1;r>u;u++)i=n[u],e.push(new t(s.x,s.y,i.x,i.y)),s=i;r>2&&e.push(new t(i.x,i.y,o.x,o.y))}}return e},n.prototype.distance2=function(e,t){var n={cost:1/0,dist2:1/0};return this.edges().forEach(function(r){var i=r.distance2(e,t);i.cost<n.cost&&(n=i)},this),n},n.prototype.center=function(){for(var t=this.points(),n=0,r=0,i=0,s=t.length;s>i;i++){var o=t[i];n+=o.x,r+=o.y}return new e(n/s,r/s)},n.prototype.containsPoint=function(e){var n=this.bbox();if(!n.containsPoint(e))return!1;var r=.01*n.dx,i=new t(n.x-r,e.y,e.x,e.y),s=0,o=this.edges();return o.forEach(function(e){e.intersectsLine(i)&&s++}),1===(1&s)},n.prototype.bbox=function(){var e=this._bbox;if(!e){var t,n;this.points().forEach(function(e){null==t?t={x:e.x,y:e.y}:(e.x<t.x&&(t.x=e.x),e.y<t.y&&(t.y=e.y)),null==n?n={x:e.x,y:e.y}:(e.x>n.x&&(n.x=e.x),e.y>n.y&&(n.y=e.y))}),t&&(e=this._bbox=new pv.Shape.Rect(t.x,t.y,n.x-t.x,n.y-t.y))}return e}}(),!function(){var e=pv.Shape.Point,t=pv.Shape.Line;pv.Shape.Rect=function(e,t,n,r){this.x=e||0,this.y=t||0,this.dx=n||0,this.dy=r||0,this.dx<0&&(this.dx=-this.dx,this.x=this.x-this.dx),this.dy<0&&(this.dy=-this.dy,this.y=this.y-this.dy),this.x2=this.x+this.dx,this.y2=this.y+this.dy};var n=pv.Shape.Rect;n.prototype=pv.extend(pv.Shape.Polygon),n.prototype.clone=function(){var e=Object.create(n.prototype);return e.x=this.x,e.y=this.y,e.dx=this.dx,e.dy=this.dy,e.x2=this.x2,e.y2=this.y2,e},n.prototype.apply=function(e){var t=e.x+e.k*this.x,r=e.y+e.k*this.y,i=e.k*this.dx,s=e.k*this.dy;return new n(t,r,i,s)},n.prototype.containsPoint=function(e){return this.x<=e.x&&e.x<=this.x2&&this.y<=e.y&&e.y<=this.y2},n.prototype.intersectsRect=function(e){return this.x2>e.x&&this.x<e.x2&&this.y2>e.y&&this.y<e.y2},n.prototype.edges=function(){if(!this._edges){var e=this.x,n=this.y,r=this.x2,i=this.y2;this._edges=[new t(e,n,r,n),new t(r,n,r,i),new t(r,i,e,i),new t(e,i,e,n)]}return this._edges},n.prototype.center=function(){return new e(this.x+this.dx/2,this.y+this.dy/2)},n.prototype.points=function(){var t=this._points;if(!t){var n=this.x,r=this.y,i=this.x2,s=this.y2;t=this._points=[new e(n,r),new e(i,r),new e(i,s),new e(n,s)]}return t},n.prototype.bbox=function(){return this.clone()}}(),!function(){var e=pv.Shape.Point,t=pv.Shape.dist2,n=Math.sqrt,r=Math.abs,i=Math.pow;pv.Shape.Circle=function(e,t,n){this.x=e||0,this.y=t||0,this.radius=n||0};var s=pv.Shape.Circle;s.prototype=pv.extend(pv.Shape),s.prototype.clone=function(){return new s(this.x,this.y,this.radius)},s.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new s(t,n,r)},s.prototype.intersectsRect=function(e){var t=e.dx/2,n=e.dy/2,s=this.radius,o=r(this.x-e.x-t),u=r(this.y-e.y-n);if(o>t+s||u>n+s)return!1;if(t>=o||n>=u)return!0;var a=i(o-t,2)+i(u-n,2);return s*s>=a},s.prototype.intersectLine=function(t,r){var i=t.x2-t.x,s=t.y2-t.y,o=this.x-t.x,u=this.y-t.y,a=i*i+s*s,f=i*o+s*u,l=this.radius,c=o*o+u*u-l*l,h=f/a,p=h*h-c/a;if(!(0>p)){var d=n(p),v=h-d,m=h+d,g=[];return(r||v>=0&&1>=v)&&g.push(new e(t.x+i*v,t.y+s*v)),0!==p&&(r||m>=0&&1>=m)&&g.push(new e(t.x+i*m,t.y+s*m)),g}},s.prototype.points=function(){return[this.center()]},s.prototype.center=function(){return new e(this.x,this.y)},s.prototype.normal=function(e){return e.minus(this.x,this.y).norm()},s.prototype.containsPoint=function(e){var t=e.x-this.x,n=e.y-this.y,r=this.radius;return r*r>=t*t+n*n},s.prototype.distance2=function(e,n){var r=(e.x-this.x,e.y-this.y,this.radius),i=e.minus(this).norm().times(r).plus(this),s=t(e,i,n);return s}}(),!function(){var e=pv.Shape.Point,t=pv.Shape.dist2,n=pv.Shape.normalizeAngle,r=pv.Shape.atan2Norm,i=Math.cos,s=Math.sin,o=Math.sqrt;pv.Shape.Arc=function(e,t,r,i,s){this.x=e,this.y=t,this.radius=r,this.startAngle=n(i),this.angleSpan=n(s),this.endAngle=this.startAngle+this.angleSpan};var u=pv.Shape.Arc;u.prototype=pv.extend(pv.Shape),u.prototype.hasArea=function(){return!1},u.prototype.clone=function(){var e=Object.create(u.prototype),t=this;return e.x=t.x,e.y=t.y,e.radius=t.radius,e.startAngle=t.startAngle,e.angleSpan=t.angleSpan,e.endAngle=t.endAngle,e},u.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.radius;return new u(t,n,r,this.startAngle,this.angleSpan)},u.prototype.containsPoint=function(e){var t=e.x-this.x,n=e.y-this.y,i=o(t*t+n*n);if(Math.abs(i-this.radius)<=1e-10){var s=r(n,t);return this.startAngle<=s&&s<=this.endAngle}return!1},u.prototype.intersectsRect=function(e){var t,n,r=this.points(),n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;var i=e.edges();n=i.length;for(t=0;n>t;t++)if(this.intersectLine(i[t]))return!0;return!1};var a=pv.Shape.Circle.prototype.intersectLine;u.prototype.intersectLine=function(e,t){var n=a.call(this,e,t);if(n){n=n.filter(function(e){return this.containsPoint(e)},this);if(n.length)return n}},u.prototype.points=function(){var t=this.x,n=this.y,r=this.radius,o=this.startAngle,u=this.endAngle;return[new e(t+r*i(o),n+r*s(o)),new e(t+r*i(u),n+r*s(u))]},u.prototype.center=function(){var t=this.x,n=this.y,r=this.radius,o=(this.startAngle+this.endAngle)/2;return new e(t+r*i(o),n+r*s(o))},u.prototype.normal=function(e,t){var n=e.minus(this.x,this.y).norm();if(t){var r=this.center().minus(t);r.dot(n)<0&&(n=n.times(-1))}return n},u.prototype.distance2=function(n,o){var u=n.x-this.x,a=n.y-this.y,f=r(a,u);if(this.startAngle<=f&&f<=this.endAngle){var l=new e(this.x+this.radius*i(f),this.y+this.radius*s(f));return t(n,l,o)}var c=this.points(),h=t(n,c[0],o),p=t(n,c[1],o);return h.cost<p.cost?h:p}}(),!function(){var e=pv.Shape.Arc,t=pv.Shape.Line,n=pv.Shape.Point,r=Math.cos,i=Math.sin,s=Math.sqrt,o=pv.Shape.atan2Norm,u=pv.Shape.normalizeAngle;pv.Shape.Wedge=function(e,t,n,r,i,s){this.x=e,this.y=t,this.innerRadius=n,this.outerRadius=r,this.startAngle=u(i),this.angleSpan=u(s),this.endAngle=this.startAngle+this.angleSpan};var a=pv.Shape.Wedge;a.prototype=pv.extend(pv.Shape),a.prototype.clone=function(){return new a(this.x,this.y,this.innerRadius,this.outerRadius,this.startAngle,this.angleSpan)},a.prototype.apply=function(e){var t=e.x+e.k*this.x,n=e.y+e.k*this.y,r=e.k*this.innerRadius,i=e.k*this.outerRadius;return new a(t,n,r,i,this.startAngle,this.angleSpan)},a.prototype.containsPoint=function(e){var t=e.x-this.x,n=e.y-this.y,r=s(t*t+n*n);if(r>=this.innerRadius&&r<=this.outerRadius){var i=o(n,t);return this.startAngle<=i&&i<=this.endAngle}return!1},a.prototype.intersectsRect=function(e){var t,n,r=this.points();n=r.length;for(t=0;n>t;t++)if(r[t].intersectsRect(e))return!0;r=e.points(),n=r.length;for(t=0;n>t;t++)if(this.containsPoint(r[t]))return!0;var i=this.edges();n=i.length;for(t=0;n>t;t++)if(i[t].intersectsRect(e))return!0;return!1},a.prototype.points=function(){return this._points||this.edges(),this._points},a.prototype.edges=function(){var s=this._edges;if(!s){var o,u,a=this.x,f=this.y,l=this.innerRadius,c=this.outerRadius,h=this.startAngle,p=this.endAngle,d=this.angleSpan,v=r(h),m=i(h),g=r(p),y=i(p);l>0?(o=new n(a+l*v,f+l*m),u=new n(a+l*g,f+l*y)):o=u=new n(a,f);var b=new n(a+c*v,f+c*m),w=new n(a+c*g,f+c*y);s=this._edges=[],l>0&&s.push(new e(a,f,l,h,d)),s.push(new t(o.x,o.y,b.x,b.y),new e(a,f,c,h,d),new t(u.x,u.y,w.x,w.y));var E=this._points=[o,b,w];l>0&&E.push(u)}return s},a.prototype.distance2=function(e,t){var n={cost:1/0,dist2:1/0};return this.edges().forEach(function(r){var i=r.distance2(e,t);i.cost<n.cost&&(n=i)}),n},a.prototype.center=function(){var e=(this.startAngle+this.endAngle)/2,t=(this.innerRadius+this.outerRadius)/2;return new n(this.x+t*r(e),this.y+t*i(e))}}(),!function(){var e=Math.round,t=function(t){var n=parseFloat(t);return"%"==t[t.length-1]?e(2.55*n):n},n=/([a-z]+)\((.*)\)/i,r=function(e){if("#"===e.charAt(0)){var r,i,s;return 4===e.length?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):7===e.length&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),pv.rgb(parseInt(r,16),parseInt(i,16),parseInt(s,16),1)}var o=n.exec(e);if(o){var u=o[2].split(","),a=1;switch(o[1]){case"hsla":case"rgba":a=parseFloat(u[3]);if(!a)return pv.Color.transparent}switch(o[1]){case"hsla":case"hsl":var f=parseFloat(u[0]),l=parseFloat(u[1])/100,c=parseFloat(u[2])/100;return(new pv.Color.Hsl(f,l,c,a)).rgb();case"rgba":case"rgb":var r=t(u[0]),i=t(u[1]),s=t(u[2]);return pv.rgb(r,i,s,a)}}return new pv.Color(e,1)},i={};pv.color=function(e){if(e.rgb)return e.rgb();var t=pv.Color.names[e];return t||(t=i[e]||(i[e]=r(e))),t}}(),pv.Color=function(e,t){this.color=e,this.opacity=t,this.key="solid "+e+" alpha("+t+")"},pv.Color.prototype.hsl=function(){return this.rgb().hsl()},pv.Color.prototype.brighter=function(e){return this.rgb().brighter(e)},pv.Color.prototype.darker=function(e){return this.rgb().darker(e)},pv.Color.prototype.alphaBlend=function(e){var t=this.rgb(),n=t.a;if(1===n)return this;e=e?pv.color(e):pv.Color.names.white,e=e.rgb();var r=1-n;return pv.rgb(r*t.r+n*e.r,r*t.g+n*e.g,r*t.b+n*e.b,1)},pv.Color.prototype.rgbDecimal=function(e){var t=this.alphaBlend(e);return t.r<<16|t.g<<8|t.b},pv.Color.prototype.isDark=function(){return this.rgbDecimal()<8388607.5},pv.rgb=function(e,t,n,r){return new pv.Color.Rgb(e,t,n,4==arguments.length?r:1)},pv.Color.Rgb=function(e,t,n,r){pv.Color.call(this,r?"rgb("+e+","+t+","+n+")":"none",r),this.r=e,this.g=t,this.b=n,this.a=r},pv.Color.Rgb.prototype=pv.extend(pv.Color),pv.Color.Rgb.prototype.red=function(e){return pv.rgb(e,this.g,this.b,this.a)},pv.Color.Rgb.prototype.green=function(e){return pv.rgb(this.r,e,this.b,this.a)},pv.Color.Rgb.prototype.blue=function(e){return pv.rgb(this.r,this.g,e,this.a)},pv.Color.Rgb.prototype.alpha=function(e){return pv.rgb(this.r,this.g,this.b,e)},pv.Color.Rgb.prototype.rgb=function(){return this},pv.Color.Rgb.prototype.brighter=function(e){e=Math.pow(.7,null!=e?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?pv.rgb(i,i,i,this.a):(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),pv.rgb(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e)),this.a))},pv.Color.Rgb.prototype.darker=function(e){return e=Math.pow(.7,null!=e?e:1),pv.rgb(Math.max(0,Math.floor(e*this.r)),Math.max(0,Math.floor(e*this.g)),Math.max(0,Math.floor(e*this.b)),this.a)},pv.Color.Rgb.prototype.hsl=function(){var e,t,n=this.r/255,r=this.g/255,i=this.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),u=(s+o)/2;if(s===o)e=t=0;else{var a=s-o;t=u>.5?a/(2-s-o):a/(s+o);switch(s){case n:e=(r-i)/a+(i>r?6:0);break;case r:e=(i-n)/a+2;break;case i:e=(n-r)/a+4}e/=6}return pv.hsl(360*e,t,u,this.a)},pv.Color.Rgb.prototype.complementary=function(){return this.hsl().complementary().rgb()},pv.hsl=function(e,t,n,r){return new pv.Color.Hsl(e,t,n,4==arguments.length?r:1)},pv.Color.Hsl=function(e,t,n,r){pv.Color.call(this,"hsl("+e+","+100*t+"%,"+100*n+"%)",r),this.h=e,this.s=t,this.l=n,this.a=r},pv.Color.Hsl.prototype=pv.extend(pv.Color),pv.Color.Hsl.prototype.hsl=function(){return this},pv.Color.Hsl.prototype.hue=function(e){return pv.hsl(e,this.s,this.l,this.a)},pv.Color.Hsl.prototype.saturation=function(e){return pv.hsl(this.h,e,this.l,this.a)},pv.Color.Hsl.prototype.lightness=function(e){return pv.hsl(this.h,this.s,e,this.a)},pv.Color.Hsl.prototype.alpha=function(e){return pv.hsl(this.h,this.s,this.l,e)},pv.Color.Hsl.prototype.complementary=function(){return pv.hsl((this.h+180)%360,1-this.s,1-this.l,this.a)},pv.Color.Hsl.prototype.rgb=function(){function e(e){return e>360?e-=360:0>e&&(e+=360),60>e?o+(s-o)*e/60:180>e?s:240>e?o+(s-o)*(240-e)/60:o}function t(t){return Math.round(255*e(t))}var n=this.h,r=this.s,i=this.l;n%=360,0>n&&(n+=360),r=Math.max(0,Math.min(r,1)),i=Math.max(0,Math.min(i,1));var s=.5>=i?i*(1+r):i+r-i*r,o=2*i-s;return pv.rgb(t(n+120),t(n),t(n-120),this.a)},pv.Color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:pv.Color.transparent=pv.rgb(0,0,0,0)},!function(){var e=pv.Color.names;e.none=e.transparent;for(var t in e)e[t]=pv.color(e[t])}(),pv.colors=function(){var e=pv.Scale.ordinal();return e.range.apply(e,arguments),e},pv.Colors={},pv.Colors.category10=function(){var e=pv.colors("#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf");return e.domain.apply(e,arguments),e},pv.Colors.category20=function(){var e=pv.colors("#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5");return e.domain.apply(e,arguments),e},pv.Colors.category19=function(){var e=pv.colors("#9c9ede","#7375b5","#4a5584","#cedb9c","#b5cf6b","#8ca252","#637939","#e7cb94","#e7ba52","#bd9e39","#8c6d31","#e7969c","#d6616b","#ad494a","#843c39","#de9ed6","#ce6dbd","#a55194","#7b4173");return e.domain.apply(e,arguments),e},!function(){function e(e){var t=n(e);if(!t.length)return null;var i,s,u,a=Math.PI,f=t[0];0===f.indexOf("to ")?(s=/^to\s+(?:((top|bottom)(?:\s+(left|right))?)|((left|right)(?:\\s+(top|bottom))?))$/.exec(f),s&&(s[1]?(i=s[2],s[3]&&(i+=" "+s[3])):(i=s[5],s[6]&&(i=s[6]+" "+i)),a=pv.radians(o[i]),t.shift())):(u=parseFloat(f),isNaN(u)||(a=u,/^.*?deg$/.test(f)&&(a=pv.radians(a)),t.shift()));var l=r(t);switch(l.length){case 0:return null;case 1:return new pv.FillStyle.Solid(l[0].color,1)}return new pv.FillStyle.LinearGradient(a,l,e)}function t(e){var t=n(e);if(!t.length)return null;var i=r(t);switch(i.length){case 0:return null;case 1:return new pv.FillStyle.Solid(i[0].color,1)}return new pv.FillStyle.RadialGradient(50,50,i,e)}function n(e){var t={},n=0;e=e.replace(/\b\w+?\(.*?\)/g,function(e){var r="__color"+n++;return t[r]=e,r});var r=e.split(/\s*,\s*/);return r.length?(n&&r.forEach(function(e,n){t.hasOwnProperty(e)&&(r[n]=t[e])}),r):null}function r(e){function t(e){var t=s.length;if(t){for(var n=i,r=(e-n)/(t+1),o=0;t>o;o++)n+=r,s[o].offset=n;s.length=0}}for(var n=[],r=1/0,i=-1/0,s=[],o=0,u=e.length;u>o;){var a=e[o++],f=/^(.+?)\s*([+\-]?[e\.\d]+%)?$/i.exec(a);if(f){var l={color:pv.color(f[1])},c=parseFloat(f[2]);isNaN(c)&&(n.length?o===u&&(c=Math.max(i,100)):c=0),n.push(l),isNaN(c)?s.push(l):(l.offset=c,t(c),c>i?i=c:i>c&&(c=i),r>c&&(r=c))}}if(n.length>=2&&(0>r||i>100)){var h=[],p=[];n.forEach(function(e){h.push(e.offset),p.push(e.color)});var d=pv.scale.linear().domain(h).range(p);if(0>r){for(;n.length&&n[0].offset<=0;)n.shift();n.unshift({offset:0,color:d(0)})}if(i>100){for(;n.length&&n[n.length-1].offset>=100;)n.pop();n.push({offset:100,color:d(100)})}}return n}pv.fillStyle=function(e){if(e.type)return e;var t=e.key||e,n=i[t];return n=n?n.clone():i[t]=s(e),n};var i={},s=function(n){if(n.rgb)return new pv.FillStyle.Solid(n.color,n.opacity);var r=/^\s*([a-z\-]+)\(\s*(.*?)\s*\)\s*$/.exec(n);if(r)switch(r[1]){case"linear-gradient":return e(r[2]);case"radial-gradient":return t(r[2])}return new pv.FillStyle.Solid(pv.color(n))},o={top:0,"top right":45,right:90,"bottom right":135,bottom:180,"bottom left":225,left:270,"top left":315},u=pv.FillStyle=function(e){this.type=e,this.key=e};pv.extendType(u,new pv.Color("none",1)),u.prototype.rgb=function(){var e=pv.color(this.color);return this.opacity!==e.opacity&&(e=e.alpha(this.opacity)),e},u.prototype.alphaBlend=function(e){return this.rgb().alphaBlend(e)},u.prototype.rgbDecimal=function(e){return this.rgb().rgbDecimal(e)},u.prototype.isDark=function(){return this.rgb().isDark()};var a=pv.FillStyle.Solid=function(e,t){u.call(this,"solid"),e.rgb?(this.color=e.color,this.opacity=e.opacity):(this.color=e,this.opacity=t),this.key+=" "+this.color+" alpha("+this.opacity+")"};pv.extendType(a,u),a.prototype.alpha=function(e){return new a(this.color,e)},a.prototype.brighter=function(e){return new a(this.rgb().brighter(e))},a.prototype.darker=function(e){return new a(this.rgb().darker(e))},a.prototype.complementary=function(){return new a(this.rgb().complementary())},a.prototype.clone=function(){var e=pv.extend(a);return e.type=this.type,e.key=this.key,e.color=this.color,e.opacity=this.opacity,e},pv.FillStyle.transparent=new a(pv.Color.transparent);var f=0,l=pv.FillStyle.Gradient=function(e,t){u.call(this,e),this.id=++f,this.stops=t,t.length&&(this.color=t[0].color.color),this.key+=" stops("+t.map(function(e){var t=e.color;return t.color+" alpha("+t.opacity+") at("+e.offset+")"}).join(", ")+")"};pv.extendType(l,u),l.prototype.rgb=function(){return this.stops.length?this.stops[0].color:void 0},l.prototype.alpha=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alpha(e)}}))},l.prototype.darker=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.darker(e)}}))},l.prototype.brighter=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.brighter(e)}}))},l.prototype.complementary=function(){return this._cloneWithStops(this.stops.map(function(e){return{offset:e.offset,color:e.color.complementary()}}))},l.prototype.alphaBlend=function(e){return this._cloneWithStops(this.stops.map(function(t){return{offset:t.offset,color:t.color.alphaBlend(e)}}))},l.prototype.clone=function(){var e=this.constructor,t=pv.extend(e);t.constructor=e,t.id=++f,t.type=this.type,t.key=this.key;var n=this.stops;return t.stops=n,n.length&&(t.color=n[0].color.color),this._initClone(t),t};var c=pv.FillStyle.LinearGradient=function(e,t){l.call(this,"lineargradient",t),this.angle=e,this.key+=" angle("+e+")"};pv.extendType(c,l),c.prototype._cloneWithStops=function(e){return new c(this.angle,e)},c.prototype._initClone=function(e){e.angle=this.angle};var h=pv.FillStyle.RadialGradient=function(e,t,n){l.call(this,"radialgradient",n),this.cx=e,this.cy=t,this.key+=" center("+e+","+t+")"};pv.extendType(h,l),h.prototype._cloneWithStops=function(e){return new h(this.cx,this.cy,e)},h.prototype._initClone=function(e){e.cx=this.cx,e.cy=this.cy}}(),pv.ramp=function(){var e=pv.Scale.linear();return e.range.apply(e,arguments),e},pv.Scene=pv.SvgScene={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml",scale:1,events:["DOMMouseScroll","mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick","contextmenu"],mousePositionEventSet:{mousedown:1,mouseup:1,mouseover:1,mouseout:1,mousemove:1,click:1,dblclick:1,contextmenu:1},implicit:{svg:{"shape-rendering":"auto","pointer-events":"painted",x:0,y:0,dy:0,"text-anchor":"start",transform:"translate(0,0)",fill:"none","fill-opacity":1,stroke:"none","stroke-opacity":1,"stroke-width":1.5,"stroke-linejoin":"miter","stroke-linecap":"butt","stroke-miterlimit":8,"stroke-dasharray":"none"},css:{font:"10px sans-serif"}}},pv.SvgScene.updateAll=function(e){if(e.length&&e[0].reverse&&"line"!==e.type&&"area"!==e.type){for(var t=Object.create(e),n=0,r=e.length-1;r>=0;n++,r--)t[n]=e[r];e=t}this.removeSiblings(this[e.type](e))},pv.SvgScene.create=function(e){return document.createElementNS(this.svg,e)},pv.SvgScene.expect=function(e,t,n,r,i,s){var o;e&&(o=e.tagName,"defs"===o?(e=e.nextSibling,e&&(o=e.tagName)):"a"===o&&(e=e.firstChild));if(e){if(o!==t){var u=this.create(t);e.parentNode.replaceChild(u,e),e=u}}else e=this.create(t);return i&&this.setAttributes(e,i),s&&this.setStyle(e,s),e},pv.SvgScene.setAttributes=function(e,t){var n=this.implicit.svg,r=e.__attributes__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.removeAttribute(i):e.setAttribute(i,s))}e.__attributes__=t},pv.SvgScene.setStyle=function(e,t){var n=this.implicit.css,r=e.__style__;r===t&&(r=null);for(var i in t){var s=t[i];r&&s===r[i]||(null==s||s==n[i]?e.style.removeProperty(i):e.style[i]=s)}e.__style__=t},pv.SvgScene.append=function(e,t,n){return e.$scene={scenes:t,index:n},e=this.title(e,t[n]),e.parentNode||t.$g.appendChild(e),e.nextSibling},pv.SvgScene.title=function(e,t){var n=e.parentNode;n&&"a"!=n.tagName&&(n=null);if(t.title){n||(n=this.create("a"),n.setAttributeNS(this.xlink,"xlink:href",""),e.parentNode&&e.parentNode.replaceChild(n,e),n.appendChild(e)),n.setAttributeNS(this.xlink,"xlink:title",t.title);for(var r=null,i=e.firstChild;null!=i;i=i.nextSibling)if("title"==i.nodeName){r=i;break}return r?r.removeChild(r.firstChild):(r=this.create("title"),e.appendChild(r)),r.appendChild(document.createTextNode(t.title)),n}return n&&n.parentNode.replaceChild(e,n),e},pv.SvgScene.dispatch=pv.listener(function(e){var t=e.target.$scene;if(t){var n=e.type;switch(n){case"DOMMouseScroll":n="mousewheel",e.wheel=-480*e.detail;break;case"mousewheel":e.wheel=(window.opera?12:1)*e.wheelDelta}pv.Mark.dispatch(n,t.scenes,t.index,e)&&(e.preventDefault(),e.stopPropagation())}}),pv.SvgScene.removeSiblings=function(e){for(;e;){var t=e.nextSibling;"defs"!==e.nodeName&&e.parentNode.removeChild(e),e=t}},pv.SvgScene.undefined=function(){},!function(){var e={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},t={shortdash:[3,1],shortdot:[1,1],shortdashdot:[3,1,1,1],shortdashdotdot:[3,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};pv.SvgScene.isStandardDashStyle=function(e){return t.hasOwnProperty(e)},pv.SvgScene.translateDashStyleAlias=function(t){return e.hasOwnProperty(t)?e[t]:t},pv.SvgScene.parseDasharray=function(e){var n=e.strokeDasharray;if(n&&"none"!==n){n=this.translateDashStyleAlias(n);var r=t[n];n=r?r:n.split(/[\s,]+/);var i=e.lineWidth,s=e.lineCap||"butt",o="butt"===s;n=n.map(function(e,t){return e=+e,o||(t%2?e++:e-=1),0>=e&&(e=.001),e*i/this.scale},this).join(" ")}else n=null;return n}}(),!function(){var e=/^url\(#/,t=1,n=Math.PI/2,r=n/2,i=Math.SQRT2/2,s=Math.abs,o=Math.sin,u=Math.cos,a=function(e){return s(e)<=1e-12?0:e};pv.SvgScene.addFillStyleDefinition=function(n,r){if(r.type&&"solid"!==r.type&&!e.test(r.color)){var i=n.mark.root,s=i.__fillStyleMap__||(i.__fillStyleMap__={}),o=r.key,u=s[o];if(!u){u=s[o]="__pvGradient"+t++;var a=f.call(this,n,r,u);i.scene.$defs.appendChild(a)}r.color="url(#"+u+")"}};var f=function(e,t,f){var l="lineargradient"===t.type,c=this.create(l?"linearGradient":"radialGradient");c.setAttribute("id",f);if(l){var h=t.angle-n,p=s(h%n)-r,d=s(i*u(p)),v=d*u(h),m=d*o(h);c.setAttribute("x1",a(.5-v)),c.setAttribute("y1",a(.5-m)),c.setAttribute("x2",a(.5+v)),c.setAttribute("y2",a(.5+m))}for(var g=t.stops,y=g.length,b=0;y>b;b++){var w=g[b],E=c.appendChild(this.create("stop")),S=w.color;E.setAttribute("offset",w.offset+"%"),E.setAttribute("stop-color",S.color),E.setAttribute("stop-opacity",S.opacity+"")}return c}}(),pv.SvgScene.pathBasis=function(){function e(e,t,n,r,i){return{x:e[0]*t.left+e[1]*n.left+e[2]*r.left+e[3]*i.left,y:e[0]*t.top+e[1]*n.top+e[2]*r.top+e[3]*i.top}}var t=[[1/6,2/3,1/6,0],[0,2/3,1/3,0],[0,1/3,2/3,0],[0,1/6,2/3,1/6]],n=function(n,r,i,s){var o=e(t[1],n,r,i,s),u=e(t[2],n,r,i,s),a=e(t[3],n,r,i,s);return"C"+o.x+","+o.y+","+u.x+","+u.y+","+a.x+","+a.y};return n.segment=function(n,r,i,s){var o=e(t[0],n,r,i,s),u=e(t[1],n,r,i,s),a=e(t[2],n,r,i,s),f=e(t[3],n,r,i,s);return["M"+o.x+","+o.y,"C"+u.x+","+u.y+","+a.x+","+a.y+","+f.x+","+f.y]},n}(),pv.SvgScene.curveBasis=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i="",s=e[t],o=s,u=s,a=e[t+1];i+=this.pathBasis(s,o,u,a);for(var f=t+2;n>=f;f++)s=o,o=u,u=a,a=e[f],i+=this.pathBasis(s,o,u,a);return i+=this.pathBasis(o,u,a,a),i+=this.pathBasis(u,a,a,a),i},pv.SvgScene.curveBasisSegments=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;if(2>=r)return"";var i=[],s=e[t],o=s,u=s,a=e[t+1],f=this.pathBasis.segment(s,o,u,a);s=o,o=u,u=a,a=e[t+2],f[1]+=this.pathBasis(s,o,u,a),i.push(f);for(var l=t+3;n>=l;l++)s=o,o=u,u=a,a=e[l],i.push(this.pathBasis.segment(s,o,u,a));var c=this.pathBasis.segment(o,u,a,a);return c[1]+=this.pathBasis(u,a,a,a),i.push(c),i},pv.SvgScene.curveHermite=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return"";var o=i!==s,u="",a=e[n],f=e[n+1],l=t[0],c=l,h=n+1;o&&(u+="Q"+(f.left-2*l.x/3)+","+(f.top-2*l.y/3)+","+f.left+","+f.top,a=e[n+1],h=n+2);if(s>1){c=t[1],f=e[h],h++,u+="C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top;for(var p=2;s>p;p++,h++)f=e[h],c=t[p],u+="S"+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top}if(o){var d=e[h];u+="Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top}return u},pv.SvgScene.curveHermiteSegments=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;var s=t.length;if(1>s||i!==s&&i!==s+2)return[];var o=i!==s,u=[],a=e[n],f=a,l=t[0],c=l,h=n+1;o&&(f=e[n+1],u.push(["M"+a.left+","+a.top,"Q"+(f.left-2*c.x/3)+","+(f.top-2*c.y/3)+","+f.left+","+f.top]),h=n+2);for(var p=1;s>p;p++,h++)a=f,l=c,f=e[h],c=t[p],u.push(["M"+a.left+","+a.top,"C"+(a.left+l.x)+","+(a.top+l.y)+","+(f.left-c.x)+","+(f.top-c.y)+","+f.left+","+f.top]);if(o){var d=e[h];u.push(["M"+f.left+","+f.top,"Q"+(f.left+2*c.x/3)+","+(f.top+2*c.y/3)+","+d.left+","+d.top])}return u},pv.SvgScene.cardinalTangents=function(e,t,n,r){var i;null==n?(i=e.length,n=0,r=i-1):i=r-n+1;for(var s=[],o=(1-t)/2,u=e[n],a=e[n+1],f=e[n+2],l=n+3;r>=l;l++)s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),u=a,a=f,f=e[l];return s.push({x:o*(f.left-u.left),y:o*(f.top-u.top)}),s},pv.SvgScene.curveCardinal=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermite(e,this.cardinalTangents(e,t,n,r),n,r)},pv.SvgScene.curveCardinalSegments=function(e,t,n,r){var i;return null==n?(i=e.length,n=0,r=i-1):i=r-n+1,2>=i?"":this.curveHermiteSegments(e,this.cardinalTangents(e,t,n,r),n,r)},pv.SvgScene.monotoneTangents=function(e,t,n){var r;null==t?(r=e.length,t=0,n=r-1):r=n-t+1;var i,s=[],o=[],u=[],a=[],f=0;for(f=0;r-1>f;f++){i=t+f;var l=e[i+1].left-e[i].left;o[f]=Math.abs(l)<=1e-12?0:(e[i+1].top-e[i].top)/l}u[0]=o[0],a[0]=e[t+1].left-e[t].left;for(f=1,i=t+f;r-1>f;f++,i++)u[f]=(o[f-1]+o[f])/2,a[f]=(e[i+1].left-e[i-1].left)/2;u[f]=o[f-1],a[f]=e[i].left-e[i-1].left;for(f=0;r-1>f;f++)0==o[f]&&(u[f]=0,u[f+1]=0);for(f=0;r-1>f;f++)if(!(Math.abs(u[f])<1e-5||Math.abs(u[f+1])<1e-5)){var c=u[f]/o[f],h=u[f+1]/o[f],p=c*c+h*h;if(p>9){var d=3/Math.sqrt(p);u[f]=d*c*o[f],u[f+1]=d*h*o[f]}}for(var v,m=0;r>m;m++)v=1+u[m]*u[m],s.push({x:a[m]/3/v,y:u[m]*a[m]/3/v});return s},pv.SvgScene.curveMonotone=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermite(e,this.monotoneTangents(e,t,n),t,n)},pv.SvgScene.curveMonotoneSegments=function(e,t,n){var r;return null==t?(r=e.length,t=0,n=r-1):r=n-t+1,2>=r?"":this.curveHermiteSegments(e,this.monotoneTangents(e,t,n),t,n)},pv.SvgScene.area=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.areaSegmentedSmart(t,e):r.segmented?this.areaSegmentedFull(t,e):this.areaFixed(t,e,0,n-1,!0)},pv.SvgScene.areaFixed=function(e,t,n,r,i){var s=r-n+1;if(1===s)return this.lineAreaDotAlone(e,t,n);var o=t[n];if(!o.visible)return e;var u=o.fillStyle,a=o.strokeStyle;if(!u.opacity&&!a.opacity)return e;this.addFillStyleDefinition(t,u),this.addFillStyleDefinition(t,a);var f=!1,l=!1,c=!1,h=!1,p=!1;switch(o.interpolate){case"basis":f=!0;break;case"cardinal":l=!0;break;case"monotone":c=!0;break;case"step-after":h=!0;break;case"step-before":p=!0}for(var d,v,m=f||l||c,g=[],y=n;r>=y;y++){d=t[y];if(d.width||d.height){for(var b=y+1;r>=b;b++){v=t[b];if(!v.width&&!v.height)break}y>n&&!h&&y--,r>=b&&!p&&b++;var w=m&&b-y>2?this.areaPathCurve:this.areaPathStraight;g.push(w.call(this,t,y,b-1,o)),y=b-1}}if(!g.length)return e;var E=a.opacity;return e=this.expect(e,"path",t,n,{"shape-rendering":o.antialias?null:"crispEdges","pointer-events":i?o.events:"none",cursor:o.cursor,d:"M"+g.join("ZM")+"Z",fill:u.color,"fill-opacity":u.opacity||null,stroke:a.color,"stroke-opacity":E||null,"stroke-width":E?o.lineWidth/this.scale:null,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,"stroke-miterlimit":o.strokeMiterLimit,"stroke-dasharray":E?this.parseDasharray(o):null}),o.svg&&this.setAttributes(e,o.svg),o.css&&this.setStyle(e,o.css),this.append(e,t,n)},pv.SvgScene.areaSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.areaSegmentPaths(t,n,r),s=i.top,o=i.bottom,u=n,a={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,a,function(e,t,n,r,i,a){var f=t[n],l=f.fillStyle,c=f.strokeStyle;this.addFillStyleDefinition(t,l),this.addFillStyleDefinition(t,c);if(n===r)return this.lineAreaDotAlone(e,t,n);var h=this.areaJoinPaths(s,o,n-u,r-u-1),p=c.opacity,d={"shape-rendering":f.antialias?null:"crispEdges","pointer-events":a,cursor:f.cursor,d:h,fill:l.color,"fill-opacity":l.opacity||null,stroke:c.color,"stroke-opacity":p||null,"stroke-width":p?f.lineWidth/this.scale:null,"stroke-linecap":f.lineCap,"stroke-linejoin":f.lineJoin,"stroke-miterlimit":f.strokeMiterLimit,"stroke-dasharray":p?this.parseDasharray(f):null};return e=this.expect(e,"path",t,n,d,f.css),this.append(e,t,n)})})},pv.SvgScene.areaSegmentPaths=function(e,t,n){return this.areaSegmentCurvePaths(e,t,n)||this.areaSegmentStraightPaths(e,t,n)},pv.SvgScene.areaSegmentCurvePaths=function(e,t,n){var r=n-t+1,i=e[t],s="basis"===i.interpolate,o=!s&&"cardinal"===i.interpolate;if(s||o||"monotone"==i.interpolate){for(var u=[],a=[],f=0;r>f;f++){var l=e[t+f],c=e[n-f];u.push(l),a.push({left:c.left+c.width,top:c.top+c.height})}var h,p;s?(h=this.curveBasisSegments(u),p=this.curveBasisSegments(a)):o?(h=this.curveCardinalSegments(u,i.tension),p=this.curveCardinalSegments(a,i.tension)):(h=this.curveMonotoneSegments(u),p=this.curveMonotoneSegments(a));if(h||h.length)return{from:t,top:h,bottom:p}}},pv.SvgScene.areaSegmentStraightPaths=function(e,t,n){for(var r=[],i=[],s=n,o=t;s>t;t++,n--){var u=e[t],a=e[n],f=["M"+u.left+","+u.top],l=["M"+(a.left+a.width)+","+(a.top+a.height)],c=e[t+1],h=e[n-1];switch(u.interpolate){case"step-before":f.push("V"+c.top+"H"+c.left);break;case"step-after":f.push("H"+c.left+"V"+c.top);break;default:f.push("L"+c.left+","+c.top)}l.push("L"+(h.left+h.width)+","+(h.top+h.height)),r.push(f),i.push(l)}return{from:o,top:r,bottom:i}},pv.SvgScene.areaJoinPaths=function(e,t,n,r){for(var i="",s="",o=e.length,u=n,a=o-1-r;r>=u;u++,a++){var f,l,c=e[u],h=t[a];u===n?(f=c.join(""),l="L"+h[0].substr(1)+h[1]):(f=c[1],l=h[1]),i+=f,s+=l}return i+s+"Z"},pv.SvgScene.areaSegmentedFull=function(e,t){var n,r,i=t.length,s=this.areaSegmentCurvePaths(t,0,i-1);s&&(n=s.top,r=s.bottom);for(var o=(t[0],0);i-1>o;o++){var u=t[o],a=t[o+1];if(u.visible&&a.visible){var f=u.fillStyle,l=u.strokeStyle;if(f.opacity||l.opacity){var c;if(n){var h=n[o].join(""),p="L"+r[i-o-2].join("").substr(1);c=h+p+"Z"}else{var d=u,v=a;switch(u.interpolate){case"step-before":d=a;break;case"step-after":v=u}c="M"+u.left+","+d.top+"L"+a.left+","+v.top+"L"+(a.left+a.width)+","+(v.top+v.height)+"L"+(u.left+u.width)+","+(d.top+d.height)+"Z"}var m={"shape-rendering":u.antialias?null:"crispEdges","pointer-events":u.events,cursor:u.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":l.opacity||null,"stroke-width":l.opacity?u.lineWidth/this.scale:null};e=this.expect(e,"path",t,o,m),u.svg&&this.setAttributes(e,u.svg),u.css&&this.setStyle(e,u.css),e=this.append(e,t,o)}}}return e},pv.SvgScene.areaPathStraight=function(e,t,n,r){for(var i=[],s=[],o=n;o>=t;t++,n--){var u=e[t],a=e[n],f=u.left+","+u.top,l=a.left+a.width+","+(a.top+a.height);if(o>t){var c=e[t+1],h=e[n-1];switch(r.interpolate){case"step-before":f+="V"+c.top,l+="H"+(h.left+h.width);break;case"step-after":f+="H"+c.left,l+="V"+(h.top+h.height)}}i.push(f),s.push(l)}return i.concat(s).join("L")},pv.SvgScene.areaPathCurve=function(e,t,n,r){for(var i,s,o=[],u=[],a=n;a>=t;t++,n--){var f=e[n];o.push(e[t]),u.push({left:f.left+f.width,top:f.top+f.height})}switch(r.interpolate){case"basis":i=this.curveBasis(o),s=this.curveBasis(u);break;case"cardinal":i=this.curveCardinal(o,r.tension),s=this.curveCardinal(u,r.tension);break;default:i=this.curveMonotone(o),s=this.curveMonotone(u)}return o[0].left+","+o[0].top+i+"L"+u[0].left+","+u[0].top+s},pv.SvgScene.minBarWidth=1,pv.SvgScene.minBarHeight=1,pv.SvgScene.minBarLineWidth=.2,pv.SvgScene.bar=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(!(!r.visible||Math.abs(r.width)<=1e-10||Math.abs(r.height)<=1e-10)){r.width<this.minBarWidth&&(r.width=this.minBarWidth),r.height<this.minBarHeight&&(r.height=this.minBarHeight);var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s);var o;s.opacity?(o=r.lineWidth,o=1e-10>o?0:Math.max(this.minBarLineWidth,o/this.scale)):o=null,t=this.expect(t,"rect",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":o,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},pv.SvgScene.dot=function(e){for(var t=e.$g.firstChild,n=0,r=e.length;r>n;n++){var i=e[n];if(i.visible){var s=i.fillStyle,o=s.opacity,u=i.strokeStyle,a=u.opacity;if(o||a){this.addFillStyleDefinition(e,s),this.addFillStyleDefinition(e,u);var f={"shape-rendering":i.antialias?null:"crispEdges","pointer-events":i.events,cursor:i.cursor,fill:s.color,"fill-opacity":o||null,stroke:u.color,"stroke-opacity":a||null,"stroke-width":a?i.lineWidth/this.scale:null,"stroke-linecap":i.lineCap,"stroke-dasharray":a?this.parseDasharray(i):null},l=i.shape||"circle",c=i.aspectRatio,h=i.shapeAngle,p=null;if("circle"===l)1===c?(f.cx=i.left,f.cy=i.top,f.r=i.shapeRadius):(l="ellipse",f.cx=f.cy=0,p="translate("+i.left+","+i.top+") ",h&&(p+="rotate("+pv.degrees(h)+") "),f.rx=i._width/2,f.ry=i._height/2);else{var d=i.shapeRadius,v=d,m=d;if(c>0&&1!==c){var g=1/Math.sqrt(c),y=c*g;v*=y,m*=g}f.d=this.renderSymbol(l,i,v,m),l="path",p="translate("+i.left+","+i.top+") ",h&&(p+="rotate("+pv.degrees(h)+") ")}p&&(f.transform=p),t=this.expect(t,l,e,n,f),i.svg&&this.setAttributes(t,i.svg),i.css&&this.setStyle(t,i.css),t=this.append(t,e,n)}}}return t},!function(e){var t={};e.registerSymbol=function(n,r){return t[n]=r,e},e.renderSymbol=function(n,r,i,s){return t[n].call(e,r,n,i,s)},e.hasSymbol=function(e){return t.hasOwnProperty(e)},e.symbols=function(){return pv.keys(t)};var n=2/Math.sqrt(3);e.registerSymbol("circle",function(){throw new Error("Not implemented as a symbol")}).registerSymbol("cross",function(e,t,n,r){var i=(e.shapeRadius,-n),s=-r;return"M"+i+","+s+"L"+n+","+r+"M"+n+","+s+"L"+i+","+r}).registerSymbol("triangle",function(e,t,r,i){var s=i,o=r*n,u=-i,a=-o;return"M0,"+s+"L"+o+","+u+" "+a+","+u+"Z"}).registerSymbol("diamond",function(e,t,n,r){var i=n*Math.SQRT2,s=r*Math.SQRT2,o=-i,u=-s;return"M0,"+u+"L"+i+",0 0,"+s+" "+o+",0Z"}).registerSymbol("square",function(e,t,n,r){var i=-n,s=-r;return"M"+i+","+s+"L"+n+","+s+" "+n+","+r+" "+i+","+r+"Z"}).registerSymbol("tick",function(e,t,n,r){var i=-r*r;return"M0,0L0,"+i}).registerSymbol("bar",function(e,t,n,r){var i=r*r/2;return"M0,"+i+"L0,"+ -i})}(pv.SvgScene),pv.SvgScene.image=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){t=this.fill(t,e,n);if(r.image){t=this.expect(t,"foreignObject",e,n,{cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css);var i=t.firstChild||t.appendChild(document.createElementNS(this.xhtml,"canvas"));i.$scene={scenes:e,index:n},i.style.width=r.width,i.style.height=r.height,i.width=r.imageWidth,i.height=r.imageHeight,i.getContext("2d").putImageData(r.image,0,0)}else t=this.expect(t,"image",e,n,{preserveAspectRatio:"none",cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.setAttributeNS(this.xlink,"xlink:href",r.url);t=this.append(t,e,n),t=this.stroke(t,e,n)}}return t},pv.SvgScene.label=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.textStyle;if(i.opacity&&r.text){var s=0,o=0,u=0,a="start";switch(r.textBaseline){case"middle":u=".35em";break;case"top":u=".71em",o=r.textMargin;break;case"bottom":o="-"+r.textMargin}switch(r.textAlign){case"right":a="end",s="-"+r.textMargin;break;case"center":a="middle";break;case"left":s=r.textMargin}t=this.expect(t,"text",e,n,{"pointer-events":r.events,cursor:r.cursor,x:s,y:o,dy:u,transform:"translate("+r.left+","+r.top+")"+(r.textAngle?" rotate("+180*r.textAngle/Math.PI+")":"")+(1!=this.scale?" scale("+1/this.scale+")":""),fill:i.color,"fill-opacity":i.opacity||null,"text-anchor":a},{font:r.font,"text-shadow":r.textShadow,"text-decoration":r.textDecoration}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t.firstChild?t.firstChild.nodeValue=r.text:t.appendChild(document.createTextNode(r.text)),t=this.append(t,e,n)}}}return t},pv.SvgScene.line=function(e){var t=e.$g.firstChild,n=e.length;if(!n)return t;var r=e[0];return"smart"===r.segmented?this.lineSegmentedSmart(t,e):2>n?t:r.segmented?this.lineSegmentedFull(t,e):this.lineFixed(t,e)},pv.SvgScene.lineFixed=function(e,t){var n=t.length;if(1===n)return this.lineAreaDotAlone(e,t,0);var r=t[0];if(!r.visible)return e;var i=r.fillStyle,s=r.strokeStyle;if(!i.opacity&&!s.opacity)return e;this.addFillStyleDefinition(t,i),this.addFillStyleDefinition(t,s);var o="M"+r.left+","+r.top,u=n>2;if(u)switch(r.interpolate){case"basis":o+=this.curveBasis(t);break;case"cardinal":o+=this.curveCardinal(t,r.tension);break;case"monotone":o+=this.curveMonotone(t);break;default:u=!1}if(!u)for(var a=1;n>a;a++)o+=this.lineSegmentPath(t[a-1],t[a]);var f=s.opacity,l={"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,d:o,fill:i.color,"fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":f||null,"stroke-width":f?r.lineWidth/this.scale:null,"stroke-linecap":r.lineCap,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-dasharray":f?this.parseDasharray(r):null};return e=this.expect(e,"path",t,0,l,r.css),r.svg&&this.setAttributes(e,r.svg),this.append(e,t,0)},pv.SvgScene.lineSegmentedSmart=function(e,t){return this.eachLineAreaSegment(e,t,function(e,t,n,r){var i=this.lineSegmentPaths(t,n,r),s=n,o={breakOnKeyChange:!0,from:n,to:r};return this.eachLineAreaSegment(e,t,o,function(e,t,n,r,o,u){var a=t[n],f=a.fillStyle;this.addFillStyleDefinition(t,f);var l=a.strokeStyle;this.addFillStyleDefinition(t,l);if(n===r)return this.lineAreaDotAlone(e,t,n);var c=this.lineJoinPaths(i,n-s,r-s-1),h=l.opacity,p={"shape-rendering":a.antialias?null:"crispEdges","pointer-events":u,cursor:a.cursor,d:c,fill:f.color,"fill-opacity":f.opacity||null,stroke:l.color,"stroke-opacity":h||null,"stroke-width":h?a.lineWidth/this.scale:null,"stroke-linecap":a.lineCap,"stroke-linejoin":a.lineJoin,"stroke-miterlimit":a.strokeMiterLimit,"stroke-dasharray":h?this.parseDasharray(a):null};return e=this.expect(e,"path",t,n,p,a.css),this.append(e,t,n)})})},pv.SvgScene.lineSegmentedFull=function(e,t){var n,r=t[0];switch(r.interpolate){case"basis":n=this.curveBasisSegments(t);break;case"cardinal":n=this.curveCardinalSegments(t,r.tension);break;case"monotone":n=this.curveMonotoneSegments(t)}for(var i=0,s=t.length-1;s>i;i++){var o=t[i],u=t[i+1];if(o.visible&&u.visible){var a=o.strokeStyle,f=pv.FillStyle.transparent;if(a.opacity){var l;"linear"==o.interpolate&&"miter"==o.lineJoin?(f=a,a=pv.FillStyle.transparent,l=this.pathJoin(t[i-1],o,u,t[i+2])):l=n?n[i].join(""):"M"+o.left+","+o.top+this.lineSegmentPath(o,u),e=this.expect(e,"path",t,i,{"shape-rendering":o.antialias?null:"crispEdges","pointer-events":o.events,cursor:o.cursor,d:l,fill:f.color,"fill-opacity":f.opacity||null,stroke:a.color,"stroke-opacity":a.opacity||null,"stroke-width":a.opacity?o.lineWidth/this.scale:null,"stroke-linejoin":o.lineJoin}),o.svg&&this.setAttributes(e,o.svg),o.css&&this.setStyle(e,o.css),e=this.append(e,t,i)}}}return e},pv.SvgScene.lineSegmentPath=function(e,t){var n=1;switch(e.interpolate){case"polar-reverse":n=0;case"polar":var r=t.left-e.left,i=t.top-e.top,s=1-e.eccentricity,o=Math.sqrt(r*r+i*i)/(2*s);if(0>=s||s>1)break;return"A"+o+","+o+" 0 0,"+n+" "+t.left+","+t.top;case"step-before":return"V"+t.top+"H"+t.left;case"step-after":return"H"+t.left+"V"+t.top}return"L"+t.left+","+t.top},pv.SvgScene.lineSegmentPaths=function(e,t,n){var r,i=e[t];switch(i.interpolate){case"basis":r=this.curveBasisSegments(e,t,n);break;case"cardinal":r=this.curveCardinalSegments(e,i.tension,t,n);break;case"monotone":r=this.curveMonotoneSegments(e,t,n)}if(!r||!r.length){r=[];for(var s=t+1;n>=s;s++){var o=e[s-1],u=e[s];r.push(["M"+o.left+","+o.top,this.lineSegmentPath(o,u)])}}return r},pv.strokeMiterLimit=4,pv.SvgScene.pathJoin=function(e,t,n,r){var i,s,o,u=[],a=t.lineWidth/this.scale,f=pv.vector(t.left,t.top),l=pv.vector(n.left,n.top),c=l.minus(f),h=c.perp().norm(),p=h.times(a/2),d=f.plus(p),v=f.minus(p),m=l.plus(p),g=l.minus(p);if(e&&e.visible){var y=pv.vector(e.left,e.top),b=f.minus(y),w=b.perp().norm(),E=w.plus(h).norm(),S=this.lineIntersect(f,E,d,c),x=this.lineIntersect(f,E,v,c);o=S.minus(x).length();var T=e.lineWidth/this.scale,N=(a+T)/2;s=o/N,i=t.strokeMiterLimit||pv.strokeMiterLimit;if(i>=s)u.push(x,S);else{var C=c.times(-1),k=b.norm().plus(C.norm()).norm(),L=f.plus(k.times(N/2));k.dot(h)>=0?u.push(x,L,d):u.push(v,L,S)}}else u.push(v,d);if(r&&r.visible){var A=pv.vector(r.left,r.top),O=A.minus(l),M=O.perp().norm(),_=M.plus(h).norm(),D=this.lineIntersect(l,_,m,c),P=this.lineIntersect(l,_,g,c);o=D.minus(P).length();var H=r.lineWidth/this.scale,B=(H+a)/2;s=o/B,i=n.strokeMiterLimit||pv.strokeMiterLimit;if(i>=s)u.push(D,P);else{var j=O.times(-1),F=c.norm().plus(j.norm()).norm(),I=l.plus(F.times(B/2));F.dot(h)>=0?u.push(m,I,P):u.push(D,I,g)}}else u.push(m,g);var q=u.shift();return"M"+q.x+","+q.y+"L"+u.map(function(e){return e.x+","+e.y}).join(" ")},pv.SvgScene.lineIntersect=function(e,t,n,r){return e.plus(t.times(n.minus(e).dot(r.perp())/t.dot(r.perp())))},pv.SvgScene.lineJoinPaths=function(e,t,n){for(var r=e[t].join(""),i=t+1;n>=i;i++)r+=e[i][1];return r},pv.SvgScene.lineAreaDotAlone=function(e){return e},pv.Scene.eventsToNumber={"":0,none:0,painted:1,all:2},pv.Scene.numberToEvents=["none","painted","all"],pv.SvgScene.eachLineAreaSegment=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);var i,s,o,u=pv.get(n,"breakOnKeyChange",!1),a=pv.get(n,"from")||0,f=pv.get(n,"to",t.length-1);u&&(s=[],o=[]);for(var l=a;f>=l;){var c=t[l];if(this.isSceneVisible(c)){i=this.eventsToNumber[c.events]||0,u&&this.lineAreaSceneKey(c,s);for(var h,p=l;;){var d=p+1;if(d>f){h=d;break}var v=t[d];if(!this.isSceneVisible(v)){h=d+1;break}i=Math.max(i,this.eventsToNumber[v.events]||0),p=d;if(u){this.lineAreaSceneKey(v,o);if(!this.equalSceneKeys(s,o)){h=p;break}}}e=r.call(this,e,t,l,p,n,this.numberToEvents[i]),l=h}else l++}return e},pv.SvgScene.lineAreaSceneKey=function(e,t){return t[0]=e.fillStyle.key,t[1]=e.strokeStyle.key,t[2]=e.lineWidth,t[3]=e.strokeDasharray||"none",t[4]=e.interpolate,t},pv.SvgScene.isSceneVisible=function(e){return e.visible&&(e.fillStyle.opacity>0||e.strokeStyle.opacity>0)},pv.SvgScene.equalSceneKeys=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]!==t[n])return!1;return!0},pv.SvgScene.panel=function(e){for(var t=e.$g,n=t&&t.firstChild,r=0,i=e.length;i>r;r++){var s=e[r];if(s.visible){if(!e.parent){var o=s.canvas;this.applyCanvasStyle(o),t&&t.parentNode!==o&&(t=o.firstChild,n=t&&t.firstChild),t?n&&"defs"===n.tagName&&(n=n.nextSibling):(t=this.createRootPanelElement(),n=null,this.initRootPanelElement(t,e.mark),o.appendChild(t),e.$defs=t.appendChild(this.create("defs")),e.$g=t),t.setAttribute("width",s.width+s.left+s.right),t.setAttribute("height",s.height+s.top+s.bottom)}var u=null;if("hidden"===s.overflow){var a=this.addPanelClipPath(t,n,e,r,s);u=a.g,e.$g=t=u,n=a.next}n=this.fill(n,e,r);var f=this.scale,l=s.transform,c=s.left+l.x,h=s.top+l.y;this.scale*=l.k;if(s.children.length)for(var p={transform:"translate("+c+","+h+")"+(1!=l.k?" scale("+l.k+")":"")},d=this.getSortedChildScenes(e,r),v=0,m=d.length;m>v;v++){var g=d[v];g.$g=n=this.expect(n,"g",e,r,p),this.updateAll(g),n.parentNode||t.appendChild(n),n=n.nextSibling}this.scale=f,n=this.stroke(n,e,r),u&&(e.$g=t=u.parentNode,n=u.nextSibling)}}return n},pv.SvgScene.applyCanvasStyle=function(e){e.style.display="inline-block"},pv.SvgScene.createRootPanelElement=function(){return this.create("svg")},pv.SvgScene.initRootPanelElement=function(e,t){e.setAttribute("font-size","10px"),e.setAttribute("font-family","sans-serif"),e.setAttribute("fill","none"),e.setAttribute("stroke","none"),e.setAttribute("stroke-width",1.5),this.disableElementSelection(e),this.listenRootPanelElement(e,t)},pv.SvgScene.listenRootPanelElement=function(e,t){for(var n=0,r=this.events,i=r.length;i>n;n++)e.addEventListener(r[n],this.dispatch,!1),t._registerBoundEvent(e,r[n],this.dispatch,!1)},pv.SvgScene.disableElementSelection=function(e){e.setAttribute("style","-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"),"undefined"!=typeof e.onselectstart&&(e.setAttribute("unselectable","on"),e.onselectstart=function(){return!1})},pv.SvgScene.addPanelClipPath=function(e,t,n,r,i){var s=pv.id().toString(36),o=this.expect(t,"g",n,r,{"clip-path":"url(#"+s+")"}),u=this.expect(o.firstChild,"clipPath",n,r,{id:s}),a=u.firstChild||u.appendChild(this.create("rect"));return a.setAttribute("x",i.left),a.setAttribute("y",i.top),a.setAttribute("width",i.width),a.setAttribute("height",i.height),u.parentNode||o.appendChild(u),o.parentNode||e.appendChild(o),{g:o,next:u.nextSibling}},pv.SvgScene.getSortedChildScenes=function(e,t){var n=e[t].children;return e.mark._zOrderChildCount&&(n=n.slice(0),n.sort(function(e,t){var n=e.mark._zOrder-t.mark._zOrder;return 0===n&&(n=e.childIndex-t.childIndex),n})),n},pv.SvgScene.fill=function(e,t,n){var r=t[n],i=r.fillStyle;if(i.opacity||"all"==r.events)this.addFillStyleDefinition(t,i),e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x:r.left,y:r.top,width:r.width,height:r.height,fill:i.color,"fill-opacity":i.opacity,stroke:null}),e=this.append(e,t,n);return e},pv.SvgScene.stroke=function(e,t,n){var r=t[n],i=r.strokeStyle;if(i.opacity||"all"==r.events)e=this.expect(e,"rect",t,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":"all"==r.events?"stroke":r.events,cursor:r.cursor,x:r.left,y:r.top,width:Math.max(1e-10,r.width),height:Math.max(1e-10,r.height),fill:null,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":r.lineWidth/this.scale,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),e=this.append(e,t,n);return e},pv.SvgScene.minRuleLineWidth=1,pv.SvgScene.rule=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.strokeStyle;if(i.opacity){var s=r.lineWidth;s=1e-10>s?0:Math.max(this.minRuleLineWidth,s/this.scale),t=this.expect(t,"line",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,x1:r.left,y1:r.top,x2:r.left+r.width,y2:r.top+r.height,stroke:i.color,"stroke-opacity":i.opacity,"stroke-width":s,"stroke-linecap":r.lineCap,"stroke-dasharray":i.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},pv.SvgScene.wedge=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){var i=r.fillStyle,s=r.strokeStyle;if(i.opacity||s.opacity){var o,u=r.innerRadius,a=r.outerRadius,f=Math.abs(r.angle);if(f>=2*Math.PI)o=u?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+ -u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+ -a+"A"+a+","+a+" 0 1,1 0,"+a+"Z";else{var l=Math.min(r.startAngle,r.endAngle),c=Math.max(r.startAngle,r.endAngle),h=Math.cos(l),p=Math.cos(c),d=Math.sin(l),v=Math.sin(c);o=u?"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L"+u*p+","+u*v+"A"+u+","+u+" 0 "+(f<Math.PI?"0":"1")+",0 "+u*h+","+u*d+"Z":"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+(f<Math.PI?"0":"1")+",1 "+a*p+","+a*v+"L0,0Z"}this.addFillStyleDefinition(e,i),this.addFillStyleDefinition(e,s),t=this.expect(t,"path",e,n,{"shape-rendering":r.antialias?null:"crispEdges","pointer-events":r.events,cursor:r.cursor,transform:"translate("+r.left+","+r.top+")",d:o,fill:i.color,"fill-rule":"evenodd","fill-opacity":i.opacity||null,stroke:s.color,"stroke-opacity":s.opacity||null,"stroke-width":s.opacity?r.lineWidth/this.scale:null,"stroke-linejoin":r.lineJoin,"stroke-miterlimit":r.strokeMiterLimit,"stroke-linecap":r.lineCap,"stroke-dasharray":s.opacity?this.parseDasharray(r):null}),r.svg&&this.setAttributes(t,r.svg),r.css&&this.setStyle(t,r.css),t=this.append(t,e,n)}}}return t},pv.Mark=function(){this.$properties=[],this.$propertiesMap={},this.$handlers={}},pv.Mark.prototype.properties={},pv.Mark.cast={},pv.Mark.prototype.property=function(e,t){return this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties)),this.properties[e]=!0,pv.Mark.prototype.propertyMethod(e,!1,pv.Mark.cast[e]=t),this},pv.Mark.prototype.localProperty=function(e,t){this.hasOwnProperty("properties")||(this.properties=pv.extend(this.properties)),this.properties[e]=!0;var n=pv.Mark.cast[e];return t&&(pv.Mark.cast[e]=n=t),this.propertyMethod(e,!1,n),this},pv.Mark.prototype.def=function(e,t){return this.propertyMethod(e,!0),this[e](arguments.length>1?t:null)},pv.Mark.prototype.propertyMethod=function(e,t,n){n||(n=pv.Mark.cast[e]),this[e]=function(r,i){if(t&&this.scene){var s=this.scene.defs;if(arguments.length)return s[e]={id:null==r?0:pv.id(),value:null!=r&&n?n(r):r},this;var o=s[e];return o?o.value:null}if(arguments.length)return this.setPropertyValue(e,r,t,n,!1,i),this;var u=this.instance();return pv.propBuildMark===this&&1!==pv.propBuilt[e]?(pv.propBuilt[e]=1,u[e]=this.evalProperty(this.binds.properties[e])):u[e]}},pv.Mark.funPropertyCaller=function(e,t){function n(){var n=e.apply(this,r);return null!=n?t(n):n}var r=pv.Mark.stack;return n},pv.Mark.prototype.setPropertyValue=function(e,t,n,r,i,s){var o=!n<<1|"function"==typeof t;1&o&&r?t=pv.Mark.funPropertyCaller(t,r):null!=t&&r&&(t=r(t));var u=this.$propertiesMap,a=this.$properties,f={name:e,id:pv.id(),value:t,type:o,tag:s},l=u[e];u[e]=f;if(l)for(var c=0,h=a.length;h>c;c++)if(a[c]===l){a.splice(c,1);break}return a.push(f),i&&l&&3===o&&(f.proto=l,f.root=l.root||l),f},pv.Mark.prototype.intercept=function(e,t,n){return this.setPropertyValue(e,t,!1,pv.get(n,"noCast")?null:pv.Mark.cast[e],!0,pv.get(n,"tag")),this},pv.Mark.prototype.propertyValue=function(e,t){var n=this.$propertiesMap[e];if(n)return n.value;if(t){if(this.proto){var r=this.proto._propertyValueRecursive(e);if(void 0!==r)return r}return this.defaults._propertyValueRecursive(e)}},pv.Mark.prototype._propertyValueRecursive=function(e){var t=this.$propertiesMap[e];return t?t.value:this.proto?this.proto._propertyValueRecursive(e):void 0},pv.Mark.stack=[],pv.Mark.prototype.property("data").property("visible",Boolean).property("css",Object).property("svg",Object).property("left",Number).property("right",Number).property("top",Number).property("bottom",Number).property("cursor",String).property("title",String).property("reverse",Boolean).property("antialias",Boolean).property("events",String).property("id",String),pv.Mark.prototype.childIndex=-1,pv.Mark.prototype.index=-1,pv.Mark.prototype.scale=1,pv.Mark.prototype._zOrder=0,pv.Mark.prototype.defaults=(new pv.Mark).data(function(e){return[e]}).visible(!0).antialias(!0).events("painted"),pv.Mark.prototype.extend=function(e){return this.proto=e,this.target=e.target,this},pv.Mark.prototype.add=function(e){return this.parent.add(e).extend(this)},pv.Mark.prototype.zOrder=function(e){if(!arguments.length)return this._zOrder;e=+e||0;if(this._zOrder!==e){var t=this.parent;t&&0!==this._zOrder&&t._zOrderChildCount--,this._zOrder=e,t&&0!==this._zOrder&&t._zOrderChildCount++}return this},pv.Mark.prototype.anchor=function(e){return(new pv.Anchor(this)).name(e||"center").data(function(){return this.scene.target.map(function(e){return e.data})}).visible(function(){return this.scene.target[this.index].visible}).id(function(){return this.scene.target[this.index].id}).left(function(){var e=this.scene.target[this.index],t=e.width||0;switch(this.name()){case"bottom":case"top":case"center":return e.left+t/2;case"left":return null}return e.left+t}).top(function(){var e=this.scene.target[this.index],t=e.height||0;switch(this.name()){case"left":case"right":case"center":return e.top+t/2;case"top":return null}return e.top+t}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+(e.width||0):null}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+(e.height||0):null}).textAlign(function(){switch(this.name()){case"bottom":case"top":case"center":return"center";case"right":return"right"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"top"}return"bottom"})},pv.Mark.prototype.anchorTarget=function(){return this.target},pv.Mark.prototype.margin=function(e){return this.left(e).right(e).top(e).bottom(e)},pv.Mark.prototype.instance=function(e){var t=this.scene||this.parent.instance(-1).children[this.childIndex],n=null==e||this.hasOwnProperty("index")?this.index:e;return t[0>n?t.length-1:n]},pv.Mark.prototype.instances=function(e){for(var t,n=this,r=[];!(t=n.scene);)r.push({index:e.parentIndex,childIndex:n.childIndex}),e=e.parent,n=n.parent;for(var i=r.length;i--;){var s=r[i];t=t[s.index].children[s.childIndex]}if(this.hasOwnProperty("index")){var o=pv.extend(t[this.index]);return o.right=o.top=o.left=o.bottom=0,[o]}return t},pv.Mark.prototype.first=function(){return this.scene[0]},pv.Mark.prototype.last=function(){return this.scene[this.scene.length-1]},pv.Mark.prototype.sibling=function(){return 0==this.index?null:this.scene[this.index-1]},pv.Mark.prototype.cousin=function(){var e=this.parent,t=e&&e.sibling();return t&&t.children?t.children[this.childIndex][this.index]:null},pv.Mark.prototype._renderId=0,pv.Mark.prototype.renderId=function(){return this.root._renderId},pv.Mark.prototype.render=function(){var e=this.root;!this.parent||e.scene?(e._renderId++,this.renderCore()):e.render()},pv.Mark.prototype.renderCore=function(){function e(e,n,i){e.scale=i;if(u>n){var s=n>=r.length;s&&r.unshift(null);if(e.hasOwnProperty("index"))t(e,n,i,s);else{for(var o=0,a=e.scene.length;a>o;o++)e.index=o,t(e,n,i,s);delete e.index}s&&r.shift()}else e.build(),pv.Scene.scale=i,pv.Scene.updateAll(e.scene);delete e.scale}function t(t,n,i,o){var u,a=t.scene[t.index];if(a.visible){var f=t.children,l=a.children,c=s[n],h=f[c];h.scene||c++;for(u=0;c>u;u++)f[u].scene=l[u];o&&(r[0]=a.data),e(h,n+1,i*a.transform.k);for(u=0;c>u;u++)f[u].scene=void 0}}for(var n=this.parent,r=pv.Mark.stack,i=r.length,s=[],o=this;o.parent;o=o.parent)s.unshift(o.childIndex);var u=s.length;this.bind();for(;n&&!n.hasOwnProperty("index");)n=n.parent;try{this.context(n?n.scene:void 0,n?n.index:-1,function(){e(this.root,0,1)})}catch(a){throw r.length>i&&(r.length=i),a}},pv.Mark.prototype.bind=function(){function e(e){do for(var s=e.$properties,o=s.length;o--;){var u=s[o],a=u.name,f=n[a];if(f){if(3===f.type){var l=f.root;f.root=u,l?l.proto||(l.proto=u):f.proto=u}}else{n[a]=u;switch(a){case"data":t=u;break;case"visible":case"id":r.push(u);break;default:i[u.type].push(u)}}}while(e=e.proto)}var t,n={},r=[],i=[[],[],[],[]];e(this),e(this.defaults);var s=i[0],o=i[1].reverse(),u=i[2];i[3].reverse();var a=this;do for(var f in a.properties)f in n||u.push(n[f]={name:f,type:2,value:null});while(a=a.proto);var l;if(s.length||o.length){l=s.concat(o);for(var c=0,h=l.length;h>c;c++)this.propertyMethod(l[c].name,!0)}else l=[];this.binds={properties:n,data:t,defs:l,required:r,optional:pv.blend(i)}},pv.Mark.prototype.build=function(){var e=pv.Mark.stack,t=this.scene;if(!t){t=this.scene=[],t.mark=this,t.type=this.type,t.childIndex=this.childIndex;var n=this.parent;n&&(t.parent=n.scene,t.parentIndex=n.index)}this.target&&(t.target=this.target.instances(t));var r=this.binds.defs;if(r.length)for(var i=t.defs||(t.defs={}),s=0,o=r.length;o>s;s++){var u=r[s],a=i[u.name];(!a||u.id>a.id)&&(i[u.name]={id:0,value:1&u.type?u.value.apply(this,e):u.value})}var f=this.evalProperty(this.binds.data),l=f.length;t.length=l;if(l){var c=pv.Mark.prototype;e.unshift(null);var h=pv.propBuildMark,p=pv.propBuilt;pv.propBuildMark=this;try{for(var s=0;l>s;s++){c.index=this.index=s,pv.propBuilt={};var d=t[s];d?d._state&&delete d._state:d=t[s]={},d.data=e[0]=f[s],this.preBuildInstance(d),this.buildInstance(d)}}finally{c.index=-1,delete this.index,e.shift(),pv.propBuildMark=h,pv.propBuilt=p}}return this},pv.Mark.prototype.instanceState=function(e){return e||(e=this.instance()),e?e._state||(e._state={}):null},pv.Mark.prototype.preBuildInstance=function(){},pv.Mark.prototype.buildInstance=function(e){this.buildProperties(e,this.binds.required),e.visible&&(this.buildProperties(e,this.binds.optional),this.buildImplied(e))},!function(){var e,t=pv.Mark.stack,n=[function(e){return this.scene.defs[e.name].value},null,function(e){return e.value},function(n){return e=n.proto,n.value.apply(this,t)}];n[1]=n[0],pv.Mark.prototype.buildProperties=function(t,r){var i=pv.propBuilt,s=!i;s&&(pv.propBuildMark=this,pv.propBuilt=i={});for(var o=e,u=0,a=r.length;a>u;u++){var f=r[u],l=f.name;l in i||(i[l]=1,t[l]=n[f.type].call(this,f))}e=o,s&&(pv.propBuildMark=pv.propBuilt=null)},pv.Mark.prototype.evalProperty=function(t){var r=e,i=n[t.type].call(this,t);return e=r,i},pv.Mark.prototype.evalInPropertyContext=function(n,r){var i=e;e=r;var s=n.apply(this,t);return e=i,s},pv.Mark.prototype.delegate=function(t,n){if(e&&(!n||e.tag===n)){var r=this.evalProperty(e);if(void 0!==r)return r}return t},pv.Mark.prototype.delegateExcept=function(t,n){if(e&&(!n||e.tag!==n)){var r=this.evalProperty(e);if(void 0!==r)return r}return t},pv.Mark.prototype.hasDelegate=function(t){return!(!e||t&&e.tag!==t)}}(),pv.Mark.prototype.buildImplied=function(e){var t,n,r=e.left,i=e.right,s=e.top,o=e.bottom,u=this.properties,a=u.width?e.width:0,f=u.height?e.height:0;if(null==a||null==i||null==r){t=this.parent&&this.parent.instance(),n=!0;var l=t?t.width:a+r+i;null==a?a=l-(i=i||0)-(r=r||0):null==i?null==r?r=i=(l-a)/2:i=l-a-r:r=l-a-i}if(null==f||null==o||null==s){n||(t=this.parent&&this.parent.instance());var c=t?t.height:f+s+o;null==f?f=c-(s=s||0)-(o=o||0):null==o?o=null==s?s=(c-f)/2:c-f-s:s=c-f-o}e.left=r,e.right=i,e.top=s,e.bottom=o,u.width&&(e.width=a),u.height&&(e.height=f),u.textStyle&&!e.textStyle&&(e.textStyle=pv.FillStyle.transparent),u.fillStyle&&!e.fillStyle&&(e.fillStyle=pv.FillStyle.transparent),u.strokeStyle&&!e.strokeStyle&&(e.strokeStyle=pv.FillStyle.transparent)},pv.Mark.prototype.mouse=function(){var e=this.root.canvas(),t=pv.event,n=t&&t.pageX||0,r=t&&t.pageY||0,i=pv.elementOffset(e);if(i){var s=pv.cssStyle(e);n-=i.left+parseFloat(s("paddingLeft")||0),r-=i.top+parseFloat(s("paddingTop")||0)}var o=pv.Transform.identity,u=this.properties.transform?this:this.parent,a=[];do a.push(u);while(u=u.parent);for(;u=a.pop();){var f=u.instance();o=o.translate(f.left,f.top).times(f.transform)}return o=o.invert(),pv.vector(n*o.k+o.x,r*o.k+o.y)},pv.Mark.prototype.event=function(e,t){t=pv.functor(t);var n=this.$handlers[e];return n?n instanceof Array?n.push(t):n=[n,t]:n=t,this.$hasHandlers=!0,this.$handlers[e]=n,this},pv.Mark.prototype.context=function(e,t,n){function r(e,t){pv.Mark.scene=e,s.index=t;if(e){var n,r=e.mark,i=r,u=[];do{u.push(i),o.push(e[t].data),i.index=t,i.scene=e;if(i=i.parent)t=e.parentIndex,e=e.parent}while(i);var a=1;n=u.length-1;if(n>0)do i=u[n--],i.scale=a,a*=i.scene[i.index].transform.k;while(n);r.scale=a;var f,l=r.children;if(l&&(f=l.length)>0){var c=r.scene[r.index];a*=c.transform.k;var h=c.children;n=f;for(;n--;)i=l[n],i.scene=h[n],i.scale=a}}}function i(e){if(e){var t,n=e.mark,r=n.children;if(r)for(var i=r.length;i--;)t=r[i],t.scene=void 0,t.scale=1;t=n;var s,u=0;do{u++,delete t.index;if(s=t.parent)t.scene=void 0,t.scale=1}while(t=s);u&&(o.length-=u)}}var s=pv.Mark.prototype,o=pv.Mark.stack,u=pv.Mark.scene,a=s.index;if(e&&e===u&&t===a)try{n.apply(this,o)}catch(f){throw pv.error(f),f}finally{pv.Mark.scene=u,s.index=a}else{i(u,a),r(e,t);try{n.apply(this,o)}catch(f){throw pv.error(f),f}finally{i(e,t),r(u,a)}}},pv.Mark.prototype.getEventHandler=function(e,t,n,r){var i=this.$handlers[e];return i?[i,t,n,r]:this.getParentEventHandler(e,t,n,r)},pv.Mark.prototype.getParentEventHandler=function(e,t,n,r){var i=t.parent;return i?i.mark.getEventHandler(e,i,t.parentIndex,r):void 0},pv.Mark.dispatch=function(e,t,n,r){var i=t.mark.root;if(i.$transition)return!0;var s,o=i.$interceptors&&i.$interceptors[e];if(o)for(var u=0,a=o.length;a>u;u++){s=o[u](e,r);if(s)break;if(s===!1)return!0}if(!s){s=t.mark.getEventHandler(e,t,n,r);if(!s)return!1}return this.handle.apply(this,s)},pv.Mark.handle=function(e,t,n,r){var i=t.mark;return i.context(t,n,function(){var t,n,s,o=pv.Mark.stack.concat(r);if(e instanceof Array){var u;for(t=0,n=e.length;n>t;t++)s=e[t].apply(i,o),s&&s.render&&(u||(u=[])).push(s);if(u)for(t=0,n=u.length;n>t;t++)u[t].render()}else s=e.apply(i,o),s&&s.render&&s.render()}),!0},pv.Mark.prototype.addEventInterceptor=function(e,t,n){var r=this.root;if(r){var i=r.$interceptors||(r.$interceptors={}),s=i[e]||(i[e]=[]);n?s.unshift(t):s.push(t)}},pv.Mark.prototype.eachInstance=function(e,t){function n(r,s,u){var a=r.length;if(a>0){var f,l=s===o;l||(f=i[s]);for(var c=0;a>c;c++){var h=r[c];if(h.visible)if(s===o)e.call(t,r,c,u);else{var p=h.children[f];if(p){var d=u.times(h.transform).translate(h.left,h.top);n(p,s+1,d)}}}}}for(var r=this,i=[];r.parent;)i.unshift(r.childIndex),r=r.parent;var s=r.scene;if(s){var o=i.length;n(s,0,pv.Transform.identity)}},pv.Mark.prototype.toScreenTransform=function(){var e=pv.Transform.identity;this instanceof pv.Panel&&(e=e.translate(this.left(),this.top()).times(this.transform()));var t=this.parent;if(t)do e=e.translate(t.left(),t.top()).times(t.transform());while(t=t.parent);return e},pv.Mark.prototype.transition=function(){return new pv.Transition(this)},pv.Mark.prototype.on=function(e){return this["$"+e]=new pv.Transient(this)},pv.Mark.prototype.getShape=function(e,t,n){var r=e[t];if(!r.visible)return null;null==n&&(n=0);var i="_shape_inset_"+n;return r[i]||(r[i]=this.getShapeCore(e,t,n))},pv.Mark.prototype.getShapeCore=function(e,t,n){var r=e[t],i=r.left,s=r.top,o=r.width,u=r.height;if(n>0&&1>=n){var a=n*o,f=n*u;i+=a,s+=f,o-=2*a,u-=2*f}return new pv.Shape.Rect(i,s,o,u)},pv.Anchor=function(e){pv.Mark.call(this),this.target=e,this.parent=e.parent},pv.Anchor.prototype=pv.extend(pv.Mark).property("name",String),pv.Anchor.prototype.extend=function(e){return this.proto=e,this},pv.Area=function(){pv.Mark.call(this)},pv.Area.castSegmented=function(e){if(!e)return"";switch(e){case"smart":case"full":break;default:e="full"}return e},pv.Area.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("lineJoin",String).property("strokeMiterLimit",Number).property("lineCap",String).property("strokeDasharray",String).property("strokeStyle",pv.fillStyle).property("fillStyle",pv.fillStyle).property("segmented",pv.Area.castSegmented).property("interpolate",String).property("tension",Number),pv.Area.prototype.type="area",pv.Area.prototype.defaults=(new pv.Area).extend(pv.Mark.prototype.defaults).lineWidth(1.5).fillStyle(pv.Colors.category20().by(pv.parent)).interpolate("linear").tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),pv.Area.prototype.buildImplied=function(e){null==e.height&&(e.height=0),null==e.width&&(e.width=0),pv.Mark.prototype.buildImplied.call(this,e)},pv.Area.fixed={lineWidth:1,lineJoin:1,strokeMiterLimit:1,lineCap:1,strokeStyle:1,strokeDasharray:1,fillStyle:1,segmented:1,interpolate:1,tension:1},pv.Area.prototype.bind=function(){pv.Mark.prototype.bind.call(this);for(var e=this.binds,t=e.required,n=e.optional,r=0,i=n.length;i>r;r++){var s=n[r];s.fixed=s.name in pv.Area.fixed,"segmented"==s.name&&(t.push(s),n.splice(r,1),r--,i--)}this.binds.$required=t,this.binds.$optional=n},pv.Area.prototype.buildInstance=function(e){function t(e){return!e.fixed||(r.push(e),!1)}var n=this.binds;if(this.index){var r=n.fixed;r||(r=n.fixed=[],n.required=n.required.filter(t),this.scene[0].segmented||(n.optional=n.optional.filter(t)));var i=r.length;if(i)for(var s=this.scene[0],o=0;i>o;o++){var u=r[o].name;e[u]=s[u]}}else n.required=n.$required,n.optional=n.$optional,n.fixed=null;pv.Mark.prototype.buildInstance.call(this,e)},pv.Area.prototype.anchor=function(e){return pv.Mark.prototype.anchor.call(this,e).interpolate(function(){return this.scene.target[this.index].interpolate}).eccentricity(function(){return this.scene.target[this.index].eccentricity}).tension(function(){return this.scene.target[this.index].tension})},pv.Area.prototype.getEventHandler=function(e,t,n,r){var i=t[n],s=1===pv.Scene.mousePositionEventSet[e]&&!i.segmented||"smart"===i.segmented;if(!s)return pv.Mark.prototype.getEventHandler.call(this,e,t,n,r);var o=this.$handlers[e],u="mousemove"===e,a=u?this.$handlers.mouseover:null;if(!o&&!a)return this.getParentEventHandler(e,t,n,r);var f=this.getNearestInstanceToMouse(t,n);if(o){if(a){var l=this._mouseOverScene;if(!l||l!==t||this._mouseOverIndex!==f)return this._mouseOverScene=t,this._mouseOverIndex=f,[[o,a],t,f,r]}return[o,t,f,r]}return[a,t,f,r]},pv.Area.prototype.getNearestInstanceToMouse=function(e,t){for(var n=this.mouse(),r=1/0,i=null,s=t,o=e.length;o>s;s++){var u=this.getShape(e,s);if(u){if(u.containsPoint(n))return s;var a=u.distance2(n).dist2;r>a&&(r=a,i=s)}}return null!=i?i:t},pv.Area.prototype.getShapeCore=function(e,t){var n=e[t],r=n.width||0,i=n.height||0,s=n.left,o=n.top,u=t+1<e.length?e[t+1]:null;if(!u||!u.visible)return new pv.Shape.Line(s,o,s+r,o+i);var a=u.left,f=u.top,l=u.height||0,c=u.width||0;return new pv.Shape.Polygon([new pv.Vector(s,o),new pv.Vector(a,f),new pv.Vector(a+c,f+l),new pv.Vector(s+r,o+i)])},pv.Bar=function(){pv.Mark.call(this)},pv.Bar.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("fillStyle",pv.fillStyle).property("lineCap",String).property("strokeDasharray",String),pv.Bar.prototype.type="bar",pv.Bar.prototype.defaults=(new pv.Bar).extend(pv.Mark.prototype.defaults).lineWidth(1.5).fillStyle(pv.Colors.category20().by(pv.parent)).lineCap("butt").strokeDasharray("none"),pv.Dot=function(){pv.Mark.call(this)},pv.Dot.prototype=pv.extend(pv.Mark).property("shape",String).property("shapeAngle",Number).property("shapeRadius",Number).property("shapeSize",Number).property("aspectRatio",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("lineCap",String).property("strokeDasharray",String).property("fillStyle",pv.fillStyle),pv.Dot.prototype.type="dot",pv.Dot.prototype.defaults=(new pv.Dot).extend(pv.Mark.prototype.defaults).shape("circle").aspectRatio(1).lineWidth(1.5).strokeStyle(pv.Colors.category10().by(pv.parent)).lineCap("butt").strokeDasharray("none"),pv.Dot.prototype.anchor=function(e){return pv.Mark.prototype.anchor.call(this,e).left(function(){var e=this.scene.target[this.index];switch(this.name()){case"bottom":case"top":case"center":return e.left;case"left":return null}return e.left+e._width/2}).right(function(){var e=this.scene.target[this.index];return"left"==this.name()?e.right+e._width/2:null}).top(function(){var e=this.scene.target[this.index];switch(this.name()){case"left":case"right":case"center":return e.top;case"top":return null}return e.top+e._height/2}).bottom(function(){var e=this.scene.target[this.index];return"top"==this.name()?e.bottom+e._height/2:null}).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center"}return"left"}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"bottom":return"top"}return"bottom"})},pv.Dot.prototype.buildImplied=function(e){var t=e.shapeRadius,n=e.shapeSize,r=e.aspectRatio||1;null==t?null==n?(n=e.shapeSize=20.25,t=e.shapeRadius=4.5):t=e.shapeRadius=Math.sqrt(n):null==n&&(n=e.shapeSize=t*t);var i,s;1===r||0>r?i=s=2*t:(i=2*t/Math.sqrt(r),s=r*i),e._height=i,e._width=s,pv.Mark.prototype.buildImplied.call(this,e)},pv.Dot.prototype.width=function(){return this.instance()._width},pv.Dot.prototype.height=function(){return this.instance()._height},pv.Dot.prototype.getShapeCore=function(e,t){var n=e[t],r=n._width,i=n._height,s=n.left,o=n.top;switch(n.shape){case"diamond":r*=Math.SQRT2,i*=Math.SQRT2;case"square":case"cross":return new pv.Shape.Rect(s-i/2,o-r/2,i,r)}return new pv.Shape.Circle(s,o,n.shapeRadius)},pv.Label=function(){pv.Mark.call(this)},pv.Label.prototype=pv.extend(pv.Mark).property("text",String).property("font",String).property("textAngle",Number).property("textStyle",pv.color).property("textAlign",String).property("textBaseline",String).property("textMargin",Number).property("textDecoration",String).property("textShadow",String),pv.Label.prototype.type="label",pv.Label.prototype.defaults=(new pv.Label).extend(pv.Mark.prototype.defaults).events("none").text(pv.identity).font("10px sans-serif").textAngle(0).textStyle("black").textAlign("left").textBaseline("bottom").textMargin(3),pv.Label.prototype.getShapeCore=function(e,t,n){var r=e[t],i=pv.Text.measure(r.text,r.font),s=r.left,o=r.top,u=i.width,a=i.height;if(n>0&&1>=n){var f=n*u,l=n*a;s+=f,o+=l,u-=2*f,a-=2*l}return pv.Label.getPolygon(u,a,r.textAlign,r.textBaseline,r.textAngle,r.textMargin).apply(pv.Transform.identity.translate(s,o))},pv.Label.getPolygon=function(e,t,n,r,i,s){var o,u;switch(r){case"middle":u=t/2;break;case"top":u=s+t;break;case"bottom":u=-s}switch(n){case"right":o=-s-e;break;case"center":o=-e/2;break;case"left":o=s}var a=new pv.Vector(o,u),f=a.plus(e,0),l=f.plus(0,-t),c=a.plus(0,-t);return 0!==i&&(a=a.rotate(i),f=f.rotate(i),c=c.rotate(i),l=l.rotate(i)),new pv.Shape.Polygon([a,f,l,c])},pv.Line=function(){pv.Mark.call(this)},pv.Line.prototype=pv.extend(pv.Mark).property("lineWidth",Number).property("lineJoin",String).property("strokeMiterLimit",Number).property("lineCap",String).property("strokeStyle",pv.fillStyle).property("strokeDasharray",String).property("fillStyle",pv.fillStyle).property("segmented",pv.Area.castSegmented).property("interpolate",String).property("eccentricity",Number).property("tension",Number),pv.Line.prototype.type="line",pv.Line.prototype.defaults=(new pv.Line).extend(pv.Mark.prototype.defaults).lineWidth(1.5).strokeStyle(pv.Colors.category10().by(pv.parent)).interpolate("linear").eccentricity(0).tension(.7).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),pv.Line.prototype.bind=pv.Area.prototype.bind,pv.Line.prototype.buildInstance=pv.Area.prototype.buildInstance,pv.Line.prototype.getEventHandler=pv.Area.prototype.getEventHandler,pv.Line.prototype.getNearestInstanceToMouse=pv.Area.prototype.getNearestInstanceToMouse,pv.Line.prototype.anchor=function(e){return pv.Area.prototype.anchor.call(this,e).textAlign(function(){switch(this.name()){case"left":return"right";case"bottom":case"top":case"center":return"center";case"right":return"left"}}).textBaseline(function(){switch(this.name()){case"right":case"left":case"center":return"middle";case"top":return"bottom";case"bottom":return"top"}})},pv.Line.prototype.getShapeCore=function(e,t){var n=e[t],r=t+1<e.length?e[t+1]:null;return null!=r&&r.visible?new pv.Shape.Line(n.left,n.top,r.left,r.top):new pv.Shape.Point(n.left,n.top)},pv.Rule=function(){pv.Mark.call(this)},pv.Rule.prototype=pv.extend(pv.Mark).property("width",Number).property("height",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("lineCap",String).property("strokeDasharray",String),pv.Rule.prototype.type="rule",pv.Rule.prototype.defaults=(new pv.Rule).extend(pv.Mark.prototype.defaults).lineWidth(1).strokeStyle("black").antialias(!1).lineCap("butt").strokeDasharray("none"),pv.Rule.prototype.anchor=pv.Line.prototype.anchor,pv.Rule.prototype.buildImplied=function(e){var t=e.left,n=e.right;e.top,e.bottom,null!=e.width||null==t&&null==n||null!=n&&null!=t?e.height=0:e.width=0,pv.Mark.prototype.buildImplied.call(this,e)},pv.Rule.prototype.getShapeCore=function(e,t){var n=e[t];return new pv.Shape.Line(n.left,n.top,n.left+n.width,n.top+n.height)},pv.Panel=function(){pv.Bar.call(this),this.children=[],this.root=this,this.$dom=pv.$&&pv.$.s},pv.Panel.prototype=pv.extend(pv.Bar).property("transform").property("overflow",String).property("canvas",function(e){return"string"==typeof e?document.getElementById(e):e}),pv.Panel.prototype.type="panel",pv.Panel.prototype._zOrderChildCount=0,pv.Panel.prototype.defaults=(new pv.Panel).extend(pv.Bar.prototype.defaults).fillStyle(null).overflow("visible"),pv.Panel.prototype.anchor=function(e){var t=pv.Bar.prototype.anchor.call(this,e);return t.parent=this,t},pv.Panel.prototype.add=function(e){var t=new e;t.parent=this,t.root=this.root,t.childIndex=this.children.length,this.children.push(t);var n=+t._zOrder||0;return 0!==n&&this._zOrderChildCount++,t},pv.Panel.prototype.bind=function(){pv.Mark.prototype.bind.call(this);for(var e=this.children,t=0,n=e.length;n>t;t++)e[t].bind()},pv.Panel.prototype.buildInstance=function(e){pv.Bar.prototype.buildInstance.call(this,e);if(e.visible){var t=this.scale*e.transform.k;pv.Mark.prototype.index=-1;for(var n,r=this.children,i=e.children||(e.children=[]),s=0,o=r.length;o>s;s++)n=r[s],n.scene=i[s],n.scale=t,n.build();s=o;for(;s--;)n=r[s],i[s]=n.scene,delete n.scene,delete n.scale;i.length=o}},pv.Panel.prototype.buildImplied=function(e){this.parent||this._buildRootInstanceImplied(e)?(e.transform||(e.transform=pv.Transform.identity),pv.Mark.prototype.buildImplied.call(this,e)):e.visible=!1},pv.Panel.prototype._buildRootInstanceImplied=function(e){var t=e.canvas;if(t){if(!this._rootInstanceStealCanvas(e,t))return!1;this._rootInstanceInitCanvas(e,t)}else e.canvas=this._rootInstanceGetInlineCanvas(e);return!0},pv.Panel.prototype._rootInstanceStealCanvas=function(e,t){var n=t.$panel;if(n!==this){if(n){if(this.$lastCreateId)return!1;n._disposeRootPanel(),this._updateCreateId(t)}t.$panel=this,pv.removeChildren(t)}else this._updateCreateId(t);return!0},pv.Panel.prototype._registerBoundEvent=function(e,t,n,r){if(e.removeEventListener){var i=this._boundEvents||(this._boundEvents=[]);i.push([e,t,n,r])}},pv.Panel.prototype._disposeRootPanel=function(){var e=this.$transition;e&&e.stop();var t=this._boundEvents;if(t){this._boundEvents=null;for(var n=0,r=t.length;r>n;n++){var i=t[n];i[0].removeEventListener(i[1],i[2],i[3])}}},pv.Panel.prototype._rootInstanceInitCanvas=function(e,t){var n,r,i;null==e.width&&(i=pv.cssStyle(t),n=parseFloat(i("width")||0),e.width=n-e.left-e.right),null==e.height&&(i||(i=pv.cssStyle(t)),r=parseFloat(i("height")||0),e.height=r-e.top-e.bottom),i=null},pv.Panel.prototype._rootInstanceGetInlineCanvas=function(){var e,t=this.$canvas||(this.$canvas=[]);if(!(e=t[this.index])){e=t[this.index]=document.createElement("span");if(this.$dom)this.$dom.parentNode.insertBefore(e,this.$dom);else{for(var n=document.body;n.lastChild&&n.lastChild.tagName;)n=n.lastChild;n!=document.body&&(n=n.parentNode),n.appendChild(e)}}return e},pv.Panel.prototype._updateCreateId=function(e){this.$lastCreateId=e.$pvCreateId=(e.$pvCreateId||0)+1},pv.Image=function(){pv.Bar.call(this)},pv.Image.prototype=pv.extend(pv.Bar).property("url",String).property("imageWidth",Number).property("imageHeight",Number),pv.Image.prototype.type="image",pv.Image.prototype.defaults=(new pv.Image).extend(pv.Bar.prototype.defaults).fillStyle(null),pv.Image.prototype.image=function(e){return this.$image=function(){var t=e.apply(this,arguments);return null==t?pv.Color.transparent:"string"==typeof t?pv.color(t):t},this},pv.Image.prototype.bind=function(){pv.Bar.prototype.bind.call(this);var e=this.binds,t=this;do e.image=t.$image;while(!e.image&&(t=t.proto))},pv.Image.prototype.buildImplied=function(e){pv.Bar.prototype.buildImplied.call(this,e);if(e.visible){null==e.imageWidth&&(e.imageWidth=e.width),null==e.imageHeight&&(e.imageHeight=e.height);if(null==e.url&&this.binds.image){var t,n=this.$canvas||(this.$canvas=document.createElement("canvas")),r=n.getContext("2d"),i=e.imageWidth,s=e.imageHeight,o=pv.Mark.stack;n.width=i,n.height=s,t=(e.image=r.createImageData(i,s)).data,o.unshift(null,null);for(var u=0,a=0;s>u;u++){o[1]=u;for(var f=0;i>f;f++){o[0]=f;var l=this.binds.image.apply(this,o);t[a++]=l.r,t[a++]=l.g,t[a++]=l.b,t[a++]=255*l.a}}o.splice(0,2)}}},pv.Wedge=function(){pv.Mark.call(this)},pv.Wedge.prototype=pv.extend(pv.Mark).property("startAngle",Number).property("endAngle",Number).property("angle",Number).property("innerRadius",Number).property("outerRadius",Number).property("lineWidth",Number).property("strokeStyle",pv.fillStyle).property("lineJoin",String).property("strokeMiterLimit",Number).property("lineCap",String).property("strokeDasharray",String).property("fillStyle",pv.fillStyle),pv.Wedge.prototype.type="wedge",pv.Wedge.prototype.defaults=(new pv.Wedge).extend(pv.Mark.prototype.defaults).startAngle(function(){var e=this.sibling();return e?e.endAngle:-Math.PI/2}).innerRadius(0).lineWidth(1.5).strokeStyle(null).fillStyle(pv.Colors.category20().by(pv.index)).lineJoin("miter").strokeMiterLimit(8).lineCap("butt").strokeDasharray("none"),pv.Wedge.prototype.midRadius=function(){return(this.innerRadius()+this.outerRadius())/2},pv.Wedge.prototype.midAngle=function(){return(this.startAngle()+this.endAngle())/2},pv.Wedge.prototype.anchor=function(e){function t(e){return e.innerRadius||e.angle<2*Math.PI}function n(e){return(e.innerRadius+e.outerRadius)/2}function r(e){return(e.startAngle+e.endAngle)/2}return pv.Mark.prototype.anchor.call(this,e).left(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"outer":return e.left+e.outerRadius*Math.cos(r(e));case"inner":return e.left+e.innerRadius*Math.cos(r(e));case"start":return e.left+n(e)*Math.cos(e.startAngle);case"center":return e.left+n(e)*Math.cos(r(e));case"end":return e.left+n(e)*Math.cos(e.endAngle)}return e.left}).top(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"outer":return e.top+e.outerRadius*Math.sin(r(e));case"inner":return e.top+e.innerRadius*Math.sin(r(e));case"start":return e.top+n(e)*Math.sin(e.startAngle);case"center":return e.top+n(e)*Math.sin(r(e));case"end":return e.top+n(e)*Math.sin(e.endAngle)}return e.top}).textAlign(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"outer":return pv.Wedge.upright(r(e))?"right":"left";case"inner":return pv.Wedge.upright(r(e))?"left":"right"}return"center"}).textBaseline(function(){var e=this.scene.target[this.index];if(t(e))switch(this.name()){case"start":return pv.Wedge.upright(e.startAngle)?"top":"bottom";case"end":return pv.Wedge.upright(e.endAngle)?"bottom":"top"}return"middle"}).textAngle(function(){var e=this.scene.target[this.index],n=0;if(t(e))switch(this.name()){case"center":case"inner":case"outer":n=r(e);break;case"start":n=e.startAngle;break;case"end":n=e.endAngle}return pv.Wedge.upright(n)?n:n+Math.PI})},pv.Wedge.upright=function(e){return e%=2*Math.PI,e=0>e?2*Math.PI+e:e,e<Math.PI/2||e>=3*Math.PI/2},pv.Wedge.prototype.buildImplied=function(e){null==e.angle?e.angle=e.endAngle-e.startAngle:null==e.endAngle&&(e.endAngle=e.startAngle+e.angle),pv.Mark.prototype.buildImplied.call(this,e)},pv.Wedge.prototype.getShapeCore=function(e,t){var n=e[t];return new pv.Shape.Wedge(n.left,n.top,n.innerRadius,n.outerRadius,n.startAngle,n.angle)},pv.Ease=function(){function e(e){return function(t){return 1-e(1-t)}}function t(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function n(e){return function(t){return 0>t?0:t>1?1:Math.pow(t,e)}}function r(e){return 1-Math.cos(e*Math.PI/2)}function i(e){return e?Math.pow(2,10*(e-1))-.001:0}function s(e){return-(Math.sqrt(1-e*e)-1)}function o(e,t){var n;return t||(t=.45),!e||1>e?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 0>=r||r>=1?r:-(e*Math.pow(2,10*--r)*Math.sin(2*(r-n)*Math.PI/t))}}function u(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function a(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}var f=n(2),l=n(3),c=o(),h=u(),p={linear:pv.identity,"quad-in":f,"quad-out":e(f),"quad-in-out":t(f),"quad-out-in":t(e(f)),"cubic-in":l,"cubic-out":e(l),"cubic-in-out":t(l),"cubic-out-in":t(e(l)),"sin-in":r,"sin-out":e(r),"sin-in-out":t(r),"sin-out-in":t(e(r)),"exp-in":i,"exp-out":e(i),"exp-in-out":t(i),"exp-out-in":t(e(i)),"circle-in":s,"circle-out":e(s),"circle-in-out":t(s),"circle-out-in":t(e(s)),"elastic-in":c,"elastic-out":e(c),"elastic-in-out":t(c),"elastic-out-in":t(e(c)),"back-in":h,"back-out":e(h),"back-in-out":t(h),"back-out-in":t(e(h)),"bounce-in":a,"bounce-out":e(a),"bounce-in-out":t(a),"bounce-out-in":t(e(a))};return pv.ease=function(e){return p[e]},{reverse:e,reflect:t,linear:function(){return pv.identity},sin:function(){return r},exp:function(){return i},circle:function(){return s},elastic:o,back:u,bounce:a,poly:n}}(),pv.Transient=function(e){pv.Mark.call(this),this.fillStyle(null).strokeStyle(null).textStyle(null),this.on=function(t){return e.on(t)}},pv.Transient.prototype=pv.extend(pv.Mark),!function(){function e(e){for(var t={},n=e.length;n--;){var r=e[n],i=r.id;i&&(t[i]=r)}return t}function t(e,t,n,r){var i;if(t in o){var s=pv.Scale.interpolator(n[t],r[t]);i=function(e){n[t]=s(e)}}else i=function(e){e>.5&&(n[t]=r[t])};i.next=e.head,e.head=i}function n(e,n,r){for(var s in n)"children"!==s&&n[s]!=r[s]&&t(e,s,n,r);var o=n.children;if(o)for(var u=r.children,a=0,f=o.length;f>a;a++)i(e,o[a],u[a])}function r(e,t,n,r){var i,s=Object.create(e[t]),o=e.mark,a=o.root.scene;r.target&&(i=r.target[r.length])&&(e=Object.create(e),e.target=Object.create(r.target),e.target[t]=i),n||(n=u);var f=n.$properties,l=n.$propertiesMap;return f=o.binds.optional.filter(function(e){return!(e.name in l)}).concat(f),o.context(e,t,function(){this.buildProperties(s,f),this.buildImplied(s)}),o.root.scene=a,s}function i(t,i,s){for(var o,u,a=i.mark,f=e(i),l=e(s),c=0,h=i.length;h>c;c++){o=i[c],u=o.id?l[o.id]:s[c],o.index=c;if(o.visible){if(!u||!u.visible){var p=r(i,c,a.$exit,s);o.transition=u?2:(s.push(p),1),u=p}n(t,o,u)}}c=0,h=s.length;for(;h>c;c++){u=s[c],o=u.id?f[u.id]:i[c];if((!o||!o.visible)&&u.visible){var d=r(s,c,a.$enter,i);o?i[o.index]=d:i.push(d),n(t,d,u)}}}function s(e){for(var t=0,n=0;t<e.length;t++){var r=e[t];1!=r.transition&&(e[n++]=r,2==r.transition&&(r.visible=!1),r.children&&r.children.forEach(s))}e.length=n}var o={top:1,left:1,right:1,bottom:1,width:1,height:1,innerRadius:1,outerRadius:1,radius:1,shapeRadius:1,shapeSize:1,startAngle:1,endAngle:1,angle:1,fillStyle:1,strokeStyle:1,lineWidth:1,eccentricity:1,tension:1,textAngle:1,textStyle:1,textMargin:1},u=new pv.Transient;pv.Transition=function(e){function t(t){var i=e.root.$transition===u;i&&(e.root.$transition=null),null!=n&&(clearInterval(n),n=null),i&&l(e.scene);if(r){var s=r;r=null,s(t)}return t}var n,r,o,u=this,a=pv.ease("cubic-in-out"),f=250,l=function(e){o||(o=!0,s(e))};u.ease=function(e){return arguments.length?(a="function"==typeof e?e:pv.ease(e),u):a},u.duration=function(e){return arguments.length?(f=Number(e),u):f},u.start=function(s){if(e.parent)throw new Error("Animated partial rendering is not supported.");r=s;var o=e.root;if(o.$transition)try{o.$transition.stop()}catch(c){return t(!1)}var h,p;o.$transition=u;var d=e.scene;e.scene=null;var v=pv.Mark.prototype.index;try{e.bind(),e.build();var m=e.scene;e.scene=d,pv.Mark.prototype.index=v,p=Date.now(),h={},i(h,d,m)}catch(c){return pv.Mark.prototype.index=v,t(!1)}if(!h.head)return t(!0);var g=function(){var n=Math.max(0,Math.min(1,(Date.now()-p)/f)),r=a(n),i=h.head;do i(r);while(i=i.next);1===n?(l(e.scene),pv.Scene.updateAll(d),t(!0)):pv.Scene.updateAll(d)};n=setInterval(function(){try{g()}catch(e){t(!1)}},24)},u.stop=function(){t(!0)}}}(),pv.simulation=function(e){return new pv.Simulation(e)},pv.Simulation=function(e){for(var t=0;t<e.length;t++)this.particle(e[t])},pv.Simulation.prototype.particle=function(e){return e.next=this.particles,isNaN(e.px)&&(e.px=e.x),isNaN(e.py)&&(e.py=e.y),isNaN(e.fx)&&(e.fx=0),isNaN(e.fy)&&(e.fy=0),this.particles=e,this},pv.Simulation.prototype.force=function(e){return e.next=this.forces,this.forces=e,this},pv.Simulation.prototype.constraint=function(e){return e.next=this.constraints,this.constraints=e,this},pv.Simulation.prototype.stabilize=function(e){var t;arguments.length||(e=3);for(var n=0;e>n;n++){var r=new pv.Quadtree(this.particles);for(t=this.constraints;t;t=t.next)t.apply(this.particles,r)}for(var i=this.particles;i;i=i.next)i.px=i.x,i.py=i.y;return this},pv.Simulation.prototype.step=function(){var e,t,n;for(e=this.particles;e;e=e.next){var r=e.px,i=e.py;e.px=e.x,e.py=e.y,e.x+=e.vx=e.x-r+e.fx,e.y+=e.vy=e.y-i+e.fy}var s=new pv.Quadtree(this.particles);for(n=this.constraints;n;n=n.next)n.apply(this.particles,s);for(e=this.particles;e;e=e.next)e.fx=e.fy=0;for(t=this.forces;t;t=t.next)t.apply(this.particles,s)},pv.Quadtree=function(e){function t(e,t,r,i,s,o){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf)if(e.p)if(Math.abs(e.p.x-t.x)+Math.abs(e.p.y-t.y)<.01)n(e,t,r,i,s,o);else{var u=e.p;e.p=null,n(e,u,r,i,s,o),n(e,t,r,i,s,o)}else e.p=t;else n(e,t,r,i,s,o)}function n(e,n,r,i,s,o){var u=.5*(r+s),a=.5*(i+o),f=n.x>=u,l=n.y>=a;e.leaf=!1;switch((l<<1)+f){case 0:e=e.c1||(e.c1=new pv.Quadtree.Node);break;case 1:e=e.c2||(e.c2=new pv.Quadtree.Node);break;case 2:e=e.c3||(e.c3=new pv.Quadtree.Node);break;case 3:e=e.c4||(e.c4=new pv.Quadtree.Node)}f?r=u:s=u,l?i=a:o=a,t(e,n,r,i,s,o)}var r,i=Number.POSITIVE_INFINITY,s=i,o=Number.NEGATIVE_INFINITY,u=o;for(r=e;r;r=r.next)r.x<i&&(i=r.x),r.y<s&&(s=r.y),r.x>o&&(o=r.x),r.y>u&&(u=r.y);var a=o-i,f=u-s;a>f?u=s+a:o=i+f,this.xMin=i,this.yMin=s,this.xMax=o,this.yMax=u,this.root=new pv.Quadtree.Node;for(r=e;r;r=r.next)t(this.root,r,i,s,o,u)},pv.Quadtree.Node=function(){this.leaf=!0,this.c1=null,this.c2=null,this.c3=null,this.c4=null,this.p=null},pv.Force={},pv.Force.charge=function(e){function t(n){function r(e){t(e),n.cn+=e.cn,i+=e.cn*e.cx,s+=e.cn*e.cy}var i=0,s=0;n.cn=0,n.leaf||(n.c1&&r(n.c1),n.c2&&r(n.c2),n.c3&&r(n.c3),n.c4&&r(n.c4)),n.p&&(n.cn+=e,i+=e*n.p.x,s+=e*n.p.y),n.cx=i/n.cn,n.cy=s/n.cn}function n(t,r,s,a,f,l){var c=t.cx-r.x,h=t.cy-r.y,p=1/Math.sqrt(c*c+h*h);if(t.leaf&&t.p!=r||u>(f-s)*p){if(o>p)return;p>i&&(p=i);var d=t.cn*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}else if(!t.leaf){var g=.5*(s+f),y=.5*(a+l);t.c1&&n(t.c1,r,s,a,g,y),t.c2&&n(t.c2,r,g,a,f,y),t.c3&&n(t.c3,r,s,y,g,l),t.c4&&n(t.c4,r,g,y,f,l);if(o>p)return;p>i&&(p=i);if(t.p&&t.p!=r){var d=e*p*p*p,v=c*d,m=h*d;r.fx+=v,r.fy+=m}}}var r=2,i=1/r,s=500,o=1/s,u=.9,a={};return arguments.length||(e=-40),a.constant=function(t){return arguments.length?(e=Number(t),a):e},a.domain=function(e,t){return arguments.length?(r=Number(e),i=1/r,s=Number(t),o=1/s,a):[r,s]},a.theta=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(e,r){t(r.root);for(var i=e;i;i=i.next)n(r.root,i,r.xMin,r.yMin,r.xMax,r.yMax)},a},pv.Force.drag=function(e){var t={};return arguments.length||(e=.1),t.constant=function(n){return arguments.length?(e=n,t):e},t.apply=function(t){if(e)for(var n=t;n;n=n.next)n.fx-=e*n.vx,n.fy-=e*n.vy},t},pv.Force.spring=function(e){var t,n,r=.1,i=20,s={};return arguments.length||(e=.1),s.links=function(e){return arguments.length?(t=e,n=e.map(function(e){return 1/Math.sqrt(Math.max(e.sourceNode.linkDegree,e.targetNode.linkDegree))}),s):t},s.constant=function(t){return arguments.length?(e=Number(t),s):e},s.damping=function(e){return arguments.length?(r=Number(e),s):r},s.length=function(e){return arguments.length?(i=Number(e),s):i},s.apply=function(){for(var s=0;s<t.length;s++){var o=t[s].sourceNode,u=t[s].targetNode,a=o.x-u.x,f=o.y-u.y,c=Math.sqrt(a*a+f*f),h=c?1/c:1,p=e*n[s],v=r*n[s],m=(p*(c-i)+v*(a*(o.vx-u.vx)+f*(o.vy-u.vy))*h)*h,g=-m*(c?a:.01*(.5-Math.random())),y=-m*(c?f:.01*(.5-Math.random()));o.fx+=g,o.fy+=y,u.fx-=g,u.fy-=y}},s},pv.Constraint={},pv.Constraint.collision=function(e){function t(u,a,f,l,c,h){if(!u.leaf){var p=.5*(f+c),d=.5*(l+h),v=d>i,m=o>d,g=p>r,y=s>p;v&&(u.c1&&g&&t(u.c1,a,f,l,p,d),u.c2&&y&&t(u.c2,a,p,l,c,d)),m&&(u.c3&&g&&t(u.c3,a,f,d,p,h),u.c4&&y&&t(u.c4,a,p,d,c,h))}if(u.p&&u.p!=a){var b=a.x-u.p.x,w=a.y-u.p.y,E=Math.sqrt(b*b+w*w),S=n+e(u.p);if(S>E){var x=(E-S)/E*.5;b*=x,w*=x,a.x-=b,a.y-=w,u.p.x+=b,u.p.y+=w}}}var n,r,i,s,o,u=1,a={};return arguments.length||(n=10),a.repeat=function(e){return arguments.length?(u=Number(e),a):u},a.apply=function(a,f){var l,c,h=-1/0;for(l=a;l;l=l.next)c=e(l),c>h&&(h=c);for(var p=0;u>p;p++)for(l=a;l;l=l.next)c=(n=e(l))+h,r=l.x-c,s=l.x+c,i=l.y-c,o=l.y+c,t(f.root,l,f.xMin,f.yMin,f.xMax,f.yMax)},a},pv.Constraint.position=function(e){var t=1,n={};return arguments.length||(e=function(e){return e.fix}),n.alpha=function(e){return arguments.length?(t=Number(e),n):t},n.apply=function(n){for(var r=n;r;r=r.next){var i=e(r);i&&(r.x+=(i.x-r.x)*t,r.y+=(i.y-r.y)*t,r.fx=r.fy=r.vx=r.vy=0)}},n},pv.Constraint.bound=function(){var e,t,n={};return n.x=function(t,n){return arguments.length?(e={min:Math.min(t,n),max:Math.max(t,n)},this):e},n.y=function(e,n){return arguments.length?(t={min:Math.min(e,n),max:Math.max(e,n)},this):t},n.apply=function(n){if(e)for(var r=n;r;r=r.next)r.x=r.x<e.min?e.min:r.x>e.max?e.max:r.x;if(t)for(var r=n;r;r=r.next)r.y=r.y<t.min?t.min:r.y>t.max?t.max:r.y},n},pv.Layout=function(){pv.Panel.call(this)},pv.Layout.prototype=pv.extend(pv.Panel),pv.Layout.prototype.property=pv.Mark.prototype.localProperty,pv.Layout.Network=function(){pv.Layout.call(this);var e=this;this.$id=pv.id(),(this.node=(new pv.Mark).data(function(){return e.nodes()}).strokeStyle("#1f77b4").fillStyle("#fff").left(function(e){return e.x}).top(function(e){return e.y})).parent=this,this.link=(new pv.Mark).extend(this.node).data(function(e){return[e.sourceNode,e.targetNode]}).fillStyle(null).lineWidth(function(e,t){return 1.5*t.linkValue}).strokeStyle("rgba(0,0,0,.2)"),this.link.add=function(t){return e.add(pv.Panel).data(function(){return e.links()}).add(t).extend(this)},(this.label=(new pv.Mark).extend(this.node).textMargin(7).textBaseline("middle").text(function(e){return e.nodeName||e.nodeValue}).textAngle(function(e){var t=e.midAngle;return pv.Wedge.upright(t)?t:t+Math.PI}).textAlign(function(e){return pv.Wedge.upright(e.midAngle)?"left":"right"})).parent=this},pv.Layout.Network.prototype=pv.extend(pv.Layout).property("nodes",function(e){return e.map(function(e,t){return"object"!=typeof e&&(e={nodeValue:e}),e.index=t,e})}).property("links",function(e){return e.map(function(e){return isNaN(e.linkValue)&&(e.linkValue=isNaN(e.value)?1:e.value),e})}),pv.Layout.Network.prototype.reset=function(){return this.$id=pv.id(),this},pv.Layout.Network.prototype.buildProperties=function(e,t){(e.$id||0)<this.$id&&pv.Layout.prototype.buildProperties.call(this,e,t)},pv.Layout.Network.prototype.buildImplied=function(e){pv.Layout.prototype.buildImplied.call(this,e);if(e.$id>=this.$id)return!0;e.$id=this.$id,e.nodes.forEach(function(e){e.linkDegree=0}),e.links.forEach(function(t){var n=t.linkValue;(t.sourceNode||(t.sourceNode=e.nodes[t.source])).linkDegree+=n,(t.targetNode||(t.targetNode=e.nodes[t.target])).linkDegree+=n})},pv.Layout.Hierarchy=function(){pv.Layout.Network.call(this),this.link.strokeStyle("#ccc")},pv.Layout.Hierarchy.prototype=pv.extend(pv.Layout.Network),pv.Layout.Hierarchy.prototype.buildImplied=function(e){e.links||(e.links=pv.Layout.Hierarchy.links.call(this)),pv.Layout.Network.prototype.buildImplied.call(this,e)},pv.Layout.Hierarchy.links=function(){return this.nodes().filter(function(e){return e.parentNode}).map(function(e){return{sourceNode:e,targetNode:e.parentNode,linkValue:1}})},pv.Layout.Hierarchy.NodeLink={buildImplied:function(e){function t(e){return e.parentNode?e.depth*(c-l)+l:0}function n(e){return e.parentNode?2*(e.breadth-.25)*Math.PI:0}function r(e){switch(o){case"left":return e.depth*a;case"right":return a-e.depth*a;case"top":return e.breadth*a;case"bottom":return a-e.breadth*a;case"radial":return a/2+t(e)*Math.cos(e.midAngle)}}function i(e){switch(o){case"left":return e.breadth*f;case"right":return f-e.breadth*f;case"top":return e.depth*f;case"bottom":return f-e.depth*f;case"radial":return f/2+t(e)*Math.sin(e.midAngle)}}var s=e.nodes,o=e.orient,u=/^(top|bottom)$/.test(o),a=e.width,f=e.height;if("radial"==o){var l=e.innerRadius,c=e.outerRadius;null==l&&(l=0),null==c&&(c=Math.min(a,f)/2)}for(var h=0;h<s.length;h++){var p=s[h];p.midAngle="radial"==o?n(p):u?Math.PI/2:0,p.x=r(p),p.y=i(p),p.firstChild&&(p.midAngle+=Math.PI)}}},pv.Layout.Hierarchy.Fill={constructor:function(){this.node.strokeStyle("#fff").fillStyle("#ccc").width(function(e){return e.dx}).height(function(e){return e.dy}).innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}).startAngle(function(e){return e.startAngle}).angle(function(e){return e.angle}),this.label.textAlign("center").left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}),delete this.link},buildImplied:function(e){function t(e,t){return(e+t)/(1+t)}function n(e){switch(c){case"left":return t(e.minDepth,v)*p;case"right":return(1-t(e.maxDepth,v))*p;case"top":return e.minBreadth*p;case"bottom":return(1-e.maxBreadth)*p;case"radial":return p/2}}function r(e){switch(c){case"left":return e.minBreadth*d;case"right":return(1-e.maxBreadth)*d;case"top":return t(e.minDepth,v)*d;case"bottom":return(1-t(e.maxDepth,v))*d;case"radial":return d/2}}function i(e){switch(c){case"left":case"right":return(e.maxDepth-e.minDepth)/(1+v)*p;case"top":case"bottom":return(e.maxBreadth-e.minBreadth)*p;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.cos(e.midAngle):0}}function s(e){switch(c){case"left":case"right":return(e.maxBreadth-e.minBreadth)*d;case"top":case"bottom":return(e.maxDepth-e.minDepth)/(1+v)*d;case"radial":return e.parentNode?(e.innerRadius+e.outerRadius)*Math.sin(e.midAngle):0}}function o(e){return Math.max(0,t(e.minDepth,v/2))*(g-m)+m}function u(e){return t(e.maxDepth,v/2)*(g-m)+m}function a(e){return 2*(e.parentNode?e.minBreadth-.25:0)*Math.PI}function f(e){return 2*(e.parentNode?e.maxBreadth-e.minBreadth:1)*Math.PI}var l=e.nodes,c=e.orient,h=/^(top|bottom)$/.test(c),p=e.width,d=e.height,v=-l[0].minDepth;if("radial"==c){var m=e.innerRadius,g=e.outerRadius;null==m&&(m=0),m&&(v*=2),null==g&&(g=Math.min(p,d)/2)}for(var y=0;y<l.length;y++){var b=l[y];b.x=n(b),b.y=r(b),"radial"==c?(b.innerRadius=o(b),b.outerRadius=u(b),b.startAngle=a(b),b.angle=f(b),b.midAngle=b.startAngle+b.angle/2):b.midAngle=h?-Math.PI/2:0,b.dx=i(b),b.dy=s(b)}}},pv.Layout.Grid=function(){pv.Layout.call(this);var e=this;(this.cell=(new pv.Mark).data(function(){return e.scene[e.index].$grid}).width(function(){return e.width()/e.cols()}).height(function(){return e.height()/e.rows()}).left(function(){return this.width()*(this.index%e.cols())}).top(function(){return this.height()*Math.floor(this.index/e.cols())})).parent=this},pv.Layout.Grid.prototype=pv.extend(pv.Layout).property("rows").property("cols"),pv.Layout.Grid.prototype.defaults=(new pv.Layout.Grid).extend(pv.Layout.prototype.defaults).rows(1).cols(1),pv.Layout.Grid.prototype.buildImplied=function(e){pv.Layout.prototype.buildImplied.call(this,e);var t=e.rows,n=e.cols;"object"==typeof n&&(t=pv.transpose(n)),"object"==typeof t?(e.$grid=pv.blend(t),e.rows=t.length,e.cols=t[0]?t[0].length:0):e.$grid=pv.repeat([e.data],t*n)},pv.Layout.Stack=function(){function e(e){return function(){return i[e](this.parent.index,this.index)}}pv.Layout.call(this);var t,n=this,r=function(){return null},i={t:r,l:r,r:r,b:r,w:r,h:r},s=n.buildImplied;this.buildImplied=function(e){s.call(this,e);var n,o=e.layers,u=o.length,a=e.orient,f=/^(top|bottom)\b/.test(a),l=this.parent[f?"height":"width"](),c=[],h=[],p=[],d=pv.Mark.stack,v={parent:{parent:this}};d.unshift(null),t=[];for(var m=0;u>m;m++){p[m]=[],h[m]=[],v.parent.index=m,d[0]=o[m],t[m]=this.$values.apply(v.parent,d),m||(n=t[m].length),d.unshift(null);for(var g=0;n>g;g++)d[0]=t[m][g],v.index=g,m||(c[g]=this.$x.apply(v,d)),p[m][g]=this.$y.apply(v,d);d.shift()}d.shift();var y;switch(e.order){case"inside-out":for(var b=p.map(function(e){return pv.max.index(e)}),w=pv.range(u).sort(function(e,t){return b[e]-b[t]}),E=p.map(function(e){return pv.sum(e)}),S=0,x=0,T=[],N=[],m=0;u>m;m++){var g=w[m];x>S?(S+=E[g],T.push(g)):(x+=E[g],N.push(g))}y=N.reverse().concat(T);break;case"reverse":y=pv.range(u-1,-1,-1);break;default:y=pv.range(u)}switch(e.offset){case"silohouette":for(var g=0;n>g;g++){for(var v=0,m=0;u>m;m++)v+=p[m][g];h[y[0]][g]=(l-v)/2}break;case"wiggle":for(var v=0,m=0;u>m;m++)v+=p[m][0];h[y[0]][0]=v=(l-v)/2;for(var g=1;n>g;g++){for(var C=0,k=0,L=c[g]-c[g-1],m=0;u>m;m++)C+=p[m][g];for(var m=0;u>m;m++){for(var A=(p[y[m]][g]-p[y[m]][g-1])/(2*L),O=0;m>O;O++)A+=(p[y[O]][g]-p[y[O]][g-1])/L;k+=A*p[y[m]][g]}h[y[0]][g]=v-=C?k/C*L:0}break;case"expand":for(var g=0;n>g;g++){h[y[0]][g]=0;for(var O=0,m=0;u>m;m++)O+=p[m][g];if(O){O=l/O;for(var m=0;u>m;m++)p[m][g]*=O}else{O=l/u;for(var m=0;u>m;m++)p[m][g]=O}}break;default:for(var g=0;n>g;g++)h[y[0]][g]=0}for(var g=0;n>g;g++)for(var v=h[y[0]][g],m=1;u>m;m++)v+=p[y[m-1]][g],h[y[m]][g]=v;var m=a.indexOf("-"),M=f?"h":"w",_=0>m?f?"l":"b":a.charAt(m+1),D=a.charAt(0);for(var P in i)i[P]=r;i[_]=function(e,t){return c[t]},i[D]=function(e,t){return h[e][t]},i[M]=function(e,t){return p[e][t]}},this.layer=(new pv.Mark).data(function(){return t[this.parent.index]}).top(e("t")).left(e("l")).right(e("r")).bottom(e("b")).width(e("w")).height(e("h")),this.layer.add=function(e){return n.add(pv.Panel).data(function(){return n.layers()}).add(e).extend(this)}},pv.Layout.Stack.prototype=pv.extend(pv.Layout).property("orient",String).property("offset",String).property("order",String).property("layers"),pv.Layout.Stack.prototype.defaults=(new pv.Layout.Stack).extend(pv.Layout.prototype.defaults).orient("bottom-left").offset("zero").layers([[]]),pv.Layout.Stack.prototype.$x=pv.Layout.Stack.prototype.$y=function(){return 0},pv.Layout.Stack.prototype.x=function(e){return this.$x=pv.functor(e),this},pv.Layout.Stack.prototype.y=function(e){return this.$y=pv.functor(e),this},pv.Layout.Stack.prototype.$values=pv.identity,pv.Layout.Stack.prototype.values=function(e){return this.$values=pv.functor(e),this},pv.Layout.Band=function(){function e(e){return function(){return t[e](this.index,this.parent.index)}}pv.Layout.call(this);var t,n,r=this,i=r.buildImplied,s=(new pv.Mark).data(function(){return n[this.parent.index]}).top(e("t")).left(e("l")).right(e("r")).bottom(e("b")).width(e("w")).height(e("h")).antialias(e("antialias"));this.buildImplied=function(e){i.call(this,e),t=Object.create(pv.Layout.Band.$baseItemProps),n=[];var r=e.layers,s=r.length;if(s>0){var o=e.orient,u=/^(top|bottom)\b/.test(o),a=this.parent[u?"height":"width"](),f=this._readData(r,n,e),l=f.length;"reverse"===e.bandOrder&&f.reverse();if("reverse"===e.order){n.reverse();for(var c=0;l>c;c++)f[c].items.reverse()}switch(e.layout){case"grouped":this._calcGrouped(f,s,e);break;case"stacked":this._calcStacked(f,s,a,e)}for(var h=e.hZero||0,p="stacked"===e.layout,d=0;l>d;d++)for(var v=f[d],m=p?Math.max(0,v.vertiMargin)/2:0,g=0;s>g;g++){var y=v.items[g];y.zero&&(y.h=h,y.y-=m+h/2)}this._bindItemProps(f,t,o,u)}};var o=this.item={end:this,add:function(e){return r.add(pv.Panel).data(function(){return r.layers()}).add(e).extend(s)},order:function(e){return r.order(e),this},w:function(e){return r.$iw=pv.functor(e),this},h:function(e){return r.$ih=pv.functor(e),this},horizontalRatio:function(e){return r.$ihorizRatio=pv.functor(e),this},verticalMargin:function(e){return r.$ivertiMargin=pv.functor(e),this}},u=this.band={end:this,w:function(e){return r.$bw=pv.functor(e),this},x:function(e){return r.$bx=pv.functor(e),this},order:function(e){return r.bandOrder(e),this},differentialControl:function(e){return r.$bDiffControl=pv.functor(e),this}};this.band.item=o,this.item.band=u},pv.Layout.Band.$baseItemProps=function(){var e=function(){return null};return{t:e,l:e,r:e,b:e,w:e,h:e}}(),pv.Layout.Band.prototype=pv.extend(pv.Layout).property("orient",String).property("layout",String).property("layers").property("yZero",Number).property("hZero",Number).property("verticalMode",String).property("horizontalMode",String).property("order",String).property("bandOrder",String),pv.Layout.Band.prototype.defaults=(new pv.Layout.Band).extend(pv.Layout.prototype.defaults).orient("bottom-left").layout("grouped").yZero(0).hZero(1.5).layers([[]]),pv.Layout.Band.prototype.$bx=pv.Layout.Band.prototype.$bw=pv.Layout.Band.prototype.$bDiffControl=pv.Layout.Band.prototype.$iw=pv.Layout.Band.prototype.$ih=pv.Layout.Band.prototype.$ivertiMargin=pv.functor(0),pv.Layout.Band.prototype.$ihorizRatio=pv.functor(.9),pv.Layout.Band.prototype.$values=pv.identity,pv.Layout.Band.prototype.values=function(e){return this.$values=pv.functor(e),this},pv.Layout.prototype._readData=function(e,t,n){var r,i=e.length,s=[],o=pv.Mark.stack,u=n.hZero,a={parent:{parent:this}};o.unshift(null);for(var f=0;i>f;f++){a.parent.index=f,o[0]=e[f];var l=t[f]=this.$values.apply(a.parent,o);f||(r=l.length),o.unshift(null);for(var c=0;r>c;c++){o[0]=l[c],a.index=c;var h=s[c];h||(h=s[c]={horizRatio:this.$ihorizRatio.apply(a,o),vertiMargin:this.$ivertiMargin.apply(a,o),w:this.$bw.apply(a,o),x:this.$bx.apply(a,o),diffControl:this.$bDiffControl?this.$bDiffControl.apply(a,o):0,items:[]});var p=this.$ih.apply(a,o),d=null!=p?Math.abs(p):p;h.items[f]={y:n.yZero||0,x:0,w:this.$iw.apply(a,o),h:d,zero:null!=d&&u>=d,dir:0>p?-1:1}}o.shift()}return o.shift(),s},pv.Layout.Band.prototype._calcGrouped=function(e,t,n){for(var r=0,i=e.length;i>r;r++){for(var s=e[r],o=s.items,u=s.w,a=s.horizRatio,f=0,l=0;t>l;l++)f+=o[l].w;1===t?a=1:a>0&&1>=a||(a=1);if(null==u)u=s.w=f/a;else if("expand"===n.horizontalMode){var c=a*u;if(f)for(var h=c/f,l=0;t>l;l++)o[l].w*=h;else for(var p=c/t,l=0;t>l;l++)o[l].w=p;f=c}for(var d=f/a,v=s.x-d/2,m=t>1?(d-f)/(t-1):0,l=0;t>l;l++){var g=o[l];g.x=v,v+=g.w+m,g.dir<0&&(g.y-=g.h)}}},pv.Layout.Band.prototype._calcStacked=function(e,t,n,r){var i,s=e.length;if("expand"===r.verticalMode)for(var o=0;s>o;o++){i=e[o].items;for(var u=null,a=0,f=0;t>f;f++){var l=i[f];l.dir=1;var c=l.h;null!=c&&(a++,u+=c)}if(a)if(u)for(var h=n/u,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=c*h)}else if(0==u)for(var f=0;t>f;f++)i[f].h=0;else for(var p=n/a,f=0;t>f;f++){var c=i[f].h;null!=c&&(i[f].h=p)}}for(var d=r.yZero,v=d,o=0;s>o;o++){var m=e[o],g=m.x,y=m.diffControl,b=0>y,w=Math.max(0,m.vertiMargin);i=m.items;var E=this._layoutItemsOfDir(1,b,i,w,g,v),S=null;E.existsOtherDir&&(S=this._layoutItemsOfDir(-1,b,i,w,g,v));if(y){if(1===Math.abs(y)){var x=v;v=E.yOffset,S&&(v-=x-S.yOffset)}}else v=d}},pv.Layout.Band.prototype._layoutItemsOfDir=function(e,t,n,r,i,s){for(var o=!1,u=r/2,a=t?-e:e,f=t,l=0,c=n.length;c>l;l+=1){var h=n[f?c-l-1:l];if(h.dir===e){var p=h.h||0;a>0?(h.y=s+u,s+=p):(h.y=s-(p-u),s-=p);var d=p-r;h.h=d>0?d:0,h.x=i-h.w/2}else o=!0}return{existsOtherDir:o,yOffset:s}},pv.Layout.Band.prototype._bindItemProps=function(e,t,n,r){var i=n.indexOf("-"),s=r?"h":"w",o=r?"w":"h",u=0>i?r?"l":"b":n.charAt(i+1),a=n.charAt(0);t[u]=function(t,n){return e[t].items[n].x},t[a]=function(t,n){return e[t].items[n].y},t[o]=function(t,n){return e[t].items[n].w},t[s]=function(t,n){return e[t].items[n].h||0},t.antialias=function(t,n){return e[t].items[n].zero}},pv.Layout.Treemap=function(){pv.Layout.Hierarchy.call(this),this.node.strokeStyle("#fff").fillStyle("rgba(31, 119, 180, .25)").width(function(e){return e.dx}).height(function(e){return e.dy}),this.label.visible(function(e){return!e.firstChild}).left(function(e){return e.x+e.dx/2}).top(function(e){return e.y+e.dy/2}).textAlign("center").textAngle(function(e){return e.dx>e.dy?0:-Math.PI/2}),(this.leaf=(new pv.Mark).extend(this.node).fillStyle(null).strokeStyle(null).visible(function(e){return!e.firstChild})).parent=this,delete this.link},pv.Layout.Treemap.prototype=pv.extend(pv.Layout.Hierarchy).property("round",Boolean).property("mode",String).property("order",String),pv.Layout.Treemap.prototype.defaults=(new pv.Layout.Treemap).extend(pv.Layout.Hierarchy.prototype.defaults).mode("squarify").order("ascending"),pv.Layout.Treemap.prototype.$size=function(e){return Number(e.nodeValue)},pv.Layout.Treemap.prototype.$padLeft=pv.Layout.Treemap.prototype.$padRight=pv.Layout.Treemap.prototype.$padBottom=pv.Layout.Treemap.prototype.$padTop=function(){return 0},pv.Layout.Treemap.prototype.size=function(e){return this.$size=pv.functor(e),this},pv.Layout.Treemap.prototype.padding=function(e){return e=pv.functor(e),this.paddingLeft(e).paddingRight(e).paddingTop(e).paddingBottom(e)},pv.Layout.Treemap.prototype.paddingLeft=function(e){return arguments.length?(this.$padLeft=pv.functor(e),this):this.$padLeft},pv.Layout.Treemap.prototype.paddingRight=function(e){return arguments.length?(this.$padRight=pv.functor(e),this):this.$padRight},pv.Layout.Treemap.prototype.paddingBottom=function(e){return arguments.length?(this.$padBottom=pv.functor(e),this):this.$padBottom},pv.Layout.Treemap.prototype.paddingTop=function(e){return arguments.length?(this.$padTop=pv.functor(e),this):this.$padTop},pv.Layout.Treemap.prototype.buildImplied=function(e){function t(e,t,n,r,i,s,o){for(var u=0,a=0;u<e.length;u++){var l=e[u];n?(l.x=r+a,l.y=i,a+=l.dx=f(s*l.size/t),l.dy=o):(l.x=r,l.y=i+a,l.dx=s,a+=l.dy=f(o*l.size/t))}l&&(n?l.dx+=s-a:l.dy+=o-a)}function n(e,t){for(var n=-1/0,r=1/0,i=0,s=0;s<e.length;s++){var o=e[s].size;r>o&&(r=o),o>n&&(n=o),i+=o}return i*=i,t*=t,Math.max(t*n/i,i/(t*r))}function r(e,r){function i(e){var n=c==v,r=pv.sum(e,a),i=v?f(r/v):0;return t(e,r,n,o,u,n?c:i,n?i:h),n?(u+=i,h-=i):(o+=i,c-=i),v=Math.min(c,h),n}var s=e.parentNode,o=e.x,u=e.y,c=e.dx,h=e.dy;s&&(o+=s.paddingLeft,u+=s.paddingTop,c+=-s.paddingLeft-s.paddingRight,h+=-s.paddingTop-s.paddingBottom);if("squarify"==l){var p=[],d=1/0,v=Math.min(c,h),m=c*h/e.size;if(!(e.size<=0)){e.visitBefore(function(e){e.size*=m});for(var g=e.childNodes.slice();g.length;){var y=g[g.length-1];if(y.size){p.push(y);var m=n(p,v);d>=m?(g.pop(),d=m):(p.pop(),i(p),p.length=0,d=1/0)}else g.pop()}if(i(p))for(var r=0;r<p.length;r++)p[r].dy+=h;else for(var r=0;r<p.length;r++)p[r].dx+=c}}else t(e.childNodes,e.size,"slice"==l?!0:"dice"==l?!1:1&r,o,u,c,h)}if(!pv.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var i=this,s=e.nodes,o=s[0],u=pv.Mark.stack,a=function(e){return e.size},f=e.round?Math.round:Number,l=e.mode;u.unshift(null);try{o.visitAfter(function(e,t){e.depth=t,e.x=e.y=e.dx=e.dy=0,u[0]=e,e.firstChild?(e.size=pv.sum(e.childNodes,a),e.paddingRight=+i.$padRight.apply(i,u)||0,e.paddingLeft=+i.$padLeft.apply(i,u)||0,e.paddingBottom=+i.$padBottom.apply(i,u)||0,e.paddingTop=+i.$padTop.apply(i,u)||0):e.size=i.$size.apply(i,u)})}finally{u.shift()}switch(e.order){case"ascending":o.sort(function(e,t){return e.size-t.size});break;case"descending":o.sort(function(e,t){return t.size-e.size});break;case"reverse":o.reverse()}o.x=0,o.y=0,o.dx=e.width,o.dy=e.height,o.visitBefore(r)}},pv.Layout.Tree=function(){pv.Layout.Hierarchy.call(this)},pv.Layout.Tree.prototype=pv.extend(pv.Layout.Hierarchy).property("group",Number).property("breadth",Number).property("depth",Number).property("orient",String),pv.Layout.Tree.prototype.defaults=(new pv.Layout.Tree).extend(pv.Layout.Hierarchy.prototype.defaults).group(1).breadth(15).depth(60).orient("top"),pv.Layout.Tree.prototype.buildImplied=function(e){function t(e){var n,i,s;if(e.firstChild){n=e.firstChild,i=e.lastChild,s=n;for(var o=n;o;o=o.nextSibling)t(o),s=r(o,s);u(e);var a=.5*(n.prelim+i.prelim);(n=e.previousSibling)?(e.prelim=n.prelim+f(e.depth,!0),e.mod=e.prelim-a):e.prelim=a}else(n=e.previousSibling)&&(e.prelim=n.prelim+f(e.depth,!0))}function n(e,t,r){e.breadth=e.prelim+t,t+=e.mod;for(var i=e.firstChild;i;i=i.nextSibling)n(i,t,r)}function r(e,t){var n=e.previousSibling;if(n){for(var r=e,u=e,l=n,c=e.parentNode.firstChild,h=r.mod,p=u.mod,d=l.mod,v=c.mod,m=s(l),g=i(r);m&&g;){l=m,r=g,c=i(c),u=s(u),u.ancestor=e;var y=l.prelim+d-(r.prelim+h)+f(l.depth,!1);y>0&&(o(a(l,e,t),e,y),h+=y,p+=y),d+=l.mod,h+=r.mod,v+=c.mod,p+=u.mod,m=s(l),g=i(r)}m&&!s(u)&&(u.thread=m,u.mod+=d-p),g&&!i(c)&&(c.thread=g,c.mod+=h-v,t=e)}return t}function i(e){return e.firstChild||e.thread}function s(e){return e.lastChild||e.thread}function o(e,t,n){var r=t.number-e.number;t.change-=n/r,t.shift+=n,e.change+=n/r,t.prelim+=n,t.mod+=n}function u(e){for(var t=0,n=0,r=e.lastChild;r;r=r.previousSibling)r.prelim+=t,r.mod+=t,n+=r.change,t+=r.shift+n}function a(e,t,n){return e.ancestor.parentNode==t.parentNode?e.ancestor:n}function f(e,t){return(t?1:g+1)/("radial"==d?e:1)}function l(e){return"radial"==d?e.breadth/v:0}function c(e){switch(d){case"left":return e.depth;case"right":return y-e.depth;case"top":case"bottom":return e.breadth+y/2;case"radial":return y/2+e.depth*Math.cos(l(e))}}function h(e){switch(d){case"left":case"right":return e.breadth+b/2;case"top":return e.depth;case"bottom":return b-e.depth;case"radial":return b/2+e.depth*Math.sin(l(e))}}if(!pv.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var p=e.nodes,d=e.orient,v=e.depth,m=e.breadth,g=e.group,y=e.width,b=e.height,w=p[0];w.visitAfter(function(e,t){e.ancestor=e,e.prelim=0,e.mod=0,e.change=0,e.shift=0,e.number=e.previousSibling?e.previousSibling.number+1:0,e.depth=t}),t(w),n(w,-w.prelim,0),w.visitAfter(function(e){e.breadth*=m,e.depth*=v,e.midAngle=l(e),e.x=c(e),e.y=h(e),e.firstChild&&(e.midAngle+=Math.PI),delete e.breadth,delete e.depth,delete e.ancestor,delete e.prelim,delete e.mod,delete e.change,delete e.shift,delete e.number,delete e.thread})}},pv.Layout.Indent=function(){pv.Layout.Hierarchy.call(this),this.link.interpolate("step-after")},pv.Layout.Indent.prototype=pv.extend(pv.Layout.Hierarchy).property("depth",Number).property("breadth",Number),pv.Layout.Indent.prototype.defaults=(new pv.Layout.Indent).extend(pv.Layout.Hierarchy.prototype.defaults).depth(15).breadth(15),pv.Layout.Indent.prototype.buildImplied=function(e){function t(e,n,u){e.x=s+u++*i,e.y=o+n++*r,e.midAngle=0;for(var a=e.firstChild;a;a=a.nextSibling)n=t(a,n,u);return n}if(!pv.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var n=e.nodes,r=e.breadth,i=e.depth,s=0,o=0;t(n[0],1,1)}},pv.Layout.Pack=function(){pv.Layout.Hierarchy.call(this),this.node.shapeRadius(function(e){return e.radius}).strokeStyle("rgb(31, 119, 180)").fillStyle("rgba(31, 119, 180, .25)"),this.label.textAlign("center"),delete this.link},pv.Layout.Pack.prototype=pv.extend(pv.Layout.Hierarchy).property("spacing",Number).property("order",String),pv.Layout.Pack.prototype.defaults=(new pv.Layout.Pack).extend(pv.Layout.Hierarchy.prototype.defaults).spacing(1).order("ascending"),pv.Layout.Pack.prototype.$radius=function(){return 1},pv.Layout.Pack.prototype.size=function(e){return this.$radius="function"==typeof e?function(){return Math.sqrt(e.apply(this,arguments))}:(e=Math.sqrt(e),function(){return e}),this},pv.Layout.Pack.prototype.buildImplied=function(e){function t(e){var t=pv.Mark.stack;t.unshift(null);for(var n=0,r=e.length;r>n;n++){var i=e[n];i.firstChild||(i.radius=o.$radius.apply(o,(t[0]=i,t)))}t.shift()}function n(t){for(var i=[],s=t.firstChild;s;s=s.nextSibling)s.firstChild&&(s.radius=n(s)),s.n=s.p=s,i.push(s);switch(e.order){case"ascending":i.sort(function(e,t){return e.radius-t.radius});break;case"descending":i.sort(function(e,t){return t.radius-e.radius});break;case"reverse":i.reverse()}return r(i)}function r(t){function n(e){h=Math.min(e.x-e.radius,h),p=Math.max(e.x+e.radius,p),d=Math.min(e.y-e.radius,d),v=Math.max(e.y+e.radius,v)}function r(e,t){var n=e.n;e.n=t,t.p=e,t.n=n,n.p=t}function s(e,t){e.n=t,t.p=e}function o(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.radius+t.radius;return i*i-n*n-r*r>.001}var u,a,f,l,c,h=1/0,p=-1/0,d=1/0,v=-1/0;u=t[0],u.x=-u.radius,u.y=0,n(u);if(t.length>1){a=t[1],a.x=a.radius,a.y=0,n(a);if(t.length>2){f=t[2],i(u,a,f),n(f),r(u,f),u.p=f,r(f,a),a=u.n;for(var m=3;m<t.length;m++){i(u,a,f=t[m]);var g=0,y=1,b=1;for(l=a.n;l!=a;l=l.n,y++)if(o(l,f)){g=1;break}if(1==g)for(c=u.p;c!=l.p;c=c.p,b++)if(o(c,f)){y>b&&(g=-1,l=c);break}0==g?(r(u,f),a=f,n(f)):g>0?(s(u,l),a=l,m--):0>g&&(s(l,a),u=l,m--)}}}for(var w=(h+p)/2,E=(d+v)/2,S=0,m=0;m<t.length;m++){var x=t[m];x.x-=w,x.y-=E,S=Math.max(S,x.radius+Math.sqrt(x.x*x.x+x.y*x.y))}return S+e.spacing}function i(e,t,n){var r=t.radius+n.radius,i=e.radius+n.radius,s=t.x-e.x,o=t.y-e.y,u=Math.sqrt(s*s+o*o),a=(i*i+u*u-r*r)/(2*i*u),f=Math.acos(a),l=a*i,c=Math.sin(f)*i;s/=u,o/=u,n.x=e.x+l*s+c*o,n.y=e.y+l*o-c*s}function s(e,t,n,r){for(var i=e.firstChild;i;i=i.nextSibling)i.x+=e.x,i.y+=e.y,s(i,t,n,r);e.x=t+r*e.x,e.y=n+r*e.y,e.radius*=r}if(!pv.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var o=this,u=e.nodes,a=u[0];t(u),a.x=0,a.y=0,a.radius=n(a);var f=this.width(),l=this.height(),c=1/Math.max(2*a.radius/f,2*a.radius/l);s(a,f/2,l/2,c)}},pv.Layout.Force=function(){pv.Layout.Network.call(this),this.link.lineWidth(function(e,t){return 1.5*Math.sqrt(t.linkValue)}),this.label.textAlign("center")},pv.Layout.Force.prototype=pv.extend(pv.Layout.Network).property("bound",Boolean).property("iterations",Number).property("dragConstant",Number).property("chargeConstant",Number).property("chargeMinDistance",Number).property("chargeMaxDistance",Number).property("chargeTheta",Number).property("springConstant",Number).property("springDamping",Number).property("springLength",Number),pv.Layout.Force.prototype.defaults=(new pv.Layout.Force).extend(pv.Layout.Network.prototype.defaults).dragConstant(.1).chargeConstant(-40).chargeMinDistance(2).chargeMaxDistance(500).chargeTheta(.9).springConstant(.1).springDamping(.3).springLength(20),pv.Layout.Force.prototype.buildImplied=function(e){function t(e){return e.fix?1:e.vx*e.vx+e.vy*e.vy}if(pv.Layout.Network.prototype.buildImplied.call(this,e)){var n=e.$force;n&&(n.next=this.binds.$force,this.binds.$force=n)}else{for(var r,i=this,s=e.nodes,o=e.links,u=e.iterations,a=e.width,f=e.height,l=0;l<s.length;l++)r=s[l],isNaN(r.x)&&(r.x=a/2+40*Math.random()-20),isNaN(r.y)&&(r.y=f/2+40*Math.random()-20);var c=pv.simulation(s);c.force(pv.Force.drag(e.dragConstant)),c.force(pv.Force.charge(e.chargeConstant).domain(e.chargeMinDistance,e.chargeMaxDistance).theta(e.chargeTheta)),c.force(pv.Force.spring(e.springConstant).damping(e.springDamping).length(e.springLength).links(o)),c.constraint(pv.Constraint.position()),e.bound&&c.constraint(pv.Constraint.bound().x(6,a-6).y(6,f-6));if(null==u)c.step(),c.step(),e.$force=this.binds.$force={next:this.binds.$force,nodes:s,min:1e-4*(o.length+1),sim:c},this.$timer||(this.$timer=setInterval(function(){for(var e=!1,n=i.binds.$force;n;n=n.next)pv.max(n.nodes,t)>n.min&&(n.sim.step(),e=!0);e&&i.render()},42));else for(var l=0;u>l;l++)c.step()}},pv.Layout.Cluster=function(){pv.Layout.Hierarchy.call(this);var e,t=this.buildImplied;this.buildImplied=function(n){t.call(this,n),e=/^(top|bottom)$/.test(n.orient)?"step-before":/^(left|right)$/.test(n.orient)?"step-after":"linear"},this.link.interpolate(function(){return e})},pv.Layout.Cluster.prototype=pv.extend(pv.Layout.Hierarchy).property("group",Number).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),pv.Layout.Cluster.prototype.defaults=(new pv.Layout.Cluster).extend(pv.Layout.Hierarchy.prototype.defaults).group(0).orient("top"),pv.Layout.Cluster.prototype.buildImplied=function(e){if(!pv.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var t,n,r=e.nodes[0],i=e.group,s=0,o=.5-i/2,u=void 0;r.visitAfter(function(e){e.firstChild?e.depth=1+pv.max(e.childNodes,function(e){return e.depth}):(i&&u!=e.parentNode&&(u=e.parentNode,s+=i),s++,e.depth=0)}),t=1/s,n=1/r.depth;var u=void 0;r.visitAfter(function(e){e.firstChild?e.breadth=pv.mean(e.childNodes,function(e){return e.breadth}):(i&&u!=e.parentNode&&(u=e.parentNode,o+=i),e.breadth=t*o++),e.depth=1-e.depth*n}),r.visitAfter(function(e){e.minBreadth=e.firstChild?e.firstChild.minBreadth:e.breadth-t/2,e.maxBreadth=e.firstChild?e.lastChild.maxBreadth:e.breadth+t/2}),r.visitBefore(function(e){e.minDepth=e.parentNode?e.parentNode.maxDepth:0,e.maxDepth=e.parentNode?e.depth+r.depth:e.minDepth+2*r.depth}),r.minDepth=-n,pv.Layout.Hierarchy.NodeLink.buildImplied.call(this,e)}},pv.Layout.Cluster.Fill=function(){pv.Layout.Cluster.call(this),pv.Layout.Hierarchy.Fill.constructor.call(this)},pv.Layout.Cluster.Fill.prototype=pv.extend(pv.Layout.Cluster),pv.Layout.Cluster.Fill.prototype.buildImplied=function(e){pv.Layout.Cluster.prototype.buildImplied.call(this,e)||pv.Layout.Hierarchy.Fill.buildImplied.call(this,e)},pv.Layout.Partition=function(){pv.Layout.Hierarchy.call(this)},pv.Layout.Partition.prototype=pv.extend(pv.Layout.Hierarchy).property("order",String).property("orient",String).property("innerRadius",Number).property("outerRadius",Number),pv.Layout.Partition.prototype.defaults=(new pv.Layout.Partition).extend(pv.Layout.Hierarchy.prototype.defaults).orient("top"),pv.Layout.Partition.prototype.$size=function(){return 1},pv.Layout.Partition.prototype.size=function(e){return this.$size=e,this},pv.Layout.Partition.prototype.buildImplied=function(e){if(!pv.Layout.Hierarchy.prototype.buildImplied.call(this,e)){var t=this,n=e.nodes[0],r=pv.Mark.stack,i=0;r.unshift(null),n.visitAfter(function(e,n){n>i&&(i=n),e.size=e.firstChild?pv.sum(e.childNodes,function(e){return e.size}):t.$size.apply(t,(r[0]=e,r))}),r.shift();switch(e.order){case"ascending":n.sort(function(e,t){return e.size-t.size});break;case"descending":n.sort(function(e,t){return t.size-e.size})}n.minBreadth=0,n.breadth=.5,n.maxBreadth=1,n.visitBefore(function(e){for(var t=e.minBreadth,n=e.maxBreadth-t,r=e.firstChild;r;r=r.nextSibling)r.minBreadth=t,t+=r.size/e.size*n,r.maxBreadth=t,r.breadth=(t+r.minBreadth)/2}),n.visitAfter(function(e,t){e.minDepth=(t-1)/i,e.maxDepth=e.depth=t/i}),pv.Layout.Hierarchy.NodeLink.buildImplied.call(this,e)}},pv.Layout.Partition.Fill=function(){pv.Layout.Partition.call(this),pv.Layout.Hierarchy.Fill.constructor.call(this)},pv.Layout.Partition.Fill.prototype=pv.extend(pv.Layout.Partition),pv.Layout.Partition.Fill.prototype.buildImplied=function(e){pv.Layout.Partition.prototype.buildImplied.call(this,e)||pv.Layout.Hierarchy.Fill.buildImplied.call(this,e)},pv.Layout.Arc=function(){pv.Layout.Network.call(this);var e,t,n,r=this.buildImplied;this.buildImplied=function(i){r.call(this,i),t=i.directed,e="radial"==i.orient?"linear":"polar",n="right"==i.orient||"top"==i.orient},this.link.data(function(e){var r=e.sourceNode,i=e.targetNode;return n!=(t||r.breadth<i.breadth)?[r,i]:[i,r]}).interpolate(function(){return e})},pv.Layout.Arc.prototype=pv.extend(pv.Layout.Network).property("orient",String).property("directed",Boolean),pv.Layout.Arc.prototype.defaults=(new pv.Layout.Arc).extend(pv.Layout.Network.prototype.defaults).orient("bottom"),pv.Layout.Arc.prototype.sort=function(e){return this.$sort=e,this},pv.Layout.Arc.prototype.buildImplied=function(e){function t(e){switch(s){case"top":return-Math.PI/2;case"bottom":return Math.PI/2;case"left":return Math.PI;case"right":return 0;case"radial":return 2*(e-.25)*Math.PI}}function n(e){switch(s){case"top":case"bottom":return e*a;case"left":return 0;case"right":return a;case"radial":return a/2+l*Math.cos(t(e))}}function r(e){switch(s){case"top":return 0;case"bottom":return f;case"left":case"right":return e*f;case"radial":return f/2+l*Math.sin(t(e))}}if(!pv.Layout.Network.prototype.buildImplied.call(this,e)){var i=e.nodes,s=e.orient,o=this.$sort,u=pv.range(i.length),a=e.width,f=e.height,l=Math.min(a,f)/2;o&&u.sort(function(e,t){return o(i[e],i[t])});for(var c=0;c<i.length;c++){var h=i[u[c]],p=h.breadth=(c+.5)/i.length;h.x=n(p),h.y=r(p),h.midAngle=t(p)}}},pv.Layout.Horizon=function(){pv.Layout.call(this);var e,t,n,r,i,s,o=this,u=this.buildImplied;this.buildImplied=function(o){u.call(this,o),e=o.bands,t=o.mode,n=Math.round(("color"==t?.5:1)*o.height),r=o.backgroundStyle,i=pv.ramp(r,o.negativeStyle).domain(0,e),s=pv.ramp(r,o.positiveStyle).domain(0,e)};var e=(new pv.Panel).data(function(){return pv.range(2*e)}).overflow("hidden").height(function(){return n}).top(function(e){return"color"==t?(1&e)*n:0}).fillStyle(function(e){return e?null:r});this.band=(new pv.Mark).top(function(e,r){return"mirror"==t&&1&r?(r+1>>1)*n:null}).bottom(function(e,r){return"mirror"==t?1&r?null:(r+1>>1)*-n:(1&r||-1)*(r+1>>1)*n}).fillStyle(function(e,t){return(1&t?i:s)((t>>1)+1)}),this.band.add=function(t){return o.add(pv.Panel).extend(e).add(t).extend(this)}},pv.Layout.Horizon.prototype=pv.extend(pv.Layout).property("bands",Number).property("mode",String).property("backgroundStyle",pv.fillStyle).property("positiveStyle",pv.fillStyle).property("negativeStyle",pv.fillStyle),pv.Layout.Horizon.prototype.defaults=(new pv.Layout.Horizon).extend(pv.Layout.prototype.defaults).bands(2).mode("offset").backgroundStyle("white").positiveStyle("#1f77b4").negativeStyle("#d62728"),pv.Layout.Rollup=function(){pv.Layout.Network.call(this);var e,t,n=this,r=n.buildImplied;this.buildImplied=function(n){r.call(this,n),e=n.$rollup.nodes,t=n.$rollup.links},this.node.data(function(){return e}).shapeSize(function(e){return 20*e.nodes.length}),this.link.interpolate("polar").eccentricity(.8),this.link.add=function(e){return n.add(pv.Panel).data(function(){return t}).add(e).extend(this)}},pv.Layout.Rollup.prototype=pv.extend(pv.Layout.Network).property("directed",Boolean),pv.Layout.Rollup.prototype.x=function(e){return this.$x=pv.functor(e),this},pv.Layout.Rollup.prototype.y=function(e){return this.$y=pv.functor(e),this},pv.Layout.Rollup.prototype.buildImplied=function(e){function t(e){return o[e]+","+u[e]}if(!pv.Layout.Network.prototype.buildImplied.call(this,e)){var n=e.nodes,r=e.links,i=e.directed,s=n.length,o=[],u=[],a=0,f={},l={},c=pv.Mark.stack,h={parent:this};c.unshift(null);for(var p=0;s>p;p++)h.index=p,c[0]=n[p],o[p]=this.$x.apply(h,c),u[p]=this.$y.apply(h,c);c.shift();for(var p=0;p<n.length;p++){var d=t(p),v=f[d];v||(v=f[d]=Object.create(n[p]),v.index=a++,v.x=o[p],v.y=u[p],v.nodes=[]),v.nodes.push(n[p])}for(var p=0;p<r.length;p++){var m=r[p].sourceNode,g=r[p].targetNode,y=f[t(m.index)],b=f[t(g.index)],w=!i&&y.index>b.index,E=w?b.index+","+y.index:y.index+","+b.index,S=l[E];S||(S=l[E]={sourceNode:y,targetNode:b,linkValue:0,links:[]}),S.links.push(r[p]),S.linkValue+=r[p].linkValue}e.$rollup={nodes:pv.values(f),links:pv.values(l)}}},pv.Layout.Matrix=function(){pv.Layout.Network.call(this);var e,t,n,r,i,s=this,o=s.buildImplied;this.buildImplied=function(s){o.call(this,s),e=s.nodes.length,t=s.width/e,n=s.height/e,r=s.$matrix.labels,i=s.$matrix.pairs},this.link.data(function(){return i}).left(function(){return t*(this.index%e)}).top(function(){return n*Math.floor(this.index/e)}).width(function(){return t}).height(function(){return n}).lineWidth(1.5).strokeStyle("#fff").fillStyle(function(e){return e.linkValue?"#555":"#eee"}).parent=this,delete this.link.add,this.label.data(function(){return r}).left(function(){return 1&this.index?t*((this.index>>1)+.5):0}).top(function(){return 1&this.index?0:n*((this.index>>1)+.5)}).textMargin(4).textAlign(function(){return 1&this.index?"left":"right"}).textAngle(function(){return 1&this.index?-Math.PI/2:0}),delete this.node},pv.Layout.Matrix.prototype=pv.extend(pv.Layout.Network).property("directed",Boolean),pv.Layout.Matrix.prototype.sort=function(e){return this.$sort=e,this},pv.Layout.Matrix.prototype.buildImplied=function(e){if(!pv.Layout.Network.prototype.buildImplied.call(this,e)){var t=e.nodes,n=e.links,r=this.$sort,i=t.length,s=pv.range(i),o=[],u=[],a={};e.$matrix={labels:o,pairs:u},r&&s.sort(function(e,n){return r(t[e],t[n])});for(var f=0;i>f;f++)for(var l=0;i>l;l++){var c=s[f],h=s[l],p={row:f,col:l,sourceNode:t[c],targetNode:t[h],linkValue:0};u.push(a[c+"."+h]=p)}for(var f=0;i>f;f++){var c=s[f];o.push(t[c],t[c])}for(var f=0;f<n.length;f++){var d=n[f],v=d.sourceNode.index,m=d.targetNode.index,g=d.linkValue;a[v+"."+m].linkValue+=g,e.directed||(a[m+"."+v].linkValue+=g)}}},pv.Layout.Bullet=function(){pv.Layout.call(this);var e,t,n,r,i,s=this,o=s.buildImplied,u=s.x=pv.Scale.linear();this.buildImplied=function(s){o.call(this,i=s),e=s.orient,t=/^left|right$/.test(e),n=pv.ramp("#bbb","#eee").domain(0,Math.max(1,i.ranges.length-1)),r=pv.ramp("steelblue","lightsteelblue").domain(0,Math.max(1,i.measures.length-1))},(this.range=new pv.Mark).data(function(){return i.ranges}).reverse(!0).left(function(){return"left"==e?0:null}).top(function(){return"top"==e?0:null}).right(function(){return"right"==e?0:null}).bottom(function(){return"bottom"==e?0:null}).width(function(e){return t?u(e):null}).height(function(e){return t?null:u(e)}).fillStyle(function(){return n(this.index)}).antialias(!1).parent=s,(this.measure=new pv.Mark).extend(this.range).data(function(){return i.measures}).left(function(){return"left"==e?0:t?null:this.parent.width()/3.25}).top(function(){return"top"==e?0:t?this.parent.height()/3.25:null}).right(function(){return"right"==e?0:t?null:this.parent.width()/3.25}).bottom(function(){return"bottom"==e?0:t?this.parent.height()/3.25:null}).fillStyle(function(){return r(this.index)}).parent=s,(this.marker=new pv.Mark).data(function(){return i.markers}).left(function(n){return"left"==e?u(n):t?null:this.parent.width()/2}).top(function(n){return"top"==e?u(n):t?this.parent.height()/2:null}).right(function(t){return"right"==e?u(t):null}).bottom(function(t){return"bottom"==e?u(t):null}).strokeStyle("black").shape("bar").shapeAngle(function(){return t?0:Math.PI/2}).parent=s,(this.tick=new pv.Mark).data(function(){return u.ticks(7)}).left(function(t){return"left"==e?u(t):null}).top(function(t){return"top"==e?u(t):null}).right(function(n){return"right"==e?u(n):t?null:-6}).bottom(function(n){return"bottom"==e?u(n):t?-8:null}).height(function(){return t?6:null}).width(function(){return t?null:6}).parent=s},pv.Layout.Bullet.prototype=pv.extend(pv.Layout).property("orient",String).property("ranges").property("markers").property("measures").property("minimum").property("maximum"),pv.Layout.Bullet.prototype.defaults=(new pv.Layout.Bullet).extend(pv.Layout.prototype.defaults).orient("left").ranges([]).markers([]).measures([]),pv.Layout.Bullet.prototype._originIsZero=!0,pv.Layout.Bullet.prototype.originIsZero=function(e){return arguments.length?this._originIsZero=!!e:this._originIsZero},pv.Layout.Bullet.prototype.buildImplied=function(e){pv.Layout.prototype.buildImplied.call(this,e);var t,n=this.parent[/^left|right$/.test(e.orient)?"width":"height"](),r=e.maximum,i=e.minimum,s=1e-10;null==r?(t=[].concat(e.ranges,e.markers,e.measures),r=pv.max(t)):r=+r,null==i?(t||(t=[].concat(e.ranges,e.markers,e.measures)),i=pv.min(t),i=.95*i):i=+i,(i>r||s>r-i)&&(i=Math.abs(r)<s?-0.1:.99*r),this._originIsZero&&i*r>0&&(i>0?i=0:r=0),e.minimum=i,e.maximum=r,this.x.domain(i,r).range(0,n)},pv.Behavior={},pv.Behavior.dragBase=function(e){function t(t){l||(l=!0,this.addEventInterceptor("click",o,!0));if(!u){var s=this.root.scene.$g;u=[[s,"mousemove",pv.listen(s,"mousemove",n)],[s,"mouseup",pv.listen(s,"mouseup",r)],[document,"mousemove",pv.listen(document,"mousemove",n)],[document,"mouseup",pv.listen(document,"mouseup",r)]]}var h=arguments[arguments.length-1];a=h.target,f=!1,h.stopPropagation();var p=this.mouse(),d=this.scene,v=this.index;c=d[v].drag={phase:"start",m:p,m1:p,m2:null,d:t,scene:d,index:v},h=i(h,c),e.dragstart.call(this,h);var m=c.m;m!==p&&(p.x=m.x,p.y=m.y)}function n(t){if(c){c.phase="move",t.stopPropagation(),t=i(t,c);var n=c.scene;n.mark.context(n,c.index,function(){var n=c.m2||c.m1,r=this.mouse();if(!(n&&r.distance2(n).dist2<=2)){c.m=c.m2=r,e.drag.call(this,t);var i=c.m;i!==r&&(r.x=i.x,r.y=i.y)}})}}function r(t){if(c){c.phase="end";var n=c.m2,r=n&&c.m1.distance2(n).dist2>.1;c.canceled=!r,f=r&&a===t.target,f||(a=null),t.stopPropagation(),t=i(t,c),u&&(u.forEach(function(e){pv.unlisten.apply(pv,e)}),u=null);var s=c.scene,o=c.index;try{s.mark.context(s,o,function(){e.dragend.call(this,t)})}finally{c=null,delete s[o].drag}}}function i(e,t){try{return e.drag=t,e}catch(n){}var r={};for(var i in e){var o=e[i];r[i]="function"!=typeof o?o:s(o,e)}return r._sourceEvent=e,r}function s(e,t){return function(){return e.apply(t,arguments)}}function o(e,t){if(f&&a===t.target)return f=!1,a=null,!1}var u,a,f,l,c;return e.autoRender=!0,e.positionConstraint=null,e.bound=function(e,t){return Math.max(c.min[t],Math.min(c.max[t],e))},t.autoRender=function(n){return arguments.length?(e.autoRender=!!n,t):e.autoRender},t.positionConstraint=function(n){return arguments.length?(e.positionConstraint=n,t):e.positionConstraint},t},pv.Behavior.drag=function(){var e,t=null,n=1,r=1,i={dragstart:function(t){var n=t.drag;n.type="drag";var r=n.d,s=pv.vector(r.x,r.y);r.fix=s,r.drag=n,e=s.minus(n.m1);var o=this.parent;n.max={x:o.width()-(r.dx||0),y:o.height()-(r.dy||0)},n.min={x:0,y:0},i.autoRender&&this.render(),pv.Mark.dispatch("dragstart",n.scene,n.index,t)},drag:function(t){var s=t.drag,o=s.m2,u=s.d;s.m=e.plus(o);var a=i.positionConstraint;a&&a(s);var f=s.m;n&&(u.x=u.fix.x=i.bound(f.x,"x")),r&&(u.y=u.fix.y=i.bound(f.y,"y")),i.autoRender&&this.render(),pv.Mark.dispatch("drag",s.scene,s.index,t)},dragend:function(t){var n=t.drag,r=n.d;r.fix=null,e=null,i.autoRender&&this.render();try{pv.Mark.dispatch("dragend",n.scene,n.index,t)}finally{delete r.drag}}},s=pv.Behavior.dragBase(i);return s.collapse=function(e){if(arguments.length){t=String(e);switch(t){case"y":n=1,r=0;break;case"x":n=0,r=1;break;default:n=1,r=1}return s}return t},s},pv.Behavior.point=function(e){function t(e,n){for(var r=e[n],i={cost:1/0},s=(r.visible?r.children.length:0)-1;s>=0;s--){var a,f=r.children[s],l=f.mark;if("panel"==l.type){l.scene=f;for(var c=f.length-1;c>=0;c--)l.index=c,a=t(f,c),a.cost<i.cost&&(i=a);delete l.scene,delete l.index}else if(l.$handlers.point)for(var h=l.mouse(),c=f.length-1;c>=0;c--){var p=f[c],d=h.x-p.left-(p.width||0)/2,v=h.y-p.top-(p.height||0)/2,m=o*d*d+u*v*v;m<i.cost&&(i.distance=d*d+v*v,i.cost=m,i.scene=f,i.index=c)}}return i}function n(e){var n=t(this.scene,this.index);(1/0==n.cost||n.distance>f)&&(n=null);if(i){if(n&&i.scene==n.scene&&i.index==n.index)return;pv.Mark.dispatch("unpoint",i.scene,i.index,e)}if(i=n)pv.Mark.dispatch("point",n.scene,n.index,e),a||"panel"!==this.type?pv.listen(this.root.canvas(),"mouseout",r):(a=this,a.event("mouseout",function(){var e=arguments[arguments.length-1];r.call(a.scene.$g,e)}))}function r(e){i&&!pv.ancestor(this,e.relatedTarget)&&(pv.Mark.dispatch("unpoint",i.scene,i.index,e),i=null)}var i,s=null,o=1,u=1,a=null,f=arguments.length?e*e:900;return n.collapse=function(e){if(arguments.length){s=String(e);switch(s){case"y":o=1,u=0;break;case"x":o=0,u=1;break;default:o=1,u=1}return n}return s},n},pv.Behavior.select=function(){var e=null,t=1,n=1,r=!1,i={dragstart:function(e){var s=e.drag;s.type="select";var o=s.d;o.drag=s,s.max={x:this.width(),y:this.height()},s.min={x:0,y:0};var u=i.positionConstraint;u&&(s.m=s.m.clone(),u(s));var a=s.m;t&&(o.x=i.bound(a.x,"x"),r||(o.dx=0)),n&&(o.y=i.bound(a.y,"y"),r||(o.dy=0)),pv.Mark.dispatch("selectstart",s.scene,s.index,e)},drag:function(e){var s=e.drag,o=s.m1,u=s.d;s.max.x=this.width(),s.max.y=this.height();var a=i.positionConstraint;a&&(s.m=s.m.clone(),a(s));var f=s.m;if(t){var l=Math.min(o.x,f.x);l=i.bound(l,"x"),u.x=l;if(!r){var c=Math.max(f.x,o.x);c=i.bound(c,"x"),u.dx=c-l}}if(n){var h=Math.min(o.y,f.y);h=i.bound(h,"y"),u.y=h;if(!r){var p=Math.max(f.y,o.y);p=i.bound(p,"y"),u.dy=p-h}}i.autoRender&&this.render(),pv.Mark.dispatch("select",s.scene,s.index,e)},dragend:function(e){var t=e.drag;try{pv.Mark.dispatch("selectend",t.scene,t.index,e)}finally{var n=t.d;delete n.drag}}},s=pv.Behavior.dragBase(i);return s.collapse=function(r){if(arguments.length){e=String(r);switch(e){case"y":t=1,n=0;break;case"x":t=0,n=1;break;default:t=1,n=1}return s}return e},s.preserveLength=function(e){return arguments.length?(r=!!e,s):r},s},pv.Behavior.resize=function(e){var t=!1,n="left"===e||"right"===e,r={dragstart:function(t){var n=t.drag;n.type="resize";var r=n.m1,i=n.d;i.drag=n;switch(e){case"left":r.x=i.x+i.dx;break;case"right":r.x=i.x;break;case"top":r.y=i.y+i.dy;break;case"bottom":r.y=i.y}var s=this.parent;n.max={x:s.width(),y:s.height()},n.min={x:0,y:0},pv.Mark.dispatch("resizestart",n.scene,n.index,t)},drag:function(e){var i=e.drag,s=i.m1,o=r.positionConstraint;o&&(i.m=i.m.clone(),o(i));var u=i.m,a=i.d;if(!t||n){var f=Math.min(s.x,u.x),l=Math.max(u.x,s.x);f=r.bound(f,"x"),l=r.bound(l,"x"),a.x=f,a.dx=l-f}if(!t||!n){var c=Math.min(s.y,u.y),h=Math.max(u.y,s.y);f=r.bound(c,"y"),l=r.bound(h,"y"),a.y=c,a.dy=h-c}r.autoRender&&this.render(),pv.Mark.dispatch("resize",i.scene,i.index,e)},dragend:function(e){var t=e.drag;max=null;try{pv.Mark.dispatch("resizeend",t.scene,t.index,e)}finally{var n=t.d;delete n.drag}}},i=pv.Behavior.dragBase(r);return i.preserveOrtho=function(e){return arguments.length?(t=!!e,i):t},i},pv.Behavior.pan=function(){function e(){i=this.index,r=this.scene,o=pv.vector(pv.event.pageX,pv.event.pageY),s=this.transform(),u=1/(s.k*this.scale),a&&(a={x:(1-s.k)*this.width(),y:(1-s.k)*this.height()})}function t(e){r&&(r.mark.context(r,i,function(){var e=(pv.event.pageX-o.x)*u,t=(pv.event.pageY-o.y)*u,n=s.translate(e,t);a&&(n.x=Math.max(a.x,Math.min(0,n.x)),n.y=Math.max(a.y,Math.min(0,n.y))),this.transform(n).render()}),pv.Mark.dispatch("pan",r,i,e))}function n(){r=null}var r,i,s,o,u,a;return e.bound=function(e){return arguments.length?(a=Boolean(e),this):Boolean(a)},pv.listen(window,"mousemove",t),pv.listen(window,"mouseup",n),e},pv.Behavior.zoom=function(e){function t(t){var r=this.mouse(),i=pv.event.wheel*e,s=this.transform().translate(r.x,r.y).scale(0>i?1e3/(1e3-i):(1e3+i)/1e3).translate(-r.x,-r.y);n&&(s.k=Math.max(1,s.k),s.x=Math.max((1-s.k)*this.width(),Math.min(0,s.x)),s.y=Math.max((1-s.k)*this.height(),Math.min(0,s.y))),this.transform(s).render(),pv.Mark.dispatch("zoom",this.scene,this.index,t)}var n;return arguments.length||(e=1/48),t.bound=function(e){return arguments.length?(n=Boolean(e),this):Boolean(n)},t},pv.Geo=function(){},pv.Geo.projections={mercator:{project:function(e){return{x:e.lng/180,y:e.lat>85?1:e.lat<-85?-1:Math.log(Math.tan(Math.PI/4+pv.radians(e.lat)/2))/Math.PI}},invert:function(e){return{lng:180*e.x,lat:pv.degrees(2*Math.atan(Math.exp(e.y*Math.PI))-Math.PI/2)}}},"gall-peters":{project:function(e){return{x:e.lng/180,y:Math.sin(pv.radians(e.lat))}},invert:function(e){return{lng:180*e.x,lat:pv.degrees(Math.asin(e.y))}}},sinusoidal:{project:function(e){return{x:pv.radians(e.lng)*Math.cos(pv.radians(e.lat))/Math.PI,y:e.lat/90}},invert:function(e){return{lng:pv.degrees(e.x*Math.PI/Math.cos(e.y*Math.PI/2)),lat:90*e.y}}},aitoff:{project:function(e){var t=pv.radians(e.lng),n=pv.radians(e.lat),r=Math.acos(Math.cos(n)*Math.cos(t/2));return{x:2*(r?Math.cos(n)*Math.sin(t/2)*r/Math.sin(r):0)/Math.PI,y:2*(r?Math.sin(n)*r/Math.sin(r):0)/Math.PI}},invert:function(e){var t=e.x*Math.PI/2,n=e.y*Math.PI/2;return{lng:pv.degrees(t/Math.cos(n)),lat:pv.degrees(n)}}},hammer:{project:function(e){var t=pv.radians(e.lng),n=pv.radians(e.lat),r=Math.sqrt(1+Math.cos(n)*Math.cos(t/2));return{x:2*Math.SQRT2*Math.cos(n)*Math.sin(t/2)/r/3,y:Math.SQRT2*Math.sin(n)/r/1.5}},invert:function(e){var t=3*e.x,n=1.5*e.y,r=Math.sqrt(1-t*t/16-n*n/4);return{lng:pv.degrees(2*Math.atan2(r*t,2*(2*r*r-1))),lat:pv.degrees(Math.asin(r*n))}}},identity:{project:function(e){return{x:e.lng/180,y:e.lat/90}},invert:function(e){return{lng:180*e.x,lat:90*e.y}}}},pv.Geo.scale=function(e){function t(e){if(!i||e.lng!=i.lng||e.lat!=i.lat){i=e;var t=n(e);s={x:l(t.x),y:c(t.y)}}return s}function n(e){var t={lng:e.lng-h.lng,lat:e.lat};return f.project(t)}function r(e){var t=f.invert(e);return t.lng+=h.lng,t}var i,s,o={x:0,y:0},u={x:1,y:1},a=[],f=pv.Geo.projections.identity,l=pv.Scale.linear(-1,1).range(0,1),c=pv.Scale.linear(-1,1).range(1,0),h={lng:0,lat:0};return t.x=function(e){return t(e).x},t.y=function(e){return t(e).y},t.ticks={lng:function(e){var t,n;if(a.length>1){var r=pv.Scale.linear();void 0==e&&(e=10),t=r.domain(a,function(e){return e.lat}).ticks(e),n=r.domain(a,function(e){return e.lng}).ticks(e)}else t=pv.range(-80,81,10),n=pv.range(-180,181,10);return n.map(function(e){return t.map(function(t){return{lat:t,lng:e}})})},lat:function(e){return pv.transpose(t.ticks.lng(e))}},t.invert=function(e){return r({x:l.invert(e.x),y:c.invert(e.y)})},t.domain=function(e,t){if(arguments.length){a=e instanceof Array?arguments.length>1?pv.map(e,t):e:Array.prototype.slice.call(arguments);if(a.length>1){var r=a.map(function(e){return e.lng}),s=a.map(function(e){return e.lat});h={lng:(pv.max(r)+pv.min(r))/2,lat:(pv.max(s)+pv.min(s))/2};var o=a.map(n);l.domain(o,function(e){return e.x}),c.domain(o,function(e){return e.y})}else h={lng:0,lat:0},l.domain(-1,1),c.domain(-1,1);return i=null,this}return a},t.range=function(e,t){return arguments.length?("object"==typeof e?(o={x:Number(e.x),y:Number(e.y)},u={x:Number(t.x),y:Number(t.y)}):(o={x:0,y:0},u={x:Number(e),y:Number(t)}),l.range(o.x,u.x),c.range(u.y,o.y),i=null,this):[o,u]},t.projection=function(e){return arguments.length?(f="string"==typeof e?pv.Geo.projections[e]||pv.Geo.projections.identity:e,this.domain(a)):e},pv.copyOwn(t,pv.Scale.common),arguments.length&&t.projection(e),t},define("ccc-protovis",function(){});var def=function(){function e(e,t){return m[e]=t}function t(e,t){var n=t||v;if(e){var r=e.split("."),i=r.length;if(i){var s,o=0;if(n===h.global){s=r[0];var u=h.getOwn(m,s);u&&(n=u,o++)}for(;i>o;)s=r[o++],n=n[s]||(n[s]={})}}return n}function n(e,n,r){h.fun.is(n)&&(r=n,n=null);var i=t(e,n);if(r){g.push(v);try{r(i)}finally{v=g.pop()}}return i}function r(e,t,n){return!h.hasOwn(e,t)||h.fail.operationInvalid("Name '{0}' is already defined in namespace.",[t]),e[t]=n}function i(e){return function(t){return s(t,l.call(arguments,1),e)}}function s(e,t,n){for(var r=0,i=t.length;i>r;r++){var s=t[r];s&&(s=h.object.as(s.prototype||s),s&&o(e,s,n))}return e}function o(e,t,n){for(var r in t)u(e,r,t[r],n)}function u(e,t,n,r){if(void 0!==n){var i,s=h.object.asNative(e[t]);s?(i=h.object.as(n),i?(c.call(e,t)||(e[t]=s=Object.create(s)),o(s,i,r)):e[t]=n):(i=h.object.asNative(n),i&&(n=(r||Object.create)(i)),e[t]=n)}}function a(e){for(var t in e){var n=h.object.asNative(e[t]);n&&a(e[t]=Object.create(n))}}function f(){for(;this._source.next();){var e=this._selectMany?this._selectMany.call(this._ctx,this._source.item,this._source.index):this._source.item;if(null!=e)return this._manySource=h.query(e),!0}}var l=Array.prototype.slice;Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),Object.create||(Object.create=function(){function e(e){t.prototype=e||{};var r=new t;return t.prototype=n,r}var t=function(){},n=t.prototype;return e}()),Function.prototype.bind||(Function.prototype.bind=function(e){var t=l.call(arguments,1),n=this;return function(){return n.apply(e,t.concat(l.call(arguments)))}}),this.JSON||(this.JSON={}),this.JSON.stringify||(this.JSON.stringify=function(e){return""+e});var c=Object.prototype.hasOwnProperty,h={global:this,get:function(e,t,n){var r;return e&&null!=(r=e[t])?r:n},gets:function(e,t){return t.map(function(t){return e[t]})},getPath:function(e,t,n,r){if(!e)return n;if(null!=t){var i=h.array.is(t)?t:t.split("."),s=i.length;if(s)for(var o=0;s>o;){var u=i[o++],a=e[u];if(null==a){if(!r)return n;a=e[u]=null==n||isNaN(+n)?{}:[]}e=a}}return e},setPath:function(e,t,n){if(e&&null!=t){var r=h.array.is(t)?t:t.split(".");if(r.length){var i=r.pop();e=h.getPath(e,r,i,!0),null!=e&&(e[i]=n)}}return e},propGet:function(e,t){return e=""+e,function(n){return n?n[e]:t}},getOwn:function(e,t,n){var r;return e&&c.call(e,t)&&null!=(r=e[t])?r:n},hasOwn:function(e,t){return!!e&&c.call(e,t)},hasOwnProp:c,set:function(e){for(var t=e||{},n=arguments,r=1,i=n.length-1;i>r;r+=2)t[n[r]]=n[r+1];return t},setDefaults:function(e,t){var n,r=e||{},i=arguments,s=i.length;if(2===s&&h.object.is(t))for(n in t)null==r[n]&&(r[n]=t[n]);else{s--;for(var o=1;s>o;o+=2)n=i[o],null==r[n]&&(r[n]=i[o+1])}return r},setUDefaults:function(e,t){var n,r=e||{},i=arguments,s=i.length;if(2===s&&h.object.is(t))for(n in t)void 0===r[n]&&(r[n]=t[n]);else{s--;for(var o=1;s>o;o+=2)n=i[o],void 0===r[n]&&(r[n]=i[o+1])}return r},eachOwn:function(e,t,n){if(e)for(var r in e)c.call(e,r)&&t.call(n,e[r],r,e)},each:function(e,t,n){if(e)for(var r in e)t.call(n,e[r],r,e)},copyOwn:function(e,t){var n,r;arguments.length>=2?(n=e||{},r=t):(n={},r=e);if(r)for(var i in r)c.call(r,i)&&(n[i]=r[i]);return n},copy:function(e,t){var n,r;arguments.length>=2?(n=e||{},r=t):(n={},r=e);if(r)for(var i in r)n[i]=r[i];return n},copyProps:function(e,t,n){var r,i;return arguments.length>=3?(r=e||{},i=t):(r={},i=e,n=t),n&&n.forEach(i?function(e){r[e]=i[e]}:function(e){r[e]=void 0}),r},keys:function(e){var t=[];for(var n in e)t.push(n);return t},values:function(e){var t=[];for(var n in e)t.push(e[n]);return t},uniqueIndex:function(e,t,n){var r={};for(var i in e){var s=t?t.call(n,e[i]):e[i];null==s||c.call(r,s)||(r[s]=i)}return r},ownKeys:Object.keys,own:function(e,t,n){var r=Object.keys(e);return r.map(t?function(r){return t.call(n,e[r],r)}:function(t){return e[t]})},scope:function(e,t){return e.call(t)},bit:{set:function(e,t,n){return n||null==n?e|t:e&~t}},compare:function(e,t){return e===t?0:e>t?1:-1},compareReverse:function(e,t){return e===t?0:e>t?-1:1},methodCaller:function(e,t){return t?function(){return t[e].apply(t,arguments)}:function(){return this[e].apply(this,arguments)}},identity:function(e){return e},add:function(e,t){return e+t},negate:function(e){return function(){return!e.apply(this,arguments)}},sqr:function(e){return e*e},noop:function(){},retTrue:function(){return!0},retFalse:function(){return!1},number:{is:function(e){return"number"==typeof e},as:function(e,t){var n=parseFloat(e);return isNaN(n)?t||0:n},to:function(e,t){var n=parseFloat(e);return isNaN(n)?t||0:n}},array:{is:function(e){return e instanceof Array},isLike:function(e){return e&&null!=e.length&&"string"!=typeof e},as:function(e){return e instanceof Array?e:null!=e?[e]:null},to:function(e){return e instanceof Array?e:null!=e?[e]:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):[])},copy:function(e){return l.apply(e,l.call(arguments,1))}},object:{is:function(e){return e&&"object"==typeof e},isNative:function(e){return!!e&&e.constructor===Object},as:function(e){return e&&"object"==typeof e?e:null},asNative:function(e){return e&&e.constructor===Object?e:null},lazy:function(e,t,n,r){return e[t]||(e[t]=n?n.call(r,t):{})}},string:{is:function(e){return"string"==typeof e},to:function(e,t){return null!=e?""+e:t||""},join:function(e){var t,n,r=arguments,i=r.length;switch(i){case 3:return t=r[1],n=r[2],null!=t&&""!==t?null!=n&&""!==n?""+t+e+(""+n):""+t:null!=n&&""!==n?""+n:"";case 2:return t=r[1],null!=t?""+t:"";case 1:case 0:return""}for(var s=[],o=1;i>o;o++)t=r[o],null!=t&&""!==t&&s.push(""+t);return s.join(e)},padRight:function(e,t,n){e||(e=""),null==n&&(n=" ");var r=~~((t-e.length)/n.length);return r>0?e+(new Array(r+1)).join(n):e}},fun:{is:function(e){return"function"==typeof e},as:function(e){return"function"==typeof e?e:null},to:function(e){return"function"==typeof e?e:h.fun.constant(e)},constant:function(e){return function(){return e}}},nullyTo:function(e,t){return null!=e?e:t},between:function(e,t,n){return Math.max(t,Math.min(e,n))},nully:function(e){return null==e},notNully:function(e){return null!=e},notUndef:function(e){return void 0!==e},empty:function(e){return null==e||""===e},notEmpty:function(e){return null!=e&&""!==e},truthy:function(e){return!!e},falsy:function(e){return!e},firstUpperCase:function(e){if(e){var t=e.charAt(0),n=t.toUpperCase();t!==n&&(e=n+e.substr(1))}return e},firstLowerCase:function(e){if(e){var t=e.charAt(0),n=t.toLowerCase();t!==n&&(e=n+e.substr(1))}return e},format:function(e,t,n){if(null==e||""===e)return"";var r=t&&h.fun.is(t);return e.replace(/(^|[^{])\{([^{}]+)\}/g,function(e,i,s){var o=t?r?t.call(n,s):t[s]:null;return i+(null==o?"":String(o))})},destructuringTypeBind:function(e,t){var n=e.length,r=new Array(n);if(n&&t){var i=t.length;if(i){var s=0,o=0;do{var u=t[s];if(null==u||typeof u===e[o])r[o]=u,s++;o++}while(n>o&&i>s)}}return r},error:function(e){return e instanceof Error?e:new Error(e)},fail:function(e){throw h.error(e)},assert:function(e,t){throw h.error.assertionFailed(e,t)}};h.ascending=h.compare,h.descending=h.compareReverse;var p=h.array.like=h.copyOwn(function(e){return p.is(e)?e:[e]},{is:function(e){return e&&null!=e.length&&"string"!=typeof e},as:function(e){return p.is(e)?e:null}});p.to=p,h.lazy=h.object.lazy,h.shared=function(){function e(e){function t(){n=e}return t}function t(e){if(null!=n)throw new Error("Access denied.");e();var t;return t=n,n=null,t}var n=null;return t.safe=e,t};var d={operationInvalid:function(e,t){return h.error(h.string.join(" ","Invalid operation.",h.format(e,t)))},notImplemented:function(){return h.error("Not implemented.")},argumentRequired:function(e){return h.error(h.format("Required argument '{0}'.",[e]))},argumentInvalid:function(e,t,n){return h.error(h.string.join(" ",h.format("Invalid argument '{0}'.",[e]),h.format(t,n)))},assertionFailed:function(e,t){return h.error(h.string.join(" ","Assertion failed.",h.format(e,t)))}};h.copyOwn(h.error,d),h.eachOwn(d,function(e,t){h.fail[t]=function(){throw e.apply(null,arguments)}});var v=h,m={},g=[];h.space=n,h.globalSpace=e,h.mixin=i(Object.create),h.copyOwn(h.mixin,{custom:i,inherit:h.mixin,copy:i(h.copy),share:i(h.identity)}),h.create=function(){var e=l.call(arguments),t=!0,n=e.shift();"boolean"==typeof n&&(t=n,n=e.shift());var r=n?Object.create(n):{};return t&&a(r),e.length>0&&(e.unshift(r),h.mixin.apply(h,e)),r},h.scope(function(){function e(){return h.error.operationInvalid("Type is locked.")}function t(e,t){if(e)do{var n=h.getOwn(e.constructor,t);if(void 0!==n)return n}while(e=e.base)}function n(e){var t;e&&(e instanceof Array?(t=e,e=t.join(".")):t=e.split(".")),t&&t.length>1?(this.name=t.pop(),this.namespace=t.join("."),this.namespaceParts=t):(this.name=e||null,this.namespace=null,this.namespaceParts=[])}function i(e){this.fun=e.as,this.isAbstract=!!e.isAbstract}function s(e){if(e){if(h.fun.is(e))return new i({as:e});if(e instanceof i)return e;if(h.fun.is(e.as))return new i(e);if(e.isAbstract)return new i({isAbstract:!0,as:h.fail.notImplemented})}return null}function o(e){return s(e)||h.fail.argumentInvalid("fun")}function a(){}function f(e,t){return function(){var n=b.base;b.base=t;try{return e.apply(this,arguments)}finally{b.base=n}}}function l(e,t){return this[e]=f(t,this[e]),this}function c(){return""+this.constructor}function p(e,t){var n=e.prototype=Object.create(t.prototype);return n.constructor=e,n}function d(e){function t(){if(n)for(var e=0;r[e].apply(this,arguments)!==!1&&++e<n;);}var n=1,r=[function(){n=0;if(e.initOrPost)return r.length=0,e.init&&(r.push(e.init),n++),e.post&&(r.push(e.post),n++),t.apply(this,arguments),!1;r=null}];return t}function v(){var e=h.destructuringTypeBind(E,arguments);return m.apply(this,e)}function m(e,t,i){var s,o=new n(e);t?(s=t.safe&&g(t.safe)||h.fail.operationInvalid('Invalid "foreign" base type.'),s.locked=!0):(t=a,s=w);var u=Object.create(s);u.locked=!1,u.base=s,u.methods=Object.create(s.methods);var f=d(u);h.copyOwn(f,y),f.name=o.name,f.typeName=o,f.safe=g.safe(u),f.toString=function(){return""+this.typeName||"Anonymous type"};var v=p(f,t);return u.constructor=f,v.override=l,v.toString=c,o.name&&r(h.space(o.namespace,i),o.name,f),f}var g=h.shared(),y={init:function(t){t||h.fail.argumentRequired("init");var n=g(this.safe);!n.locked||h.fail(e());var r=n.init;return r&&(t=f(t,r)),n.init=t,n.initOrPost=!0,this},postInit:function(t){t||h.fail.argumentRequired("postInit");var n=g(this.safe);!n.locked||h.fail(e());var r=n.post;return r&&(t=f(t,r)),n.post=t,n.initOrPost=!0,this},add:function(t){var n=g(this.safe);!n.locked||h.fail(e());var r=this.prototype,o=n.base;return h.each(t.prototype||t,function(e,t){switch(t){case"base":case"constructor":return;case"toString":if(e===c)return;break;case"override":if(e===l)return}if(e){var a=s(e);if(a){var f,p=n.methods[t];p&&p instanceof i?f=p:o&&(p=o.methods[t],p&&p instanceof i&&(f=p)),n.methods[t]=a,f&&(e=f.override(a)),r[t]=e;return}}u(r,t,e,h.identity)}),this},getStatic:function(e){return t(g(this.safe),e)},addStatic:function(n){var r=g(this.safe);!r.locked||h.fail(e());for(var i in n)if("prototype"!==i){var s=n[i],o=h.object.as(s);if(o){var u=h.getOwn(this,i),a=void 0!==u;a||(u=t(r.base,i));var f=h.object.asNative(u);if(f){if(a){h.mixin(u,s);continue}s=h.create(u,s)}}this[i]=s}return this}};n.prototype.toString=function(){return h.string.join(".",this.namespace+"."+this.name)},h.copyOwn(i.prototype,{override:function(e){if(this.isAbstract)return e.fun;var t=f(e.fun,this.fun);return e.fun=t,t}});var b=a.prototype;b.base=void 0;var w={locked:!0,init:void 0,postInit:void 0,initOrPost:!1,methods:{},constructor:a};a.safe=g.safe(w);var E=["string","function","object"];h.type=v,h.method=o}),h.makeEnum=function(e){var t=1,n={};return e.forEach(function(e){n[e]=t,t<<=1}),n},h.copyOwn(h.array,{create:function(e,t){var n=e>=0?new Array(e):[];if(void 0!==t)for(var r=0;e>r;r++)n[r]=t;return n},append:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length,s=e.length;i>r;r++)e[s+r]=t[n+r];return e},appendMany:function(e){var t=arguments,n=t.length;if(n>1)for(var r=e.length,i=1;n>i;i++){var s=t[i];if(s)for(var o=0,u=s.length;u>o;)e[r++]=s[o++]}return e},prepend:function(e,t,n){null==n&&(n=0);for(var r=0,i=t.length;i>r;r++)e.unshift(t[n+r]);return e},removeAt:function(e,t){return e.splice(t,1)[0]},insertAt:function(e,t,n){return e.splice(t,0,n),e},removeIf:function(e,t,n){for(var r=0,i=e.length;i>r;)t.call(n,e[r],r)?(i--,e.splice(r,1)):r++;return e},binarySearch:function(e,t,n,r){n||(n=h.compare);for(var i=0,s=e.length-1;s>=i;){var o=i+s>>1,u=n(t,r?r(e[o]):e[o]);if(0>u)s=o-1;else{if(!(u>0))return o;i=o+1}}return~i},insert:function(e,t,n){var r=h.array.binarySearch(e,t,n);return 0>r&&e.splice(~r,0,t),r},remove:function(e,t,n){var r=h.array.binarySearch(e,t,n);return r>=0?e.splice(r,1)[0]:void 0}});var y=1,b={};return h.nextId=function(e){if(e){var t=h.getOwn(b,e)||1;return b[e]=t+1,t}return y++},h.type("Set").init(function(e,t){this.source=e||{},this.count=e?null!=t?t:h.ownKeys(e).length:0}).add({has:function(e){return c.call(this.source,e)},add:function(e){var t=this.source;return c.call(t,e)||(this.count++,t[e]=!0),this},rem:function(e){return c.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},members:function(){return h.ownKeys(this.source)}}),h.type("Map").init(function(e,t){this.source=e||{},this.count=e?null!=t?t:h.ownKeys(e).length:0}).add({has:function(e){return c.call(this.source,e)},get:function(e){return c.call(this.source,e)?this.source[e]:void 0},set:function(e,t){var n=this.source;return c.call(n,e)||this.count++,n[e]=t,this},rem:function(e){return c.call(this.source,e)&&(delete this.source[e],this.count--),this},clear:function(){return this.count&&(this.source={},this.count=0),this},copy:function(e){h.eachOwn(e.source,function(e,t){this.set(t,e)},this)},values:function(){return h.own(this.source)},keys:function(){return h.ownKeys(this.source)},clone:function(){return new h.Map(h.copy(this.source),this.count)},symmetricDifference:function(e){if(!this.count)return e.clone();if(!e.count)return this.clone();var t={},n=0,r=this.source,i=e.source;return h.eachOwn(r,function(e,r){c.call(i,r)||(t[r]=e,n++)}),h.eachOwn(i,function(e,i){c.call(r,i)||(t[i]=e,n++)}),new h.Map(t,n)},intersect:function(e,t){return t||(t=new h.Map),h.eachOwn(this.source,function(n,r){e.has(r)&&t.set(r,n)}),t}}),h.type("OrderedMap").init(function(){this._list=[],this._map={}}).add({has:function(e){return c.call(this._map,e)},count:function(){return this._list.length},get:function(e){var t=this._map;return c.call(t,e)?t[e].value:void 0},at:function(e){var t=this._list[e];return t?t.value:void 0},add:function(e,t,n){var r=this._map,i=c.call(r,e)&&r[e];return i?i.value!==t&&(i.value=t):(i=r[e]={key:e,value:t},null==n?this._list.push(i):h.array.insertAt(this._list,n,i)),this},rem:function(e){var t=this._map,n=c.call(t,e)&&t[e];if(n){var r=this._list.indexOf(n);this._list.splice(r,1),delete this._map[e]}return this},clear:function(){return this._list.length&&(this._map={},this._list.length=0),this},keys:function(){return h.ownKeys(this._map)},forEach:function(e,t){return this._list.forEach(function(n){e.call(t,n.value,n.key)})}}),h.html={escape:function(e){return h.string.to(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")}},h.type("Query").add({index:-1,item:void 0,next:function(){var e=this,t=e.index;return-2===t?!1:(t++,e._next(t)?(e.index=t,!0):(e._finish(),!1))},_next:h.method({isAbstract:!0}),_finish:function(){var e=this;e.index>-2&&(e.next=h.retFalse,e.index=-2,delete e.item)},each:function(e,t){for(var n=this;n.next();)if(e.call(t,n.item,n.index)===!1)return!0;return!1},array:function(){for(var e=[],t=this;t.next();)e.push(t.item);return e},sort:function(e,t){e||(e=h.compare);if(t){var n=e;e=function(e,r){return n(t(e),t(r))}}var r=this.array().sort(e);return new h.ArrayLikeQuery(r)},object:function(e){for(var t=h.get(e,"target")||{},n=h.get(e,"name"),r=h.get(e,"value"),i=h.get(e,"context");this.next();){var s=""+(n?n.call(i,this.item,this.index):this.item);t[s]=r?r.call(i,this.item,this.index):this.item}return t},reduce:function(e){var t,n=0;if(arguments.length<2){if(!this.next())throw new TypeError("Length is 0 and no second argument");t=this.item}else t=arguments[1];for(;this.next();)t=e(t,this.item,this.index),++n;return t},count:function(){for(var e=0;this.next();)e++;return e},first:function(e,t,n){for(;this.next();)if(!e||e.call(t,this.item,this.index)){var r=this.item;return this._finish(),r}return n},last:function(e,t,n){for(var r=n;this.next();)(!e||e.call(t,this.item,this.index))&&(r=this.item);return r},any:function(e,t){for(;this.next();)if(!e||e.call(t,this.item,this.index))return this._finish(),!0;return!1},all:function(e,t){for(;this.next();)if(!e.call(t,this.item,this.index))return this._finish(),!1;return!0},min:function(){for(var e=null;this.next();)(null===e||this.item<e)&&(e=this.item);return e},max:function(){for(var e=null;this.next();)(null===e||this.item>e)&&(e=this.item);return e},range:function(){for(var e=null,t=null;this.next();){var n=this.item;null===e?e=t=n:(e>n&&(e=n),n>t&&(t=n))}return null!=e?{min:e,max:t}:null},multipleIndex:function(e,t){var n={};return this.each(function(r){var i=e?e.call(t,r):r;if(null!=i){var s=h.getOwn(n,i)||(n[i]=[]);s.push(r)}}),n},uniqueIndex:function(e,t){var n={};return this.each(function(r){var i=e?e.call(t,r):r;null==i||c.call(n,i)||(n[i]=r)}),n},select:function(e,t){return new h.SelectQuery(this,e,t)},prop:function(e){return new h.SelectQuery(this,function(t){return t?t[e]:void 0})},selectMany:function(e,t){return new h.SelectManyQuery(this,e,t)},union:function(){var e=h.array.append([this],arguments);return new h.SelectManyQuery(new h.ArrayLikeQuery(e))},where:function(e,t){return new h.WhereQuery(this,e,t)},distinct:function(e,t){return new h.DistinctQuery(this,e,t)},skip:function(e){return new h.SkipQuery(this,e)},take:function(e){return 0>=e?new h.NullQuery:isFinite(e)?new h.TakeQuery(this,e):this},whayl:function(e,t){return new h.WhileQuery(this,e,t)},reverse:function(){return new h.ReverseQuery(this)}}),h.type("NullQuery",h.Query).add({next:h.retFalse}),h.type("AdhocQuery",h.Query).init(function(e){this._next=e}),h.type("ArrayLikeQuery",h.Query).init(function(e){function t(){for(;++r<i;)if(c.call(e,r))return n.index=r,n.item=e[r],!0;return n._finish(),!1}var n=this;h.array.isLike(e)||(e=[e]),n._list=e,n._count=e.length;var r=-1,i=e.length;n.next=t}).add({count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),h.type("RangeQuery",h.Query).init(function(e,t,n){this._index=e,this._count=t,this._step=null==n?1:n}).add({_next:function(e){if(e<this._count)return this.item=this._index,this._index+=this._step,!0},count:function(){var e=this._count;return this.index>=0&&(e-=this.index+1),this._finish(),e}}),h.type("WhereQuery",h.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),h.type("WhileQuery",h.Query).init(function(e,t,n){function r(){if(e.next()){var r=e.item;if(t.call(n,r,e.index))return i.item=r,i.index=++s,!0}return i._finish(),!1}var i=this,s=-1;i.next=r}),h.type("SelectQuery",h.Query).init(function(e,t,n){function r(){return e.next()?(i.item=t.call(n,e.item,e.index),i.index=++s,!0):(i._finish(),!1)}var i=this,s=-1;i.next=r}),h.type("SelectManyQuery",h.Query).init(function(e,t,n){this._selectMany=t,this._ctx=n,this._source=e,this._manySource=null}).add({_next:function(){for(;;){if(this._manySource){if(this._manySource.next())return this.item=this._manySource.item,!0;this._manySource=null}if(!f.call(this))break}}}),h.type("DistinctQuery",h.Query).init(function(e,t,n){function r(){for(;e.next();){var r=e.item,u=t?t.call(n,r,e.index):r;if(null!=u&&!c.call(o,u))return i.item=r,i.index=++s,o[u]=!0}return i._finish(),!1}var i=this,s=-1,o={};i.next=r}),h.type("SkipQuery",h.Query).init(function(e,t){this._source=e,this._skip=t}).add({_next:function(){for(;this._source.next();){if(!(this._skip>0))return this.item=this._source.item,!0;this._skip--}}}),h.type("TakeQuery",h.Query).init(function(e,t){this._source=e,this._take=t}).add({_next:function(){if(this._take>0&&this._source.next())return this._take--,this.item=this._source.item,!0}}),h.type("ReverseQuery",h.Query).init(function(e){this._source=e}).add({_next:function(e){e||(this._source instanceof h.Query&&(this._source=this._source instanceof h.ArrayLikeQuery?this._source._list:this._source.array()),this._count=this._source.length);var t=this._count;if(t>e){for(var n=t-e-1,r=this._source;!c.call(r,n);){if(--n<0)return!1;this._count--}return this.item=r[n],!0}}}),h.query=function(e){return void 0===e?new h.NullQuery:e instanceof h.Query?e:h.fun.is(e)?new h.AdhocQuery(e):new h.ArrayLikeQuery(e)},h.range=function(e,t,n){return new h.RangeQuery(e,t,n)},v=h.global,h}();define("ccc-def",function(){}),pv.have_SVG=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,pv.have_VML=function(e,t,n){return t=e.createElement("div"),t.innerHTML='<pvml:shape adj="1" />',n=t.firstChild,n.style.behavior="url(#default#VML)",n?"object"==typeof n.adj:!0}(document),!pv.have_SVG&&pv.have_VML&&!function(){"function"!=typeof Date.now&&(Date.now=function(){return 1*new Date});var e={is64Bit:"x64"===window.navigator.cpuClass,round:function(e){return Math.round(21.6*(e||0))},styles:null,pre:"<pvml:",post:' class="msvml">',block:{group:1,shape:1,shapetype:1,line:1,polyline:1,curve:1,rect:1,roundrect:1,oval:1,arc:1,image:1},caps:{butt:"flat",round:"round",square:"square"},joins:{bevel:"bevel",round:"round",miter:"miter"},cursorstyles:{hand:"pointer",crosshair:1,pointer:1,move:1,text:1,wait:1,help:1,progress:1,"n-resize":1,"ne-resize":1,"nw-resize":1,"s-resize":1,"se-resize":1,"sw-resize":1,"e-resize":1,"w-resize":1},text_shim:null,text_dims:function(t,n){var r=e.text_shim||(e.init(),e.text_shim);return r.style.font=e.processFont(n),r.innerText=t,{height:r.offsetHeight,width:r.offsetWidth}},_fontCache:{},_fontSubst:{"default":"Arial","sans-serif":"Arial",sansserif:"Arial",sans:"Arial",serif:"Times New Roman",dialog:"Arial",monospaced:"Courier New",dialoginput:"Courier New"},_fontWhiteListIE64Bit:{"agency fb":1,aharoni:1,algerian:1,andalus:1,"angsana new":1,angsanaupc:1,aparajita:1,"arabic typesetting":1,arial:1,"arial black":1,"arial narrow":1,"arial rounded mt bold":1,"arial unicode ms":1,"baskerville old face":1,batang:1,batangche:1,"bauhaus 93":1,"bell mt":1,"berlin sans fb":1,"berlin sans fb demi":1,"bernard mt condensed":1,"blackadder itc":1,"bodoni mt":1,"bodoni mt black":1,"bodoni mt condensed":1,"bodoni mt poster compressed":1,"book antiqua":1,"bookman old style":1,"bookshelf symbol 7":1,"bradley hand itc":1,"britannic bold":1,broadway:1,"browallia new":1,browalliaupc:1,"brush script mt":1,calibri:1,"californian fb":1,"calisto mt":1,cambria:1,"cambria math":1,candara:1,castellar:1,centaur:1,century:1,"century gothic":1,"century schoolbook":1,chiller:1,"colonna mt":1,"comic sans ms":1,consolas:1,constantia:1,"cooper black":1,"copperplate gothic bold":1,"copperplate gothic light":1,corbel:1,"cordia new":1,cordiaupc:1,"courier new":1,"curlz mt":1,daunpenh:1,david:1,"dfkai-sb":1,dilleniaupc:1,dokchampa:1,dotum:1,dotumche:1,ebrima:1,"edwardian script itc":1,elephant:1,"engravers mt":1,"eras bold itc":1,"eras demi itc":1,"eras light itc":1,"eras medium itc":1,"estrangelo edessa":1,eucrosiaupc:1,euphemia:1,fangsong:1,"felix titling":1,"footlight mt light":1,forte:1,"franklin gothic book":1,"franklin gothic demi":1,"franklin gothic demi cond":1,"franklin gothic heavy":1,"franklin gothic medium":1,"franklin gothic medium cond":1,frankruehl:1,freesiaupc:1,"freestyle script":1,"french script mt":1,gabriola:1,garamond:1,gautami:1,georgia:1,gigi:1,"gill sans mt":1,"gill sans mt condensed":1,"gill sans mt ext condensed bold":1,"gill sans ultra bold":1,"gill sans ultra bold condensed":1,gisha:1,"gloucester mt extra condensed":1,"goudy old style":1,"goudy stout":1,gulim:1,gulimche:1,gungsuh:1,gungsuhche:1,"guttman adii":1,"guttman adii-light":1,"guttman aharoni":1,"guttman calligraphic":1,"guttman david":1,"guttman drogolin":1,"guttman frank":1,"guttman frnew":1,"guttman haim":1,"guttman haim-condensed":1,"guttman hatzvi":1,"guttman hodes":1,"guttman kav":1,"guttman kav-light":1,"guttman keren":1,"guttman logo1":1,"guttman mantova":1,"guttman mantova-decor":1,"guttman miryam":1,"guttman myamfix":1,"guttman rashi":1,"guttman stam":1,"guttman stam1":1,"guttman vilna":1,"guttman yad":1,"guttman yad-brush":1,"guttman yad-light":1,"guttman-aharoni":1,"guttman-aram":1,"guttman-courmir":1,"guttman-soncino":1,"guttman-toledo":1,haettenschweiler:1,"harlow solid italic":1,harrington:1,"high tower text":1,impact:1,"imprint mt shadow":1,"informal roman":1,irisupc:1,"iskoola pota":1,jasmineupc:1,jokerman:1,"juice itc":1,kaiti:1,kalinga:1,kartika:1,"khmer ui":1,kodchiangupc:1,kokila:1,"kristen itc":1,"kunstler script":1,"lao ui":1,latha:1,leelawadee:1,"levenim mt":1,lilyupc:1,"lucida bright":1,"lucida calligraphy":1,"lucida console":1,"lucida fax":1,"lucida handwriting":1,"lucida sans":1,"lucida sans typewriter":1,"lucida sans unicode":1,magneto:1,"maiandra gd":1,"malgun gothic":1,mangal:1,marlett:1,"matura mt script capitals":1,meiryo:1,"meiryo ui":1,"microsoft himalaya":1,"microsoft jhenghei":1,"microsoft new tai lue":1,"microsoft phagspa":1,"microsoft sans serif":1,"microsoft tai le":1,"microsoft uighur":1,"microsoft yahei":1,"microsoft yi baiti":1,mingliu:1,"mingliu-extb":1,mingliu_hkscs:1,"mingliu_hkscs-extb":1,miriam:1,"miriam fixed":1,mistral:1,"modern no. 20":1,"mongolian baiti":1,"monotype corsiva":1,"monotype hadassah":1,moolboran:1,"ms gothic":1,"ms mincho":1,"ms outlook":1,"ms pgothic":1,"ms pmincho":1,"ms reference sans serif":1,"ms reference specialty":1,"ms ui gothic":1,"mt extra":1,"mv boli":1,narkisim:1,"niagara engraved":1,"niagara solid":1,nsimsun:1,nyala:1,"ocr a extended":1,"old english text mt":1,onyx:1,"palace script mt":1,"palatino linotype":1,papyrus:1,parchment:1,perpetua:1,"perpetua titling mt":1,"plantagenet cherokee":1,playbill:1,pmingliu:1,"pmingliu-extb":1,"poor richard":1,pristina:1,raavi:1,"rage italic":1,ravie:1,rockwell:1,"rockwell condensed":1,"rockwell extra bold":1,rod:1,"sakkal majalla":1,"script mt bold":1,"segoe print":1,"segoe script":1,"segoe ui":1,"segoe ui light":1,"segoe ui semibold":1,"segoe ui symbol":1,"shonar bangla":1,"showcard gothic":1,shruti:1,simhei:1,"simplified arabic":1,"simplified arabic fixed":1,simsun:1,"simsun-extb":1,"snap itc":1,stencil:1,sylfaen:1,symbol:1,tahoma:1,"tempus sans itc":1,"times new roman":1,"toptype soncino":1,"traditional arabic":1,"trebuchet ms":1,tunga:1,"tw cen mt":1,"tw cen mt condensed":1,"tw cen mt condensed extra bold":1,utsaah:1,vani:1,verdana:1,vijaya:1,"viner hand itc":1,vivaldi:1,"vladimir script":1,vrinda:1,webdings:1,"wide latin":1,wingdings:1,"wingdings 2":1,"wingdings 3":1},_defaultFontIE64Bit:"Arial",processFont:function(t){var n=e._fontCache[t];if(!n){var r=e.text_shim||(e.init(),e.text_shim),i=r.style;i.font=t;var s=i.fontFamily;'"'===s.charAt(0)&&(s=s.substr(1,s.length-1));var o=s.toLowerCase(),u=e._fontSubst[o];u?s=u:e.is64Bit&&!e._fontWhiteListIE64Bit[o]&&(s=e._defaultFontIE64Bit),i.fontFamily='"'+s+'"',e._fontCache[t]=n=i.font}return n},get_dim:function(e,t){var n=t||{};n.rotation=n.tx=n.ty=0,n.sx=n.sy=1;var r=e.transform;if(r){var i=/translate\((-?\d+(?:\.\d+)?(?:e-?\d+)?)(?:,(-?\d+(?:\.\d+)?(?:e-?\d+)?))?\)/.exec(r);i&&(i[1]&&(n.tx=+i[1]),i[2]&&(n.ty=+i[2]));var s=/rotate\((-?\d+(?:\.\d+)?(?:e-?\d+)?)\)/.exec(r);if(s){var s=+s[1]%360;0>s&&(s+=360),s=pv.radians(s)}var o=/scale\((-?\d+(?:\.\d+)?(?:e-?\d+)?)(?:,(-?\d+(?:\.\d+)?(?:e-?\d+)?))?\)/.exec(r);o&&(o[1]&&(n.sx=+o[1]),o[2]&&(n.sy=+o[2])),n.rotation=s||0}return n.x=parseFloat(e.x||0),n.y=parseFloat(e.y||0),"width"in e&&(n.width=parseFloat(e.width)),"height"in e&&(n.height=parseFloat(e.height)),n},solidFillStyle:{type:"solid"},elm_defaults:{g:{rewrite:"span",attr:function(t,n,r){var i=e.get_dim(t);r.style.cssText="position:absolute;zoom:1;left:"+(i.tx+i.x)+"px;top:"+(i.ty+i.y)+"px;"}},line:{rewrite:"shape",attr:function(t,n,r,i,s){var o=parseFloat(t.x1||0),u=parseFloat(t.y1||0),a=parseFloat(t.x2||0),f=parseFloat(t.y2||0),l=e.round;r.coordorigin="0,0",r.coordsize="21600,21600",e.path(r).v="M "+l(o)+" "+l(u)+" L "+l(a)+" "+l(f)+" E",e.stroke(r,t,i,s)},css:"top:0px;left:0px;width:1000px;height:1000px"},rect:{rewrite:"shape",attr:function(t,n,r,i,s){var o=e.get_dim(t),u=e.path(r),a=e.round;r.coordorigin="0,0",r.coordsize="21600,21600";var f=a(o.tx+o.x),l=a(o.ty+o.y),c=a(o.width),h=a(o.height);u.v="M "+f+" "+l+" L "+(f+c)+" "+l+" L "+(f+c)+" "+(l+h)+" L "+f+" "+(l+h)+" x",e.stroke(r,t,i,s),e.fill(r,t,i,s)},css:"top:0px;left:0px;width:1000px;height:1000px"},path:{rewrite:"shape",attr:function(t,n,r,i,s){var o=e.get_dim(t),u=r.style;u.visibility="hidden",u.left=o.tx+o.x+"px",u.top=o.ty+o.y+"px",r.coordorigin="0,0",r.coordsize="21600,21600",r._events=t["pointer-events"]||"none",e.path(r,t.d);var a=e.rotateAndScale(r,o.rotation&&-o.rotation,o.sx,o.sy);a&&(a.origin="-0.5,-0.5"),e.fill(r,t,i,s),e.stroke(r,t,i,s),u.visibility="visible"},css:"top:0px;left:0px;width:1000px;height:1000px;"},ellipse:{rewrite:"oval",attr:function(t,n,r,i,s){var o=e.get_dim(t),u=t.rx,a=t.ry,f=r.style;f.left=o.tx-u+"px",f.top=o.ty-a+"px",f.width=2*u+"px",f.height=2*a+"px";var l=e.rotateAndScale(r,o.rotation&&-o.rotation);l&&(l.origin="0,0"),e.fill(r,t,i,s),e.stroke(r,t,i,s)}},circle:{rewrite:"oval",attr:function(t,n,r,i,s){var o=e.get_dim(t),u=parseFloat(t.r||0)+.5,a=parseFloat(t.cx||0)+.7,f=parseFloat(t.cy||0)+.7,l=r.style;l.left=o.tx+a-u+"px",l.top=o.ty+f-u+"px",l.width=l.height=2*u+"px",e.fill(r,t,i,s),e.stroke(r,t,i,s)}},text:{rewrite:"shape",attr:function(t,n,r,i,s){r.style,r.stroked="False",r.path="m0,0 l1,0 e";var o=e.textpath(r);o.string=t.string;var u=o.style;u["v-text-align"]=t.textAlign,u.font=t.font,t.textDecoration&&(u.textDecoration=t.textDecoration),e.path(r).textpathok="True",e.rotateAndScale(r,t.rotation&&-t.rotation);var a=i[s];a.fillStyle=e.solidFillStyle,e.fill(r,t,i,s),a.fillStyle=null},css:"position:absolute;top:0px;left:0px;width:1px;height:1px;"},svg:{rewrite:"span",css:"position:relative;overflow:hidden;display:inline-block;"},"vml:path":{rewrite:"path"},"vml:stroke":{rewrite:"stroke"},"vml:fill":{rewrite:"fill"},"vml:textpath":{rewrite:"textpath"},"vml:skew":{rewrite:"skew"}},_elmcache:{span:document.createElement("span"),div:document.createElement("div")},createElement:function(t){var n,r=e._elmcache,i=e.elm_defaults[t]||{},s=i.rewrite||t;return s in r?n=r[s].cloneNode(!1):(r[s]=document.createElement(e.pre+s+e.post),s in e.block&&(r[s].className+=" msvml_block"),n=r[s].cloneNode(!1)),i.css&&(n.style.cssText=i.css),n},_hex:pv.range(0,256).map(function(e){return pv.Format.pad("0",2,e.toString(16))}),_colorcache:{},color:function(t){var n,r=e._colorcache[t];return!r&&(n=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(t))&&(e._colorcache[t]=r="#"+e._hex[n[1]]+e._hex[n[2]]+e._hex[n[3]]),r||t},fill:function(t,n,r,i){var s=t.getElementsByTagName("fill")[0]||(s=t.appendChild(e.createElement("vml:fill"))),o=r[i].fillStyle,u=o&&o.type;u||(u="solid");if(!n.fill||!o||"solid"===u&&"none"===n.fill)s.on="false";else{s.on="true";if("solid"===u)s.type="solid",s.color=e.color(n.fill);else{var a="lineargradient"===u;s.method="none";var f=o.stops,l=f.length;if(l>0){for(var c=[],i=0;l>i;i++){var h=f[i];c.push(h.offset+"% "+e.color(h.color.color))}s.colors&&"object"==typeof s.colors?s.colors.value=c.join(","):s.colors=c.join(",")}if(a){s.type="gradient";var p=-pv.degrees(o.angle)%360;s.angle=0>p?p+360:p}else s.type="gradientTitle",s.focus="100%",s.focussize="0 0",s.focusposition="0 0",s.angle=0}s.opacity=Math.min(parseFloat(n["fill-opacity"]||"1"),1)||"1"}},stroke:function(t,n){var r=t.getElementsByTagName("stroke")[0]||(r=t.appendChild(e.createElement("vml:stroke")));if(n.stroke&&"none"!==n.stroke){var i=n["stroke-width"];i=null==i||""===i?1:+i,1e-10>i?i=0:1>i&&(i=1);if(i){r.on="true",r.weight=i,r.color=e.color(n.stroke)||"black",r.opacity=Math.min(parseFloat(n["stroke-opacity"]||"1"),1)||"1",r.joinstyle=e.joins[n["stroke-linejoin"]]||"miter",r.miterlimit=n["stroke-miterlimit"]||8,r.endcap=e.caps[n["stroke-linecap"]]||"flat";var s=n["stroke-dasharray"];s&&"none"!==s||(s="Solid"),r.dashstyle=s}else r.on="false",r.weight=0}else r.on="false",r.weight=0},path:function(t,n){var r=t.getElementsByTagName("path")[0]||(r=t.appendChild(e.createElement("vml:path")));return arguments.length>1&&(r.v=e.rewritePath(n)),r},skew:function(t){var n=t.getElementsByTagName("skew")[0]||(n=t.appendChild(e.createElement("vml:skew")));return n.on="false",n},rotateAndScale:function(t,n,r,i){n&&(n=pv.radians(Math.round(pv.degrees(n))%360));var s=r&&1!==r||i&&1!==i;if(n||s){var o=e.skew(t);o.on="true",o.offset="0,0",r||(r=1),i||(i=1);var u;if(n){var a=Math.cos(n),f=Math.sin(n);u=(r*a).toFixed(8)+","+(i*f).toFixed(8)+","+(r*-f).toFixed(8)+","+(i*a).toFixed(8)+",0,0"}else u=r.toFixed(8)+",0,0,"+i.toFixed(8)+",0,0";return o.matrix=u,o}},textpath:function(t){var n=t.getElementsByTagName("textpath")[0]||(n=t.appendChild(e.createElement("vml:textpath")));return n.style["v-text-align"]="center",n.style["v-text-kern"]="true",n.on="true",n},init:function(){e.text_shim||(e.text_shim=document.getElementById("pv_vml_text_shim")||document.createElement("span"),e.text_shim.id="protovisvml_text_shim",e.text_shim.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline-block;white-space:nowrap;",document.body.appendChild(e.text_shim));if(!e.styles){e.styles=document.getElementById("protovisvml_styles")||document.createElement("style"),e.styles.id="protovisvml_styles",document.documentElement.firstChild.appendChild(e.styles),e.styles.styleSheet.addRule(".msvml","behavior:url(#default#VML);"),e.styles.styleSheet.addRule(".msvml_block","position:absolute;top:0;left:0;");try{document.namespaces.pvml||document.namespaces.add("pvml","urn:schemas-microsoft-com:vml")}catch(t){e.pre="<",e.post=' class="msvml" xmlns="urn:schemas-microsoft.com:vml">'}}},_pathcache:{},rewritePath:function(t){var n=0,r=0,i=e.round;if(!t)return t;if(t in e._pathcache)return e._pathcache[t];t=t.replace(/(\d*)((\.*\d*)(e ?-?\d*))/g,"$1");for(var s=t.match(/([MLHVCSQTAZ ][^MLHVCSQTAZ ]*)/gi),o=[],u=[],a="",f=0,l=s.length;l>f;f++){var c=s[f],h=c.charAt(0),p=c.substring(1).split(/[,]/);" "==h&&(h=a),a=h;switch(h){case"M":h="m",n=i(p[0]),r=i(p[1]),p=[n,r];break;case"m":h="m",n+=i(p[0]),r+=i(p[1]),p=[n,r];break;case"A":h="l",p=[n=i(p[5]),r=i(p[6])];break;case"L":h="l",p=[n=i(p[0]),r=i(p[1])];break;case"l":h="l",p=[n+=i(p[0]),r+=i(p[1])];break;case"H":h="l",p=[n=i(p[0]),r];break;case"h":h="l",p=[n+=i(p[0]),r];break;case"V":h="l",p=[n,r=i(p[0])];break;case"v":h="l",p=[n,r+=i(p[0])];break;case"C":h="c",u=p=[i(p[0]),i(p[1]),i(p[2]),i(p[3]),n=i(p[4]),r=i(p[5])];break;case"c":h="c",u=p=[n+i(p[0]),r+i(p[1]),n+i(p[2]),r+i(p[3]),n+=i(p[4]),r+=i(p[5])];break;case"S":h="c",u=p=[u[4]+(u[4]-u[2]),u[5]+(u[5]-u[3]),i(p[0]),i(p[1]),n=i(p[2]),r=i(p[3])];break;case"s":h="c",u=p=[u[4]+(u[4]-u[2]),u[5]+(u[5]-u[3]),n+i(p[0]),r+i(p[1]),n+=i(p[2]),r+=i(p[3])];break;case"Q":h="c";var d=i(p[0]),v=i(p[1]),m=i(p[2]),g=i(p[3]);p=[~~(n+2*(d-n)/3),~~(r+2*(v-r)/3),~~(d+(m-d)/3),~~(v+(g-v)/3),n=m,r=g];break;case"q":h="l",n+=i(p[2]),r+=i(p[3]),p=[n,r];break;case"Z":case"z":h="xe",p=[];break;default:h="",p=[]}o.push(h,p.join(","))}return e._pathcache[t]=o.join("")+"e"}};pv.Text.measure=e.text_dims,pv.Vml=e,pv.VmlScene={scale:1,events:["mousewheel","mousedown","mouseup","mouseover","mouseout","mousemove","click","dblclick","contextmenu"],mousePositionEventSet:pv.Scene.mousePositionEventSet,eventsToNumber:pv.Scene.eventsToNumber,numberToEvents:pv.Scene.numberToEvents,implicit:{css:{}},copy_functions:function(e){for(var t in e)"function"!=typeof e[t]||t in pv.VmlScene||(pv.VmlScene[t]=e[t])}},pv.VmlScene.copy_functions(pv.SvgScene),pv.Scene=pv.VmlScene,pv.renderer=function(){return"vml"},!function(e){pv.VmlScene.minRuleLineWidth=e?1.2:1.1,pv.VmlScene.minBarWidth=e?2.2:1.8,pv.VmlScene.minBarHeight=e?2.2:1.8,pv.VmlScene.minBarLineWidth=e?1.2:1}(e.is64Bit),pv.VmlScene.expect=function(t,n,r,i,s,o){o=o||{};var u=e.elm_defaults[n]||{},a=u.rewrite||n;if(t){if(t.tagName.toUpperCase()!==a.toUpperCase()){var f=e.createElement(n);t.parentNode.replaceChild(f,t),t=f}}else t=e.createElement(n);if(s){"attr"in u&&u.attr(s,o,t,r,i);if(s.cursor in e.cursorstyles){var l=e.cursorstyles[s.cursor];o.cursor=1===l?s.cursor:l}}return o&&this.setStyle(t,o),t},pv.VmlScene.removeSiblings=function(e){for(;e;){var t=e.nextSibling;e.parentNode.removeChild(e),e=t}},pv.VmlScene.addFillStyleDefinition=function(){},pv.VmlScene.setAttributes=function(){},pv.VmlScene.setStyle=function(e,t){var n=e.__style__;n===t&&(n=null);var r=e.style;for(var i in t){var s=t[i];n&&s===n[i]||(null==s?r.removeAttribute(i):r[i]=s)}e.__style__=t},pv.VmlScene.append=function(e,t,n){return e.$scene={scenes:t,index:n},e=this.title(e,t[n]),e.parentNode&&11!==e.parentNode.nodeType||t.$g.appendChild(e),e.nextSibling},pv.VmlScene.title=function(e,t){return e.title=t.title||"",e},pv.VmlScene.panel=function(t){for(var n,r=t.$g,i=r&&r.firstChild,s=!1,o=0,u=t.length;u>o;o++){var a=t[o];if(a.visible){if(!t.parent){var f=a.canvas;n=f.style,n.display="inline-block",n.zoom=1,r&&r.parentNode!==f&&(r=f.firstChild,i=r&&r.firstChild);if(!r){s=!0,e.init(),r=f.appendChild(e.createElement("svg")),r.unselectable="on",r.onselectstart=function(){return!1};for(var l=this.events,c=this.dispatch,h=0,p=l.length;p>h;h++)r.addEventListener?r.addEventListener(l[h],c,!1):r.attachEvent("on"+l[h],c);i=r.firstChild}t.$g=r;var d=a.width+a.left+a.right,v=a.height+a.top+a.bottom;n=r.style,n.width=d+"px",n.height=v+"px",n.clip="rect(0px "+d+"px "+v+"px 0px)"}var m;"hidden"===a.overflow&&(m=this.expect(i,"g",t,o),m.style.position="absolute",m.style.clip="rect("+a.top.toFixed(2)+"px "+(a.left+a.width).toFixed(2)+"px "+(a.top+a.height).toFixed(2)+"px "+a.left.toFixed(2)+"px)",m.parentNode||r.appendChild(m),t.$g=r=m,i=m.firstChild),i=this.fill(i,t,o);var g=this.scale,y=a.transform,b=a.left+y.x,w=a.top+y.y;this.scale*=y.k;if(a.children.length)for(var E={transform:"translate("+b+","+w+")"+(1!=y.k?" scale("+y.k+")":"")},S=this.getSortedChildScenes(t,o),h=0,x=S.length;x>h;h++){var T=S[h];T.$g=i=this.expect(i,"g",t,o,E),this.updateAll(T);var N=i.parentNode;if(!N||11===N.nodeType){r.appendChild(i);var C=e.elm_defaults[i.svgtype];C&&"function"==typeof C.onappend&&C.onappend(i,t[o])}i=i.nextSibling}this.scale=g,i=this.stroke(i,t,o),m&&(t.$g=r=m.parentNode,i=m.nextSibling)}}return s&&(this.removeSiblings(i),i=r.appendChild(e.createElement("oval"))),i},pv.VmlScene.parseDasharray=function(e){var t=e.strokeDasharray;if(t&&"none"!==t){var n=this.translateDashStyleAlias(t);this.isStandardDashStyle(n)?t=n:(t=t.split(/[\s,]+/).map(function(e){return+e/this.scale},this),t.length%2&&(t=t.concat(t)),t=t.join(" "))}else t=null;return t},pv.VmlScene.create=function(t){return e.createElement(t)},!function(){function t(e){e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=r,(e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault())&&(this.isDefaultPrevented=n),this.timeStamp=e.timeStamp||Date.now()):(this.type=e,this.timeStamp=Date.now())}var n=function(){return!0},r=function(){return!1},i=["altKey","attrChange","attrName","bubbles","button","cancelable","charCode","clientX","clientY","ctrlKey","currentTarget","data","detail","eventPhase","fromElement","handler","keyCode","layerX","layerY","metaKey","newValue","offsetX","offsetY","pageX","pageY","prevValue","relatedNode","relatedTarget","screenX","screenY","shiftKey","srcElement","target","toElement","view","wheelDelta","which"],s=i.length;t.prototype={preventDefault:function(){this.isDefaultPrevented=n;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=n;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r};var o=document.compatMode&&"BackCompat"!=document.compatMode?"documentElement":"body";e.fixEvent=function(e){var n=e;e=new t(n);for(var r=e.type,u="keypress"===r,a=s;a;){var f=i[--a];e[f]=n[f]}var l=e.target;l||(l=e.srcElement||document,3===l.nodeType&&(l=l.parentNode),e.target=l);var c;!e.relatedTarget&&(c=e.fromElement)&&(e.relatedTarget=c===l?e.toElement:c);if(!u){var h;if(null==e.pageX&&null!=(h=e.clientX)){var p=document[o];e.pageX=h+(p.scrollLeft||0)-(p.clientLeft||0),e.pageY=e.clientY+(p.scrollTop||0)-(p.clientTop||0)}}if(null==e.which){var d,v,m;u?null!=(d=e.charCode)?e.which=d:null!=(v=e.keyCode)&&(e.which=v):null!==(m=e.button)&&(e.which=1&m?1:2&m?3:4&m?2:0)}return e.metaKey=!!e.metaKey,"mousewheel"===r&&(e.wheel=e.wheelDelta),e}}(),pv.fixEvent=function(t){return e.fixEvent(t||window.event)},pv.VmlScene.dispatch=pv.listener(function(e){var t=e.target.$scene;if(t){var n=e.target._events;if("none"===n||pv.Mark.dispatch(e.type,t.scenes,t.index,e))e.preventDefault(),e.stopPropagation()}}),pv.VmlScene.image=function(e){for(var t=e.$g.firstChild,n=0;n<e.length;n++){var r=e[n];if(r.visible){t=this.fill(t,e,n);if(!r.image){t=new Image,t.src=r.url;var i=t.style;i.position="absolute",i.top=r.top,i.left=r.left,i.width=r.width,i.height=r.height,i.cursor=r.cursor,i.msInterpolationMode="bicubic"}t=this.append(t,e,n),t=this.stroke(t,e,n)}}return t},pv.VmlScene.label=function(t){for(var n=t.$g.firstChild,r=0,i=t.length;i>r;r++){var s=t[r];if(s.visible){var o=s.textStyle;if(o.opacity&&s.text){var u=s.text.replace(/\s+/g,"¬†"),a=e.processFont(s.font),f=e.text_dims(u,a),l=0,c=0;switch(s.textBaseline){case"middle":c=.1*f.height;break;case"top":c=s.textMargin+.5*f.height;break;case"bottom":c=-(s.textMargin+.5*f.height)}switch(s.textAlign){case"left":l=s.textMargin;break;case"right":l=-s.textMargin}var h=s.textAngle;if(h){var p=Math.cos(h),d=Math.sin(h),v=l*p-c*d,m=l*d+c*p;l=v,c=m}var g=s.left+l,y=s.top+c,b={};s.cursor&&(b.cursor=s.cursor),b.fill=e.color(o.color)||"black",e.is64Bit&&(b["fill-opacity"]=.7),b.x=g,b.y=y,b.rotation=s.textAngle,b.string=u,b.textAlign=s.textAlign,b.font=a,b.textDecoration=s.textDecoration,n=this.expect(n,"text",t,r,b,{display:"block",lineHeight:1,whiteSpace:"nowrap",zoom:1,position:"absolute",cursor:"default",top:y+"px",left:g+"px"}),n=this.append(n,t,r)}}}return n},pv.VmlScene.wedge=function(t){for(var n=t.$g.firstChild,r=e.round,i=0,s=t.length;s>i;i++){var o=t[i];if(o.visible){var u=o.fillStyle,a=o.strokeStyle;if(u.opacity||a.opacity){n=this.expect(n,"path",t,i,{"pointer-events":o.events,cursor:o.cursor,transform:"translate("+o.left+","+o.top+")",d:"",fill:u.color,"fill-rule":"evenodd","fill-opacity":u.opacity||null,stroke:a.color,"stroke-opacity":a.opacity||null,"stroke-width":a.opacity?o.lineWidth/this.scale:null,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,"stroke-miterlimit":o.strokeMiterLimit,"stroke-dasharray":a.opacity?this.parseDasharray(o):null});var f=n.getElementsByTagName("path")[0];f||(f=e.make("path"),n.appendChild(f));var l,c=r(o.innerRadius),h=r(o.outerRadius);if(o.angle>=2*Math.PI)l=c?"AE0,0 "+h+","+h+" 0 23592960AL0,0 "+c+","+c+" 0 23592960":"AE0,0 "+h+","+h+" 0 23592960";else{var p=Math.round(o.startAngle/Math.PI*11796480),d=Math.round(o.angle/Math.PI*11796480);l=c?"AE 0,0 "+h+","+h+" "+ -p+" "+ -d+" 0,0 "+c+","+c+" "+ -(p+d)+" "+d+"X":"M0,0AE0,0 "+h+","+h+" "+ -p+" "+ -d+"X"}f.v=l,n=this.append(n,t,i)}}}return n}}(),define("ccc-protovis-msie",["ccc-def"],function(){});var pvc=function(e,t){function n(){if(Mt.debug>0&&"undefined"!=typeof console)["log","info",["trace","debug"],"error","warn",["group","groupCollapsed"],"groupEnd"].forEach(function(e){e=e instanceof Array?e:[e,e],i(Mt,e[0],e[1],"[pvChart]")});else{Mt.debug>1&&(Mt.debug=1),["log","info","trace","warn","group","groupEnd"].forEach(function(t){Mt[t]=e.noop});var n="[pvChart ERROR]: ";Mt.error=function(t){throw t&&"object"==typeof t&&t.message&&(t=t.message),t=""+e.nullyTo(t,""),t.indexOf(n)<0&&(t=n+t),new Error(t)}}Mt.logError=Mt.error,t.error=Mt.error}function r(){var e=t.Behavior.tipsy;e&&e.setDebug&&(e.setDebug(Mt.debug),e.log=Mt.log)}function i(t,n,r,i){r||(r=n);var s,o=console,u=o[r]||o.log;if(u){var a=i+": %s";if(e.fun.is(u))s=u.bind(o,a);else{var f=Function.prototype.apply;s=function(){f.call(u,o,e.array.append([a],arguments))}}}t[n]=s}function s(t,n){return t?e.object.is(t)?t.abs:n?n+e.firstUpperCase(t):t:n}function o(e){e=t.color(e);var n=e.r,r=e.g,i=e.b,s=(n+r+i)/3,o=2;return Math.abs(n-s)<=o&&Math.abs(r-s)<=o&&Math.abs(i-s)<=o}function u(t){t||e.fail.argumentRequired("keyArgs");var n=t.type||e.fail.argumentRequired("keyArgs.type");switch(n){case"linear":return(new Mt.color.LinearScalesBuild(t)).buildMap();case"discrete":return(new Mt.color.DiscreteScalesBuild(t)).buildMap();case"normal":return(new Mt.color.NormalScalesBuild(t)).buildMap()}throw e.error.argumentInvalid("scaleType","Unexistent scale type '{0}'.",[n])}function a(t){t||e.fail.argumentRequired("keyArgs");var n=t.type||e.fail.argumentRequired("keyArgs.type");switch(n){case"linear":return(new Mt.color.LinearScalesBuild(t)).build();case"discrete":return(new Mt.color.DiscreteScalesBuild(t)).build();case"normal":return(new Mt.color.NormalScalesBuild(t)).build()}throw e.error.argumentInvalid("scaleType","Unexistent scale type '{0}'.",[n])}function f(t,n){function r(e){return h[e].resolve()}function i(e,t){var n=r(e);return t&&!n.isSpecified?void 0:n.value}function s(e){return r(e).isSpecified}function o(e){return i(e,!0)}function u(t){return e.hasOwn(h,t)}function a(e){return c(e,!1)}function f(e){return c(e,!0)}function l(e){return r(e)._dv}function c(t,n){for(var r in t){var s=e.hasOwnProp.call(h,r)&&h[r];if(s){var o=t[r];void 0!==o&&s.set(o,n)}}return i}t||e.fail.argumentRequired("specs");var h={};return e.each(t,function(e,t){var r=new qt(t,i,n,e);h[r.name]=r}),i.option=i,i.specified=o,i.defaultValue=l,i.isSpecified=s,i.isDefined=u,i.specify=a,i.defaults=f,i}function l(e){return function(t){for(var n=0,r=e.length;r>n;n++){var i=e[n];"string"==typeof i&&(i=this[i]);if(i.call(this,t)===!0)return!0}}}function c(e){return function(t){return t.specify(e),!0}}function h(e){return function(t){var n=e.call(this,t);if(void 0!==n)return t.specify(n),!0}}function p(e){return function(t){var n=e.call(this,t);if(void 0!==n)return t.defaultValue(n),!0}}function d(e,t){var n=e&&e.length;if(n){for(var r=0;n>r;r++){var i=e[r];t&&(i[t]=null),i.dispose()}e.length=0}}function v(e,t,n,r,i){n[r]=e;var s=e[t]||(e[t]=[]);null==i||i>=s.length?s.push(n):s.splice(i,0,n)}function m(t,n,r,i){var s=t[n];if(s){var o=s.indexOf(r);o>=0&&e.array.removeAt(s,o)}r[i]=null}function g(e){this.playedVisualRoles.set(e.name,e),b.call(this.complexType,this)}function y(e){this.playedVisualRoles.rem(e.name),b.call(this.complexType,this)}function b(){this._isPctRoleDimTypeMap=null}function w(t,n){function r(){var r={},s=e.query(i.source).select(function(e){n(e,r);var t=r.series;return null!=t&&null!=t.v&&(t=t.v),t||null}).distinct().array();return i._createPlot2SeriesKeySet(t,s)}var i=this;return this._dataPartGet(r,n)}function E(e,t){return e.id-t.id}function S(e,t){return t.id-e.id}function x(){delete this.isSelected}function T(e){return e.isNull||e.isSelected}function N(e){return e.isSelected===!0}function C(e){return e.isSelected===!1}function k(e){return e.isVisible===!0}function L(e){return e.isVisible===!1}function A(e){return e.isNull===!0}function O(e){return e.isNull===!1}function M(t,n,r,i,s,o){var u;if(this.owner===this){if(null==s){var a=t._formatter;s=a?a(i,n):i}s=""+s,!s&&Mt.debug>=2&&Mt.log("Only the null value should have an empty label."),u=new Mt.data.Atom(this,i,s,n,r),o&&(u.isVirtual=!0)}else{var f=this.parent||this.linkParent;u=f._atomsByKey[r]||M.call(f,t,n,r,i,s,o)}return e.array.insert(this._atoms,u,this._atomComparer),F.call(this),this._atomsByKey[r]=u,u}function _(t){var n=t.key,r=this;if(t.dimension===r)return r.owner===r||e.assert("Should be an owner dimension"),n||t!==r._virtualNullAtom||(t=r.intern(null)),t;var i=!r._lazyInit;if(i){var s=r._atomsByKey[n];if(s){if(s!==t)throw e.error.operationInvalid("Atom is from a different root data.");return t}if(r.owner===r)throw e.error.operationInvalid("Atom is from a different root data.")}return _.call(r.parent||r.linkParent,t),i&&(r._atomsByKey[n]=t,n?e.array.insert(r._atoms,t,r._atomComparer):(r._nullAtom=t,r._atoms.unshift(t)),F.call(r)),t}function D(t){var n=e.get(t,"visible"),r=e.get(t,"selected");return(null==n?null:!!n)+":"+(null==r?null:!!r)}function P(e){var t=this._nullAtom;if(!t){if(this.owner===this){var n=this.type._formatter,r=""+(n?n.call(null,null,e):"");t=new Mt.data.Atom(this,null,r,null,""),this.data._atomsBase[this.name]=t}else t=P.call(this.parent||this.linkParent,e);this._atomsByKey[""]=this._nullAtom=t,this._atoms.unshift(t)}return t}function H(){return this.owner===this||e.assert("Can only create atoms on an owner dimension."),this._virtualNullAtom||(this._virtualNullAtom=new Mt.data.Atom(this,null,"",null,""),this.data._atomsBase[this.name]=this._virtualNullAtom),this._virtualNullAtom}function B(){this.owner===this||e.assert("Can only unintern atoms of an owner dimension.");var t=this._atoms;if(t){for(var n=this._atomsByKey,r=0,i=t.length;i>r;){var s=t[r];if(s.visited)delete s.visited,r++;else if(s!==this._virtualNullAtom){t.splice(r,1),i--;var o=s.key;delete n[o],o||(delete this._nullAtom,this.data._atomsBase[this.name]=this._virtualNullAtom)}}F.call(this)}}function j(){var t=this._atoms;if(t){for(var n,r=this._atomsByKey,i=0,s=t.length;s>i;){var o=t[i];if(o.isVirtual){t.splice(i,1),s--,n=!0;var u=o.key||e.assert("Cannot be the null or virtual null atom.");delete r[u]}else i++}n&&F.call(this)}}function F(){this._atomVisibleDatumsCount=this._sumCache=this._visibleAtoms=this._visibleIndexes=null}function I(e){v(this,"childNodes",e,"parent"),e.owner=this.owner}function q(e){v(this,"_linkChildren",e,"linkParent"),e.owner=this.owner}function R(t,n){var r;if(!this._disposed&&(r=this._atomVisibleDatumsCount)){var i=t.atoms[this.name],s=i.key;e.hasOwn(this._atomsByKey,s)||e.assert("Atom must exist in this dimension.");var o=r[s];n||o>0||e.assert("Must have had accounted for at least one visible datum."),r[s]=(o||0)+(n?1:-1),this._visibleAtoms=this._sumCache=this._visibleIndexes=null}}function U(){var e=this._atomVisibleDatumsCount;return e||(e={},this.data.datums(null,{visible:!0}).each(function(t){var n=t.atoms[this.name],r=n.key;e[r]=(e[r]||0)+1},this),this._atomVisibleDatumsCount=e),e}function z(e){var t=[];return this._atoms.forEach(function(n,r){this.isVisible(n)===e&&t.push(r)},this),t}function W(t){return e.query(this._atoms).where(function(e){return this.isVisible(e)===t},this).array()}function X(t,n){this.insertAt(t,n),e.lazy(this,"_childrenByKey")[t.key]=t}function V(e,t){v(this,"_linkChildren",e,"linkParent",t)}function J(e){m(this,"_linkChildren",e,"linkParent")}function K(){d(this.childNodes,"parent"),this._childrenByKey=null,d(this._linkChildren,"linkParent"),this._groupByCache=null,this._sumAbsCache=null}function Q(){this.isOwner()||e.fail("Can only be called on the owner data.")}function G(t,n){!t.isNull||e.assert("Null datums do not notify selected changes"),n?this._selectedNotNullDatums.set(t.id,t):this._selectedNotNullDatums.rem(t.id),this._sumAbsCache=null}function Y(t,n){var r=t.id,i=this,s=e.hasOwnProp;if(s.call(i._datumsById,r)){!t.isNull||e.assert("Null datums do not notify visible changes"),n?i._visibleNotNullDatums.set(r,t):i._visibleNotNullDatums.rem(r),i._sumAbsCache=null;for(var o=i._dimensionsList,u=0,a=o.length;a>u;)R.call(o[u++],t,n);o=i.childNodes,u=0,a=o.length;for(;a>u;)Y.call(o[u++],t,n);o=i._linkChildren;if(o&&(a=o.length)){u=0;for(;a>u;)Y.call(o[u++],t,n)}}}function Z(t,n){return e.string.is(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping specification."),e.query(t.split(/\s*\|\s*/)).where(e.truthy).select(function(t){var r=Wt.exec(t)||e.fail.argumentInvalid("groupLevelText","Invalid grouping level syntax '{0}'.",[t]),i=r[1],s=(r[2]||"").toLowerCase(),o="desc"===s;return new Mt.data.GroupingDimensionSpec(i,o,n)})}function et(t,n){function r(t){if(t){var n=t.key;if(!e.hasOwnProp.call(m,n)){!f&&o&&e.hasOwnProp.call(o,n)&&(t=o[n]);var r=t.id;v.push(t),m[n]=t,g[r]=t,d&&d.push(t),tt.call(this,t,l,a),t.isNull||(h&&t.isSelected&&h.set(r,t),t.isVisible&&c.set(r,t))}}}t||e.fail.argumentRequired("addDatums");var i,s,o,u,a=e.get(n,"doAtomGC",!1),f=e.get(n,"isAdditive",!1),l=!!this._dimensions,c=this._visibleNotNullDatums,h=this._selectedNotNullDatums,p=this._datums;p?(o=this._datumsByKey,u=this._datumsById,f&&a&&p.forEach(function(e){tt.call(this,e,!1,!0)},this)):f=!1;var d,v,m,g;f?(d=[],v=p,g=u,m=o,this._sumAbsCache=null):(this._datums=v=[],this._datumsById=g={},this._datumsByKey=m={},p&&(K.call(this),c.clear(),h&&h.clear()));if(e.array.is(t)){i=0,s=t.length;for(;s>i;)r.call(this,t[i++])}else{if(!(t instanceof e.Query))throw e.error.argumentInvalid("addDatums","Argument is of invalid type.");t.each(r,this)}if(a){var y=this._dimensionsList;i=0,s=y.length;for(;s>i;)B.call(y[i++])}if(f){var b=this._linkChildren;if(b){i=0,s=b.length;for(;s>i;)nt.call(b[i++],d)}}}function tt(e,t,n){var r=this._dimensionsList;r||(t=!1);if(t||n){var i,s,o,u=e.atoms,a=0;if(r){i=r.length;for(;i>a;)o=r[a++],s=u[o.name],s&&(t&&_.call(o,s),n&&(s.visited=!0))}else{var f=this.type.dimensionsNames();i=f.length;for(;i>a;)s=u[f[a++]],s&&(s.visited=!0)}}}function nt(t){t||e.fail.argumentRequired("newDatums");var n=this._groupOper;if(n)t=n.executeAdd(this,t);else{var r=this._wherePred;r&&(t=t.filter(r)),rt.call(this,t)}var i=this._linkChildren,s=i&&i.length;if(s)for(var o=0;s>o;o++)nt.call(i[o],t)}function rt(e){var t=this;t._sumAbsCache=null;for(var n=t._datums,r=t._visibleNotNullDatums,i=t._selectedNotNullDatums,s=t._datumsById,o=0,u=e.length;u>o;o++){var a=e[o],f=a.id;s[f]=a,tt.call(t,a,!0,!1),a.isNull||(i&&a.isSelected&&i.set(f,a),a.isVisible&&r.set(f,a)),n.push(a)}}function it(t){function n(t){if(null!=t){"object"==typeof t||e.fail.invalidArgument("datumFilter");var n={},i=!1;for(var s in t){var o=this.dimensions(s).getDistinctAtoms(e.array.as(t[s]));o.length&&(i=!0,n[s]=o)}i&&r.push(n)}}var r=[];return t=e.array.as(t),t&&t.forEach(n,this),r}function st(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where");return null!=r&&(t=t.where(r?k:L)),null!=i&&(t=t.where(i?A:O)),null!=s&&(t=t.where(s?N:C)),o&&(t=t.where(o)),t}function ot(t,n){var r=e.get(n,"visible"),i=e.get(n,"isNull"),s=e.get(n,"selected"),o=e.get(n,"where"),u=[];null!=r&&u.unshift(r?k:L),null!=i&&u.unshift(i?A:O),null!=s&&u.unshift(s?N:C),o&&u.unshift(o),t&&u.unshift(ut(t));var a=u.length;if(a){if(1===a)return u[0];var f=function(e){for(var t=a;t;)if(!u[--t](e))return!1;return!0};return f}}function ut(e){function t(t){for(var i=t.atoms,s=0;r>s;s++)if(n(i,e[s]))return!0;return!1}function n(e,t){for(var n in t)if(t[n].indexOf(e[n])<0)return!1;return!0}var r=e.length;return t}function at(t,n){var r=e.array.as(e.get(n,"orderBy")),i=e.create(n||{},{orderBy:null}),s=e.query(t).selectMany(function(e,t){return r&&(i.orderBy=r[t]),ft.call(this,e,i)},this);return s.distinct(e.propGet("id"))}function ft(t,n){var r=n.orderBy;if(r){if(r.indexOf("|")>=0)throw e.error.argumentInvalid("keyArgs.orderBy","Multi-dimension order by is not supported.")}else r=Object.keys(t).sort().join(",");var i=this.groupBy(r,n),s=i.treeHeight,o=[];return e.query(function(){var n;if(this._data){if(this._datumsQuery){this._data||e.assert("Must have a current data"),o.length||e.assert("Must have a parent data"),!this._dimAtomsOrQuery||e.assert();if(this._datumsQuery.next())return this.item=this._datumsQuery.item,1;this._datumsQuery=null,n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery}}else this._data=i,this._dimAtomsOrQuery=e.query(t[i._groupLevelSpec.dimensions[0].name]);this._dimAtomsOrQuery||e.assert("Invalid programmer"),this._data||e.assert("Must have a current data");for(var r=o.length;;){for(;this._dimAtomsOrQuery.next();){var u=this._dimAtomsOrQuery.item,a=this._data.child(u.key);if(a&&(s-1>r||a._datums.length)){o.push({data:this._data,dimAtomsOrQuery:this._dimAtomsOrQuery}),this._data=a;if(!(s-1>r))return this._dimAtomsOrQuery=null,this._datumsQuery=e.query(a._datums),this._datumsQuery.next(),this.item=this._datumsQuery.item,1;this._dimAtomsOrQuery=e.query(t[a._groupLevelSpec.dimensions[0].name]),r++}}if(!r)return 0;n=o.pop(),this._data=n.data,this._dimAtomsOrQuery=n.dimAtomsOrQuery,r--}return 0})}function lt(e){this._renderId!==e&&(this._renderId=e,this.renderState={})}function ct(e){var t;e&&(t=e.ownerScene)&&(e=t);var n=this._active;return n!==e?(n&&ht.call(n,!1),this._active=n=e||null,n&&ht.call(n,!0),!0):!1}function ht(e){this.isActive!==e&&(e?this.isActive=!0:delete this.isActive)}function pt(e,t){return function(){var n=this.vars[e];return void 0===n&&(n=this[t](),void 0===n&&(n=null),this.vars[e]=n),n}}function dt(e,n){this.event=t.event,this.pvMark=e;if(e){var r=this.sign=e.sign||null;!n&&r&&(n=r.scene()),n?this.index=n.childIndex():(this.index=null,n=new Mt.visual.Scene(null,{panel:this.panel}))}else this.sign=null,this.index=null,n=new Mt.visual.Scene(null,{panel:this.panel,source:this.chart.root.data});this.scene=n}function vt(t){var n=mt(t)||e.assert("There must exist an ancestor sign");return new Mt.visual.BasicSign(n.panel,t)}function mt(e){var t;do e=e.parent;while(!(!e||(t=e.sign)||e.proto&&(t=e.proto.sign)));return t}function gt(e){return e.isDiscrete()?"discrete":e.firstDimensionValueType()===Date?"timeSeries":"numeric"}function yt(e,t){return Mt.parseDomainScope(e,t.orientation)}function bt(t){if(t){if(e.hasOwn(Ht.namesSet,t)){var n=Mt.BasePanel["y"===this.orientation?"horizontalAlign":"verticalAlign2"];return n[t]}Mt.debug>=2&&Mt.log(e.format("Invalid axis position value '{0}'.",[t]))}return"x"===this.orientation?"bottom":"left"}function wt(e){var t=this.option("Position");return Ft.toOrtho(e,t)}function Et(e){var t=this.option("Position");return Ft.to(e,{singleProp:Mt.BasePanel.orthogonalLength[t]})}function St(n){var r;if(n){var i;e.eachOwn(n,function(e,r){i=!0,n[r]=t.color(e)}),i&&(r=n)}return r}function xt(){var e,n=this.scaleType;if(n)if("discrete"===n)if(0===this.index)e=Mt.createColorScheme();else{var r=this;e=function(){return r.chart._getRoleColorScale(r.role.name)}}else rn||(rn=["red","yellow","green"].map(t.color)),e=rn.slice();else e=Mt.createColorScheme();return e}function Tt(t){if(!e.object.is(t)){var n=this.option("Position");t=(new Ft).setSize(t,{singleProp:Mt.BasePanel.orthogonalLength[n]})}return t}function Nt(e){var t=this.option("Position");return Mt.parseAlign(t,e)}function Ct(e){return(new Ft).setSize(e,{singleProp:"width"})}function kt(e){return e.dataPartValue}function Lt(e){if("trend"===this.name)return null;var t=this.option("TrendType");!t&&e&&(t=e.type);if(!t||"none"===t)return null;e=e?Object.create(e):{};var n=Mt.trends.get(t);e.info=n,e.type=t;var r=this.option("TrendLabel");return e.label=null!=r?String(r):n.dataPartAtom.f,e}function At(e,t){return{resolveV1:function(n){if(0===this.globalIndex)return this._specifyChartOption(n,"show"+e)||n.defaultValue(t),!0}}}function Ot(e){return{resolveV1:function(t){return this._specifyChartOption(t,"show"+e),!0}}}Array.prototype.every||(Array.prototype.every=function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=arguments.length>=2?arguments[1]:void 0,i=0;n>i;i++)if(i in t&&!e.call(r,t[i],i,t))return!1;return!0});var Mt=e.globalSpace("pvc",{debug:0});!function(){if("undefined"!=typeof window&&window.location){var e=function(e){return e&&/\bdebug=true\b/.test(e)?e:null},t=e(window.location.href);if(!t)try{t=e(window.top.location.href)}catch(n){}if(t){var r=/\bdebugLevel=(\d+)/.exec(t);Mt.debug=r?+r[1]:3}}}();var _t=t.Mark;Mt.invisibleFill="rgba(127,127,127,0.00001)",Mt.logSeparator="------------------------------------------";var Dt=Array.prototype.slice;Mt.setDebug=function(e){return e=+e,Mt.debug=isNaN(e)?0:e,n(),r(),Mt.debug},Mt.setDebug(Mt.debug),Mt.defaultCompatVersion=function(e){var t=Mt.BaseChart.prototype.defaults;return null!=e?t.compatVersion=e:t.compatVersion},Mt.cloneMatrix=function(e){return e.map(function(e){return e.slice()})},Mt.normAngle=t.Shape.normalizeAngle,Mt.stringify=function(t,n){var r=e.get(n,"maxLevel")||5,i=[];return Mt.stringifyRecursive(i,t,r,n),i.join("")},Mt.stringifyRecursive=function(t,n,r,i){if(r>0){r--;switch(typeof n){case"undefined":return t.push("undefined");case"object":if(!n)return t.push("null"),!0;if(e.fun.is(n.stringify))return n.stringify(t,r,i);if(n instanceof Array)t.push("["),n.forEach(function(e,n){n&&t.push(", "),Mt.stringifyRecursive(t,e,r,i)||t.pop()}),t.push("]");else{var s=e.get(i,"ownOnly",!0);if(n===e.global)return t.push("<window>"),!0;if(e.fun.is(n.cloneNode))return t.push("<dom #"+(n.id||n.name||"?")+">"),!0;r>1&&n.constructor!==Object&&(r=1,s=!0),t.push("{");var o=!0;for(var u in n)if(!s||e.hasOwnProp.call(n,u))o||t.push(", "),t.push(u+": "),Mt.stringifyRecursive(t,n[u],r,i)?o&&(o=!1):(t.pop(),o||t.pop());if(o){var a=""+n;"[object Object]"!==a&&t.push("{"+a+"}")}t.push("}")}return!0;case"number":return t.push(""+Math.round(1e5*n)/1e5),!0;case"boolean":return t.push(""+n),!0;case"string":return t.push(JSON.stringify(n)),!0;case"function":if(e.get(i,"funs",!1))return t.push(JSON.stringify(n.toString().substr(0,13)+"...")),!0;return!1}return t.push("'new ???'"),!0}},Mt.orientation={vertical:"vertical",horizontal:"horizontal"},Mt.extensionTag="extension",Mt.extendType=function(t,n,r){if(n){var i,s=t.prototype._vars,o=function(t,n){void 0!==t&&(i||(i={}),s&&s[n]&&(n="_"+n+"EvalCore"),i[n]=e.fun.to(t))};r?r.forEach(function(e){o(n[e],e)}):e.each(o),i&&t.add(i)}},t.Color.prototype.stringify=function(e,t,n){return Mt.stringifyRecursive(e,this.key,t,n)},_t.prototype.hasDelegateValue=function(e,t){var n=this.$propertiesMap[e];return n?!t||n.tag===t:this.proto?this.proto.hasDelegateValue(e,t):!1},Mt.defaultColorScheme=null,Mt.brighterColorTransform=function(e){return(e.rgb?e:t.color(e)).brighter(.6)},Mt.setDefaultColorScheme=function(e){return Mt.defaultColorScheme=Mt.colorScheme(e)},Mt.defaultColor=t.Colors.category10()("?"),Mt.colorScheme=function(n){if(null==n)return null;if("function"==typeof n){if(!n.hasOwnProperty("range"))return n;n=n.range()}else n=e.array.as(n);return n.length?function(){var e=t.colors(n);return e.domain.apply(e,arguments),e}:null},Mt.createColorScheme=function(e){return Mt.colorScheme(e)||Mt.defaultColorScheme||t.Colors.category10},Mt.toGrayScale=function(e,n,r,i){e=t.color(e);var s=.299*e.r+.587*e.g+.114*e.b;void 0===r?r=200:null==r&&(r=255),void 0===i?i=30:null==i&&(i=0);var o=r-i;return s=0>=o?r:i+s/255*o,null==n?n=e.opacity:0>n&&(n=-n*e.opacity),s=Math.round(s),t.rgb(s,s,s,n)},Mt.removeTipsyLegends=function(){try{$(".tipsy").remove()}catch(e){}},Mt.createDateComparer=function(e,n){return n||(n=t.identity),function(t,r){return e.parse(n(t))-e.parse(n(r))}},Mt.time={intervals:{y:31536e6,m:2592e6,d30:2592e6,w:6048e5,d7:6048e5,d:864e5,h:36e5,M:6e4,s:1e3,ms:1},withoutTime:function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},weekday:{previousOrSelf:function(e,t){var n=e.getDay(),r=n-t;if(r){var i=0>r?7+r:r;e=new Date(e-i*Mt.time.intervals.d)}return e},nextOrSelf:function(e,t){var n=e.getDay(),r=n-t;if(r){var i=r>0?7-r:-r;e=new Date(e+i*Mt.time.intervals.d)}return e},closestOrSelf:function(e,t){var n=e.getDay(),r=n-t;if(r){var i=Mt.time.intervals.d,s=r>0?1:-1;r=Math.abs(r),e=new Date(r>=4?e.getTime()+s*(7-r)*i:e.getTime()-s*r*i)}return e}}},t.Format.createParser=function(t){function n(n){return n instanceof Date?n:e.number.is(n)?new Date(n):t.parse(n)}return n},t.Format.createFormatter=function(e){function t(t){return null!=t?e.format(t):""}return t},Mt.buildTitleFromName=function(t){return e.firstUpperCase(t).replace(/([a-z\d])([A-Z])/,"$1 $2")},Mt.buildIndexedId=function(e,t){return t>0?e+""+(t+1):e},Mt.splitIndexedId=function(e){var t=/^(.*?)(\d*)$/.exec(e),n=null;return t[2]&&(n=Number(t[2]),1>=n?n=1:n--),[t[1],n]};var Pt=[null];Mt.makeExtensionAbsId=function(t,n){if(!t)return n;var r=[];n=e.array.to(n)||Pt,t=e.array.to(t);for(var i=0,o=n.length;o>i;i++)for(var u=0,a=t.length;a>u;u++){var f=s(t[u],n[i]);f&&r.push(f)}return r},Mt.makeEnumParser=function(t,n,r){if(e.array.is(n)){var i={};n.forEach(function(e){e&&(i[e.toLowerCase()]=e)}),n=function(t){return e.hasOwn(i,t)}}return r&&(r=r.toLowerCase()),function(e){return e&&(e=(""+e).toLowerCase()),n(e)||(e&&Mt.debug>=2&&Mt.warn("Invalid '"+t+"' value: '"+e+"'. Assuming '"+r+"'."),e=r),e}},Mt.parseDistinctIndexArray=function(t,n,r){t=e.array.as(t);if(null==t)return null;null==n&&(n=0),null==r&&(r=1/0);var i=e.query(t).select(function(e){return+e}).where(function(e){return!isNaN(e)&&e>=n&&r>=e}).distinct().array();return i.length?i:null},Mt.parseValuesOverflow=Mt.makeEnumParser("valuesOverflow",["show","trim","hide"],"hide"),Mt.parseMultiChartOverflow=Mt.makeEnumParser("multiChartOverflow",["grow","fit","clip"],"grow"),Mt.parseLegendClickMode=Mt.makeEnumParser("legendClickMode",["toggleSelected","toggleVisible","none"],"toggleVisible"),Mt.parseTooltipAutoContent=Mt.makeEnumParser("tooltipAutoContent",["summary","value"],"value"),Mt.parseSelectionMode=Mt.makeEnumParser("selectionMode",["rubberBand","focusWindow"],"rubberBand"),Mt.parseClearSelectionMode=Mt.makeEnumParser("clearSelectionMode",["emptySpaceClick","manual"],"emptySpaceClick"),Mt.parseSunburstSliceOrder=Mt.makeEnumParser("sliceOrder",["bySizeAscending","bySizeDescending","none"],"bySizeDescending"),Mt.parseShape=Mt.makeEnumParser("shape",t.Scene.hasSymbol,null),Mt.parseTreemapColorMode=Mt.makeEnumParser("colorMode",["byParent","bySelf"],"byParent"),Mt.parseTreemapLayoutMode=Mt.makeEnumParser("layoutMode",["squarify","slice-and-dice","slice","dice"],"squarify"),Mt.parseContinuousColorScaleType=function(e){if(e){e=(""+e).toLowerCase();switch(e){case"linear":case"normal":case"discrete":break;default:Mt.debug>=2&&Mt.log("[Warning] Invalid 'ScaleType' option value: '"+e+"'."),e=null}}return e},Mt.parseDomainScope=function(t,n){if(t){t=(""+t).toLowerCase();switch(t){case"cell":case"global":break;case"section":if(!n)throw e.error.argumentRequired("orientation");t="y"===n?"row":"column";break;case"column":case"row":n&&n!==("row"===t?"y":"x")&&(t="section",Mt.debug>=2&&Mt.log("[Warning] Invalid 'DomainScope' option value: '"+t+"' for the orientation: '"+n+"'."));break;default:Mt.debug>=2&&Mt.log("[Warning] Invalid 'DomainScope' option value: '"+t+"'."),t=null}}return t},Mt.parseDomainRoundingMode=function(e){if(e){e=(""+e).toLowerCase();switch(e){case"none":case"nice":case"tick":break;default:Mt.debug>=2&&Mt.log("[Warning] Invalid 'DomainRoundMode' value: '"+e+"'."),e=null}}return e},Mt.parseOverlappedLabelsMode=function(e){if(e){e=(""+e).toLowerCase();switch(e){case"leave":case"hide":case"rotatethenhide":break;default:Mt.debug>=2&&Mt.log("[Warning] Invalid 'OverlappedLabelsMode' option value: '"+e+"'."),e=null}}return e},Mt.castNumber=function(e){return null!=e&&(e=+e,isNaN(e)&&(e=null)),e},Mt.castPositiveNumber=function(e){return e=Mt.castNumber(e),null==e||e>0||(e=null),e},Mt.castNonNegativeNumber=function(e){return e=Mt.castNumber(e),null!=e&&0>e&&(e=null),e},Mt.parseWaterDirection=function(e){if(e){e=(""+e).toLowerCase();switch(e){case"up":case"down":return e}Mt.debug>=2&&Mt.log("[Warning] Invalid 'WaterDirection' value: '"+e+"'.")}},Mt.parseTrendType=function(e){if(e){e=(""+e).toLowerCase();if("none"===e)return e;if(Mt.trends.has(e))return e;Mt.debug>=2&&Mt.log("[Warning] Invalid 'TrendType' value: '"+e+"'.")}},Mt.parseNullInterpolationMode=function(e){if(e){e=(""+e).toLowerCase();switch(e){case"none":case"linear":case"zero":return e}Mt.debug>=2&&Mt.log("[Warning] Invalid 'NullInterpolationMode' value: '"+e+"'.")}},Mt.parseAlign=function(t,n){n&&(n=(""+n).toLowerCase());var r,i;return"left"===t||"right"===t?(r=n&&Mt.BasePanel.verticalAlign[n],r||(r="middle",i=!!n)):(r=n&&Mt.BasePanel.horizontalAlign[n],r||(r="center",i=!!n)),i&&Mt.debug>=2&&Mt.log(e.format("Invalid alignment value '{0}'. Assuming '{1}'.",[n,r])),r},Mt.parseAnchor=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"top":case"left":case"center":case"bottom":case"right":return t}Mt.debug>=2&&Mt.log(e.format("Invalid anchor value '{0}'.",[t]))}},Mt.parseAnchorWedge=function(t){if(t){t=(""+t).toLowerCase();switch(t){case"outer":case"inner":case"center":case"start":case"end":return t}Mt.debug>=2&&Mt.log(e.format("Invalid wedge anchor value '{0}'.",[t]))}},Mt.unionExtents=function(e,t){if(e)t&&(t.min<e.min&&(e.min=t.min),t.max>e.max&&(e.max=t.max));else{if(!t)return null;e={min:t.min,max:t.max}}return e};var Ht=Mt.Sides=function(e){null!=e&&this.setSides(e)};Ht.hnames="left right".split(" "),Ht.vnames="top bottom".split(" "),Ht.names="left right top bottom".split(" "),Ht.namesSet=t.dict(Ht.names,e.retTrue),Mt.parsePosition=function(t,n){if(t){t=(""+t).toLowerCase();if(!e.hasOwn(Ht.namesSet,t)){var r=n||"left";Mt.debug>=2&&Mt.log(e.format("Invalid position value '{0}. Assuming '{1}'.",[t,r])),t=r}}return t||n||"left"},Ht.as=function(e){return null==e||e instanceof Ht||(e=(new Ht).setSides(e)),e},Ht.to=function(e){return null!=e&&e instanceof Ht||(e=(new Ht).setSides(e)),e},Ht.prototype.stringify=function(t,n,r){return Mt.stringifyRecursive(t,e.copyOwn(this),n,r)},Ht.prototype.setSides=function(e){if("string"==typeof e){var t=e.split(/\s+/).map(function(e){return Bt.parse(e)});switch(t.length){case 1:return this.set("all",t[0]),this;case 2:return this.set("top",t[0]),this.set("left",t[1]),this.set("right",t[1]),this.set("bottom",t[0]),this;case 3:return this.set("top",t[0]),this.set("left",t[1]),this.set("right",t[1]),this.set("bottom",t[2]),this;case 4:return this.set("top",t[0]),this.set("right",t[1]),this.set("bottom",t[2]),this.set("left",t[3]),this;case 0:return this}}else{if("number"==typeof e)return this.set("all",e),this;if("object"==typeof e){if(e instanceof Bt)this.set("all",e);else{this.set("all",e.all),this.set("width",e.width),this.set("height",e.height);for(var n in e)Ht.namesSet.hasOwnProperty(n)&&this.set(n,e[n])}return this}}return Mt.debug&&Mt.log("Invalid 'sides' value: "+Mt.stringify(e)),this},Ht.prototype.set=function(t,n){n=Bt.parse(n);if(null!=n)switch(t){case"all":Ht.names.forEach(function(e){this[e]=n},this);break;case"width":this.left=this.right=Bt.divide(n,2);break;case"height":this.top=this.bottom=Bt.divide(n,2);break;default:e.hasOwn(Ht.namesSet,t)&&(this[t]=n)}},Ht.prototype.resolve=function(e,t){"object"==typeof e&&(t=e.height,e=e.width);var n={};return Ht.names.forEach(function(r){var i=0,s=this[r];null!=s&&(i="number"==typeof s?s:s.resolve("left"===r||"right"===r?e:t)),n[r]=i},this),Ht.updateSize(n)},Ht.updateSize=function(e){return e.width=(e.left||0)+(e.right||0),e.height=(e.bottom||0)+(e.top||0),e},Ht.resolvedMax=function(e,t){var n={};return Ht.names.forEach(function(r){n[r]=Math.max(e[r]||0,t[r]||0)}),n},Ht.inflate=function(e,t){var n={};return Ht.names.forEach(function(r){n[r]=(e[r]||0)+t}),Ht.updateSize(n)};var Bt=Mt.PercentValue=function(e){this.percent=e};Bt.prototype.resolve=function(e){return this.percent*e},Bt.prototype.divide=function(e){return new Bt(this.percent/e)},Bt.divide=function(e,t){return e instanceof Bt?e.divide(t):e/t},Bt.parse=function(t){if(null!=t&&""!==t){switch(typeof t){case"number":return t;case"string":var n=t.match(/^(.+?)\s*(%)?$/);if(n){var r=+n[1];if(!isNaN(r)){if(!n[2])return r;if(r>=0)return new Bt(r/100)}}break;case"object":if(t instanceof Bt)return t}Mt.debug&&Mt.log(e.format("Invalid margins component '{0}'",[""+t]))}},Bt.resolve=function(e,t){return e instanceof Bt?e.resolve(t):e};var jt=_t.prototype.zOrder;_t.prototype.zOrder=function(e){var t=this.borderPanel;return t&&t!==this?jt.call(t,e):jt.call(this,e)},_t.prototype.wrapper=function(e){return this._wrapper=e,this},_t.prototype.wrap=function(t,n){return t&&e.fun.is(t)&&this._wrapper&&!t._cccWrapped&&(t=this._wrapper(t,n),t._cccWrapped=!0),t},t.Mark.prototype.call=function(e){e.call(this,this)},_t.prototype.lock=function(e,t){return void 0!==t&&this[e](t),(this._locked||(this._locked={}))[e]=!0,this},_t.prototype.isIntercepted=function(e){return this._intercepted&&this._intercepted[e]},_t.prototype.isLocked=function(e){return this._locked&&this._locked[e]},_t.prototype.ensureEvents=function(e){var t=this.propertyValue("events",!0);return t&&"none"!==t||this.events(e||"all"),this},_t.prototype.addMargin=function(n,r){if(0!==r){var i=e.nullyTo(this.propertyValue(n),0),s=t.functor(i);this[n](function(){return r+s.apply(this,Dt.call(arguments))})}return this},_t.prototype.addMargins=function(t){var n=e.get(t,"all",0);return this.addMargin("left",e.get(t,"left",n)),this.addMargin("right",e.get(t,"right",n)),this.addMargin("top",e.get(t,"top",n)),this.addMargin("bottom",e.get(t,"bottom",n)),this},_t.prototype.eachInstanceWithData=function(e,t){this.eachInstance(function(n,r,i){n.mark.sign&&n[r].data&&e.call(t,n,r,i)})},_t.prototype.eachSceneWithDataOnRect=function(e,t,n,r){function i(r,i){if(r.intersectsRect(e)){var s=i.data;s&&s.datum&&t.call(n,s)}}var s=this,o=s.sign;if(!o||o.selectable()){null==r&&(r=s.rubberBandSelectionMode||"partial");var u="center"===r;s.eachInstanceWithData(function(e,t,n){var r=s.getShape(e,t,.15);r=(u?r.center():r).apply(n),i(r,e[t],t)})}},_t.prototype.eachDatumOnRect=function(e,t,n,r){function i(r,i){if(r.intersectsRect(e)){var s=i.data;s&&s.datum&&s.datums().each(function(e){e.isNull||t.call(n,e)})}}var s=this,o=s.sign;if(!o||o.selectable()){null==r&&(r=s.rubberBandSelectionMode||"partial");var u="center"===r;s.eachInstanceWithData(function(e,t,n){var r=s.getShape(e,t,.15);r=(u?r.center():r).apply(n),i(r,e[t],t)})}},t.Transform.prototype.transformHPosition=function(e){return this.x+this.k*e},t.Transform.prototype.transformVPosition=function(e){return this.y+this.k*e},t.Transform.prototype.transformLength=function(e){return this.k*e};var Ft=e.type("pvc.Size").init(function(e,t){1===arguments.length?null!=e&&this.setSize(e):(null!=e&&(this.width=e),null!=t&&(this.height=t))}).add({stringify:function(t,n,r){return Mt.stringifyRecursive(t,e.copyOwn(this),n,r)},setSize:function(t,n){if("string"==typeof t){var r=t.split(/\s+/).map(function(e){return Bt.parse(e)});switch(r.length){case 1:return this.set(e.get(n,"singleProp","all"),r[0]),this;case 2:return this.set("width",r[0]),this.set("height",r[1]),this;case 0:return this}}else{if("number"==typeof t)return this.set(e.get(n,"singleProp","all"),t),this;if("object"==typeof t){if(t instanceof Bt)this.set(e.get(n,"singleProp","all"),t);else{this.set("all",t.all);for(var i in t)"all"!==i&&this.set(i,t[i])}return this}}return Mt.debug&&Mt.log("Invalid 'size' value: "+Mt.stringify(t)),this},set:function(t,n){return null!=n&&("all"===t||e.hasOwn(Ft.namesSet,t))&&(n=Bt.parse(n),null!=n&&("all"===t?Ft.names.forEach(function(e){this[e]=n},this):this[t]=n)),this},clone:function(){return new Ft(this.width,this.height)},intersect:function(e){return new Ft(Math.min(this.width,e.width),Math.min(this.height,e.height))},resolve:function(e){var t={};return Ft.names.forEach(function(n){var r=this[n];if(null!=r)if("number"==typeof r)t[n]=r;else if(e){var i=e[n];null!=i&&(t[n]=r.resolve(i))}},this),t}});Ft.names=["width","height"],Ft.namesSet=t.dict(Ft.names,e.retTrue),Ft.toOrtho=function(e,t){if(null!=e){var n;t&&(n=Mt.BasePanel.orthogonalLength[t]),e=Ft.to(e,{singleProp:n}),t&&delete e[Mt.BasePanel.oppositeLength[n]]}return e},Ft.to=function(e,t){return null==e||e instanceof Ft||(e=(new Ft).setSize(e,t)),e};var It=e.type("pvc.Offset").init(function(e,t){1===arguments.length?null!=e&&this.setOffset(e):(null!=e&&(this.x=e),null!=t&&(this.y=t))}).add({stringify:function(t,n,r){return Mt.stringifyRecursive(t,e.copyOwn(this),n,r)},setOffset:function(t,n){if("string"==typeof t){var r=t.split(/\s+/).map(function(e){return Bt.parse(e)});switch(r.length){case 1:return this.set(e.get(n,"singleProp","all"),r[0]),this;case 2:return this.set("x",r[0]),this.set("y",r[1]),this;case 0:return this}}else{if("number"==typeof t)return this.set(e.get(n,"singleProp","all"),t),this;if("object"==typeof t){this.set("all",t.all);for(var i in t)"all"!==i&&this.set(i,t[i]);return this}}return Mt.debug&&Mt.log("Invalid 'offset' value: "+Mt.stringify(t)),this},set:function(t,n){null!=n&&e.hasOwn(It.namesSet,t)&&(n=Bt.parse(n),null!=n&&("all"===t?It.names.forEach(function(e){this[e]=n},this):this[t]=n))},resolve:function(e){var t={};return Ft.names.forEach(function(n){var r=It.namesSizeToOffset[n],i=this[r];if(null!=i)if("number"==typeof i)t[r]=i;else if(e){var s=e[n];null!=s&&(t[r]=i.resolve(s))}},this),t}});It.addStatic({names:["x","y"]}).addStatic({namesSet:t.dict(It.names,e.retTrue),namesSizeToOffset:{width:"x",height:"y"},namesSidesToOffset:{left:"x",right:"x",top:"y",bottom:"y"},as:function(e){return null==e||e instanceof It||(e=(new It).setOffset(e)),e}}),null==$.support.svg&&($.support.svg=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),Mt.text={getFitInfo:function(e,n,r,i,s){if(""===r)return{h:!0,v:!0,d:!0};var o=t.Text.measureWidth(r,i);return{h:e>=o,v:n>=o,d:o<=Math.sqrt(e*e+n*n)-s}},trimToWidthB:function(e,n,r,i,s){var o=t.Text.measureWidth(i,r),u=1.5*o;return Mt.text.trimToWidth(e,n,r,i,s,u)},trimToWidth:function(e,n,r,i,s,o){if(""===n)return n;var u=t.Text.measureWidth(n,r);if(e>=u)return n;if(u>1.5*e)return Mt.text.trimToWidthBin(e,n,r,i,s,o);e-=t.Text.measureWidth(i,r);for(;u>e;)n=s?n.slice(1):n.slice(0,n.length-1),u=t.Text.measureWidth(n,r);return o&&o>=u?"":s?i+n:n+i},trimToWidthBin:function(e,n,r,i,s,o){e-=t.Text.measureWidth(i,r);for(var u,a,f=n.length,l=f-2,c=0;l>=c&&l>0;){u=Math.ceil((c+l)/2);var h=s?n.slice(f-u):n.slice(0,u);a=t.Text.measureWidth(h,r);if(a>e)l=u-1;else{if(!(t.Text.measureWidth(s?n.slice(f-u-1):n.slice(0,u+1),r)<e))return o&&o>=a?"":s?i+h:h+i;c=u+1}}return n=s?n.slice(f-l):n.slice(0,l),a=n.length,o&&o>=a?"":s?i+n:n+i},justify:function(e,n,r){var i=[];if(n<t.Text.measureWidth("a",r))return i;for(var s=(e||"").split(/\s+/),o="";s.length;){var u=s.shift();if(u){var a=o?o+" "+u:u;t.Text.measureWidth(a,r)>n?(o&&i.push(o),o=u):o=a}}return o&&i.push(o),i},getLabelBBox:function(e,n,r,i,s,o){var u=t.Label.getPolygon(e,n,r,i,s,o),a=u.bbox();return a.source=u,a.sourceAngle=s,a.sourceAlign=r,a.sourceTextWidth=e,a}},Mt.color={scale:a,scales:u,toGray:Mt.toGrayScale,isGray:o},e.type("pvc.color.ScalesBuild").init(function(n){this.keyArgs=n,this.data=n.data||e.fail.argumentRequired("keyArgs.data"),this.domainDimName=n.colorDimension||e.fail.argumentRequired("keyArgs.colorDimension"),this.domainDim=this.data.dimensions(this.domainDimName);var r=this.domainDim.type;r.isComparable?this.domainComparer=function(e,t){return r.compare(e,t)}:(this.domainComparer=null,Mt.log("Color value dimension should be comparable. Generated color scale may be invalid.")),this.nullRangeValue=n.colorMissing?t.color(n.colorMissing):t.Color.transparent,this.domainRangeCountDif=0}).add({build:function(){this.range=this._getRange(),this.desiredDomainCount=this.range.length+this.domainRangeCountDif;var e=this._getDomain();return this._createScale(e)},buildMap:function(){this.range=this._getRange(),this.desiredDomainCount=this.range.length+this.domainRangeCountDif;var t;if(this.keyArgs.normPerBaseCategory)t=function(e){var t=this._ensureDomain(null,!1,e);return this._createScale(t)};else{var n=this._getDomain(),r=this._createScale(n);t=e.fun.constant(r)}return this._createCategoryScalesMap(t)},_createScale:e.method({isAbstract:!0}),_createCategoryScalesMap:function(e){return this.data.children().object({name:function(e){return e.absKey},value:e,context:this})},_getRange:function(){var e=this.keyArgs,n=e.colors||["red","yellow","green"];return null!=e.colorMin&&null!=e.colorMax?n=[e.colorMin,e.colorMax]:null!=e.colorMin?n.unshift(e.colorMin):null!=e.colorMax&&n.push(e.colorMax),n.map(function(e){return t.color(e)})},_getDataExtent:function(e){var t=e.dimensions(this.domainDimName).extent({visible:!0});if(!t)return null;var n=t.min.value,r=t.max.value;return r==n&&(r>=1?n=r-1:r=n+1),{min:n,max:r}},_getDomain:function(){var e=this.keyArgs.colorDomain;return null!=e?(e=e.slice(),this.domainComparer&&e.sort(this.domainComparer),e.length>this.desiredDomainCount&&(e=e.slice(0,this.desiredDomainCount))):e=[],this._ensureDomain(e,!0,this.data)},_ensureDomain:function(n,r,i){var s;if(n&&r){var o=this.desiredDomainCount-n.length;if(o>0){s=this._getDataExtent(i);if(s)switch(o){case 1:this.domainComparer?e.array.insert(n,s.max,this.domainComparer):n.push(s.max);break;case 2:this.domainComparer?(e.array.insert(n,s.min,this.domainComparer),e.array.insert(n,s.max,this.domainComparer)):(n.unshift(s.min),n.push(s.max));break;default:Mt.debug>=2&&Mt.log("Ignoring option 'colorDomain' due to unsupported length."+e.format(" Should have '{0}', but instead has '{1}'.",[this.desiredDomainCount,n.length])),n=null}}}if(!n){s||(s=this._getDataExtent(i));if(s){var u=s.min,a=s.max,f=(a-u)/(this.desiredDomainCount-1);n=t.range(u,a+f,f)}}return n}}),e.type("pvc.color.LinearScalesBuild",Mt.color.ScalesBuild).add({_createScale:function(e){var n=t.Scale.linear();return e&&n.domain.apply(n,e),n.range.apply(n,this.range),n}}),e.type("pvc.color.DiscreteScalesBuild",Mt.color.ScalesBuild).init(function(e){this.base(e),this.domainRangeCountDif=1}).add({_createScale:function(n){function r(e){if(null==e)return o;for(var t=0;i>t;t++)if(e<=n[t+1])return s[t];return s[u]}var i=n.length-1,s=this.range,o=this.nullRangeValue,u=s.length-1;return e.copy(r,t.Scale.common),r.domain=function(){return n},r.range=function(){return s},r}}),e.space("pvc.trends",function(t){var n={};e.set(t,"define",function(t,r){t||e.fail.argumentRequired("type"),r||e.fail.argumentRequired("trendSpec"),e.object.is(r)||e.fail.argumentInvalid("trendSpec","Must be a trend specification object."),t=(""+t).toLowerCase(),Mt.debug>=2&&e.hasOwn(n,t)&&Mt.log(e.format("[WARNING] A trend type with the name '{0}' is already defined.",[t]));var i=r.label||e.fail.argumentRequired("trendSpec.label"),s=r.model||e.fail.argumentRequired("trendSpec.model");e.fun.is(s)||e.fail.argumentInvalid("trendSpec.mode","Must be a function.");var o={dataPartAtom:{v:"trend",f:i},type:t,label:i,model:s};n[t]=o},"get",function(t){return t||e.fail.argumentRequired("type"),e.getOwn(n,t)||e.fail.operationInvalid("Undefined trend type '{0}'.",[t])},"has",function(t){return e.hasOwn(n,t)},"types",function(){return e.ownKeys(n)}),t.define("linear",{label:"Linear trend",model:function(t){for(var n=e.get(t,"rows"),r=e.get(t,"x"),i=e.get(t,"y"),s=0,o=0,u=0,a=0,f=0,l=0,c=function(e){return null!=e?+e:0/0};n.next();){var h=n.item,p=r?c(r(h)):s;if(!isNaN(p)){var d=c(i(h));isNaN(d)||(o++,u+=p,a+=d,f+=p*d,l+=p*p)}s++}var v,m;if(o>=2){var g=u/o,y=a/o,b=f/o,w=l/o,E=w-g*g;return m=0===E?0:(b-g*y)/E,v=y-m*g,{alpha:v,beta:m,reset:e.noop,sample:function(e){return v+m*+e}}}}}),t.define("moving-average",{label:"Moving average",model:function(t){var n=Math.max(+(e.get(t,"periods")||3),2),r=0,i=[];return{reset:function(){r=0,i.length=0},sample:function(e,t){var s=n;return null!=t&&(i.unshift(t),r+=t,s=i.length,s>n&&(r-=i.pop(),s=n)),r/s}}}}),t.define("weighted-moving-average",{label:"Weighted Moving average",model:function(t){var n=Math.max(+(e.get(t,"periods")||3),2),r=0,i=0,s=[],o=0,u=0;return{reset:function(){r=i=u=o=0,s.length=0},sample:function(e,t){if(null!=t)if(n>o)s.push(t),o++,u+=o,i+=o*t,r+=t;else{i+=o*t-r,r+=t-s[0];for(var a=1;n>a;a++)s[a-1]=s[a];s[n-1]=t}return i/u}}}})}),f.resolvers=l,f.constant=c,f.specify=h,f.defaultValue=p,Mt.options=f;var qt=e.type().init(function(t,n,r,i){this.name=t,this.option=n,this._dv=this.value=e.get(i,"value"),this._resolve=e.get(i,"resolve");var s=!this._resolve;this.isResolved=s,this.isSpecified=!1,this._setCalled=!1,this._context=r,this._cast=e.get(i,"cast"),this._getDefault=s?null:e.get(i,"getDefault"),this.data=e.get(i,"data")}).add({resolve:function(){if(!this.isResolved){this.isResolved=!0,this._setCalled=!1,this._getFunProp("_resolve").call(this._context,this);if(!this._setCalled){this.isSpecified=!1;var e=this._dynDefault();null!=e&&(this.value=this._dv=e)}}return this},specify:function(e){return this.set(e,!1)},defaultValue:function(e){return arguments.length&&this.set(e,!0),this._dv},cast:function(e){if(null!=e){var t=this._getFunProp("_cast");t&&(e=t.call(this._context,e,this))}return e},set:function(e,t){this._setCalled=!0,null!=e&&(e=this.cast(e));if(null==e){e=this._dynDefault();if(null==e){if(!this.isSpecified)return this;e=this._dv}t=!0}return t?(this._dv=e,this.isSpecified||(this.value=e)):(this.isResolved=this.isSpecified=!0,this.value=e),this},_dynDefault:function(){var e=this._getFunProp("_getDefault");return e&&this.cast(e.call(this._context,this))},_getFunProp:function(e){var t=this[e];if(t){var n=this._context;n&&"string"==typeof t&&(t=n[t])}return t}});e.global.NoDataException=function(){},e.global.InvalidDataException=function(e){this.message=e?e:"Invalid Data."},Mt.data={visibleKeyArgs:{visible:!0}},e.type("pvc.data.DimensionType").init(function(n,r,i){this.complexType=n,this.name=r,this.label=e.get(i,"label")||Mt.buildTitleFromName(r);var s=Mt.splitIndexedId(r);this.group=s[0],this.groupLevel=e.nullyTo(s[1],0),this.label.indexOf("{")>=0&&(this.label=e.format(this.label,[this.groupLevel+1])),this.playedVisualRoles=new e.Map,this.isHidden=!!e.get(i,"isHidden");var o=e.get(i,"valueType")||null,u=Mt.data.DimensionType.valueTypeName(o),a=e.getOwn(Mt.data.DimensionType.cast,u,null);this.valueType=o,this.valueTypeName=u,this.cast=a,this.isDiscreteValueType=this.valueType!==Number&&this.valueType!==Date,this.isDiscrete=e.get(i,"isDiscrete");if(null==this.isDiscrete)this.isDiscrete=this.isDiscreteValueType;else{this.isDiscrete=!!this.isDiscrete;if(!this.isDiscrete&&this.isDiscreteValueType)throw e.error.argumentInvalid("isDiscrete","The only supported continuous value types are Number and Date.")}this._converter=e.get(i,"converter")||null;if(!this._converter){var f=e.get(i,"rawFormat");if(f)switch(this.valueType){case Date:this._converter=t.Format.createParser(t.Format.date(f))}}this._key=e.get(i,"key")||null,this._comparer=e.get(i,"comparer");if(void 0===this._comparer)switch(this.valueType){case Number:case Date:this._comparer=e.compare;break;default:this._comparer=null}this.isComparable=null!=this._comparer,this._formatter=e.get(i,"formatter")||null;if(!this._formatter)switch(this.valueType){case Number:this._formatter=t.Format.createFormatter(t.Format.number().fractionDigits(0,2));break;case Date:var l=e.get(i,"format");l||(l=e.get(i,"rawFormat"),l&&(l=l.replace(/-/g,"/"))),l||(l="%Y/%m/%d"),this._formatter=t.Format.createFormatter(t.Format.date(l))}}).add({isCalculated:!1,compare:function(e,t){return null==e?null==t?0:-1:null==t?1:this._comparer.call(null,e,t)},comparer:function(e){if(!this.isComparable)return null;var t=this;return e?this._reverseComparer||(this._reverseComparer=function(e,n){return t.compare(n,e)}):this._directComparer||(this._directComparer=function(e,n){return t.compare(e,n)})},atomComparer:function(e){return e?this._reverseAtomComparer||(this._reverseAtomComparer=this._createReverseAtomComparer()):this._directAtomComparer||(this._directAtomComparer=this._createDirectAtomComparer())},_toDiscrete:function(){this.isDiscrete=!0},_toCalculated:function(){this.isCalculated=!0},_createReverseAtomComparer:function(){function e(e,n){return e===n?0:t.compare(n.value,e.value)}if(!this.isComparable)return S;var t=this;return e},_createDirectAtomComparer:function(){function e(e,n){return e===n?0:t.compare(e.value,n.value)}if(!this.isComparable)return E;var t=this;return e},formatter:function(){return this._formatter},converter:function(){return this._converter},playingPercentVisualRole:function(){return e.query(this.playedVisualRoles.values()).any(function(e){return e.isPercent})}}),Mt.data.DimensionType.cast={Date:function(e){return e instanceof Date?e:new Date(e)},Number:function(e){return e=Number(e),isNaN(e)?null:e},String:String,Boolean:Boolean,Object:Object,Any:null},Mt.data.DimensionType.dimensionGroupName=function(e){return e.replace(/^(.*?)(\d*)$/,"$1")},Mt.data.DimensionType.valueTypeName=function(t){if(null==t)return"Any";switch(t){case Boolean:return"Boolean";case Number:return"Number";case String:return"String";case Object:return"Object";case Date:return"Date";default:throw e.error.argumentInvalid("valueType","Invalid valueType function: '{0}'.",[t])}},Mt.data.DimensionType.extendSpec=function(t,n,r){var i=Mt.data.DimensionType.dimensionGroupName(t),s=e.get(r,"dimensionGroups");if(s){var o=s[i];o&&(n=e.create(o,n))}n||(n={});switch(i){case"category":var u=e.get(r,"isCategoryTimeSeries",!1);u&&void 0===n.valueType&&(n.valueType=Date);break;case"value":void 0===n.valueType&&(n.valueType=Number),n.valueType===Number&&(void 0!==n.formatter||n.format||(n.formatter=e.get(r,"valueNumberFormatter")))}return void 0!==n.converter||n.valueType!==Date||n.rawFormat||(n.rawFormat=e.get(r,"timeSeriesFormat")),n},e.type("pvc.data.ComplexType").init(function(e){this._dims={},this._dimsList=[],this._dimsNames=[],this._calculations=[],this._calculatedDimNames={},this._dimsIndexByName=null,this._dimsByGroup={},this._dimsNamesByGroup={};if(e)for(var t in e)this.addDimension(t,e[t])}).add({describe:function(){var e=["COMPLEX TYPE INFORMATION",Mt.logSeparator];return this._dimsList.forEach(function(t){var n=[];n.push(t.valueTypeName),t.isComparable&&n.push("comparable"),t.isDiscrete||n.push("continuous"),t.isHidden&&n.push("hidden"),e.push("  "+t.name+" ("+n.join(", ")+")")}),e.join("\n")},dimensions:function(t,n){if(null==t)return this._dims;var r=e.getOwn(this._dims,t,null);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'",[t]);return r},dimensionsList:function(){return this._dimsList},calculatedDimensionsList:function(){return this._calcDimsList},dimensionsNames:function(){return this._dimsNames},groupDimensions:function(t,n){var r=e.getOwn(this._dimsByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},groupDimensionsNames:function(t,n){var r=e.getOwn(this._dimsNamesByGroup,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.operationInvalid("There is no dimension type group with name '{0}'.",[t]);return r},addDimension:function(t,n){t||e.fail.argumentRequired("name"),!e.hasOwn(this._dims,t)||e.fail.operationInvalid("A dimension type with name '{0}' is already defined.",[t]);var r=new Mt.data.DimensionType(this,t,n);this._dims[t]=r,this._dimsIndexByName=null;var i,s=r.group;if(s){var o,u=e.getOwn(this._dimsByGroup,s);u?o=this._dimsNamesByGroup[s]:(u=this._dimsByGroup[s]=[],o=this._dimsNamesByGroup[s]=[]),i=e.array.insert(o,t,e.compare),i=~i,e.array.insertAt(u,i,r)}var a,f=this._dimsList.length;if(s){i=r.groupLevel;for(var l=0;f>l;l++){var c=this._dimsList[l];if(c.group===s){if(c.groupLevel>i){a=l;break}a=l+1}}null==a&&(a=f)}else a=f;return e.array.insertAt(this._dimsList,a,r),e.array.insertAt(this._dimsNames,a,t),r._calculate&&(a=e.array.binarySearch(this._calcDimsList,r._calculationOrder,e.compare,function(e){return e._calculationOrder}),a>=0?a++:a=~a,e.array.insertAt(this._calcDimsList,a,r)),this._isPctRoleDimTypeMap=null,r},addCalculation:function(t,n){t||e.fail.argumentRequired("calcSpec");var r=t.calculation||e.fail.argumentRequired("calculations[i].calculation"),i=t.names;i="string"==typeof i?i.split(/\s*\,\s*/):e.array.as(i);if(i&&i.length){var s=this._calculatedDimNames;i.forEach(function(t){if(t){t=t.replace(/^\s*(.+?)\s*$/,"$1"),!e.hasOwn(s,t)||e.fail.argumentInvalid("calculations[i].names","Dimension name '{0}' is already being calculated.",[t]);var r=this._dims[t];if(!r){var i=Mt.data.DimensionType.extendSpec(t,null,n);this.addDimension(t,i)}s[t]=!0,r._toCalculated()}},this)}this._calculations.push(r)},isCalculated:function(t){return e.hasOwn(this._calculatedDimNames,t)},_calculate:function(e){var t=this._calculations,n=t.length;if(n){for(var r={},i=0;n>i;i++){var s=t[i];s(e,r)}return r}},getPlayingPercentVisualRoleDimensionMap:function(){var t=this._isPctRoleDimTypeMap;return t||(t=this._isPctRoleDimTypeMap=new e.Map(e.query(e.own(this._dims)).where(function(e){return e.playingPercentVisualRole()}).object({name:function(e){return e.name}}))),t},sortDimensionNames:function(t,n){var r=this._dimsIndexByName;return r||(r=e.query(this._dimsList).object({name:function(e){return e.name},value:function(e,t){return t}}),this._dimsIndexByName=r),t.sort(function(t,i){return e.compare(r[n?n(t):t],r[n?n(i):i])}),t}}),e.type("pvc.data.ComplexTypeProject").init(function(e){this._dims={},this._dimList=[],this._dimGroupsDims={},this._dimGroupSpecs=e||{},this._calcList=[]}).add({_ensureDim:function(t,n){t||e.fail.argumentInvalid("name","Invalid dimension name '{0}'.",[t]);var r=e.getOwn(this._dims,t);if(r)n&&e.setUDefaults(r.spec,n);else{r=this._dims[t]=this._createDim(t,n),this._dimList.push(r);var i=e.array.lazy(this._dimGroupsDims,r.groupName);e.array.insert(i,t,e.compare)}return r},hasDim:function(t){return e.hasOwn(this._dims,t)},setDim:function(t,n){var r=this._ensureDim(t).spec;return n&&e.copy(r,n),this},setDimDefaults:function(t,n){return e.setUDefaults(this._ensureDim(t).spec,n),this},_createDim:function(t,n){var r=Mt.data.DimensionType.dimensionGroupName(t),i=this._dimGroupSpecs[r];return i&&(n=e.create(i,n)),{name:t,groupName:r,spec:n||{}}},readDim:function(t,n){var r=this._ensureDim(t,n);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' already is the target of a reader.",[t]);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' is being calculated, so it cannot be the target of a reader.",[t]);r.isRead=!0},calcDim:function(t,n){var r=this._ensureDim(t,n);if(r.isCalc)throw e.error.operationInvalid("Dimension '{0}' already is being calculated.",[t]);if(r.isRead)throw e.error.operationInvalid("Dimension '{0}' is the target of a reader, so it cannot be calculated.",[t]);r.isCalc=!0},isReadOrCalc:function(t){if(t){var n=e.getOwn(this._dims,t);if(n)return n.isRead||n.isCalc}return!1},groupDimensionsNames:function(e){return this._dimGroupsDims[e]},setCalc:function(t){t||e.fail.argumentRequired("calculations[i]"),t.calculation||e.fail.argumentRequired("calculations[i].calculation");var n=t.names;n="string"==typeof n?n.split(/\s*\,\s*/):e.array.as(n),n&&n.length&&n.forEach(this.calcDim,this),this._calcList.push(t)},configureComplexType:function(e,t){this._dimList.forEach(function(n){var r=n.name,i=n.spec;i=Mt.data.DimensionType.extendSpec(r,i,t),e.addDimension(r,i)}),this._calcList.forEach(function(t){e.addCalculation(t)})}}),e.type("pvc.data.TranslationOper").init(function(t,n,r,i,s){this.chart=t,this.complexTypeProj=n,this.source=r||e.fail.argumentRequired("source"),this.metadata=i||e.fail.argumentRequired("metadata"),this.options=s||{},this._initType(),Mt.debug>=4&&(this._logItems=!0,this._logItemCount=0)}).add({_logItems:!1,logSource:e.method({isAbstract:!0}),logVItem:e.method({isAbstract:!0}),_translType:"Unknown",logTranslatorType:function(){return this._translType+" data source translator"},virtualItemSize:function(){return this.metadata.length},freeVirtualItemSize:function(){return this.virtualItemSize()-this._userUsedIndexesCount},setSource:function(t){if(!t)throw e.error.argumentRequired("source");this.source=t},defReader:function(t){t||e.fail.argumentRequired("readerSpec");var n;n=e.string.is(t)?t:t.names,n=e.string.is(n)?n.split(/\s*\,\s*/):e.array.as(n);var r=e.array.as(t.indexes);r&&r.forEach(this._userUseIndex,this);var i=!!n&&!!n.length,s=t.reader;if(s)i||e.fail.argumentRequired("reader.names","Required argument when a reader function is specified."),this._userRead(s,n);else{if(i)return this._userCreateReaders(n,r);r&&r.forEach(function(e){this._userIndexesToSingleDim[e]=null},this)}return r},configureType:function(){this._configureTypeCore()},_configureTypeCore:e.method({isAbstract:!0}),_initType:function(){this._userDimsReaders=[],this._userDimsReadersByDim={},this._userItem=[],this._userUsedIndexes={},this._userUsedIndexesCount=0,this._userIndexesToSingleDim=[];var e=this.options.readers;e&&e.forEach(this.defReader,this);var t=Mt.parseDistinctIndexArray(this.options.multiChartIndexes);t&&(this._multiChartIndexes=this.defReader({names:"multiChart",indexes:t}))},_userUseIndex:function(t){t=+t;if(0>t)throw e.error.argumentInvalid("index","Invalid reader index: '{0}'.",[t]);if(e.hasOwn(this._userUsedIndexes,t))throw e.error.argumentInvalid("index","Virtual item index '{0}' is already assigned.",[t]);return this._userUsedIndexes[t]=!0,this._userUsedIndexesCount++,this._userItem[t]=!0,t},_userCreateReaders:function(t,n){n?n.forEach(function(e,t){n[t]=+e}):n=[];var r,i=n.length,s=t.length;if(s>i){var o=i>0?n[i-1]+1:0;do o=this._nextAvailableItemIndex(o),n[i]=o,this._userUseIndex(o),i++;while(s>i)}for(var u,a=i===s?s:s-1,f=0;a>f;f++)r=t[f],u=n[f],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);if(s>a)for(var l=Mt.splitIndexedId(t[s-1]),c=l[0],h=e.nullyTo(l[1],0),p=a;i>p;p++,h++)r=Mt.buildIndexedId(c,h),u=n[p],this._userIndexesToSingleDim[u]=r,this._userRead(this._propGet(r,u),r);return n},_userRead:function(t,n){e.fun.is(t)||e.fail.argumentInvalid("reader","Reader must be a function."),e.array.is(n)?n.forEach(function(e){this._readDim(e,t)},this):this._readDim(n,t),this._userDimsReaders.push(t)},_readDim:function(e,t){var n,r,i=this._userIndexesToSingleDim.indexOf(e);if(i>=0){n=this._itemInfos[i];if(n&&!this.options.ignoreMetadataLabels){var s=n.label||n.name;s&&(r={label:s})}}this.complexTypeProj.readDim(e,r),this._userDimsReadersByDim[e]=t},execute:function(e){return this.data=e,this._executeCore()},_executeCore:function(){var t=this._getDimensionsReaders();return e.query(this._getItems()).select(function(e){return this._readItem(e,t)},this)},_getItems:function(){return this.source},_getDimensionsReaders:function(){return this._userDimsReaders},_readItem:function(t,n){var r=this._logItems;if(r){var i=this._logItemCount;10>i?(Mt.log("virtual item ["+this._logItemCount+"]: "+Mt.stringify(t)),this._logItemCount++):(Mt.log("..."),r=this._logItems=!1)}for(var s=0,o=n.length,u=this.data,a={};o>s;)n[s++].call(u,t,a);if(r){var f={};for(var l in a){var c=a[l];e.object.is(c)&&(c="v"in c?c.v:"value"in c?c.value:"..."),f[l]=c}Mt.log("-> read: "+Mt.stringify(f))}return a},_propGet:function(e,t){function n(n,r){r[e]=n[t]}return n},_nextAvailableItemIndex:function(t,n){null==t&&(t=0),null==n&&(n=1/0);for(;n>t&&e.hasOwn(this._userItem,t);)t++;return n>t?t:-1},_getUnboundRoleDefaultDimNames:function(e,t,n,r){var i=this.chart.visualRoles[e];if(i&&!i.isPreBound()){var s=i.defaultDimensionName;if(s){s=s.match(/^(.*?)(\*)?$/)[1],n||(n=[]),null==r&&(r=0),null==t&&(t=1);for(;t--;){var o=Mt.buildIndexedId(s,r++);this.complexTypeProj.isReadOrCalc(o)||n.push(o)}return n.length?n:null}}},collectFreeDiscreteAndConstinuousIndexes:function(e,t){this._itemInfos.forEach(function(n,r){if(!this._userUsedIndexes[r]){var i=1===n.type?t:e;i&&i.push(r)}},this)}}),e.type("pvc.data.MatrixTranslationOper",Mt.data.TranslationOper).add({_initType:function(){this.J=this.metadata.length,this.I=this.source.length,this._processMetadata(),this.base()},setSource:function(e){this.base(e),this.I=this.source.length},_knownContinuousColTypes:{numeric:1,number:1,integer:1},_processMetadata:function(){for(var t=this._knownContinuousColTypes,n=e.query(this.metadata).select(function(e,t){return e.colIndex=t,e}).where(function(e){var n=e.colType;return!n||1!==t[n.toLowerCase()]}).select(function(e){return e.colIndex}).array(),r=e.array.create(this.J,1),i=this.I,s=this.source,o=n.length,u=0;i>u&&o>0;u++)for(var a=s[u],f=0;o>f;){var l=n[f],c=a[l];null!=c?(r[l]=this._getSourceValueType(c),n.splice(f,1),o--):f++}this._columnTypes=r},_buildItemInfoFromMetadata:function(e){var t=this.metadata[e];return{type:this._columnTypes[e],name:t.colName,label:t.colLabel}},_getSourceValueType:function(e){switch(typeof e){case"number":return 1;case"object":if(e instanceof Date)return 1}return 0},logSource:function(){var t=["DATA SOURCE SUMMARY",Mt.logSeparator,"ROWS ("+Math.min(10,this.I)+"/"+this.I+")"];e.query(this.source).take(10).each(function(e,n){t.push("  ["+n+"] "+Mt.stringify(e))}),this.I>10&&t.push("  ..."),t.push("COLS ("+this.J+")");var n=this._columnTypes;return this.metadata.forEach(function(e,r){t.push("  ["+r+"] '"+e.colName+"' (type: "+e.colType+", inspected: "+(n[r]?"number":"string")+(e.colLabel?", label: '"+e.colLabel+"'":"")+")")}),t.push(""),t.join("\n")},_logVItem:function(t,n){var r=["VIRTUAL ITEM ARRAY",Mt.logSeparator],i=4,s=5,o=9;this._itemInfos.forEach(function(e,t){i=Math.max(i,(e.name||"").length),s=Math.max(s,(e.label||"").length);var n=this._userIndexesToSingleDim[t];n&&(o=Math.max(o,n.length))},this),r.push("Index | Kind | Type   | "+e.string.padRight("Name",i)+" | "+e.string.padRight("Label",s)+" > Dimension","------+------+--------+-"+e.string.padRight("",i,"-")+"-+-"+e.string.padRight("",s,"-")+"-+-"+e.string.padRight("",o,"-")+"-");var u=0;return t.forEach(function(t){for(var o=0,a=n[t];a>o;o++){var f=this._itemInfos[u],l=this._userIndexesToSingleDim[u];void 0===l&&(l=""),r.push(" "+u+"    | "+t+"    | "+(f.type?"number":"string")+" | "+e.string.padRight(f.name||"",i)+" | "+e.string.padRight(f.label||"",s)+" | "+l),u++}},this),r.push(""),r.join("\n")},_createPlot2SeriesKeySet:function(t,n){var r=null,i=n.length;return e.query(t).each(function(t){var s=+t;if(isNaN(s))throw e.error.argumentInvalid("plot2DataSeriesIndexes","Element is not a number '{0}'.",[t]);if(0>s){if(-i>=s)throw e.error.argumentInvalid("plot2DataSeriesIndexes","Index is out of range '{0}'.",[s]);s=i+s}else if(s>=i)throw e.error.argumentInvalid("plot2DataSeriesIndexes","Index is out of range '{0}'.",[s]);r||(r={}),r[n[s]]=!0}),r},_dataPartGet:function(t,n){function r(r,c){i||(s=t(),i=a.data.dimensions(f),Mt.debug>=3&&s&&Mt.log("Second axis series values: "+Mt.stringify(e.keys(s))));var h;n(r,l);var p=l.series;null!=p&&null!=p.v&&(p=p.v),h=e.hasOwn(s,p)?u||(u=i.intern("1")):o||(o=i.intern("0")),c[f]=h}var i,s,o,u,a=this,f=this.options.dataPartDimName,l={};return r}}),e.type("pvc.data.CrosstabTranslationOper",Mt.data.MatrixTranslationOper).add({_translType:"Crosstab",virtualItemSize:function(){return this.R+this.C+this.M},_executeCore:function(){function t(e,t){for(var n=s[e],r=0,u=o[e];u-->0;)i[n++]=t[r++]}function n(e,t){for(var n=s.M,r=o._colGroupsIndexes[t],u=o.M,a=0;u>a;a++){var f=r[a];i[n++]=null!=f?e[f]:null}}if(!this.metadata.length)return e.query();var r=this._getDimensionsReaders(),i=new Array(this.virtualItemSize()),s=this._itemCrossGroupIndex,o=this,u=e.query(this.source);if(this._colGroups&&this._colGroups.length){var a=function(s){return t("R",s),e.query(this._colGroups).select(function(e,o){return t("C",e),n(s,o),this._readItem(i,r)},this)};return u.selectMany(a,this)}return u.select(function(e){return t("R",e),this._readItem(i,r)},this)},_processMetadata:function(){this.base(),this._separator=this.options.separator||"~";var t=this.R=1;this.C=1,this.M=1,this.measuresDirection=null;var n,r=this.options.seriesInRows,i=this.metadata;n=i.map(r?function(e){return e.colName}:this.options.compatVersion<=1?function(e){return{v:e.colName}}:function(e){return{v:e.colName,f:e.colLabel}});var s=this._itemCrossGroupInfos={};if(this.options.isMultiValued){var o=e.get(this.options,"measuresInColumns",!0);if(o||null==this.options.measuresIndex){t=this.R=this._getCategoriesCount();var u=n.slice(t),a=u.length;a>0?(o?(this.measuresDirection="columns",this._processEncodedColGroups(u)):(this._colGroups=u,this._colGroupsIndexes=[],this._colGroups.forEach(function(e,t){this._colGroups[t]=this._splitEncodedColGroupCell(e),this._colGroupsIndexes[t]=[this.R+t]},this),s.M=[this._buildItemInfoFromMetadata(t)]),this.C=this._colGroups[0].length,s.C=e.range(0,this.C).select(function(){return{type:0}}).array()):(this.C=this.M=0,s.M=[],s.C=[])}else{this.measuresDirection="rows",this.R=+this.options.measuresIndex;var f=this.options.measuresCount;null==f&&(f=1),this.M=f,this._colGroups=n.slice(this.R+1),this._colGroups.forEach(function(e,t){this._colGroups[t]=[e]},this)}}else t=this.R=this._getCategoriesCount(),this._colGroups=n.slice(t),this._colGroupsIndexes=new Array(this._colGroups.length),this._colGroups.forEach(function(e,n){this._colGroups[n]=[e],this._colGroupsIndexes[n]=[t+n]},this),s.C=[{type:0}],s.M=[{type:this._columnTypes[t]}];s.R=e.range(0,this.R).select(this._buildItemInfoFromMetadata,this).array();var l=this._itemCrossGroupIndex={C:r?this.R:0,R:r?0:this.C,M:this.C+this.R},c=this._itemInfos=new Array(this.virtualItemSize());e.eachOwn(l,function(e,t){s[t].forEach(function(t,n){c[e+n]=t})}),this._itemLogicalGroup={series:r?this.R:this.C,category:r?this.C:this.R,value:this.M},this._itemLogicalGroupIndex={series:0,category:this._itemLogicalGroup.series,value:this.C+this.R}},logVItem:function(){return this._logVItem(["C","R","M"],{C:this.C,R:this.R,M:this.M})},_getCategoriesCount:function(){var t=this.options.categoriesCount;return null!=t&&(!isFinite(t)||0>t)&&(t=null),null==t&&(t=e.query(this._columnTypes).whayl(function(e){return 0===e}).count(),t||(t=1)),t},_splitEncodedColGroupCell:function(e){var t,n=e.v;return null==n?n=[]:(n=n.split(this._separator),t=e.f,t&&(t=t.split(this._separator))),n.map(function(e,n){return{v:e,f:t&&t[n]}})},_processEncodedColGroups:function(t){for(var n,r=t.length||e.assert("Must have columns"),i=this.R,s=[],o={},u=[],a=0;r>a;a++){var f,l,c,h,p=t[a],d=p.v,v=p.f,m=d.lastIndexOf(this._separator);0>m?(f=d,l=v,d="",c=[]):(f=d.substring(m+1),d=d.substring(0,m),c=d.split(this._separator),null!=v&&(h=v.split(this._separator),l=h.pop()),c.forEach(function(e,t){var n=h&&h[t];c[t]={v:e,f:n}})),n&&n.encValues===d?n.measureNames.push(f):(n={startIndex:a,encValues:d,values:c,measureNames:[f]},s.push(n));var g=a-n.startIndex,y=e.getOwn(o,f);y?g>y.groupIndex&&(y.groupIndex=g):(o[f]=y={name:f,label:l,type:this._columnTypes[i+a],groupIndex:g,index:a},u.push(y))}u.sort(function(t,n){return e.compare(t.groupIndex,n.groupIndex)||e.compare(t.index,n.index)}),u.forEach(function(e,t){e.groupIndex=t});var b=s.length,w=new Array(b),E=new Array(b),S=u.length;s.map(function(e,t){w[t]=e.values;var n=e.startIndex,r=E[t]=new Array(S);e.measureNames.forEach(function(e,t){var s=o[e].groupIndex;r[s]=i+n+t})}),this._colGroups=w,this._colGroupsIndexes=E,this._itemCrossGroupInfos.M=u,this.M=S},configureType:function(){if("rows"===this.measuresDirection)throw e.error.notImplemented();this.base()},_configureTypeCore:function(){function t(e,t,r){for(var u=i[e]+r;r>0;){var a=Mt.buildIndexedId(e,t);if(!n.complexTypeProj.isReadOrCalc(a)){s=n._nextAvailableItemIndex(s);if(s>=u)return;o.push({names:a,indexes:s}),s++,r--}t++}}var n=this,r=n._itemLogicalGroup,i=n._itemLogicalGroupIndex,s=0,o=[],u=this.options.dataPartDimName;if(u&&1===this.C&&!this.complexTypeProj.isReadOrCalc(u)){var a=this.options.plot2DataSeriesIndexes;if(null!=a){var f=this._colGroups.map(function(e){return""+e[0].v});this._plot2SeriesKeySet=this._createPlot2SeriesKeySet(a,f)}}["series","category","value"].forEach(function(e){var n=r[e];n>0&&t(e,0,n)}),o&&o.forEach(this.defReader,this);if(this._plot2SeriesKeySet){var l=this._userDimsReadersByDim.series;if(l){var c=e.fun.constant(this._plot2SeriesKeySet);this._userRead(this._dataPartGet(c,l),u)}}}}),e.type("pvc.data.RelationalTranslationOper",Mt.data.MatrixTranslationOper).add({M:0,C:0,S:0,_translType:"Relational",_processMetadata:function(){this.base();var t=this.metadata,n=this.J,r=this.options.categoriesCount;null!=r&&(!isFinite(r)||0>r)&&(r=0);var i,s,o;this.options.isMultiValued&&(s=Mt.parseDistinctIndexArray(this.options.measuresIndexes,0,n-1),o=s?s.length:0);var u;if(null==o)if(n>0&&3>=n&&(null==r||1===r)&&null==i)o=1,s=[n-1],r=n>=2?1:0,i=n>=3?1:0,u=r+i;else if(null!=r&&r>=n)u=n,r=n,i=0,o=0;else{var a=null!=r?n-r:1/0;s=e.query(t).where(function(e,t){return 0!==this._columnTypes[t]},this).select(function(e){return e.colIndex}).take(a).array(),o=s.length}null==u&&(u=n-o,0===u?i=r=0:null!=r?r>u?(r=u,i=0):i=u-r:(i=u>1?1:0,r=u-i));var f=this.options.seriesInRows,l=[];u&&(i&&!f&&l.push({name:"S",count:i}),r&&l.push({name:"C",count:r}),i&&f&&l.push({name:"S",count:i})),o&&l.push({name:"M",count:o});var c=e.range(0,n).array();s&&s.forEach(function(e){c.splice(e,1)});var h={};l.forEach(function(e){var t=e.count,n=e.name;h[n]=e,e.indexes=s&&"M"===n?s:c.splice(0,t)}),this.M=o,this.S=i,this.C=r;var p=[];["S","C","M"].forEach(function(t){var n=h[t];n&&e.array.append(p,n.indexes)}),this._itemInfos=p.map(this._buildItemInfoFromMetadata,this),this._itemCrossGroupIndex={S:0,C:this.S,M:this.S+this.C},this._itemPerm=p},logVItem:function(){return this._logVItem(["S","C","M"],{S:this.S,C:this.C,M:this.M})},_configureTypeCore:function(){function e(e,i,s,o){for(var u=t._itemCrossGroupIndex[i]+o;o>0;){var a=Mt.buildIndexedId(e,s);if(!t.complexTypeProj.isReadOrCalc(a)){n=t._nextAvailableItemIndex(n);if(n>=u)return;r.push({names:a,indexes:n}),n++,o--}s++}}var t=this,n=0,r=[];this.S>0&&e("series","S",0,this.S),this.C>0&&e("category","C",0,this.C),this.M>0&&e("value","M",0,this.M),r&&r.forEach(this.defReader,this);var i=this.options.dataPartDimName;if(i&&!this.complexTypeProj.isReadOrCalc(i)){var s=this.options.plot2DataSeriesIndexes;if(null!=s){var o=this._userDimsReadersByDim.series;o&&this._userRead(w.call(this,s,o),i)}}},_executeCore:function(){var n=this._getDimensionsReaders(),r=this._itemPerm;return e.query(this._getItems()).select(function(e){return e=t.permute(e,r),this._readItem(e,n)},this)}}),e.type("pvc.data.Atom").init(function(t,n,r,i,s){this.dimension=t,this.id=null==n?-e.nextId():e.nextId(),this.value=n,this.label=r,void 0!==i&&(this.rawValue=i),this.key=s}).add({isVirtual:!1,rawValue:void 0,toString:function(){var e=this.label;return null!=e?e:(e=this.value,null!=e?""+e:"")}});var Rt=1;e.type("pvc.data.Complex").init(function(t,n,r,i,s,o){var u=this;u.id=Rt++;var a;t&&(a=t.owner,i||(i=t.atoms)),u.owner=a=a||u;var f=a.type||e.fail.argumentRequired("owner.type");u.atoms=i?Object.create(i):{};var l=!!r;r||(r=f._dimsNames);var c,h,p=u.atoms,d=r.length;if(n){var v=a._dimensions,m=function(e){var t=n[e],r=v[e].intern(t);null==t||i&&r===i[e]||(p[e]=r)};if(l){c=d;for(;c--;)m(r[c])}else for(h in n)m(h);if(o){n=f._calculate(u);for(h in n)e.hasOwnProp.call(p,h)||m(h)}}var g;if(d)if(1===d)g=p[r[0]],u.value=g.value,u.rawValue=g.rawValue,u.key=g.key,s&&(u.label=g.label);else{var y,b,w,E=a.keySep,S=a.labelSep;for(c=0;d>c;c++)g=p[r[c]],c?y+=E+g.key:y=g.key,s&&(w=g.label)&&(b?b+=S+w:b=w);u.value=u.rawValue=u.key=y,s&&(u.label=b)}else u.value=null,u.key="",s&&(u.label="")}).add({labelSep:" ~ ",keySep:"~",value:null,label:null,rawValue:void 0,ensureLabel:function(){var t=this.label;if(null==t){t="";var n=this.owner.labelSep;e.eachOwn(this.atoms,function(e){var r=e.label;r&&(t?t+=n+r:t=r)}),this.label=t}return t},view:function(e){return new Mt.data.ComplexView(this,e)},toString:function(){var e=[""+this.constructor.typeName];return null!=this.index&&e.push("#"+this.index),this.owner.type.dimensionsNames().forEach(function(t){e.push(t+": "+Mt.stringify(this.atoms[t].value))},this),e.join(" ")},rightTrimKeySep:function(e){return e&&Mt.data.Complex.rightTrimKeySep(e,this.owner.keySep)},absKeyTrimmed:function(){return this.rightTrimKeySep(this.absKey)},keyTrimmed:function(){return this.rightTrimKeySep(this.key)}}),Mt.data.Complex.rightTrimKeySep=function(e,t){if(e&&t)for(var n,r=t.length;e.lastIndexOf(t)===(n=e.length-r)&&n>=0;)e=e.substr(0,n);return e},Mt.data.Complex.values=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].value})},Mt.data.Complex.compositeKey=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].key}).join(e.owner.keySep)},Mt.data.Complex.labels=function(e,t){var n=e.atoms;return t.map(function(e){return n[e].label})};var Ut=e.propGet("id");e.type("pvc.data.ComplexView",Mt.data.Complex).init(function(e,t){this.source=e,this.viewDimNames=t,this.base(e,e.atoms,t,e.owner.atoms,!0)}).add({values:function(){return Mt.data.Complex.values(this,this.viewDimNames)},labels:function(){return Mt.data.Complex.labels(this,this.viewDimNames)}}),e.type("pvc.data.Datum",Mt.data.Complex).init(function(e,t){this.base(e,t,null,null,!1,!0)}).add({isSelected:!1,isVisible:!0,isNull:!1,isVirtual:!1,isTrend:!1,trend:null,isInterpolated:!1,interpolation:null,setSelected:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isSelected!==e;return t&&(e?this.isSelected=!0:delete this.isSelected,G.call(this.owner,this,e)),t},toggleSelected:function(){return this.setSelected(!this.isSelected)},setVisible:function(e){if(this.isNull)return!1;e=null==e||!!e;var t=this.isVisible!==e;return t&&(this.isVisible=e,Y.call(this.owner,this,e)),t},toggleVisible:function(){return this.setVisible(!this.isVisible)}});var zt=e.propGet("isSelected");e.type("pvc.data.TrendDatum",Mt.data.Datum).init(function(e,t,n){this.base(e,t),this.trend=n}).add({isVirtual:!0,isTrend:!0}),e.type("pvc.data.InterpolationDatum",Mt.data.Datum).init(function(e,t,n){this.base(e,t),this.interpolation=n}).add({isVirtual:!0,isInterpolated:!0}),e.type("pvc.data.Dimension").init(function(t,n){this.data=t,this.type=n,this.root=this,this.owner=this;var r=n.name;this.name=r,this._atomComparer=n.atomComparer(),this._atomsByKey={};if(t.isOwner())this._atoms=[],H.call(this);else{var i,s=t.parent;s?(i=s._dimensions[r],I.call(i,this),this.root=t.parent.root):(s=t.linkParent,s||e.assert("Data must have a linkParent"),i=s._dimensions[r],q.call(i,this)),this._nullAtom=this.owner._nullAtom,this._lazyInit=function(){this._lazyInit=null;for(var t=this.data._datums,n=t.length,s=this._atomsByKey,o=0;n>o;o++){var u=t[o].atoms[r];s[u.key]=u}this._atoms=i.atoms().filter(function(t){return e.hasOwnProp.call(s,t.key)})}}}).add({parent:null,linkParent:null,_linkChildren:null,_atomsByKey:null,_atomVisibleDatumsCount:null,_disposed:!1,_nullAtom:null,_virtualNullAtom:null,_visibleAtoms:null,_visibleIndexes:null,_atomComparer:null,_atoms:null,_sumCache:null,count:function(){return this._lazyInit&&this._lazyInit(),this._atoms.length},isVisible:function(t){return this._lazyInit&&this._lazyInit(),e.hasOwn(this._atomsByKey,t.key)||e.assert("Atom must exist in this dimension."),U.call(this)[t.key]>0},atoms:function(t){this._lazyInit&&this._lazyInit();var n=e.get(t,"visible");return null==n?this._atoms:(n=!!n,this._visibleAtoms||(this._visibleAtoms={}),this._visibleAtoms[n]||(this._visibleAtoms[n]=W.call(this,n)))},indexes:function(n){this._lazyInit&&this._lazyInit();var r=e.get(n,"visible");return null==r?t.range(0,this._atoms.length):(r=!!r,this._visibleIndexes||(this._visibleIndexes={}),this._visibleIndexes[r]||(this._visibleIndexes[r]=z.call(this,r)))},atom:function(e){if(null==e||""===e)return this._nullAtom;if(e instanceof Mt.data.Atom)return e;this._lazyInit&&this._lazyInit();var t=this.type._key,n=t?t.call(null,e):e;return this._atomsByKey[n]||null},getDistinctAtoms:function(e){var t=[],n=e?e.length:0;if(n)for(var r={},i=0;n>i;i++){var s,o=this.atom(e[i]);o&&!r[s="\0"+o.key]&&(r[s]=o,t.push(o))}return t},extent:function(t){var n=this.atoms(t),r=n.length;if(!r)return void 0;var i=this._nullAtom&&null==n[0].value?1:0,s=r-i;if(s>0){var o,u=n[i],a=n[r-1];if(u!==a&&e.get(t,"abs",!1)){var f=u.value<0?-1:1,l=a.value<0?-1:1;if(f===l)0>l&&(o=a,a=u,u=o);else if(s>2){a.value<-u.value&&(a=u);var c=e.array.binarySearch(n,0,this.type.comparer(),function(e){return e.value});if(0>c){c=~c;var h=n[c-1],p=n[c];u=-h.value<p.value?h:p}else u=n[c]}else a.value<-u.value&&(o=a,a=u,u=o)}return{min:u,max:a}}return void 0},min:function(e){var t=this.atoms(e),n=t.length;if(!n)return void 0;var r=this._nullAtom&&null==t[0].value?1:0;return n>r?t[r]:void 0},max:function(e){var t=this.atoms(e),n=t.length;return n&&null!=t[n-1].value?t[n-1]:void 0},sumAbs:function(t){return this.sum(e.create(t,{abs:!0}))},value:function(t){return this.sum(t&&t.abs?e.create(t,{abs:!1}):t)},valueAbs:function(e){var t=this.value(e);return t?Math.abs(t):t},sum:function(t){var n=!!e.get(t,"abs",!1),r=e.get(t,"zeroIfNone",!0),i=D(t)+":"+n,s=e.getOwn(this._sumCache,i);if(void 0===s){var o=this.name;s=this.data.datums(null,t).reduce(function(e,t){var r=t.atoms[o].value;return n&&0>r&&(r=-r),null!=e?e+r:r},null),(this._sumCache||(this._sumCache={}))[i]=s}return r?s||0:s},percent:function(e,t){var n=e instanceof Mt.data.Atom?e.value:e;if(!n)return 0;var r=this.sumAbs(t);return r?Math.abs(n)/r:0},valuePercent:function(e){var t=this.valueAbs(e);if(!t)return 0;var n=this.data.parent;if(!n)return 1;var r=n.dimensionsSumAbs(this.name,e);return t/r},percentOverParent:function(e){return this.valuePercent(e)},format:function(e,t){return""+(this.type._formatter?this.type._formatter.call(null,e,t):"")},intern:function(t,n){if(null==t||""===t)return this._nullAtom||P.call(this,t);if(t instanceof Mt.data.Atom){if(t.dimension!==this)throw e.error.operationInvalid("Atom is of a different dimension.");return t}var r,i,s=this.type;if("object"==typeof t&&"v"in t){i=t.f,t=t.v;if(null==t||""===t)return this._nullAtom||P.call(this)}if(n)r=t;else{var o=s._converter;if(o){r=o(t);if(null==r||""===r)return this._nullAtom||P.call(this,t)}else r=t}var u=s.cast;if(u){r=u(r);if(null==r||""===r)return this._nullAtom||P.call(this)}var a=s._key,f=""+(a?a(r):r);f||e.fail.operationInvalid("Only a null value can have an empty key.");var l=this._atomsByKey[f];return l?(!n&&l.isVirtual&&delete l.isVirtual,l):M.call(this,s,t,f,r,i,n)},read:function(e,t){if(null==e||""===e)return null;var n,r=this.type;if("object"==typeof e&&"v"in e){t=e.f,e=e.v;if(null==e||""===e)return null}var i=r._converter;n=i?i(e):e;if(null==n||""===n)return null;var s=r.cast;if(s){n=s(n);if(null==n||""===n)return null}var o=r._key,u=""+(o?o(n):n),a=this._atomsByKey[u];if(a)return{rawValue:e,key:u,value:a.value,label:""+(null==t?a.label:t)};if(null==t){var f=r._formatter;t=f?f(n,e):n}return t=""+t,{rawValue:e,key:u,value:n,label:t}},dispose:function(){var e=this;if(!e._disposed){d(e.childNodes,"parent"),d(e._linkChildren,"linkParent");var t;(t=e.parent)&&m(t,"childNodes",e,"parent"),(t=e.linkParent)&&m(t,"_linkChildren",e,"linkParent"),F.call(e),e._lazyInit=e._atoms=e._nullAtom=e._virtualNullAtom=null,e._disposed=!0}}}),e.type("pvc.data.Data",Mt.data.Complex).init(function(n){n||e.fail.argumentRequired("keyArgs"),this._visibleNotNullDatums=new e.Map;var r,i,s,o,u,a,f=this.parent=n.parent||null;if(f)this.root=f.root,this.depth=f.depth+1,this.type=f.type,u=n.datums||e.fail.argumentRequired("datums"),r=f.owner,i=n.atoms||e.fail.argumentRequired("atoms"),o=n.atomsDimNames||e.fail.argumentRequired("atomsDimNames"),s=f.atoms;else{this.root=this,o=[];var l=n.linkParent||null;l?(r=l.owner,this.type=r.type,u=n.datums||e.fail.argumentRequired("datums"),this._leafs=[],this._wherePred=n.where||null,s=l.atoms,a=e.get(n,"index",null),V.call(l,this,a)):(r=this,s={},n.labelSep&&(this.labelSep=n.labelSep),n.keySep&&(this.keySep=n.keySep),this.type=n.type||e.fail.argumentRequired("type"),this._selectedNotNullDatums=new e.Map)}u&&et.call(this,u),this.owner=r,this._atomsBase=s,this._dimensions={},this._dimensionsList=[],this.type.dimensionsList().forEach(this._initDimension,this),this.base(r,i,o,s,!0),t.Dom.Node.call(this),f?(a=e.get(n,"index",null),X.call(f,this,a),this.absLabel=f.absLabel?e.string.join(r.labelSep,f.absLabel,this.label):this.label,this.absKey=f.absKey?e.string.join(r.keySep,f.absKey,this.key):this.key):(this.absLabel=this.label,this.absKey=this.key)}).add(t.Dom.Node).add({parent:null,linkParent:null,_dimensions:null,_dimensionsList:null,_freeDimensionNames:null,_linkChildren:null,_leafs:null,_childrenByKey:null,_visibleNotNullDatums:null,_selectedNotNullDatums:null,_groupByCache:null,_sumAbsCache:null,treeHeight:null,_groupOper:null,_wherePred:null,_groupSpec:null,_groupLevel:null,_datums:null,_datumsById:null,_datumsByKey:null,depth:0,label:"",absLabel:"",_disposed:!1,_isFlattenGroup:!1,_isDegenerateFlattenGroup:!1,_initDimension:function(e){var t=new Mt.data.Dimension(this,e);this._dimensions[e.name]=t,this._dimensionsList.push(t)},dimensions:function(t,n){if(null==t)return this._dimensions;var r=e.getOwn(this._dimensions,t);if(!r&&e.get(n,"assertExists",!0))throw e.error.argumentInvalid("name","Undefined dimension '{0}'.",[t]);return r},dimensionsList:function(){return this._dimensionsList},freeDimensionsNames:function(){var e=this._freeDimensionNames;return e||(this._freeDimensionNames=e=this.type.dimensionsNames().filter(function(e){var t=this.atoms[e];return!(t instanceof Mt.data.Atom)||null==t.value},this)),e},isOwner:function(){return this.owner===this},children:function(){var t=this.childNodes;return t.length?e.query(t):e.query()},child:function(t){return e.getOwn(this._childrenByKey,t,null)},childCount:function(){return this.childNodes.length},leafs:function(){return e.query(this._leafs)},count:function(){return this._datums.length},firstDatum:function(){return this._datums.length?this._datums[0]:null},firstAtoms:function(){return(this.firstDatum()||this).atoms},singleDatum:function(){var e=this._datums;return 1===e.length?e[0]:null},dispose:function(){var e=this;if(!e._disposed){K.call(e);var t;(t=e._selectedNotNullDatums)&&t.clear(),e._visibleNotNullDatums.clear(),t=e._dimensionsList;for(var n=0,r=t.length;r>n;n++)t[n].dispose();e._dimensions=null,e._dimensionsLIst=null;if(t=e.parent)t.removeChild(e),e.parent=null;(t=e.linkParent)&&J.call(t,e),e._disposed=!0}},disposeChildren:function(){K.call(this)}}),Mt.data.Data.add({selectedCount:function(){return this.isOwner()?this._selectedNotNullDatums.count:this.datums(null,{selected:!0}).count()},selectedDatums:function(){return this.isOwner()?this._selectedNotNullDatums.values():this.datums(null,{selected:!0}).array()},selectedDatumMap:function(){if(!this.isOwner()){var t=this.datums(null,{selected:!0}).object({name:e.propGet("id")});return new e.Set(t)}return this._selectedNotNullDatums.clone()},visibleCount:function(){return this._visibleNotNullDatums.count},replaceSelected:function(t){e.array.is(t)||(t=t.array());var n=e.query(t).where(zt).object({name:Ut}),r=this.owner.clearSelected(function(t){return!e.hasOwn(n,t.id)});return r|=Mt.data.Data.setSelected(t,!0),r},clearSelected:function(e){if(this.owner!==this)return this.owner.clearSelected(e);if(!this._selectedNotNullDatums.count)return!1;var t;return e?(t=!1,this._selectedNotNullDatums.values().filter(e).forEach(function(e){t=!0,x.call(e),this._selectedNotNullDatums.rem(e.id)},this)):(t=!0,this._selectedNotNullDatums.values().forEach(function(e){x.call(e)}),this._selectedNotNullDatums.clear()),t}}),Mt.data.Data.setSelected=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setSelected(n)}),!!r},Mt.data.Data.toggleSelected=function(t,n){e.array.isLike(t)||(t=e.query(t).array());var r=e.query(t),i=n?r.any(zt):r.all(T);return this.setSelected(t,!i)},Mt.data.Data.setVisible=function(t,n){var r=0;return t&&e.query(t).each(function(e){r|=e.setVisible(n)}),!!r},Mt.data.Data.toggleVisible=function(t){e.array.isLike(t)||(t=e.query(t).array());var n=e.query(t).all(e.propGet("isVisible"));return Mt.data.Data.setVisible(t,!n)},e.space("pvc.data").FlatteningMode=e.set(e.makeEnum(["DfsPre","DfsPost"]),"None",0),e.type("pvc.data.GroupingSpec").init(function(t,n,r){this.type=n||null;var i=[];this.hasCompositeLevels=!1;var s=[];this.levels=e.query(t||void 0).where(function(e){return e.dimensions.length>0}).select(function(t){return i.push(t.id),e.array.append(s,t.dimensionNames()),!this.hasCompositeLevels&&t.dimensions.length>1&&(this.hasCompositeLevels=!0),t._setAccDimNames(s.slice(0)),t},this).array(),this._dimNames=s,this.depth=this.levels.length,this.isSingleLevel=1===this.depth,this.isSingleDimension=this.isSingleLevel&&!this.hasCompositeLevels,this.firstDimension=this.depth>0?this.levels[0].dimensions[0]:null,this.rootLabel=e.get(r,"rootLabel")||"",this.flatteningMode=e.get(r,"flatteningMode")||Mt.data.FlatteningMode.None,this._cacheKey=this._calcCacheKey(),this.id=this._cacheKey+"##"+i.join("||")}).add({_calcCacheKey:function(t){return[e.get(t,"flatteningMode")||this.flatteningMode,e.get(t,"reverse")||"false",e.get(t,"isSingleLevel")||this.isSingleLevel,e.get(t,"rootLabel")||this.rootLabel].join("#")},bind:function(t){this.type=t||e.fail.argumentRequired("type"),this.levels.forEach(function(e){e.bind(t)})},dimensions:function(){return e.query(this.levels).prop("dimensions").selectMany()},dimensionNames:function(){return this._dimNames},view:function(e){return e.view(this.dimensionNames())},isDiscrete:function(){var e;return!this.isSingleDimension||!!(e=this.firstDimension)&&e.type.isDiscrete},firstDimensionType:function(){var e=this.firstDimension;return e&&e.type},firstDimensionName:function(){var e=this.firstDimensionType();return e&&e.name},firstDimensionValueType:function(){var e=this.firstDimensionType();return e&&e.valueType},isNull:function(){return!this.levels.length},ensure:function(t){var n;if(t){var r=this._calcCacheKey(t);if(r!==this._cacheKey){var i=e.lazy(this,"_groupingCache");n=e.getOwn(i,r),n||(n=i[r]=this._ensure(t))}}return n||this},_ensure:function(t){var n=this;if(e.get(t,"isSingleLevel")&&!n.isSingleLevel)return n._singleLevelGrouping(t);if(e.get(t,"reverse"))return n._reverse(t);var r=e.get(t,"flatteningMode")||n.flatteningMode,i=e.get(t,"rootLabel")||n.rootLabel;return r!==n.flatteningMode||i!==n.rootLabel?new Mt.data.GroupingSpec(n.levels,n.type,{flatteningMode:r,rootLabel:i}):n},_singleLevelGrouping:function(t){var n=!!e.get(t,"reverse"),r=this.dimensions().select(function(e){return n?new Mt.data.GroupingDimensionSpec(e.name,!e.reverse,e.type.complexType):e}),i=new Mt.data.GroupingLevelSpec(r,this.type);return new Mt.data.GroupingSpec([i],this.type,{flatteningMode:null,rootLabel:e.get(t,"rootLabel")||this.rootLabel})},_reverse:function(t){var n=e.query(this.levels).select(function(t){var n=e.query(t.dimensions).select(function(e){return new Mt.data.GroupingDimensionSpec(e.name,!e.reverse,e.type.complexType)});return new Mt.data.GroupingLevelSpec(n,this.type)});return new Mt.data.GroupingSpec(n,this.type,{flatteningMode:e.get(t,"flatteningMode")||this.flatteningMode,rootLabel:e.get(t,"rootLabel")||this.rootLabel})},toString:function(){return e.query(this.levels).select(function(e){return""+e}).array().join(", ")}}),e.type("pvc.data.GroupingLevelSpec").init(function(t,n){var r=[],i=[];this.dimensions=e.query(t).select(function(e){return r.push(e.id),i.push(e.name),e}).array(),this._dimNames=i,this.dimensionsInDefOrder=this.dimensions.slice(0),n&&this._sortDimensions(n),this.id=r.join(","),this.depth=this.dimensions.length;var s=this;this.comparer=function(e,t){return s.compare(e,t)}}).add({_sortDimensions:function(e){e.sortDimensionNames(this.dimensionsInDefOrder,function(e){return e.name})},_setAccDimNames:function(e){this._accDimNames=e},accDimensionNames:function(){return this._accDimNames},dimensionNames:function(){return this._dimNames},bind:function(e){this._sortDimensions(e),this.dimensions.forEach(function(t){t.bind(e)})},compare:function(e,t){for(var n=this.dimensions,r=this.depth,i=0;r>i;i++){var s=n[i].compareDatums(e,t);if(s)return s}return 0},key:function(e){for(var t="",n=this._dimNames,r=this.depth,i=e.owner.keySep,s=e.atoms,o=0;r>o;o++){var u=s[n[o]].key;o?t+=i+u:t=u}return t},atomsInfo:function(e){for(var t={},n=this._dimNames,r=this.depth,i=e.atoms,s=(e.owner.keySep,0);r>s;s++){var o=n[s];t[o]=i[o]}return{atoms:t,dimNames:n}},toString:function(){return e.query(this.dimensions).select(function(e){return""+e}).array().join("|")}}),e.type("pvc.data.GroupingDimensionSpec").init(function(e,t,n){this.name=e,this.reverse=!!t,this.id=e+":"+(t?"0":"1"),n&&this.bind(n)}).add({type:null,comparer:null,bind:function(t){t||e.fail.argumentRequired("type"),this.type=t.dimensions(this.name),this.comparer=this.type.atomComparer(this.reverse)},compareDatums:function(e,t){if(this.type.isComparable){var n=this.name;return this.comparer(e.atoms[n],t.atoms[n])}return this.reverse?t.id-e.id:e.id-t.id},toString:function(){return this.name+(this.reverse?" desc":"")}}),Mt.data.GroupingSpec.parse=function(t,n){if(!t)return new Mt.data.GroupingSpec(null,n);var r;e.array.is(t)?r=t:e.string.is(t)&&(r=t.split(/\s*,\s*/));var i=e.query(r).select(function(e){var t=Z(e,n);return new Mt.data.GroupingLevelSpec(t,n)});return new Mt.data.GroupingSpec(i,n)};var Wt=/^\s*(.+?)(?:\s+(asc|desc))?\s*$/i;e.type("pvc.data.DataOper").init(function(t){t||e.fail.argumentRequired("linkParent"),this._linkParent=t}).add({key:null,execute:e.method({isAbstract:!0})}),e.type("pvc.data.GroupingOper",Mt.data.DataOper).init(function(t,n,r){n||e.fail.argumentRequired("groupingSpecs"),this.base(t,r),this._where=e.get(r,"where"),this._visible=e.get(r,"visible",null),this._selected=e.get(r,"selected",null);var i=this._isNull=e.get(r,"isNull",null);this._postFilter=null!=i?function(e){return e.isNull===i}:null;var s=null==this._selected,o="";this._where&&(o=e.get(r,"whereKey"),o||(r&&null!==o?(o=""+e.nextId("dataOperWhereKey"),r.whereKey=o):s=!1));var u=[];this._groupSpecs=e.array.as(n).map(function(n){if(n instanceof Mt.data.GroupingSpec){if(n.type!==t.type)throw e.error.argumentInvalid("groupingSpecText","Invalid associated complex type.")}else n=Mt.data.GroupingSpec.parse(n,t.type);return u.push(n.id),n}),s&&(this.key=u.join("!!")+"||visible:"+this._visible+"||isNull:"+this._isNull+"||where:"+o)}).add({execute:function(){var t=st(e.query(this._linkParent._datums),{visible:this._visible,selected:this._selected,where:this._where}),n=this._group(t);return this._generateData(n,null,this._linkParent)},executeAdd:function(t,n){var r=st(e.query(n),{visible:this._visible,selected:this._selected,where:this._where}),i=this._group(r);return this._generateData(i,null,this._linkParent,t),i.datums},_group:function(t){var n={isRoot:!0,treeHeight:e.query(this._groupSpecs).select(function(e){var t=e.levels.length;return t?e.flatteningMode?1:t:0}).reduce(e.add,0),datums:[]};return n.treeHeight>0&&this._groupSpecRecursive(n,e.query(t).array(),0),n},_groupSpecRecursive:function(e,t,n){var r=this._groupSpecs[n];r.flatteningMode?this._groupSpecRecursiveFlattened(e,t,r,n):this._groupSpecRecursiveNormal(e,t,r,n)},_groupSpecRecursiveNormal:function(t,n,r,i){function s(t,n,f){var l=o[f],c=f===u-1,h=a&&c;t.groupSpec=r,t.groupLevelSpec=l;for(var p=t.children=this._groupLevelDatums(l,t,n,!1),d=0,v=p.length;v>d;d++){var m=p[d];if(!h){var g=m.datums;m.datums=[],c?this._groupSpecRecursive(m,g,i+1):s.call(this,m,g,f+1)}e.array.append(t.datums,m.datums)}}var o=r.levels,u=o.length,a=i===this._groupSpecs.length-1;t.isRoot&&(t.label=r.rootLabel),s.call(this,t,n,0)},_groupSpecRecursiveFlattened:function(t,n,r,i){function s(t,n,r){for(var h=u[r],d=r===a-1,v=f&&d,m=this._groupLevelDatums(h,t,n,!0),g=f?t.datums:[],y=0,b=m.length;b>y;y++){var w=m[y],E=w.datums;e.array.lazy(t,"_children").push(w);if(e.hasOwn(c,w.key))e.array.append(g,E);else{var S=l.length;o||(p(w),t.isFlattenGroup=!0),v||(w.datums=[],d?this._groupSpecRecursive(w,E,i+1):s.call(this,w,E,r+1)),e.array.append(g,w.datums),o&&(e.hasOwn(c,w.key)&&(w.isFlattenGroup||e.assert("Must be a parent for duplicate keys to exist."),1===w._children.length&&(l.splice(S,l.length-S),w.isDegenerateFlattenGroup=!0)),p(w),t.isFlattenGroup=!0)}}f||this._groupSpecRecursive(t,g,i+1)}var o=r.flatteningMode===Mt.data.FlatteningMode.DfsPost,u=r.levels,a=u.length,f=i===this._groupSpecs.length-1,l=[],c={};t.children=l,t.childrenByKey=c;var h={key:"",absKey:"",atoms:{},datums:[],label:r.rootLabel,dimNames:[]},p=function(e){l.push(e),c[e.key]=e};o||p(h),s.call(this,h,n,0),o&&p(h),t.datums=h.datums},_groupLevelDatums:function(t,n,r,i){for(var s,o=[],u={},a=this._postFilter,f=t.comparer,l=function(e,t){return f(e.firstDatum,t.firstDatum)},c=0,h=r.length;h>c;c++){var p=r[c],d=t.key(p),v=e.hasOwnProp.call(u,d)&&u[d];v?(!a||a(p))&&v.datums.push(p):(v=t.atomsInfo(p),v.key=d,v.firstDatum=p,v.datums=!a||a(p)?[p]:[],i&&(s||(s=p.owner.keySep),this._onNewChildNodeFlattened(d,s,v,t,n)),e.array.insert(o,v,l),u[d]=v)}if(a){c=o.length;for(;c--;)o[c].datums.length||o.splice(c,1)}return o},_onNewChildNodeFlattened:function(t,n,r,i,s){e.copy(r.atoms,s.atoms),r.dimNames=i.accDimensionNames();if(s.dimNames.length){var o=s.absKey+n+t;r.absKey=o,r.key=Mt.data.Complex.rightTrimKeySep(o,n)}else r.absKey=t},_generateData:function(t,n,r,i){var s,o;if(t.isRoot)i?(s=i,rt.call(s,t.datums)):(o=!0,s=new Mt.data.Data({linkParent:r,datums:t.datums}),s.treeHeight=t.treeHeight,s._groupOper=this);else{i&&(s=r.child(t.key),s&&nt.call(s,t.datums));if(!s){o=!0;var u,a;i&&(a=r.childNodes)&&(u=~e.array.binarySearch(a,t.datums[0],n.groupLevelSpec.comparer)),s=new Mt.data.Data({parent:r,atoms:t.atoms,atomsDimNames:t.dimNames,datums:t.datums,index:u})}}if(o){t.isFlattenGroup&&(s._isFlattenGroup=!0,s._isDegenerateFlattenGroup=!!t.isDegenerateFlattenGroup);var f=t.label;f&&(s.label+=f,s.absLabel+=f)}var l=t.children,c=l&&l.length;if(c){o&&(s._groupSpec=t.groupSpec,s._groupLevelSpec=t.groupLevelSpec);for(var h=0;c>h;h++)this._generateData(l[h],t,s,i)}else if(o&&!t.isRoot){var p=s.root._leafs;s.leafIndex=p.length,p.push(s)}return s}}),e.type("pvc.data.LinearInterpolationOper").init(function(t,n,r,i,s,o,u){this._newDatums=[],this._data=r;var a=i.flatten(t).children(),f=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null];this._isCatDiscrete=i.grouping.isDiscrete(),this._firstCatDim=this._isCatDiscrete?null:t.owner.dimensions(i.firstDimensionName()),this._stretchEnds=u;var l=this._valDim=t.owner.dimensions(o.firstDimensionName()),c={visible:!0,zeroIfNone:!1};this._catInfos=a.select(function(e,t){var n=r.child(e.key),i={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t};return i.serInfos=f.map(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=t?t.dimensions(l.name).value(c):null;return{data:e,group:t,value:r,isNull:null==r,catInfo:i}}),i}).array(),this._serCount=f.length,this._serStates=e.range(0,this._serCount).select(function(e){return new Mt.data.LinearInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("pvc.data.LinearInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t){var r=t.value,i=n.value,s=i-r;if(this.interpolation._isCatDiscrete){var o=n.catInfo.index-t.catInfo.index;o>=2||e.assert("Must have at least one interpolation point."),this._stepValue=s/o,this._middleIndex=~~(o/2);var u=o-1;this._isOdd=u%2>0}else{var a=+t.catInfo.value,f=+n.catInfo.value,l=f-a;this._steep=s/l,this._middleCat=(f+a)/2}}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o,u=this.interpolation,a=t.catInfo;if(n&&r)if(u._isCatDiscrete){var f=a.index-r.catInfo.index;s=r.value+this._stepValue*f,o=this._isOdd?f<this._middleIndex?r.group:n.group:f<=this._middleIndex?r.group:n.group}else{var l=+a.value,c=+r.catInfo.value;s=r.value+this._steep*(l-c),o=l<this._middleCat?r.group:n.group}else{if(!u._stretchEnds)return;s=i.value,o=i.group}var h=Object.create(o._datums[0].atoms);e.copyOwn(h,a.data.atoms);var p=u._valDim.intern(s,!0);h[p.dimension.name]=p,u._newDatums.push(new Mt.data.InterpolationDatum(o.owner,h,"linear"))}}}),e.type("pvc.data.ZeroInterpolationOper").init(function(t,n,r,i,s,o,u){this._newDatums=[],this._data=r;var a=i.flatten(t).children(),f=s.isBound()?s.flatten(n,{visible:!0,isNull:!1}).children().array():[null];this._isCatDiscrete=i.grouping.isDiscrete(),this._firstCatDim=this._isCatDiscrete?null:t.owner.dimensions(i.firstDimensionName()),this._stretchEnds=u;var l=this._valDim=t.owner.dimensions(o.firstDimensionName()),c={visible:!0,zeroIfNone:!1};this._catInfos=a.select(function(e,t){var n=r.child(e.key),i={data:n||e,value:e.value,isInterpolated:!1,serInfos:null,index:t};return i.serInfos=f.map(function(e){var t=n;t&&e&&(t=t.child(e.key));var r=t?t.dimensions(l.name).value(c):null;return{data:e,group:t,value:r,isNull:null==r,catInfo:i}}),i}).array(),this._serCount=f.length,this._serStates=e.range(0,this._serCount).select(function(e){return new Mt.data.ZeroInterpolationOperSeriesState(this,e)},this).array()}).add({interpolate:function(){for(var e;e=this._catInfos.shift();)e.serInfos.forEach(this._visitSeries,this);var t=this._newDatums;t.length&&this._data.owner.add(t)},_visitSeries:function(e,t){this._serStates[t].visit(e)},nextUnprocessedNonNullCategOfSeries:function(e){for(var t=0,n=this._catInfos.length;n>t;){var r=this._catInfos[t++],i=r.serInfos[e];if(!i.isNull)return i}}}),e.type("pvc.data.ZeroInterpolationOperSeriesState").init(function(e,t){this.interpolation=e,this.index=t,this._lastNonNull(null)}).add({visit:function(e){e.isNull?this._interpolate(e):this._lastNonNull(e)},_lastNonNull:function(e){return arguments.length&&(this.__lastNonNull=e,this.__nextNonNull=void 0),this.__lastNonNull},_nextNonNull:function(){return this.__nextNonNull},_initInterpData:function(){if(void 0===this.__nextNonNull){var t=this.__lastNonNull,n=this.__nextNonNull=this.interpolation.nextUnprocessedNonNullCategOfSeries(this.index)||null;if(n&&t){t.value,n.value;if(this.interpolation._isCatDiscrete){var r=n.catInfo.index-t.catInfo.index;r>=2||e.assert("Must have at least one interpolation point."),this._middleIndex=~~(r/2);var i=r-1;this._isOdd=i%2>0}else{var s=+t.catInfo.value,o=+n.catInfo.value;this._middleCat=(o+s)/2}}}},_interpolate:function(t){this._initInterpData();var n=this.__nextNonNull,r=this.__lastNonNull,i=n||r;if(i){var s,o=this.interpolation,u=t.catInfo;if(n&&r)if(o._isCatDiscrete){var a=u.index-r.catInfo.index;s=this._isOdd?a<this._middleIndex?r.group:n.group:a<=this._middleIndex?r.group:n.group}else{var f=+u.value;s=f<this._middleCat?r.group:n.group}else{if(!o._stretchEnds)return;s=i.group}var l=Object.create(s._datums[0].atoms);e.copyOwn(l,u.data.atoms);var c=o._zeroAtom||(o._zeroAtom=o._valDim.intern(0,!0));l[c.dimension.name]=c,o._newDatums.push(new Mt.data.InterpolationDatum(s.owner,l,"zero"))}}}),Mt.data.Data.add({load:function(t,n){Q.call(this);var r=e.get(n,"where"),i=e.get(n,"isNull"),s=e.query(t).select(function(e){var t=new Mt.data.Datum(this,e);return i&&i(t)&&(t.isNull=!0),r&&!r(t)?null:t},this);et.call(this,s,{isAdditive:!1,doAtomGC:!0})},clearVirtuals:function(){var t=this._datums;if(t){this._sumAbsCache=null;for(var n,r=this._visibleNotNullDatums,i=this._selectedNotNullDatums,s=this._datumsByKey,o=this._datumsById,u=0,a=t.length;a>u;){var f=t[u];if(f.isVirtual){var l=f.id,c=f.key;t.splice(u,1),delete o[l],delete s[c],i&&f.isSelected&&i.rem(l),f.isVisible&&r.rem(l),a--,n=!0}else u++}if(n){if(!t.length&&this.parent){this.dispose();return}var h=this.childNodes;if(h){u=0,a=h.length;for(;a>u;){var p=h[u];p.clearVirtuals(),p.parent?u++:a--}}this._linkChildren&&this._linkChildren.forEach(function(e){e.clearVirtuals()})}}e.eachOwn(this._dimensions,function(e){j.call(e)})},add:function(e){Q.call(this),et.call(this,e,{isAdditive:!0,doAtomGC:!0})},groupBy:function(e,t){var n,r,i=new Mt.data.GroupingOper(this,e,t),s=i.key;return s&&(n=this._groupByCache,r=n&&n[s]),r?Mt.debug>=7&&Mt.log("[GroupBy] Cache key hit '"+s+"'"):(Mt.debug>=7&&Mt.log("[GroupBy] "+(s?"Cache key not found: '"+s+"'":"No Cache key")),r=i.execute(),s&&((n||(this._groupByCache={}))[s]=r)),r},where:function(t,n){var r;if(t)t=it.call(this,t,n),r=at.call(this,t,n);else{if(!n)return e.query(this._datums);r=st(e.query(this._datums),n)}var i=ot(t,n);return new Mt.data.Data({linkParent:this,datums:r,where:i})},datums:function(t,n){return t?(t=it.call(this,t,n),at.call(this,t,n)):n?st(e.query(this._datums),n):e.query(this._datums)},datum:function(t,n){return t||e.fail.argumentRequired("whereSpec"),t=it.call(this,t,n),at.call(this,t,n).first()||null},dimensionsSumAbs:function(t,n){var r=t+":"+D(n),i=e.getOwn(this._sumAbsCache,r);return null==i&&(i=this.children().where(function(e){return!e._isFlattenGroup||e._isDegenerateFlattenGroup}).select(function(e){return e.dimensions(t).valueAbs(n)||0},this).reduce(e.add,0),(this._sumAbsCache||(this._sumAbsCache={}))[r]=i),i}}),Mt.data.Data.add({getInfo:function(){var t=["DATA SUMMARY",Mt.logSeparator,"  Dimension",Mt.logSeparator];return e.eachOwn(this.dimensions(),function(e,n){var r=e.count(),i=e.type,s=[];s.push('"'+i.label+'"'),s.push(i.valueTypeName),i.isComparable&&s.push("comparable"),i.isDiscrete||s.push("continuous"),i.isHidden&&s.push("hidden"),t.push("  "+n+" ("+s.join(", ")+") ("+r+")\n	"+e.atoms().slice(0,10).map(function(e){return e.label}).join(", ")+(r>10?"...":""))}),t.join("\n")},getValues:function(){return t.range(0,this.getCategoriesSize()).map(function(e){return this._getValuesForCategoryIndex(e)},this)},_getDimensionValues:function(e){return this.dimensions(e).atoms().map(function(e){return e.value})},_getDimensionVisibleValues:function(e){return this.dimensions(e).atoms({visible:!0}).map(function(e){return e.value})},getSeries:function(){return this._getDimensionValues("series")},getVisibleSeriesIndexes:function(){return this.dimensions("series").indexes({visible:!0})},getVisibleCategoriesIndexes:function(){return this.dimensions("category").indexes({visible:!0})},getVisibleSeries:function(){return this._getDimensionVisibleValues("series")},getCategories:function(){return this._getDimensionValues("category")},getVisibleCategories:function(){return this._getDimensionVisibleValues("category")},_getValuesForCategoryIndex:function(t){var n=this.dimensions("category").atoms()[t],r=this.datums({category:n}).uniqueIndex(function(e){return e.atoms.series.key});return this.dimensions("series").atoms().map(function(t){var n=e.getOwn(r,t.key);return n?n.atoms.value.value:null})},getSeriesSize:function(){var e=this.dimensions("series",{assertExists:!1});return e?e.count():0},getCategoriesSize:function(){var e=this.dimensions("category",{assertExists:!1});return e?e.count():0}}),e.scope(function(){var t=e.makeEnum(["Interactive","ShowsActivity","ShowsSelection","ShowsTooltip","Selectable","Unselectable","Hoverable","Clickable","DoubleClickable","SelectableByClick","SelectableByRubberband","SelectableByFocusWindow","Animatable"]);t.ShowsInteraction=t.ShowsActivity|t.ShowsSelection,t.Actionable=t.Hoverable|t.Clickable|t.DoubleClickable|t.SelectableByClick,t.HandlesEvents=t.Actionable|t.ShowsTooltip,t.HandlesClickEvent=t.Clickable|t.SelectableByClick,e.type("pvc.visual.Interactive").addStatic(t).addStatic({ShowsAny:t.ShowsInteraction|t.ShowsTooltip,SelectableAny:t.Selectable|t.SelectableByClick|t.SelectableByRubberband|t.SelectableByFocusWindow}).add({_ibits:-1}).add(e.query(e.ownKeys(t)).object({name:e.firstLowerCase,value:function(e){var n=t[e];return function(){return!!(this._ibits&n)}}}))}),e.type("pvc.visual.Scene").init(function(n,r){Mt.debug>=4&&(this.id=e.nextId("scene")),this._renderId=0,this.renderState={},t.Dom.Node.call(this,null),this.parent=n||null;if(n){this.root=n.root;var i=e.get(r,"index",null);n.insertAt(this,i)}else this.root=this,this._active=null,this._panel=e.get(r,"panel")||e.fail.argumentRequired("panel","Argument is required on root scene.");var s,o,u,a,f,l,c,h=e.array.to(e.get(r,"source"));h&&h.length?(this.source=h,s=h[0],s instanceof Mt.data.Data?(o=s,f=h,u=o.firstDatum()||e.query(f).select(function(e){return e.firstDatum()}).first(e.notNully)):(s instanceof Mt.data.Datum||e.assert("not a datum"),u=s,a=h),l=s.atoms,c=u&&u.atoms||s.atoms):l=c=n?Object.create(n.atoms):{},this.atoms=l,this.firstAtoms=c,f&&(this.groups=f),o&&(this.group=o),a&&(this._datums=a),u&&(this.datum=u),(!s||s.isNull)&&(this.isNull=!0),this.vars=n?Object.create(n.vars):{}}).add(t.Dom.Node).add(Mt.visual.Interactive).add({source:null,groups:null,group:null,_datums:null,datum:null,isNull:!1,get:function(e,t){var n=this.vars[e];return n&&n[t||"value"]},getSeries:function(){return this.get("series")},getCategory:function(){return this.get("category")},getValue:function(){return this.get("value")},getTick:function(){return this.get("tick")},getX:function(){return this.get("x")},getY:function(){return this.get("y")},getSeriesLabel:function(){return this.get("series","label")},getCategoryLabel:function(){return this.get("category","label")},getValueLabel:function(){return this.get("value","label")},getTickLabel:function(){return this.get("tick","label")},getXLabel:function(){return this.get("x","label")},getYLabel:function(){return this.get("y","label")},data:function(){var e=this.group;if(!e){for(var t=this;!e&&(t=t.parent);)e=t.group;e||(e=this.panel.data)}return e},datums:function(){return this.groups?e.query(this.groups).selectMany(function(e){return e.datums()}):this._datums?e.query(this._datums):e.query()},format:function(t){return e.format(t,this._formatScope,this)},_formatScope:function(t){if("#"===t.charAt(0)){t=t.substr(1).split(".");if(t.length>2)throw e.error.operationInvalid("Scene format mask is invalid.");var n=this.firstAtoms[t[0]];if(n){if(t.length>1)switch(t[1]){case"value":return n.value;case"label":break;default:throw e.error.operationInvalid("Scene format mask is invalid.")}return n}return null}return e.getPath(this.vars,t)},isRoot:function(){return this.root===this},panel:function(){return this.root._panel},chart:function(){return this.root._panel.chart},compatVersion:function(){return this.root._panel.compatVersion()},children:function(){var t=this.childNodes;return t.length?e.query(t):e.query()},leafs:function(){function t(e){for(;e.childNodes.length;)e=e.childNodes[0];return e}var n=this;return e.query(function(e){if(!e){var r=t(n);return r===n?0:(this.item=r,1)}var i=this.item.nextSibling;if(i)return this.item=i,1;for(var s=this.item;s!==n&&(s=s.parentNode);)if(i=s.nextSibling)return this.item=t(i),1;return 0})},anyInteraction:function(){return!!this.root._active||this.anySelected()},isActive:!1,setActive:function(e){e=!!e,this.isActive!==e&&ct.call(this.root,this.isActive?null:this)},clearActive:function(){return ct.call(this.root,null)},anyActive:function(){return!!this.root._active},active:function(){return this.root._active},activeSeries:function(){var e,t=this.active();return t&&(e=t.vars.series)&&e.value},isActiveSeries:function(){if(this.isActive)return!0;var e=this.renderState.isActiveSeries;if(null==e){var t;e=null!=(t=this.activeSeries())&&t===this.vars.series.value,this.renderState.isActiveSeries=e}return e},isActiveDatum:function(){return this.isActive?!0:!1},isActiveDescendantOrSelf:function(){return this.isActive?!0:e.lazy(this.renderState,"isActiveDescOrSelf",this._calcIsActiveDescOrSelf,this)},_calcIsActiveDescOrSelf:function(){var e=this.active();if(e)for(;e=e.parent;)if(e===this)return!0;return!1},isVisible:function(){return this._visibleInfo().is},anyVisible:function(){return this._visibleInfo().any},_visibleInfo:function(){return e.lazy(this.renderState,"visibleInfo",this._createVisibleInfo,this)},_createVisibleInfo:function(){var t=this.chart().data.owner.visibleCount()>0,n=t&&this.datums().any(e.propGet("isVisible"));return{any:t,is:n}},isSelected:function(){return this._selectedInfo().is},anySelected:function(){return this._selectedInfo().any},_selectedInfo:function(){return e.lazy(this.renderState,"selectedInfo",this._createSelectedInfo,this)},_createSelectedInfo:function(){var e=this.chart().data.owner.selectedCount()>0,t=e&&this.datums().any(zt);return{any:e,is:t}},select:function(t){var n=this,r=n.datums().array();if(r.length){var i=n.chart();i._updatingSelections(function(){r=i._onUserSelection(r),r&&r.length&&(i.options.ctrlSelectMode&&e.get(t,"replace",!0)?i.data.replaceSelected(r):Mt.data.Data.toggleSelected(r))})}},isSelectedDescendantOrSelf:function(){return this.isSelected()?!0:e.lazy(this.renderState,"isSelectedDescOrSelf",this._calcIsSelectedDescOrSelf,this)},_calcIsSelectedDescOrSelf:function(){var e=this.firstChild;if(e)do if(e.isSelectedDescendantOrSelf())return!0;while(e=e.nextSibling);return!1},toggleVisible:function(){Mt.data.Data.toggleVisible(this.datums())&&this.chart().render(!0,!0,!1)}}),Mt.visual.Scene.prototype.variable=function(t,n){var r,i=this;if(i._vars&&i._vars[t])void 0!==n&&(r=e.set({},"_"+t+"EvalCore",e.fun.to(n)));else{i.hasOwnProperty("_vars")||(i._vars=e.create(i._vars)),i._vars[t]=!0,r={};var s="_"+t+"Eval";r[t]=pt(t,s);var o=s+"Core";e.hasOwn(i,s)||(r[s]=e.methodCaller(o)),e.hasOwn(i,o)||(r[o]=e.fun.to(void 0===n?null:n))}return r&&i.constructor.add(r),i};var Xt=Mt.visual.ValueLabelVar=function(e,t,n,r){this.value=e,this.label=t,void 0!==n&&(this.rawValue=n),void 0!==r&&(this.absLabel=r)};e.set(Xt.prototype,"rawValue",void 0,"absLabel",void 0,"setValue",function(e){return this.value=e,this},"setLabel",function(e){return this.label=e,this},"clone",function(){return new Xt(this.value,this.label,this.rawValue)},"toString",function(){var e=this.label||this.value;return null==e?"":"string"!=typeof e?""+e:e}),Xt.fromComplex=function(e){return e?new Xt(e.value,e.label,e.rawValue,e.absLabel):new Xt(null,"",null)},Xt.fromAtom=Xt.fromComplex,e.type("pvc.visual.Context").init(function(e,t,n){this.chart=e.chart,this.panel=e,dt.call(this,t,n)}).add({isPinned:!1,pin:function(){return this.isPinned=!0,this},compatVersion:function(){return this.panel.compatVersion()},finished:function(e){return this.sign.finished(e)},delegate:function(e){return this.sign.delegate(e)},getV1Series:function(){var t;return e.nullyTo(this.scene.firstAtoms&&(t=this.scene.firstAtoms[this.panel._getV1DimName("series")])&&t.rawValue,"Series")},getV1Category:function(){var e;return this.scene.firstAtoms&&(e=this.scene.firstAtoms[this.panel._getV1DimName("category")])&&e.rawValue},getV1Value:function(){var e;return this.scene.firstAtoms&&(e=this.scene.firstAtoms[this.panel._getV1DimName("value")])&&e.value},getV1Datum:function(){return this.panel._getV1Datum(this.scene)},get:function(e,t){return this.scene.get(e,t)},getSeries:function(){return this.scene.get("series")},getCategory:function(){return this.scene.get("category")},getValue:function(){return this.scene.get("value")},getTick:function(){return this.scene.get("tick")},getX:function(){return this.scene.get("x")},getY:function(){return this.scene.get("y")},getSeriesLabel:function(){return this.scene.get("series","label")},getCategoryLabel:function(){return this.scene.get("category","label")},getValueLabel:function(){return this.scene.get("value","label")},getTickLabel:function(){return this.scene.get("tick","label")},getXLabel:function(){return this.scene.get("x","label")},getYLabel:function(){return this.scene.get("y","label")},select:function(e){return this.scene.select(e)},toggleVisible:function(){return this.scene.toggleVisible()},click:function(){var e=this;e.clickable()&&e.panel._onClick(e);if(e.selectableByClick()){var t=e.event;e.select({replace:!t||!t.ctrlKey})}},doubleClick:function(){this.doubleClickable()&&this.panel._onDoubleClick(this)},clickable:function(){var e=this;return(e.sign?e.sign.clickable():e.panel.clickable())&&(!e.scene||e.scene.clickable())},selectableByClick:function(){var e=this;return(e.sign?e.sign.selectableByClick():e.panel.selectableByClick())&&(!e.scene||e.scene.selectableByClick())},doubleClickable:function(){var e=this;return(e.sign?e.sign.doubleClickable():e.panel.doubleClickable())&&(!e.scene||e.scene.doubleClickable())},hoverable:function(){var e=this;return(e.sign?e.sign.hoverable():e.panel.hoverable())&&(!e.scene||e.scene.hoverable())}});if(Object.defineProperty)try{Object.defineProperty(Mt.visual.Context.prototype,"parent",{get:function(){throw e.error.operationInvalid("The 'this.parent.index' idiom has no equivalent in this version. Please try 'this.pvMark.parent.index'.")}})}catch(Vt){}e.space("pvc.visual").TraversalMode=e.makeEnum(["Tree","FlattenedSingleLevel","FlattenDfsPre","FlattenDfsPost"]),e.type("pvc.visual.Role").init(function(t,n){this.name=t,this.label=e.get(n,"label")||Mt.buildTitleFromName(t),this.index=e.get(n,"index")||0,this.dimensionDefaults=e.get(n,"dimensionDefaults")||{},e.get(n,"isRequired",!1)&&(this.isRequired=!0),e.get(n,"autoCreateDimension",!1)&&(this.autoCreateDimension=!0);var r=e.get(n,"defaultSourceRole");r&&(this.defaultSourceRoleName=r);var i=e.get(n,"defaultDimension");i&&(this.defaultDimensionName=i);if(!i&&this.autoCreateDimension)throw e.error.argumentRequired("defaultDimension");var s,o=e.get(n,"requireIsDiscrete");null!=o&&(o||(s=!0));if(null!=s){s=e.get(n,"requireSingleDimension",!1);if(s){e.get(n,"isMeasure",!1)&&(this.isMeasure=!0,e.get(n,"isPercent",!1)&&(this.isPercent=!0));var u=e.get(n,"valueType",null);u!==this.valueType&&(this.valueType=u,this.dimensionDefaults.valueType=u)}}s!==this.requireSingleDimension&&(this.requireSingleDimension=s),o!=this.requireIsDiscrete&&(this.requireIsDiscrete=!!o,this.dimensionDefaults.isDiscrete=this.requireIsDiscrete);var a=e.get(n,"traversalMode");null!=a&&a!==this.traversalMode&&(this.traversalMode=a)}).add({isRequired:!1,requireSingleDimension:!1,valueType:null,requireIsDiscrete:null,isMeasure:!1,isPercent:!1,defaultSourceRoleName:null,defaultDimensionName:null,grouping:null,traversalMode:Mt.visual.TraversalMode.FlattenedSingleLevel,rootLabel:"",autoCreateDimension:!1,isReversed:!1,label:null,sourceRole:null,isDefaultSourceRole:!1,firstDimensionType:function(){var e=this.grouping;return e&&e.firstDimensionType()},firstDimensionName:function(){var e=this.grouping;return e&&e.firstDimensionName()},firstDimensionValueType:function(){var e=this.grouping;return e&&e.firstDimensionValueType()},isDiscrete:function(){var e=this.grouping;return e&&e.isDiscrete()},setSourceRole:function(e,t){this.sourceRole=e,this.isDefaultSourceRole=!!t},setIsReversed:function(e){e?this.isReversed=!0:delete this.isReversed},setTraversalMode:function(t){var n=Mt.visual.TraversalMode;t=e.nullyTo(t,n.FlattenedSingleLevel),t!==this.traversalMode&&(t===n.FlattenedSingleLevel?delete this.traversalMode:this.traversalMode=t)},setRootLabel:function(e){e!==this.rootLabel&&(e?this.rootLabel=e:delete this.rootLabel,this.grouping&&this._updateBind(this.grouping))},flatten:function(t,n){var r=this.flattenedGrouping(n)||e.fail.operationInvalid("Role is unbound.");return t.groupBy(r,n)},flattenedGrouping:function(e){var t=this.grouping;if(t){e=e?Object.create(e):{};var n=e.flatteningMode;return null==n&&(n=e.flatteningMode=this._flatteningMode()),null!=e.isSingleLevel||n||(e.isSingleLevel=!0),t.ensure(e)}},_flatteningMode:function(){var e=Mt.visual.TraversalMode,t=Mt.data.FlatteningMode;switch(this.traversalMode){case e.FlattenDfsPre:return t.DfsPre;case e.FlattenDfsPost:return t.DfsPost}return e.None},select:function(t,n){var r=this.grouping;if(r)return e.setUDefaults(n,"flatteningMode",Mt.data.FlatteningMode.None),t.groupBy(r.ensure(n),n)},view:function(e){var t=this.grouping;return t?t.view(e):void 0},preBind:function(e){return this.__grouping=e,this},isPreBound:function(){return!!this.__grouping},preBoundGrouping:function(){return this.__grouping},isBound:function(){return!!this.grouping},postBind:function(e){var t=this.__grouping;return t&&(delete this.__grouping,t.bind(e),this.bind(t)),this},bind:function(e){return e=this._validateBind(e),this._updateBind(e),this},_validateBind:function(t){if(t)if(t.isNull())t=null;else{if(this.requireSingleDimension&&!t.isSingleDimension)throw e.error.operationInvalid("Role '{0}' only accepts a single dimension.",[this.name]);var n=this.valueType,r=this.requireIsDiscrete;t.dimensions().each(function(t){var i=t.type;if(n&&i.valueType!==n)throw e.error.operationInvalid("Role '{0}' cannot be bound to dimension '{1}'. \nIt only accepts dimensions of type '{2}' and not of type '{3}'.",[this.name,i.name,Mt.data.DimensionType.valueTypeName(n),i.valueTypeName]);if(null!=r&&i.isDiscrete!==r){if(!r)throw e.error.operationInvalid("Role '{0}' cannot be bound to dimension '{1}'. \nIt only accepts {2} dimensions.",[this.name,i.name,r?"discrete":"continuous"]);i._toDiscrete()}},this)}return t},_updateBind:function(e){this.grouping&&this.grouping.dimensions().each(function(e){e.type&&y.call(e.type,this)},this),this.grouping=e,this.grouping&&(this.grouping=this.grouping.ensure({reverse:this.isReversed,rootLabel:this.rootLabel}),this.grouping.dimensions().each(function(e){g.call(e.type,this)},this))}}),e.type("pvc.visual.RoleVarHelper").init(function(t,n,r){var i=e.get(r,"hasPercentSubVar",!1),s=e.get(r,"roleVar"),o=this.grouping=n&&n.grouping;if(o){this.role=n,this.sourceRoleName=n.sourceRole&&n.sourceRole.name;var u=t.panel();this.panel=u,o.isDiscrete()||(this.rootContDim=u.data.owner.dimensions(o.firstDimensionName()),i&&(this.percentFormatter=u.chart.options.percentValueFormat))}if(!s){if(!n)throw e.error.operationInvalid("Role is not defined, so the roleVar argument is required.");s=n.name}if(!o){var a=t.vars[s]=new Xt(null,"");i&&(a.percent=new Xt(null,""))}this.roleVarName=s,t["is"+e.firstUpperCase(s)+"Bound"]=!!o,e.get(r,"allowNestedVars")&&(this.allowNestedVars=!0)}).add({allowNestedVars:!1,isBound:function(){return!!this.grouping},onNewScene:function(t,n){if(this.grouping){var r=this.roleVarName;if(this.allowNestedVars?!e.hasOwnProp.call(t.vars,r):!t.vars[r]){var i=this.sourceRoleName;if(i){var s=e.getOwn(t.vars,i);if(s){t.vars[r]=s.clone();return}}if(n){var o,u=this.rootContDim;if(u){var a,f,l=t.group,c=l?l.singleDatum():t.datum;if(c)c.isNull||(o=Xt.fromAtom(c.atoms[u.name]),null!=o.value&&this.percentFormatter&&(l?(f=l.dimensions(u.name),a=f.valuePercent({visible:!0})):a=t.data().dimensions(u.name).percent(o.value)));else if(l){f=l.dimensions(u.name);var h=f.value({visible:!0,zeroIfNone:!1});if(null!=h){var p=u.format(h);o=new Xt(h,p,h),this.percentFormatter&&(a=f.valuePercent({visible:!0}))}}o&&this.percentFormatter&&(o.percent=null==o.value?new Xt(null,""):new Xt(a,this.percentFormatter.call(null,a)))}else{var d=t.datum;if(d&&!d.isNull){var v=this.grouping.view(d);o=Xt.fromComplex(v)}}o||(o=new Xt(null,""),this.percentFormatter&&(o.percent=new Xt(null,""))),t.vars[r]=o}}}}}),_t.prototype.getSign=function(){return this.sign||vt(this)},_t.prototype.getScene=function(){return this.getSign().scene()},_t.prototype.getContext=function(){return this.getSign().context()},_t.prototype.preBuildInstance=function(e){var t=e.data;t instanceof Mt.visual.Scene&&lt.call(t,this.renderId())},e.type("pvc.visual.BasicSign").init(function(t,n){this.chart=t.chart,this.panel=t,!n.sign||e.assert("Mark already has an attached Sign."),this.pvMark=n,n.sign=this}).add({compatVersion:function(){return this.chart.compatVersion()},localProperty:function(e,t){return this.pvMark.localProperty(e,t),this},lock:function(e,t){return this.lockMark(e,this._bindWhenFun(t,e))},optional:function(e,t,n){return this.optionalMark(e,this._bindWhenFun(t,e),n)},lockMark:function(e,t){return this.pvMark.lock(e,t),this},optionalMark:function(e,t,n){return this.pvMark[e](t,n),this},delegate:function(e,t){return this.pvMark.delegate(e,t)},delegateExtension:function(e){return this.pvMark.delegate(e,Mt.extensionTag)},delegateNotExtension:function(e){return this.pvMark.delegateExcept(e,Mt.extensionTag)},hasDelegate:function(e){return this.pvMark.hasDelegate(e)},_createPropInterceptor:function(e,t){var n=this;return function(){var r=this.sign;return r&&r===n?t.apply(n,arguments):n._getPvSceneProp(e,this.index)}},_getPvSceneProp:function(t,n){var r=this.pvMark,i=r.scene;if(i){var s=r.hasOwnProperty("index")?r.index:Math.min(n,i.length-1);if(null!=s)return i[s][t]}throw e.error.operationInvalid("Cannot evaluate inherited property.")},_bindWhenFun:function(t,n){if(e.fun.is(t)){var r=this;return r._createPropInterceptor(n,function(e){return t.call(r,e)})}return t},_lockDynamic:function(e,t){var n=this;return n.lockMark(e,n._createPropInterceptor(e,function(e){return n[t].call(n,e)}))},scene:function(){var e=this.pvMark.instance(),t=e&&e.data;return t instanceof Mt.visual.Scene?t:null},instanceState:function(e){return this.pvMark.instanceState(e)},context:function(e,t){var n;return t||!(n=this.instanceState())?this._createContext(e):n.cccContext||(n.cccContext=this._createContext(e))},_createContext:function(e){return new Mt.visual.Context(this.panel,this.pvMark,e)}}),e.type("pvc.visual.Sign",Mt.visual.BasicSign).init(function(t,n,r){var i=this;i.base(t,n,r),i._ibits=t._ibits;var s=e.get(r,"extensionId");null!=s&&(i.extensionAbsIds=e.array.to(t._makeExtensionAbsId(s))),i.isActiveSeriesAware=e.get(r,"activeSeriesAware",!0);if(i.isActiveSeriesAware){var o=t.visualRoles,u=o&&o.series;u&&u.isBound()||(i.isActiveSeriesAware=!1)}n.wrapper(e.get(r,"wrapper")||i.createDefaultWrapper()),e.get(r,"freeColor",!0)||i._bindProperty("fillStyle","fillColor","color")._bindProperty("strokeStyle","strokeColor","color")}).postInit(function(e,t,n){this._addInteractive(n),e._addSign(this)}).add({createDefaultWrapper:function(){var e=this;return function(t){return function(n){return t.call(e.context(),n)}}},property:function(t){var n=e.firstUpperCase(t),r="base"+n,i="default"+n,s="normal"+n,o="interactive"+n,u={};return u[t]=function(e,t){this._finished=!1,this._arg=t;var n=this[r](e,t);return null==n?null:this._finished?n:(n=this.showsInteraction()&&e.anyInteraction()?this[o](e,n,t):this[s](e,n,t),this._arg=null,n)},u[r]=function(){return this.delegateExtension()},u[i]=function(){},u[s]=function(e,t){return t},u[o]=function(e,t){return t},this.constructor.add(u),this},anyInteraction:function(e){return e.anyInteraction()},finished:function(e){return this._finished=!0,e},applyExtensions:function(){if(!this._extended){this._extended=!0;var e=this.extensionAbsIds;e&&e.forEach(function(e){this.panel.extendAbs(this.pvMark,e)},this)}return this},intercept:function(e,t){var n=this._createPropInterceptor(e,t);return this._intercept(e,n)},lockDimensions:function(){return this.pvMark.lock("left").lock("right").lock("top").lock("bottom").lock("width").lock("height"),this},_extensionKeyArgs:{tag:Mt.extensionTag},_bindProperty:function(t,n,r){var i=this;r||(r=n);var s="default"+e.firstUpperCase(r);if(e.fun.is(i[s])&&!i.pvMark.hasDelegateValue(t,Mt.extensionTag)){var o=function(e){return i[s](e,i._arg)};i.pvMark.intercept(t,o,i._extensionKeyArgs)}var u=this._createPropInterceptor(t,function(e){return i[n](e)});return i._intercept(t,u)},_intercept:function(t,n){var r=this.pvMark,i=this.extensionAbsIds;return i&&e.query(i).select(function(e){return this.panel._getExtensionAbs(e,t)},this).where(e.notUndef).each(function(e){e=r.wrap(e,t),r.intercept(t,e,this._extensionKeyArgs)},this),(r._intercepted||(r._intercepted={}))[t]=!0,r.intercept(t,n),this}}).prototype.property("color").constructor.add(Mt.visual.Interactive).add({extensionAbsIds:null,_addInteractive:function(t){var n=this,r=e.get;if(n.interactive()){var i=n._ibits,s=Mt.visual.Interactive;r(t,"noTooltip")&&(i&=~s.ShowsTooltip),r(t,"noHover")&&(i&=~s.Hoverable),r(t,"noClick")&&(i&=~s.Clickable),r(t,"noDoubleClick")&&(i&=~s.DoubleClickable),r(t,"noSelect")?i&=~s.SelectableAny:this.selectable()&&(r(t,"noClickSelect")&&(i&=~s.SelectableByClick),r(t,"noRubberSelect")&&(i&=~s.SelectableByRubberband)),n.showsInteraction()&&(r(t,"showsInteraction")===!1&&(i&=~s.ShowsInteraction),n.showsActivity()&&r(t,"showsActivity")===!1&&(i&=~s.ShowsActivity),n.showsSelection()&&r(t,"showsSelection")===!1&&(i&=~s.ShowsSelection)),n._ibits=i}n.handlesEvents()?(n.showsTooltip()&&n._addPropTooltip(r(t,"tooltipArgs")),n.hoverable()&&n._addPropHoverable(),n.handlesClickEvent()&&n._addPropClick(),n.doubleClickable()&&n._addPropDoubleClick()):n.pvMark.events("none")},fillColor:function(e){return this.color(e,"fill")},strokeColor:function(e){return this.color(e,"stroke")},defaultColor:function(e){return this.defaultColorSceneScale()(e)},dimColor:function(e,t){return"text"===t?Mt.toGrayScale(e,-0.75,null,null):Mt.toGrayScale(e,-0.3,null,null)},defaultColorSceneScale:function(){return e.lazy(this,"_defaultColorSceneScale",this._initDefColorScale,this)},_initDefColorScale:function(){var t=this.panel.axes.color;return t?t.sceneScale({sceneVarName:"color"}):e.fun.constant(Mt.defaultColor)},mayShowActive:function(e,t){return this.showsActivity()?e.isActive||!t&&this.isActiveSeriesAware&&e.isActiveSeries()||e.isActiveDatum():!1},mayShowNotAmongSelected:function(e){return this.mayShowAnySelected(e)&&!e.isSelected()},mayShowSelected:function(e){return this.showsSelection()&&e.isSelected()},mayShowAnySelected:function(e){return this.showsSelection()&&e.anySelected()},_addPropTooltip:function(n){if(!this.pvMark.hasTooltip){var r=e.create(this.chart._tooltipOptions,e.get(n,"options"));r.isLazy=e.get(n,"isLazy",!0);var i=e.get(n,"buildTooltip")||this._getTooltipFormatter(r);if(i){r.isEnabled=this._isTooltipEnabled.bind(this);var s=e.get(n,"tipsyEvent");s||(s="mouseover"),this.pvMark.localProperty("tooltip").tooltip(this._createTooltipProp(i,r.isLazy)).title(e.fun.constant("")).ensureEvents().event(s,t.Behavior.tipsy(r)).hasTooltip=!0}}},_getTooltipFormatter:function(e){return this.panel._getTooltipFormatter(e)},_isTooltipEnabled:function(){return this.panel._isTooltipEnabled()},_createTooltipProp:function(e,t){var n,r=this;return n=t?function(t){var n,i=r.context(t,!0);return function(){return i&&(n=e(i),i=null),n}}:function(t){var n=r.context(t);return e(n)},function(e){return e&&!e.isIntermediate&&e.showsTooltip()?n(e):void 0}},_addPropHoverable:function(){var e,t,n=this.panel;e="mouseover",t="mouseout",this.pvMark.ensureEvents().event(e,function(e){e.hoverable()&&!n.selectingByRubberband()&&!n.animating()&&(e.setActive(!0),n.renderInteractive())}).event(t,function(e){!e.hoverable()||n.selectingByRubberband()||n.animating()||e.clearActive()&&n.renderInteractive()})},_ignoreClicks:0,_propCursorClick:function(e){var t=this._ibits&e._ibits,n=Mt.visual.Interactive;return t&n.HandlesClickEvent||t&n.DoubleClickable?"pointer":null},_addPropClick:function(){var e=this;e.pvMark.cursor(e._propCursorClick.bind(e)).ensureEvents().event("click",e._handleClick.bind(e))},_addPropDoubleClick:function(){var e=this;e.pvMark.cursor(e._propCursorClick.bind(e)).ensureEvents().event("dblclick",e._handleDoubleClick.bind(e))},_handleClick:function(){var e=this,n=e.pvMark,r=n.instance(),i=r.data,s=e.doubleClickable()&&i.doubleClickable();if(s){var o=n.scene,u=n.index,a=t.event;window.setTimeout(function(){if(e._ignoreClicks)e._ignoreClicks--;else try{t.event=a,n.context(o,u,function(){e._handleClickCore()})}catch(r){t.error(r)}finally{delete t.event}},e.chart.options.doubleClickMaxDelay||300)}else e._ignoreClicks?e._ignoreClicks--:e._handleClickCore()},_handleClickCore:function(){this._onClick(this.context())},_handleDoubleClick:function(){var e=this,t=e.scene();t&&t.doubleClickable()&&(e._ignoreClicks=2,e._onDoubleClick(e.context(t)))},_onClick:function(e){e.click()},_onDoubleClick:function(e){e.doubleClick()}}),e.type("pvc.visual.Panel",Mt.visual.Sign).init(function(n,r,i){var s=e.get(i,"panel");if(!s){var o=e.get(i,"panelType")||t.Panel;s=r.add(o)}this.base(n,s,i)}).add({_addInteractive:function(t){var n=!0;t=e.setDefaults(t,"noSelect",n,"noHover",n,"noTooltip",n,"noClick",n,"noDoubleClick",n),this.base(t)}}),e.type("pvc.visual.Label",Mt.visual.Sign).init(function(e,n,r){var i=n.add(t.Label);this.base(e,i,r)}).add({_addInteractive:function(t){var n=!0;t=e.setDefaults(t,"noSelect",n,"noHover",n,"noTooltip",n,"noClick",n,"noDoubleClick",n,"showsInteraction",!1),this.base(t)},defaultColor:e.fun.constant(t.Color.names.black)});var $t=t.Color.names.white;e.type("pvc.visual.ValueLabel",Mt.visual.Label).init(function(t,n,r){this.valuesFont=e.get(r,"valuesFont")||t.valuesFont,this.valuesMask=e.get(r,"valuesMask")||t.valuesMask,this.valuesOptimizeLegibility=e.get(r,"valuesOptimizeLegibility",t.valuesOptimizeLegibility),this.valuesOverflow=e.get(r,"valuesOverflow",t.valuesOverflow),this.hideOverflowed="hide"===this.valuesOverflow,this.trimOverflowed=!this.hideOverflowed&&"trim"===this.valuesOverflow,this.hideOrTrimOverflowed=this.hideOverflowed||this.trimOverflowed;var i;i=e.get(r,"noAnchor",!1)?n:n.anchor(t.valuesAnchor),r&&null==r.extensionId&&(r.extensionId="label"),this.base(t,i,r),this.pvMark.font(this.valuesFont),this._bindProperty("text","text")._bindProperty("textStyle","textColor","color").intercept("visible",this.visible)}).prototype.property("text").property("textStyle").constructor.addStatic({maybeCreate:function(e,t,n){return e.valuesVisible&&e.valuesMask?new Mt.visual.ValueLabel(e,t,n):null},isNeeded:function(e){return e.valuesVisible&&e.valuesMask}}).add({_addInteractive:function(t){t=e.setDefaults(t,"showsInteraction",!0,"noSelect",!0,"noTooltip",!0,"noClick",!0,"noDoubleClick",!0,"noHover",!0),this.base(t)},visible:function(e){var t=this.getAnchoredToMark();if(t&&!t.visible())return!1;if(!this.hideOrTrimOverflowed)return this.delegate(!0);var n;if(this.hasDelegate(Mt.extensionTag)){n=this.delegateExtension();if(null!=n)return n}n=this.delegateNotExtension();if(n===!1)return!1;if(e.isActive&&this.showsActivity())return!0;var r=this.textFitInfo(e);return!r||!r.hide},textFitInfo:function(e){var t=e.renderState,n=t.textFitInfo;return void 0!==n?n:t.textFitInfo=this.calcTextFitInfo(e,this._evalBaseText())||null},calcTextFitInfo:function(){return null},_evalBaseText:function(){var e=this.pvMark,t=e.binds.properties.text.proto;return e.evalInPropertyContext(this.baseText.bind(this),t)},baseText:function(e){var t=e.renderState,n=t.baseText;return void 0!==n?n:this.base(e)},defaultText:function(e){return e.format(this.valuesMask)},normalText:function(e,t){var n;return this.trimOverflowed&&(n=this.textFitInfo(e))?this.trimText(e,t,n):t},interactiveText:function(e,t){var n;return!this.trimOverflowed||e.isActive&&this.showsActivity()||!(n=this.textFitInfo(e))?t:this.trimText(e,t,n)},trimText:function(e,t,n){var r=n&&n.widthMax;return null!=r?Mt.text.trimToWidthB(r,t,this.pvMark.font(),".."):t},textColor:function(e){return this.color(e,"text")},backgroundColor:function(t,n){var r=this.instanceState();if(!r)return this.calcBackgroundColor(t,n);var i=e.lazy(r,"cccBgColorCache"),s=e.getOwn(i,n);return s||(s=i[n]=this.calcBackgroundColor(t,n)),s},calcBackgroundColor:function(e){var t=this.getAnchoredToMark();if(t){var n=t.fillStyle();if(n&&n!==$t&&this.isAnchoredInside(e,t))return n}return $t},getAnchoredToMark:function(){return this.pvMark.target||this.pvMark.parent},isAnchoredInside:function(e,n){if(!n&&!(n=this.getAnchoredToMark()))return!1;var r,i=this.pvMark,s=i.text(),o=t.Text.measure(s,i.font()),u=i.left(),a=i.top();null==u&&(r=i.parent,u=r.width()-(i.right()||0)),null==a&&(r||(r=i.parent),a=r.height()-(i.bottom()||0));var f=t.Label.getPolygon(o.width,o.height,i.textAlign(),i.textBaseline(),i.textAngle(),i.textMargin()).center().plus(u,a),l=n.getShape(n.scene,i.index);return l.containsPoint(f)},maybeOptimizeColorLegibility:function(e,t,n){if(this.valuesOptimizeLegibility){var r=this.backgroundColor(e,n);return r&&r!==$t&&r.isDark()===t.isDark()?t.complementary().alpha(.9):t}return t},normalColor:function(e,t,n){return this.maybeOptimizeColorLegibility(e,t,n)},interactiveColor:function(e,t,n){return!this.mayShowActive(e)&&this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.maybeOptimizeColorLegibility(e,t,n)}}),e.type("pvc.visual.Dot",Mt.visual.Sign).init(function(n,r,i){var s=r.add(t.Dot),o=e.get(i,"proto");o&&s.extend(o),i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i);if(!e.get(i,"freePosition",!1)){var u=n.isOrientationVertical()?"left":"bottom",a=n.anchorOrtho(u);this._lockDynamic(u,"x")._lockDynamic(a,"y")}this._bindProperty("shape","shape")._bindProperty("shapeRadius","radius")._bindProperty("shapeSize","size"),this.optional("strokeDasharray",void 0).optional("lineWidth",1.5)}).prototype.property("size").property("shape").constructor.add({y:e.fun.constant(0),x:e.fun.constant(0),radius:function(){this.instanceState().cccRadius=this.delegateExtension()},baseSize:function(t){var n=this.instanceState().cccRadius;return null!=n?e.sqr(n):this.base(t)},defaultSize:e.fun.constant(12),interactiveSize:function(e,t){return this.mayShowActive(e,!0)?2.5*Math.max(t,5):t},interactiveColor:function(e,t,n){if(this.mayShowActive(e,!0)){if("stroke"===n)return t.brighter(1)}else if(this.mayShowNotAmongSelected(e)){if(this.mayShowActive(e))return t.alpha(.8);switch(n){case"fill":return this.dimColor(t,n);case"stroke":return t.alpha(.45)}}return this.base(e,t,n)}}),e.type("pvc.visual.DotSizeColor",Mt.visual.Dot).init(function(e,n,r){this.base(e,n,r);var i=this.compatVersion()<=1;this._bindProperty("lineWidth","strokeWidth").intercept("visible",function(e){if(!this.canShow(e))return!1;var t=this.delegateExtension();return null==t&&(t=i||this.defaultVisible(e)),t}),this._initColor(),this._initSize();if(this.isSizeBound){var s=e.axes.size;if(s.scaleUsesAbs()){this.isSizeAbs=!0;var o=this._sceneDefColor;this._sceneDefColor=function(e,n){return"stroke"===n&&e.vars.size.value<0?t.Color.names.black:o.call(this,e,n)},this.pvMark.lineCap("round").strokeDasharray(function(e){return e.vars.size.value<0?"dash":null})}}}).prototype.property("strokeWidth").constructor.add({isColorBound:!1,isColorDiscrete:!1,isSizeBound:!1,isSizeAbs:!1,canShow:function(e){return!e.isIntermediate},defaultVisible:function(e){return!e.isNull&&(!this.isSizeBound&&!this.isColorBound||this.isSizeBound&&null!=e.vars.size.value||this.isColorBound&&(this.isColorDiscrete||null!=e.vars.color.value))},_initColor:function(){var t,n,r=this.panel,i=r.visualRoles.color;if(i){this.isColorDiscrete=i.isDiscrete();var s=r.axes.color;i.isBound()?(this.isColorBound=!0,n=s.sceneScale({sceneVarName:"color"})):s&&(t=s.option("Unbound"))}n||(n=e.fun.constant(t||Mt.defaultColor)),this._sceneDefColor=n},_initSize:function(){var t,n,r=this.panel,i=r.plot,s=i.option("Shape"),o=i.option("NullShape"),u=r.visualRoles.size;if(u){var a=r.axes.size,f=a&&a.scale,l=!!f&&u.isBound();if(l){this.isSizeBound=!0;var c=f.min+.05*(f.max-f.min);this.nullSizeShapeHasStrokeOnly="cross"===o,n=function(e){return null!=e.vars.size.value?s:o},t=function(e){var t=e.vars.size.value;return null!=t?f(t):o?c:0}}}t||(n=e.fun.constant(s),t=function(e){return this.base(e)}),this._sceneDefSize=t,this._sceneDefShape=n},defaultColor:function(e,t){return this._sceneDefColor(e,t)},normalColor:function(e,t,n){return"stroke"===n?t.darker():this.base(e,t,n)},interactiveColor:function(e,t,n){if(this.mayShowActive(e,!0))switch(n){case"fill":return this.isSizeBound?t.alpha(.75):t;case"stroke":return t.darker()}else if(this.showsSelection()){var r=e.isSelected(),i=!r&&e.anySelected();if(i){if(this.mayShowActive(e))return t.alpha(.8);switch(n){case"fill":return this.dimColor(t,n);case"stroke":return t.alpha(.45)}}if(r&&o(t))return"stroke"===n&&(t=t.darker(3)),t.darker(2)}return"stroke"===n?t.darker():t},defaultSize:function(e){return this._sceneDefSize(e)},defaultShape:function(e){return this._sceneDefShape(e)},interactiveSize:function(t,n){if(!this.mayShowActive(t,!0))return n;var r=Math.sqrt(n),i=Math.max(1,Math.min(1.1*r,2));return e.sqr(r+i)},defaultStrokeWidth:function(e){return this.nullSizeShapeHasStrokeOnly&&null==e.vars.size.value?1.8:1},interactiveStrokeWidth:function(e,t){return this.mayShowActive(e,!0)?2*t:this.mayShowSelected(e)?1.5*t:t}}),t.LineInterm=function(){t.Line.call(this)},t.LineInterm.prototype=t.extend(t.Line),t.LineInterm.prototype.getNearestInstanceToMouse=function(e,n){var r=t.Line.prototype.getNearestInstanceToMouse.call(this,e,n),i=e[r];return i&&i.data&&i.data.isIntermediate&&r+1<e.length&&r++,r},e.type("pvc.visual.Line",Mt.visual.Sign).init(function(n,r,i){var s=r.add(t.LineInterm);this.base(n,s,i),this.lock("segmented","smart").lock("antialias",!0);if(!e.get(i,"freePosition",!1)){var o=n.isOrientationVertical()?"left":"bottom",u=n.anchorOrtho(o);this._lockDynamic(u,"y")._lockDynamic(o,"x")}this._bindProperty("strokeStyle","strokeColor","color")._bindProperty("lineWidth","strokeWidth")}).prototype.property("strokeWidth").constructor.add({_addInteractive:function(t){t=e.setDefaults(t,"noTooltip",!0),this.base(t)},y:e.fun.constant(0),x:e.fun.constant(0),defaultStrokeWidth:e.fun.constant(1.5),interactiveStrokeWidth:function(e,t){return this.mayShowActive(e)?2.5*Math.max(1,t):t},interactiveColor:function(e,n,r){return this.mayShowNotAmongSelected(e)?this.mayShowActive(e)?t.Color.names.darkgray.darker().darker():this.dimColor(n,r):this.base(e,n,r)}}),t.AreaInterm=function(){t.Area.call(this)},t.AreaInterm.prototype=t.extend(t.Area),t.AreaInterm.prototype.getNearestInstanceToMouse=function(e,n){var r=t.Area.prototype.getNearestInstanceToMouse.call(this,e,n),i=e[r];return i&&i.data&&i.data.isIntermediate&&r+1<e.length&&r++,r},e.type("pvc.visual.Area",Mt.visual.Sign).init(function(n,r,i){var s=r.add(t.AreaInterm);i||(i={}),i.freeColor=!0,this.base(n,s,i);var o=e.get(i,"antialias",!0);this.lock("segmented","smart").lock("antialias",o);if(!e.get(i,"freePosition",!1)){var u=n.isOrientationVertical()?"left":"bottom",a=n.anchorOrtho(u),f=n.anchorOrthoLength(a);this._lockDynamic(u,"x")._lockDynamic(a,"y")._lockDynamic(f,"dy")}this._bindProperty("fillStyle","fillColor","color"),this.lock("strokeStyle",null).lock("lineWidth",0)}).add({_addInteractive:function(t){t=e.setDefaults(t,"noTooltip",!0),this.base(t)},y:e.fun.constant(0),x:e.fun.constant(0),dy:e.fun.constant(0),interactiveColor:function(e,t,n){return"fill"===n&&this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.base(e,t,n)}}),e.type("pvc.visual.Bar",Mt.visual.Sign).init(function(n,r,i){var s=r.add(t.Bar);i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i),this.normalStroke=e.get(i,"normalStroke",!1),this._bindProperty("lineWidth","strokeWidth")}).prototype.property("strokeWidth").constructor.add({normalColor:function(e,t,n){return"stroke"!==n||this.normalStroke?t:null},interactiveColor:function(e,n,r){if("stroke"===r){if(this.mayShowActive(e,!0))return n.brighter(1.3).alpha(.7);if(!this.normalStroke)return null;if(this.mayShowNotAmongSelected(e))return this.mayShowActive(e)?t.Color.names.darkgray.darker().darker():this.dimColor(n,r);if(this.mayShowActive(e))return n.brighter(1).alpha(.7)}else if("fill"===r){if(this.mayShowActive(e,!0))return n.brighter(.2).alpha(.8);if(this.mayShowNotAmongSelected(e))return this.mayShowActive(e)?t.Color.names.darkgray.darker(2).alpha(.8):this.dimColor(n,r);if(this.mayShowActive(e))return n.brighter(.2).alpha(.8)}return this.base(e,n,r)},defaultStrokeWidth:function(){return.5},interactiveStrokeWidth:function(e,t){return this.mayShowActive(e,!0)?1.3*Math.max(1,t):t}}),t.PieSlice=function(){t.Wedge.call(this)},t.PieSlice.prototype=t.extend(t.Wedge).property("offsetRadius"),t.PieSlice.prototype.midAngle=function(){var e=this.instance();return e.startAngle+e.angle/2},t.PieSlice.prototype.defaults=(new t.PieSlice).extend(t.Wedge.prototype.defaults).offsetRadius(0),e.type("pvc.visual.PieSlice",Mt.visual.Sign).init(function(n,r,i){var s=r.add(t.PieSlice);i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i),this._activeOffsetRadius=e.get(i,"activeOffsetRadius",0),this._maxOffsetRadius=e.get(i,"maxOffsetRadius",0),this._resolvePctRadius=e.get(i,"resolvePctRadius"),this._center=e.get(i,"center"),this.optional("lineWidth",.6)._bindProperty("angle","angle")._bindProperty("offsetRadius","offsetRadius")._lockDynamic("bottom","y")._lockDynamic("left","x").lock("top",null).lock("right",null)}).prototype.property("offsetRadius").constructor.add({angle:e.fun.constant(0),x:function(){return this._center.x+this._offsetSlice("cos")},y:function(){return this._center.y-this._offsetSlice("sin")},_offsetSlice:function(e){var t=this.pvMark.offsetRadius()||0;return t&&(t*=Math[e](this.pvMark.midAngle())),t},defaultColor:function(e,t){return"stroke"===t?null:this.base(e,t)},interactiveColor:function(e,t,n){if(this.mayShowActive(e,!0))switch(n){case"fill":return t.brighter(.2).alpha(.8);case"stroke":return t.brighter(1.3).alpha(.7)}else if(this.mayShowNotAmongSelected(e)&&"fill"===n)return this.dimColor(t,n);return this.base(e,t,n)},offsetRadius:function(e){var t=this.base(e);return Math.min(Math.max(0,t),this._maxOffsetRadius)},baseOffsetRadius:function(e){var t=this.base(e)||0;return this._resolvePctRadius(Bt.parse(t))},interactiveOffsetRadius:function(e,t){return t+(this.mayShowActive(e,!0)?this._activeOffsetRadius:0)}}),e.type("pvc.visual.Rule",Mt.visual.Sign).init(function(n,r,i){var s=r.add(t.Rule),o=e.get(i,"proto");o&&s.extend(o),this.base(n,s,i),e.get(i,"freeStyle")||this._bindProperty("strokeStyle","strokeColor","color")._bindProperty("lineWidth","strokeWidth")}).prototype.property("strokeWidth").constructor.add({_addInteractive:function(t){var n=!0;t=e.setDefaults(t,"noHover",n,"noSelect",n,"noTooltip",n,"noClick",n,"noDoubleClick",n,"showsInteraction",!1),this.base(t)},defaultStrokeWidth:e.fun.constant(1),interactiveStrokeWidth:function(e,t){return this.mayShowActive(e,!0)?2.2*Math.max(1,t):t},interactiveColor:function(e,t,n){return e.datum&&!this.mayShowActive(e,!0)&&this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.base(e,t,n)}}),e.type("pvc.visual.OptionsBase").init(function(t,n,r,i){this.chart=t,this.type=n,this.index=null==r?0:r,this.name=e.get(i,"name"),this.id=this._buildId(),this.optionId=this._buildOptionId();var s=this._resolvers=[];this._registerResolversFull(s,i),this.option=Mt.options(this._getOptionsDefinition(),this)}).add({_buildId:function(){return Mt.buildIndexedId(this.type,this.index)},_buildOptionId:function(){return this.id},_chartOption:function(e){return this.chart.options[e]},_getOptionsDefinition:e.method({isAbstract:!0}),_registerResolversFull:function(t,n){var r=e.get(n,"fixed");r&&(this._fixed=r,t.push(Mt.options.specify(function(e){return r[e.name]}))),this._registerResolversNormal(t,n);var i=e.get(n,"defaults");i&&(this._defaults=i),t.push(this._resolveDefault)},_registerResolversNormal:function(t,n){e.get(n,"byV1",!0)&&this.chart.compatVersion()<=1&&t.push(this._resolveByV1OnlyLogic),this.name&&t.push(Mt.options.specify(function(t){return this._chartOption(this.name+e.firstUpperCase(t.name))})),t.push(this._resolveByOptionId),e.get(n,"byNaked",!this.index)&&t.push(this._resolveByNaked)},_resolveFull:function(e){for(var t=this._resolvers,n=0,r=t.length;r>n;n++)if(t[n].call(this,e))return!0;return!1},_resolveFixed:Mt.options.specify(function(e){return this._fixed?this._fixed[e.name]:void 0}),_resolveByV1OnlyLogic:function(e){var t,n=e.data;return n&&(t=n.resolveV1)?t.call(this,e):void 0},_resolveByName:Mt.options.specify(function(t){return this.name?this._chartOption(this.name+e.firstUpperCase(t.name)):void 0}),_resolveByOptionId:Mt.options.specify(function(t){return this._chartOption(this.optionId+e.firstUpperCase(t.name))}),_resolveByNaked:Mt.options.specify(function(t){return this.index?void 0:this._chartOption(e.firstLowerCase(t.name))}),_resolveDefault:function(e){var t,n=e.data;if(n&&(t=n.resolveDefault)&&t.call(this,e))return!0;if(this._defaults){var r=this._defaults[e.name];if(void 0!==r)return e.defaultValue(r),!0}},_specifyChartOption:function(e,t){var n=this._chartOption(t);if(null!=n)return e.specify(n),!0}}),e.type("pvc.visual.MultiChart",Mt.visual.OptionsBase).init(function(e){this.base(e,"multiChart",0,{byV1:!1,byNaked:!1})}).add({_getOptionsDefinition:function(){return Mt.visual.MultiChart.optionsDef}}).addStatic({optionsDef:{Max:{resolve:"_resolveFull",cast:Mt.castPositiveNumber,value:1/0},ColumnsMax:{resolve:"_resolveFull",cast:Mt.castPositiveNumber,value:3},SingleRowFillsHeight:{resolve:"_resolveFull",cast:Boolean,value:!0},SingleColFillsHeight:{resolve:"_resolveFull",cast:Boolean,value:!0},Overflow:{resolve:"_resolveFull",cast:Mt.parseMultiChartOverflow,value:"grow"}}}),e.type("pvc.visual.SmallChart",Mt.visual.OptionsBase).init(function(e){this.base(e,"small",0,{byV1:!1,byNaked:!1})}).add({_getOptionsDefinition:function(){return Mt.visual.SmallChart.optionsDef}}).addStatic({optionsDef:{Width:{resolve:"_resolveFull",cast:Bt.parse,value:null},Height:{resolve:"_resolveFull",cast:Bt.parse,value:null},AspectRatio:{resolve:"_resolveFull",cast:Mt.castPositiveNumber,getDefault:function(){return this.chart instanceof Mt.PieChart?10/7:5/4}},Margins:{resolve:"_resolveFull",cast:Ht.as,value:new Ht(new Bt(.02))},Paddings:{resolve:"_resolveFull",cast:Ht.as,value:0}}});var Jt=e.type("pvc.visual.Axis",Mt.visual.OptionsBase).init(function(e,t,n,r){this.base(e,t,n,r),e._addAxis(this)}).add({scaleTreatsNullAs:function(){return"null"},scaleNullRangeValue:function(){return null},scaleUsesAbs:e.retFalse,scaleSumNormalized:e.retFalse,domainVisibleOnly:e.retTrue,domainIgnoreNulls:e.retFalse,domainGroupOperator:function(){return"flatten"},domainItemValueProp:function(){return"value"},bind:function(t){var n=this;return t||e.fail.argumentRequired("dataCells"),!n.dataCells||e.fail.operationInvalid("Axis is already bound."),n.dataCells=e.array.to(t),n.dataCell=n.dataCells[0],n.role=n.dataCell&&n.dataCell.role,n.scaleType=gt(n.role.grouping),n._domainData=null,n._domainValues=null,n._domainItems=null,n._checkRoleCompatibility(),this},domainData:function(){this.isBound()||e.fail.operationInvalid("Axis is not bound.");var t=this._domainData;if(!t){var n=this.dataCells.map(kt),r=this.chart.partData(n);this._domainData=t=this._createDomainData(r)}return t},domainCellData:function(e){var t=this.dataCells;if(1===t.length)return this.domainData();var n=t[e],r=this.chart.partData(n.dataPartValue);return this._createDomainData(r)},domainCellItems:function(e){var t=this.dataCells;if(1===t.length)return this.domainItems();var n;return n="number"==typeof e?this.domainCellData(e):e,this._selectDomainItems(n).array()},domainValues:function(){var e=this._domainValues;return e||(this._calcDomainItems(),e=this._domainValues),e},domainItems:function(){var e=this._domainItems;return e||(this._calcDomainItems(),e=this._domainItems),e},domainItemValue:function(t){return e.nullyTo(t[this.domainItemValueProp()],"")},isDiscrete:function(){return!!this.role&&this.role.isDiscrete()},isBound:function(){return!!this.role},setScale:function(t,n){return this.isBound()||e.fail.operationInvalid("Axis is not bound."),this.scale=t?n?t:this._wrapScale(t):null,this},_wrapScale:function(t){t.type=this.scaleType;var n;if("discrete"!==t.type){var r=this.scaleUsesAbs(),i=this.scaleTreatsNullAs();if(i&&"null"!==i){var s="min"===i;n=r?function(e){return t(null==e?s?t.domain()[0]:0:0>e?-e:e)}:function(e){return t(null==e?s?t.domain()[0]:0:e)}}else{var o=this.scaleNullRangeValue();n=r?function(e){return null==e?o:t(0>e?-e:e)}:function(e){return null==e?o:t(e)}}}else n=function(e){return t(null==e?"":e)};return e.copy(n,t)},sceneScale:function(t){var n=e.get(t,"sceneVarName")||this.role.name,r=this.role.grouping;if(r.isSingleDimension&&r.firstDimensionValueType()===Number){var i=this.scale,s=e.get(t,"nullToZero",!0),o=function(e){var t=e.vars[n].value;if(null==t){if(!s)return t;t=0}return i(t)};return e.copy(o,i),o}return this.scale.by1(function(e){return e.vars[n].value})},_checkRoleCompatibility:function(){var t=this.dataCells.length;if(t>1){var n,r,i=this._getBoundRoleGrouping(this.role);if("discrete"===this.scaleType)for(r=1;t>r;r++){n=this._getBoundRoleGrouping(this.dataCells[r].role);if(i.id!==n.id)throw e.error.operationInvalid("Discrete roles on the same axis must have equal groupings.")}else{if(!i.firstDimensionType().isComparable)throw e.error.operationInvalid("Continuous roles on the same axis must have 'comparable' groupings.");for(r=1;t>r;r++){n=this._getBoundRoleGrouping(this.dataCells[r].role);if(this.scaleType!==gt(n))throw e.error.operationInvalid("Continuous roles on the same axis must have scales of the same type.")}}}},_getBoundRoleGrouping:function(t){var n=t.grouping;if(!n)throw e.error.operationInvalid("Axis' role '"+t.name+"' is unbound.");return n},_createDomainData:function(e){var t={visible:this.domainVisibleOnly()?!0:null,isNull:this.chart.options.ignoreNulls||this.domainIgnoreNulls()?!1:null};return this.role[this.domainGroupOperator()](e,t)},_selectDomainItems:function(e){return e.children()},_calcDomainItems:function(){var t=e.hasOwnProp,n={},r=[],i=[],s=(this.domainItemValueProp(),this.domainData());this._selectDomainItems(s).each(function(e){var s=this.domainItemValue(e);t.call(n,s)||(n[s]=1,r.push(s),i.push(e))},this),this._domainItems=i,this._domainValues=r},_getOptionsDefinition:function(){return Kt}}),Kt={},Qt=e.type("pvc.visual.CartesianAxis",Jt).init(function(e,t,n,r){var i=e.options;this.orientation=Qt.getOrientation(t,i.orientation),this.orientedId=Qt.getOrientedId(this.orientation,n),e._allowV1SecondAxis&&1===n&&(this.v1SecondOrientedId="second"+this.orientation.toUpperCase()),this.base(e,t,n,r);var s=this.extensionPrefixes=[this.id+"Axis",this.orientedId+"Axis"];this.v1SecondOrientedId&&s.push(this.v1SecondOrientedId+"Axis"),this._extPrefAxisPosition=s.length,s.push("axis")}).add({bind:function(e){return this.base(e),this._syncExtensionPrefixes(),this},_syncExtensionPrefixes:function(){var e=this.extensionPrefixes;e.length=this._extPrefAxisPosition;var t=this.scaleType;t&&(e.push(t+"Axis"),"discrete"!==t&&e.push("continuousAxis")),e.push("axis")},setScale:function(e){var t=this.scale;this.base(e),t&&(delete this.domain,delete this.ticks,delete this._roundingPaddings);if(e&&!e.isNull&&"discrete"!==this.scaleType){this.domain=e.domain(),this.domain.minLocked=!!e.minLocked,this.domain.maxLocked=!!e.maxLocked;var n=this.option("DomainRoundMode");"nice"===n&&e.nice();var r=this.option("TickFormatter");r&&e.tickFormatter(r)}return this},setTicks:function(t){var n=this.scale;n&&!n.isNull||e.fail.operationInvalid("Scale must be set and non-null."),this.ticks=t;if("discrete"!==n.type&&"tick"===this.option("DomainRoundMode")){delete this._roundingPaddings;var r=t&&t.length;r?this.scale.domain(t[0],t[r-1]):this.scale.domain(this.domain[0],this.domain[1])}},setScaleRange:function(e){var t=this.scale;t.min=0,t.max=e,t.size=e;if("discrete"===t.type){if(t.domain().length>0){var n=this.chart.options.panelSizeRatio||.8;t.splitBandedCenter(t.min,t.max,n)}}else t.range(t.min,t.max);return t},getScaleRoundingPaddings:function(){var t=this._roundingPaddings;if(!t){t={begin:0,end:0,beginLocked:!1,endLocked:!1};var n=this.scale;if(n&&!n.isNull&&"discrete"!==n.type){var r=this.domain;t.beginLocked=r.minLocked,t.endLocked=r.maxLocked;if("numeric"===n.type&&"none"!==this.option("DomainRoundMode")){var i=n.domain(),s=this.domain||e.assert("Original domain must be set"),o=i[1]-i[0];if(o){var u=s[0]-i[0];u>0&&(t.begin=u/o),u=i[1]-s[1],u>0&&(t.end=u/o)}}}this._roundingPaddings=t}return t},calcContinuousTicks:function(e){return null==e&&(e=this.option("DesiredTickCount")),this.scale.ticks(e,{roundInside:"tick"!==this.option("DomainRoundMode"),numberExponentMin:this.option("TickExponentMin"),numberExponentMax:this.option("TickExponentMax")})},_getOptionsDefinition:function(){return en},_buildOptionId:function(){return this.id+"Axis"},_registerResolversNormal:function(e){this.chart.compatVersion()<=1&&e.push(this._resolveByV1OnlyLogic),e.push(this._resolveByOptionId,this._resolveByOrientedId),1===this.index&&e.push(this._resolveByV1OptionId),e.push(this._resolveByScaleType,this._resolveByCommonId)},_resolveByOrientedId:Mt.options.specify(function(e){return this._chartOption(this.orientedId+"Axis"+e.name)}),_resolveByV1OptionId:Mt.options.specify(function(e){return this._chartOption("secondAxis"+e.name)}),_resolveByScaleType:Mt.options.specify(function(e){var t=this.scaleType;if(t){var n=e.name,r=this._chartOption(t+"Axis"+n);return void 0===r&&"discrete"!==t&&(r=this._chartOption("continuousAxis"+n)),r}}),_resolveByCommonId:Mt.options.specify(function(e){return this._chartOption("axis"+e.name)})});Qt.getOrientation=function(e,t){return"base"===e==("vertical"===t)?"x":"y"},Qt.getOrientedId=function(e,t){return 0===t?e:e+(t+1)};var Gt={resolve:"_resolveFull",data:{resolveV1:function(e){return this.index||"ortho"!==this.type||this._specifyChartOption(e,this.id+e.name),!0}}},Yt={resolveV1:function(e){if(this.index){if(this._resolveByV1OptionId(e))return!0}else if(this._resolveByOrientedId(e))return!0;return this._resolveDefault(e),!0}},Zt=Mt.options.defaultValue(function(){if(!this.typeIndex)return"x"===this.orientation?"bottom":"left";var e=this.chart.axesByType[this.type].first,t=e.option("Position");return Mt.BasePanel.oppositeAnchor[t]}),en=e.create(Kt,{Visible:{resolve:"_resolveFull",data:{resolveV1:function(t){if(this.index<=1){var n=0===this.index?e.firstUpperCase(this.orientation):"Second";this._specifyChartOption(t,"show"+n+"Scale")}return!0}},cast:Boolean,value:!0},Composite:{resolve:function(e){return this.index>0?(e.specify(!1),!0):this._resolveFull(e)},data:{resolveV1:function(e){return this._specifyChartOption(e,"useCompositeAxis"),!0}},cast:Boolean,value:!1},Size:{resolve:"_resolveFull",data:Yt,cast:wt},SizeMax:{resolve:"_resolveFull",cast:wt},Position:{resolve:"_resolveFull",data:{resolveV1:Yt.resolveV1,resolveDefault:Zt},cast:bt},FixedMin:Gt,FixedMax:Gt,OriginIsZero:{resolve:"_resolveFull",data:{resolveV1:function(e){switch(this.index){case 0:this._specifyChartOption(e,"originIsZero");break;case 1:this.chart._allowV1SecondAxis&&this._specifyChartOption(e,"secondAxisOriginIsZero")}return!0}},cast:Boolean,value:!0},DomainScope:{resolve:"_resolveFull",cast:yt,value:"global"},Offset:{resolve:"_resolveFull",data:{resolveV1:function(e){switch(this.index){case 0:this._specifyChartOption(e,"axisOffset");break;case 1:if(this.chart._allowV1SecondAxis){this._specifyChartOption(e,"secondAxisOffset");break}}return!0}},cast:Mt.castNumber},LabelSpacingMin:{resolve:"_resolveFull",cast:Mt.castNumber},OverlappedLabelsMode:{resolve:"_resolveFull",cast:Mt.parseOverlappedLabelsMode,value:"rotatethenhide"},Grid:{resolve:"_resolveFull",data:{resolveV1:function(e){return this.index||this._specifyChartOption(e,this.orientation+"AxisFullGrid"),!0}},cast:Boolean,value:!1},GridCrossesMargin:{resolve:"_resolveFull",cast:Boolean,value:!0},EndLine:{resolve:"_resolveFull",cast:Boolean},ZeroLine:{resolve:"_resolveFull",cast:Boolean,value:!0},RuleCrossesMargin:{resolve:"_resolveFull",cast:Boolean,value:!0},Ticks:{resolve:"_resolveFull",cast:Boolean},DesiredTickCount:{resolve:"_resolveFull",data:{resolveV1:Yt.resolveV1,resolveDefault:function(e){if(this.chart.compatVersion()<=1)return e.defaultValue(5),!0}},cast:Mt.castNumber},MinorTicks:{resolve:"_resolveFull",data:Yt,cast:Boolean,value:!0},TickFormatter:{resolve:"_resolveFull",cast:e.fun.as},DomainRoundMode:{resolve:"_resolveFull",data:{resolveV1:Yt.resolveV1,resolveDefault:function(e){if(this.chart.compatVersion()<=1)return e.defaultValue("none"),!0}},cast:Mt.parseDomainRoundingMode,value:"tick"},TickExponentMin:{resolve:"_resolveFull",cast:Mt.castNumber},TickExponentMax:{resolve:"_resolveFull",cast:Mt.castNumber},Title:{resolve:"_resolveFull",cast:String},TitleSize:{resolve:"_resolveFull",cast:Et},TitleSizeMax:{resolve:"_resolveFull",cast:Et},TitleFont:{resolve:"_resolveFull",cast:String},TitleMargins:{resolve:"_resolveFull",cast:Ht.as},TitlePaddings:{resolve:"_resolveFull",cast:Ht.as},TitleAlign:{resolve:"_resolveFull",cast:function(e){var t=this.option("Position");return Mt.parseAlign(t,e)}},Font:{resolve:"_resolveFull",cast:String},ClickAction:{resolve:"_resolveFull",data:Yt},DoubleClickAction:{resolve:"_resolveFull",data:Yt},TooltipEnabled:{resolve:"_resolveFull",cast:Boolean,value:!0},TooltipFormat:{resolve:"_resolveFull",cast:e.fun.as,value:null},TooltipAutoContent:{resolve:"_resolveFull",cast:Mt.parseTooltipAutoContent,value:"value"}});e.type("pvc.visual.CartesianAxisRootScene",Mt.visual.Scene),e.type("pvc.visual.CartesianAxisTickScene",Mt.visual.Scene).init(function(t,n){this.base(t,n),this.vars.tick=new Xt(e.get(n,"tick"),e.get(n,"tickLabel"),e.get(n,"tickRaw")),e.get(n,"isHidden")&&(this.isHidden=!0)}).add({isHidden:!1}),e.type("pvc.visual.CartesianFocusWindow",Mt.visual.OptionsBase).init(function(e){this.base(e,"focusWindow",0,{byNaked:!1});var t=e.axes.base;this.base=new Mt.visual.CartesianFocusWindowAxis(this,t)}).add({_getOptionsDefinition:function(){return tn},_exportData:function(){return{base:e.copyProps(this.base,Mt.visual.CartesianFocusWindow.props)}},_importData:function(e){var t=e.base;this.base.option.specify({Begin:t.begin,End:t.end,Length:t.length})},_initFromOptions:function(){this.base._initFromOptions()},_onAxisChanged:function(){var e=this.option("Changed");e&&e.call(this.chart.basePanel.context())}});var tn=e.create(Kt,{Changed:{resolve:"_resolveFull",cast:e.fun.as}});e.type("pvc.visual.CartesianFocusWindowAxis",Mt.visual.OptionsBase).init(function(t,n){this.window=t,this.axis=n,this.isDiscrete=n.isDiscrete(),this.base(n.chart,"focusWindow"+e.firstUpperCase(n.type),0,{byNaked:!1})}).addStatic({props:["begin","end","length"]}).add({_getOptionsDefinition:function(){return nn},_initFromOptions:function(){var e=this.option;this.set({begin:e("Begin"),end:e("End"),length:e("Length")})},set:function(t){var n,r,i,s=this,o=e.get(t,"render"),u=e.get(t,"select",!0);t=s._readArgs(t);if(t)n=t.begin,r=t.end,i=t.length;else if(null!=this.begin&&null!=this.end&&null!=this.length)return;var a,f,l=s.axis,c=l.scale,h=s.isDiscrete,p=h?null:l.role.firstDimensionType().cast,d=c.domain();if(h){f=d.length;var v,m,g;if(null!=n){var y=+n;isNaN(y)||(1/0===y?(v=f-1,n=d[v]):y===-1/0&&(v=0,n=d[v])),null==v&&(v=d.indexOf(""+n),0>v&&(v=0,n=d[v]))}if(null!=r){var b=+r;isNaN(b)||(1/0===b?(m=f-1,r=d[m]):b===-1/0&&(m=0,r=d[m])),null==m&&(m=d.indexOf(""+r),0>m&&(m=f-1,r=d[m]))}null!=i&&(i=+i,isNaN(i)?i=null:0>i&&(null!=n||null!=r)&&(a=n,g=v,n=r,v=m,r=a,m=g,i=-i)),null!=n?null!=r?(v>m&&(a=n,g=v,n=r,v=m,r=a,m=g),i=m-v+1):(null==i&&(i=f-v),m=v+i-1,m>f-1&&(m=f-1,i=m-v+1),r=d[m]):null!=r?(null==i&&(i=m),v=m-i+1,0>v&&(v=0,i=m-v+1),n=d[v]):(null==i&&(i=Math.max(~~(f/3),1)),i>f?(i=f,v=0,m=f-1):(g=~~(f/2),v=g-~~(i/2),m=v+i-1),n=d[v],r=d[m])}else{null!=i&&(i=+i,isNaN(i)?i=null:0>i&&(null!=n||null!=r)&&(a=n,n=r,r=a,i=-i));var w=d[0],E=d[1];f=E-w,null!=n&&(w>n&&(n=w),n>E&&(n=E)),null!=r&&(w>r&&(r=w),r>E&&(r=E));if(null!=n)null!=r?(n>r&&(a=n,n=r,r=a),i=r-n):(null==i&&(i=E-n),r=n+i,r>E&&(r=E,i=r-n));else if(null!=r)null==i&&(i=r-w),n=r-i,w>n&&(n=w,i=r-n);else{null==i&&(i=Math.max(~~(f/3),1));if(i>f)i=f,n=w,r=E;else{a=~~(f/2),n=a-~~(i/2);var S=+n,x=+i;r=S+x}}n=p(n),r=p(r),i=p(i);var T=s.option("Constraint");if(T){var N={type:"new",target:"begin",value:n,length:i,length0:i,min:w,max:E,minView:w,maxView:E};T(N),n=p(N.value),i=p(N.length);var S=+n,x=+i;r=p(S+x)}}s._set(n,r,i,u,o)},_updatePosition:function(e,t,n,r){var i,s,o,u=this,a=u.axis,f=a.scale;if(u.isDiscrete){var l=f.invertIndex(e),c=f.invertIndex(t)-1,h=f.domain();i=h[l],s=h[c],o=c-l+1}else i=f.invert(e),s=f.invert(t),o=s-i;this._set(i,s,o,n,r)},_constraintPosition:function(e){var t,n=this,r=n.axis,i=r.scale;if(n.isDiscrete){var s=Math.floor(i.invertIndex(e.point,!0));if(s>=0){var o=i.range(),u=i.domain().length,a=(o.max-o.min)/u;s>=u&&("new"===e.type||"resize-begin"===e.type)&&(s=u-1),e.point=s*a}}else if(t=n.option("Constraint")){var f,l,c,h=r.role.firstDimensionType().cast,p=h(i.invert(e.point)),d="begin"===e.target?1:-1,v=e.point+d*e.length,m=h(i.invert(v)),g=h(d*(m-p));e.length===e.length0?f=g:(l=e.point+d*e.length0,c=h(i.invert(l)),f=d*(c-p));var y=h(i.invert(e.min)),b=h(i.invert(e.max)),w={type:e.type,target:e.target,value:p,length:g,length0:f,min:y,max:b,minView:h(i.invert(e.minView)),maxView:h(i.invert(e.maxView))};t(w),+w.value!==+p&&(p=w.value,e.point=i(p));var E=w.length;if(+E!==+g)if(+E===+f)e.length=e.length0;else{var S=+p+d*+E,x=i(S);e.length=x-d*e.point}+w.min!==+y&&(e.min=i(w.min)),+w.max!==+b&&(e.max=i(w.max))}},_compare:function(e,t){return this.isDiscrete?""+e==""+t:+e===+t},_set:function(e,t,n,r,i){var s=this,o=!1;return s._compare(e,s.begin)||(s.begin=e,o=!0),s._compare(t,s.end)||(s.end=t,o=!0),s._compare(n,s.length)||(s.length=n,o=!0),o&&s.window._onAxisChanged(this),r&&s._updateSelection({render:i}),o},_readArgs:function(e){if(e){var t={},n=0,r=function(r){var i=e[r];null!=i?n=!0:i=this[r],t[r]=i};Mt.visual.CartesianFocusWindowAxis.props.forEach(r,this);if(n)return t}},_updateSelection:function(t){var n,r,i=this,s=i.axis,o=s.isDiscrete(),u=s.chart,a=s.dataCell,f=a.role,l=u.partData(a.dataPartValue);if(o){r=f.flatten(l);var c=r.child(i.begin),h=r.child(i.end);if(c&&h){var p=c.childIndex(),d=h.childIndex();n=e.range(p,d-p+1).select(function(e){return r.childNodes[e]}).selectMany(e.propGet("_datums")).where(k).distinct(e.propGet("key"))}}else{r=l;var v=f.firstDimensionName();n=e.query(l._datums).where(k).where(function(e){var t=e.atoms[v].value;return null!=t&&t>=i.begin&&t<=i.end})}n&&(u.data.replaceSelected(n),u.root.updateSelections(t))}});var nn=e.create(Kt,{Resizable:{resolve:"_resolveFull",cast:Boolean,value:!0},Movable:{resolve:"_resolveFull",cast:Boolean,value:!0},Begin:{resolve:"_resolveFull"},End:{resolve:"_resolveFull"},Length:{resolve:"_resolveFull"},Constraint:{resolve:"_resolveFull",cast:e.fun.as}});e.type("pvc.visual.ColorAxis",Jt).add({scaleNullRangeValue:function(){return this.option("Missing")||null},scaleUsesAbs:function(){return this.option("UseAbs")},domainVisibleOnly:function(){return"discrete"!==this.scaleType},bind:function(t){return this.base(t),this._legendGroupScene=null,this._plotList=e.query(t).select(function(e){return e.plot}).distinct(function(e){return e&&e.id}).array(),this},_wrapScale:function(e){var t;t="discrete"===this.scaleType?this.option.isSpecified("Transform")||!this.option.isSpecified("Colors")&&!this.option.isSpecified("Map"):!0;if(t){var n=this.option("Transform");n&&(e=e.transform(n))}return this.base(e)},scheme:function(){return e.lazy(this,"_scheme",this._createScheme,this)},_createColorMapFilter:function(t){var n=e.uniqueIndex(t,function(e){return e.key});return{domain:function(n){return!e.hasOwn(t,n)},color:function(t){return!e.hasOwn(n,t.key)}}},_getBaseScheme:function(){return this.option("Colors")},_createScheme:function(){var t=this,n=t._getBaseScheme();if("discrete"!==t.scaleType)return function(){var e=n.apply(null,arguments);return t._wrapScale(e)};var r=t.option("Map");if(!r)return function(){var e=n.apply(null,arguments);return t._wrapScale(e)};var i=this._createColorMapFilter(r);return function(s){var o;s instanceof Array||(s=e.array.copy(arguments)),s=s.filter(i.domain);var u=n(s),a=u.range().filter(i.color);u.range(a),o=function(t){var n=e.getOwn(r,t);return n||u(t)},e.copy(o,u);var f,l;return o.domain=function(){if(arguments.length)throw e.operationInvalid("The scale cannot be modified.");return f||(f=e.array.append(e.ownKeys(r),s)),f},o.range=function(){if(arguments.length)throw e.operationInvalid("The scale cannot be modified.");return l||(l=e.array.append(e.own(r),a)),l},t._wrapScale(o)}},sceneScale:function(t){var n=e.get(t,"sceneVarName")||this.role.name,r=this.scalesByCateg;if(r){var i=this.option("Missing");return function(e){var t=e.vars[n].value;if(null==t)return i;var s=e.group.parent.absKey;return r[s](t)}}return this.scale.by1(function(e){return e&&e.vars[n].value})},_buildOptionId:function(){return this.id+"Axis"},_getOptionsDefinition:function(){return on},_resolveByNaked:Mt.options.specify(function(t){return this.index?void 0:this._chartOption(this.id+e.firstUpperCase(t.name))}),_specifyV1ChartOption:function(e,t){return!this.index&&this.chart.compatVersion()<=1&&this._specifyChartOption(e,t)?!0:void 0}});var rn,sn={resolveDefault:function(t){return!this.index&&this._specifyChartOption(t,e.firstLowerCase(t.name))?!0:void 0}},on=e.create(Kt,{Colors:{resolve:"_resolveFull",getDefault:xt,data:{resolveV1:function(e){return"discrete"===this.scaleType?0===this.index?this._specifyChartOption(e,"colors"):1===this.index&&this.chart._allowV1SecondAxis&&this._specifyChartOption(e,"secondAxisColor"):this._specifyChartOption(e,"colorRange"),!0},resolveDefault:function(e){0===this.index&&this._specifyChartOption(e,"colors")}},cast:Mt.colorScheme},Map:{resolve:"_resolveFull",cast:St},Transform:{resolve:"_resolveFull",data:{resolveDefault:function(t){var n=this._plotList;if(n.length<=2){var r=e.query(n).all(function(e){var t=e.name;return"plot2"===t||"trend"===t});if(r)return t.defaultValue(Mt.brighterColorTransform),!0}}},cast:e.fun.to},NormByCategory:{resolve:function(e){return this.chart._allowColorPerCategory?this._resolveFull(e):(e.specify(!1),!0)},data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"normPerBaseCategory"),!0}},cast:Boolean,value:!1},ScaleType:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"scalingType"),!0}},cast:Mt.parseContinuousColorScaleType,value:"linear"},UseAbs:{resolve:"_resolveFull",cast:Boolean,value:!1},Domain:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"colorRangeInterval"),!0}},cast:e.array.to},Min:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"minColor"),!0}},cast:t.color},Max:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"maxColor"),!0}},cast:t.color},Missing:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyV1ChartOption(e,"nullColor"),!0}},cast:t.color,value:t.color("lightgray")},Unbound:{resolve:"_resolveFull",getDefault:function(){var e=this.option("Colors");return e().range()[0]||Mt.defaultColor},cast:t.color},LegendVisible:{resolve:"_resolveFull",data:sn,cast:Boolean,value:!0},LegendClickMode:{resolve:"_resolveFull",data:sn,cast:Mt.parseLegendClickMode,value:"togglevisible"},LegendDrawLine:{resolve:"_resolveFull",data:sn,cast:Boolean,value:!1},LegendDrawMarker:{resolve:"_resolveFull",data:sn,cast:Boolean,value:!0},LegendShape:{resolve:"_resolveFull",data:sn,cast:Mt.parseShape}});e.type("pvc.visual.SizeAxis",Jt).init(function(t,n,r,i){i=e.set(i,"byNaked",!1),this.base(t,n,r,i)}).add({_buildOptionId:function(){return this.id+"Axis"},scaleTreatsNullAs:function(){return"min"},scaleUsesAbs:function(){return this.option("UseAbs")},setScaleRange:function(t){var n=this.scale;return n.min=t.min,n.max=t.max,n.size=t.max-t.min,n.range(n.min,n.max),Mt.debug>=4&&Mt.log("Scale: "+Mt.stringify(e.copyOwn(n))),this},_getOptionsDefinition:function(){return un}});var un=e.create(Kt,{OriginIsZero:{resolve:"_resolveFull",cast:Boolean,value:!1},FixedMin:{resolve:"_resolveFull",cast:Mt.castNumber},FixedMax:{resolve:"_resolveFull",cast:Mt.castNumber},UseAbs:{resolve:"_resolveFull",cast:Boolean,value:!1}});e.type("pvc.visual.NormalizedAxis",Jt).init(function(t,n,r,i){i=e.set(i,"byNaked",!1),this.base(t,n,r,i)}).add({_buildOptionId:function(){return this.id+"Axis"},scaleTreatsNullAs:function(){return"zero"},scaleUsesAbs:e.retTrue,scaleSumNormalized:e.retTrue,setScaleRange:function(t){var n=this.scale;return n.min=t.min,n.max=t.max,n.size=t.max-t.min,n.range(n.min,n.max),Mt.debug>=4&&Mt.log("Scale: "+Mt.stringify(e.copyOwn(n))),this},_getOptionsDefinition:function(){return an}});var an=e.create(Kt,{OriginIsZero:{value:!0}});e.type("pvc.visual.Legend",Mt.visual.OptionsBase).init(function(t,n,r,i){i=e.set(i,"byNaked",!1),this.base(t,n,r,i)}).add({_getOptionsDefinition:function(){return fn}});var fn={Position:{resolve:"_resolveFull",cast:Mt.parsePosition,value:"bottom"},Size:{resolve:"_resolveFull",cast:Tt},SizeMax:{resolve:"_resolveFull",cast:Tt},Align:{resolve:"_resolveFull",data:{resolveDefault:function(e){var t,n=this.option("Position");return"top"!==n&&"bottom"!==n?t="top":this.chart.compatVersion()<=1&&(t="left"),e.defaultValue(t),!0}},cast:Nt},Margins:{resolve:"_resolveFull",data:{resolveDefault:function(t){if(this.chart.compatVersion()>1){var n=this.option("Position"),r=e.set({},Mt.BasePanel.oppositeAnchor[n],5);t.defaultValue(r)}return!0}},cast:Ht.as},Paddings:{resolve:"_resolveFull",cast:Ht.as,value:5},Font:{resolve:"_resolveFull",cast:String},ItemSize:{resolve:"_resolveFull",cast:Ct}};e.type("pvc.visual.legend.BulletRootScene",Mt.visual.Scene).init(function(t,n){this.base(t,n),this._unresolvedMarkerDiam=e.get(n,"markerSize"),this._unresolvedItemPadding=new Ht(e.get(n,"itemPadding",5)),this._unresolvedItemSize=Ft.to(e.get(n,"itemSize"))||new Ft,e.set(this.vars,"horizontal",e.get(n,"horizontal",!1),"font",e.get(n,"font"),"textMargin",e.get(n,"textMargin",6)-3)}).add({layout:function(t){function n(t){var n=t.labelTextSize(),i=!n||!n.width||!n.height;t.isHidden=i;if(!i){var s,u={width:c+n.width,height:Math.max(n.height,l)},f={width:a.width||o.width+u.width,height:a.height||o.height+u.height},h={width:Math.max(0,f.width-o.width),height:Math.max(0,f.height-o.height)};m?s=!m.items.length:(m=new Mt.visual.legend.BulletItemSceneSection(0),s=!0);var g=m.size[p]+h[p];s||(g+=o[p]),!s&&g>v&&(r(!1),g=h[p]);var y=m.size;y[p]=g,y[d]=Math.max(y[d],h[d]);var b=m.items.length;m.items.push(t),e.set(t.vars,"section",m,"sectionIndex",b,"textSize",n,"itemSize",f,"itemClientSize",h,"itemContentSize",u)}}function r(e){var t=m.size;y[d]+=t[d],g.length&&(y[d]+=o[d]),y[p]=Math.max(y[p],t[p]),g.push(m),e||(m=new Mt.visual.legend.BulletItemSceneSection(g.length))}var i=t.clientSize;if(i.width>0&&i.height>0){var s=t.desiredClientSize,o=this._unresolvedItemPadding.resolve(i),u={width:i.width+o.width,height:i.height+o.height},a=this._unresolvedItemSize.resolve(u),f={width:a.width&&Math.max(0,a.width-o.width),height:a.height&&Math.max(0,a.height-o.height)},l=this._unresolvedMarkerDiam||f.height||15;this.vars.itemPadding=o,this.vars.desiredItemSize=a,this.vars.desiredItemClientSize=f,this.vars.markerSize=l;var c=l+this.vars.textMargin,h=Math.max(0,Math.min(f.width||1/0,s.width||1/0,i.width)-c),p=this.vars.horizontal?"width":"height",d=Mt.BasePanel.oppositeLength[p],v=s[p];(!v||0>v)&&(v=i[p]);var m,g=[],y={width:0,height:0};this.childNodes.forEach(function(e){e.childNodes.forEach(n,this)},this);if(!m)return new Ft(0,0);r(!0),e.set(this.vars,"sections",g,"contentSize",y,"labelWidthMax",h);var b=this.compatVersion()<=1,w=b?v:y[p],E=s[d];(!E||0>E)&&(E=y[d]);var S=this.vars.size=e.set({},p,Math.min(w,i[p]),d,Math.min(E,i[d]));return S}return new Ft(0,0)},defaultGroupSceneType:function(){var t=this._bulletGroupType;return t||(t=e.type(Mt.visual.legend.BulletGroupScene),this._bulletGroupType=t),t},createGroup:function(e){var t=this.defaultGroupSceneType();return new t(this,e)}}),e.type("pvc.visual.legend.BulletItemSceneSection").init(function(e){this.index=e,this.items=[],this.size={width:0,height:0}}),e.type("pvc.visual.legend.BulletGroupScene",Mt.visual.Scene).init(function(t,n){this.base(t,n),this.extensionPrefix=e.get(n,"extensionPrefix")||"",this._renderer=e.get(n,"renderer"),this.colorAxis=e.get(n,"colorAxis"),this.clickMode=e.get(n,"clickMode"),!this.clickMode&&this.colorAxis&&(this.clickMode=this.colorAxis.option("LegendClickMode"))}).add({hasRenderer:function(){return!!this._renderer},renderer:function(e){if(null!=e)this._renderer=e;else{e=this._renderer;if(!e){var t,n=this.colorAxis;n&&(t={drawRule:n.option("LegendDrawLine"),drawMarker:n.option("LegendDrawMarker"),markerShape:n.option("LegendShape")}),e=new Mt.visual.legend.BulletItemDefaultRenderer(t),this._renderer=e}}return e},itemSceneType:function(){var t=this._itemSceneType;if(!t){t=e.type(Mt.visual.legend.BulletItemScene);var n=this.clickMode;switch(n){case"toggleselected":t.add(Mt.visual.legend.BulletItemSceneSelection);break;case"togglevisible":t.add(Mt.visual.legend.BulletItemSceneVisibility)}var r=this.panel();r._extendSceneType("item",t,["isOn","executable","execute","value","labelText"]);var i=Mt.makeExtensionAbsId(Mt.makeExtensionAbsId("ItemScene",[this.extensionPrefix,"$"]),r._getExtensionPrefix()),s=r.chart._getExtension(i,"value");void 0!==s&&t.prototype.variable("value",s),this._itemSceneType=t}return t},createItem:function(e){var t=this.itemSceneType();return new t(this,e)}}),e.type("pvc.visual.legend.BulletItemScene",Mt.visual.Scene).init(function(){this.base.apply(this,arguments);if(!this.executable()){var e=Mt.visual.Interactive;this._ibits=e.Interactive|e.ShowsInteraction|e.Hoverable|e.SelectableAny}}).add({isOn:e.fun.constant(!0),executable:e.fun.constant(!1),execute:e.fun.constant(),labelText:function(){return this.value().label},labelTextSize:function(){return t.Text.measure(this.labelText(),this.vars.font)},_valueEval:function(){var e=this._valueEvalCore();return e instanceof Xt||(e=new Xt(e,e)),e},_valueEvalCore:function(){var e,t,n,r,i,s=this.group||this.datum;return s&&(e=s.value,t=s.rawValue,i=this._getTrendLineSuffix(s),n=s.ensureLabel()+i,r=s.absLabel?s.absLabel+i:n),new Xt(e||null,n||"",t,r)},_getTrendLineSuffix:function(e){var t,n;return(t=e.firstDatum())&&(n=t.trend)?" ("+n.label+")":""}}).prototype.variable("value"),e.type("pvc.visual.legend.BulletItemSceneSelection").add({isOn:function(){var e=this.group||this.datum;return!e.owner.selectedCount()||this.isSelected()},executable:function(){return this.chart().selectableByClick()},execute:function(){var e=this.datums().array();if(e.length){var t=this.chart();t._updatingSelections(function(){e=t._onUserSelection(e),e&&e.length&&Mt.data.Data.toggleSelected(e,!0)})}}}),e.type("pvc.visual.legend.BulletItemSceneVisibility").add({isOn:function(){return this.datums().any(function(e){return!e.isNull&&e.isVisible})},executable:e.fun.constant(!0),execute:function(){Mt.data.Data.toggleVisible(this.datums())&&this.chart().render(!0,!0,!1)}}),e.type("pvc.visual.legend.BulletItemRenderer"),e.type("pvc.visual.legend.BulletItemDefaultRenderer",Mt.visual.legend.BulletItemRenderer).init(function(t){this.drawRule=e.get(t,"drawRule",!1),this.drawRule&&(this.rulePvProto=e.get(t,"rulePvProto")),this.drawMarker=!this.drawRule||e.get(t,"drawMarker",!0),this.drawMarker&&(this.markerShape=e.get(t,"markerShape","square"),this.markerPvProto=e.get(t,"markerPvProto"))}).add({drawRule:!1,drawMarker:!0,markerShape:null,rulePvProto:null,markerPvProto:null,create:function(e,t,n,r){var i={},s=this.drawRule,o=function(e){return e.color};if(s){var u=(new _t).left(0).top(function(){return this.parent.height()/2}).width(function(){return this.parent.width()}).lineWidth(1,Mt.extensionTag).strokeStyle(o,Mt.extensionTag),a=this.rulePvProto;a&&(u=a.extend(u)),i.pvRule=(new Mt.visual.Rule(e,t,{proto:u,noSelect:!1,noHover:!1,activeSeriesAware:!1,extensionId:n+"Rule",extensionId:Mt.makeExtensionAbsId("Rule",[n,"$"]),showsInteraction:!0,wrapper:r})).pvMark}if(this.drawMarker){var f=(new _t).left(function(){return this.parent.width()/2}).top(function(){return this.parent.height()/2}).shapeSize(function(){return this.parent.width()},Mt.extensionTag).lineWidth(2,Mt.extensionTag).fillStyle(o,Mt.extensionTag).strokeStyle(o,Mt.extensionTag).shape(this.markerShape,Mt.extensionTag).angle(s?0:Math.PI/2,Mt.extensionTag).antialias(function(){var e=Math.abs(Math.cos(this.angle()));if(0!==e&&1!==e)switch(this.shape()){case"square":case"bar":return!1}return!0},Mt.extensionTag),l=this.markerPvProto;l&&(f=l.extend(f)),i.pvDot=(new Mt.visual.Dot(e,t,{proto:f,freePosition:!0,activeSeriesAware:!1,noTooltip:!0,noClick:!0,extensionId:Mt.makeExtensionAbsId("Dot",[n,"$"]),wrapper:r})).pvMark}return i}}),e.type("pvc.visual.DataCell").init(function(t,n,r,i,s){this.plot=t,this.axisType=n,this.axisIndex=r,this.role=t.chart.visualRoles[i]||e.fail.argumentInvalid("roleName","Role is not defined."),this.dataPartValue=s}),e.type("pvc.visual.ColorDataCell",Mt.visual.DataCell).init(function(e,t,n,r,i){this.base(e,t,n,r,i),this._legendGroupScene=null}).add({legendGroupScene:function(e){return arguments.length?(this._legendGroupScene=e,this):this._legendGroupScene}}),e.type("pvc.visual.Plot",Mt.visual.OptionsBase).init(function(t,n){var r=e.getPath(t,["plotsByType",this.type]),i=r?r.length:0,s=t.plotList.length;n=e.set(n,"byNaked",!s),this.base(t,this.type,i,n),t._addPlot(this);var o=this.extensionPrefixes=[this.id];this.globalIndex||o.push(""),this.name&&o.push(this.name)}).add({_getOptionsDefinition:function(){return Mt.visual.Plot.optionsDef},_resolveByNaked:Mt.options.specify(function(t){return this.globalIndex?void 0:this._chartOption(e.firstLowerCase(t.name))}),collectDataCells:function(e){var t=this._getColorDataCell();t&&e.push(t)},_getColorDataCell:function(){var e=this.option("ColorRole");return e?new Mt.visual.ColorDataCell(this,"color",this.option("ColorAxis")-1,e,this.option("DataPart")):void 0}}),Mt.visual.Plot.optionsDef={Orientation:{resolve:function(e){return e.specify(this._chartOption("orientation")||"vertical"),!0},cast:String},ValuesVisible:{resolve:"_resolveFull",data:{resolveV1:function(e){if(0===this.globalIndex){var t=this._chartOption("showValues");return void 0!==t?e.specify(t):(t="point"!==this.type,e.defaultValue(t)),!0}}},cast:Boolean,value:!1},ValuesAnchor:{resolve:"_resolveFull",cast:Mt.parseAnchor},ValuesFont:{resolve:"_resolveFull",cast:String,value:"10px sans-serif"},ValuesMask:{resolve:"_resolveFull",cast:String,value:"{value}"},ValuesOptimizeLegibility:{resolve:"_resolveFull",cast:Boolean,value:!1},ValuesOverflow:{resolve:"_resolveFull",cast:Mt.parseValuesOverflow,value:"hide"},DataPart:{resolve:"_resolveFixed",cast:String,value:"0"},ColorRole:{resolve:"_resolveFixed",cast:String,value:"color"},ColorAxis:{resolve:Mt.options.resolvers([function(e){if(0===this.globalIndex)return e.specify(1),!0},"_resolveFull"]),cast:function(t){return t=Mt.castNumber(t),t=null!=t?e.between(t,1,10):1,t},value:1}},e.type("pvc.visual.CartesianOrthoDataCell",Mt.visual.DataCell).init(function(e,t,n,r,i,s,o,u){this.base(e,t,n,r,i),this.isStacked=s,this.nullInterpolationMode=o,this.trend=u}),e.type("pvc.visual.CartesianPlot",Mt.visual.Plot).add({collectDataCells:function(t){this.base(t),t.push(new Mt.visual.DataCell(this,"base",this.option("BaseAxis")-1,this.option("BaseRole"),this.option("DataPart")));var n=e.array.to(this.option("OrthoRole")),r=this.option("DataPart"),i=this.option("OrthoAxis")-1,s=this.option.isDefined("Stacked")?this.option("Stacked"):void 0,o=this.option("NullInterpolationMode"),u=this.option("Trend");n.forEach(function(e){t.push(new Mt.visual.CartesianOrthoDataCell(this,"ortho",i,e,r,s,o,u))},this)},_getOptionsDefinition:function(){return Mt.visual.CartesianPlot.optionsDef}}),Mt.visual.CartesianPlot.optionsDef=e.create(Mt.visual.Plot.optionsDef,{BaseAxis:{value:1},BaseRole:{resolve:"_resolveFixed",cast:String},OrthoAxis:{resolve:function(e){return 0===this.globalIndex?(e.specify(1),!0):this._resolveFull(e)},data:{resolveV1:function(e){return"plot2"===this.name&&this.chart._allowV1SecondAxis&&this._chartOption("secondAxisIndependentScale")&&e.specify(2),!0}},cast:function(t){return t=Mt.castNumber(t),null!=t?e.between(t,1,10):1},value:1},OrthoRole:{resolve:Mt.options.resolvers(["_resolveFixed","_resolveDefault"])},Trend:{resolve:"_resolveFull",data:{resolveDefault:function(e){var t=this.option("TrendType");if(t)return e.defaultValue({type:t}),!0}},cast:Lt},TrendType:{resolve:"_resolveFull",cast:Mt.parseTrendType},TrendLabel:{resolve:"_resolveFull",cast:String},NullInterpolationMode:{resolve:"_resolveFull",cast:Mt.parseNullInterpolationMode,value:"none"}}),e.type("pvc.visual.CategoricalPlot",Mt.visual.CartesianPlot).add({_getOptionsDefinition:function(){return Mt.visual.CategoricalPlot.optionsDef}}),Mt.visual.CategoricalPlot.optionsDef=e.create(Mt.visual.CartesianPlot.optionsDef,{Stacked:{resolve:"_resolveFull",cast:Boolean,value:!1},BaseRole:{value:"category"},OrthoRole:{value:"value"}}),e.type("pvc.visual.BarPlotAbstract",Mt.visual.CategoricalPlot).add({_getOptionsDefinition:function(){return Mt.visual.BarPlotAbstract.optionsDef}}),Mt.visual.BarPlotAbstract.optionsDef=e.create(Mt.visual.CategoricalPlot.optionsDef,{BarSizeRatio:{resolve:"_resolveFull",cast:function(e){return e=Mt.castNumber(e),null==e?e=1:.05>e?e=.05:e>1&&(e=1),e},value:.9},BarSizeMax:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyChartOption(e,"maxBarSize"),!0}},cast:function(e){return e=Mt.castNumber(e),null==e?e=1/0:1>e&&(e=1),e},value:2e3},BarOrthoSizeMin:{resolve:"_resolveFull",cast:Mt.castNonNegativeNumber,value:1.5},BarStackedMargin:{resolve:"_resolveFull",cast:function(e){return e=Mt.castNumber(e),null!=e&&0>e&&(e=0),e},value:0},OverflowMarkersVisible:{resolve:"_resolveFull",cast:Boolean,value:!0},ValuesAnchor:{value:"center"}}),e.type("pvc.visual.BarPlot",Mt.visual.BarPlotAbstract).add({type:"bar"}),e.type("pvc.visual.NormalizedBarPlot",Mt.visual.BarPlotAbstract).add({type:"bar",_getOptionsDefinition:function(){return Mt.visual.NormalizedBarPlot.optionsDef}}),Mt.visual.NormalizedBarPlot.optionsDef=e.create(Mt.visual.BarPlotAbstract.optionsDef,{Stacked:{resolve:null,value:!0}}),e.type("pvc.visual.WaterfallPlot",Mt.visual.BarPlotAbstract).add({type:"water",_getOptionsDefinition:function(){return Mt.visual.WaterfallPlot.optionsDef}}),Mt.visual.WaterfallPlot.optionsDef=e.create(Mt.visual.BarPlotAbstract.optionsDef,{Stacked:{resolve:null,value:!0},TotalLineLabel:{resolve:"_resolveFull",cast:String,value:"Accumulated"},TotalValuesVisible:{resolve:"_resolveFull",data:{resolveDefault:function(e){return e.defaultValue(this.option("ValuesVisible")),!0}},cast:Boolean},Direction:{resolve:"_resolveFull",cast:Mt.parseWaterDirection,value:"down"},AreasVisible:{resolve:"_resolveFull",cast:Boolean,value:!0},AllCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"}}),e.type("pvc.visual.PointPlot",Mt.visual.CategoricalPlot).add({type:"point",_getOptionsDefinition:function(){return Mt.visual.PointPlot.optionsDef}}),Mt.visual.PointPlot.optionsDef=e.create(Mt.visual.CategoricalPlot.optionsDef,{DotsVisible:{resolve:"_resolveFull",data:At("Dots",!0),cast:Boolean,value:!1},LinesVisible:{resolve:"_resolveFull",data:At("Lines",!0),cast:Boolean,value:!1},AreasVisible:{resolve:"_resolveFull",data:At("Areas",!1),cast:Boolean,value:!1},ValuesAnchor:{value:"right"}}),e.type("pvc.visual.MetricXYPlot",Mt.visual.CartesianPlot).add({_getOptionsDefinition:function(){return Mt.visual.MetricXYPlot.optionsDef}}),Mt.visual.MetricXYPlot.optionsDef=e.create(Mt.visual.CartesianPlot.optionsDef,{BaseRole:{value:"x"},OrthoAxis:{resolve:null},OrthoRole:{value:"y"}}),e.type("pvc.visual.MetricPointPlot",Mt.visual.MetricXYPlot).add({type:"scatter",collectDataCells:function(e){this.base(e);if(this.option("DotsVisible")){var t=this.chart.visualRole(this.option("SizeRole"));t.isBound()&&e.push(new Mt.visual.DataCell(this,"size",this.option("SizeAxis")-1,t.name,this.option("DataPart")))}},_getOptionsDefinition:function(){return Mt.visual.MetricPointPlot.optionsDef}}),Mt.visual.MetricPointPlot.optionsDef=e.create(Mt.visual.MetricXYPlot.optionsDef,{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},Shape:{resolve:"_resolveFull",cast:Mt.parseShape,value:"circle"},NullShape:{resolve:"_resolveFull",cast:Mt.parseShape,value:"cross"},DotsVisible:{resolve:"_resolveFull",data:Ot("Dots"),cast:Boolean,value:!1},LinesVisible:{resolve:"_resolveFull",data:Ot("Lines"),cast:Boolean,value:!1},ValuesAnchor:{value:"right"},ValuesMask:{value:"{x},{y}"}}),e.type("pvc.visual.PiePlot",Mt.visual.Plot).add({type:"pie",collectDataCells:function(e){this.base(e);var t=this.option("DataPart");e.push(new Mt.visual.DataCell(this,"category",0,"category",t)),e.push(new Mt.visual.DataCell(this,"angle",0,"value",t))},_getOptionsDefinition:function(){return Mt.visual.PiePlot.optionsDef}}),Mt.visual.PiePlot.optionsDef=e.create(Mt.visual.Plot.optionsDef,{ActiveSliceRadius:{resolve:"_resolveFull",cast:Bt.parse,value:new Bt(.05)},ExplodedSliceRadius:{resolve:"_resolveFull",cast:Bt.parse,value:0},ExplodedSliceIndex:{resolve:"_resolveFull",cast:Mt.castNumber,value:null},ValuesAnchor:{cast:Mt.parseAnchorWedge,value:"outer"},ValuesVisible:{value:!0},ValuesLabelStyle:{resolve:function(e){var t=this.chart.compatVersion()<=1;return t?(e.specify("inside"),!0):this._resolveFull(e)},cast:function(e){switch(e){case"inside":case"linked":return e}return Mt.debug>=2&&Mt.log("[Warning] Invalid 'ValuesLabelStyle' value: '"+e+"'."),"linked"},value:"linked"},ValuesMask:{resolve:"_resolveFull",data:{resolveDefault:function(e){return e.defaultValue("linked"===this.option("ValuesLabelStyle")?"{value} ({value.percent})":"{value}"),!0}}},LinkInsetRadius:{resolve:"_resolveFull",cast:Bt.parse,value:new Bt(.05)},LinkOutsetRadius:{resolve:"_resolveFull",cast:Bt.parse,value:new Bt(.025)},LinkMargin:{resolve:"_resolveFull",cast:Bt.parse,value:new Bt(.025)},LinkHandleWidth:{resolve:"_resolveFull",cast:Mt.castNumber,value:.5},LinkLabelSize:{resolve:"_resolveFull",cast:Bt.parse,value:new Bt(.15)},LinkLabelSpacingMin:{resolve:"_resolveFull",cast:Mt.castNumber,value:.5}}),e.type("pvc.visual.HeatGridPlot",Mt.visual.CategoricalPlot).add({type:"heatGrid",collectDataCells:function(e){this.base(e);if(this.option("UseShapes")){var t=this.chart.visualRole(this.option("SizeRole"));t.isBound()&&e.push(new Mt.visual.DataCell(this,"size",this.option("SizeAxis")-1,t.name,this.option("DataPart")))}},_getOptionsDefinition:function(){return Mt.visual.HeatGridPlot.optionsDef}}),Mt.visual.HeatGridPlot.optionsDef=e.create(Mt.visual.CategoricalPlot.optionsDef,{SizeRole:{value:"size"},SizeAxis:{value:1},UseShapes:{resolve:"_resolveFull",cast:Boolean,value:!1},Shape:{resolve:"_resolveFull",cast:Mt.parseShape,value:"square"},NullShape:{resolve:"_resolveFull",cast:Mt.parseShape,value:"cross"},ValuesVisible:{getDefault:function(){return!this.option("UseShapes")},value:null},ValuesMask:{value:null},ValuesAnchor:{value:"center"},OrthoRole:{value:"series"},OrthoAxis:{resolve:null},NullInterpolationMode:{resolve:null,value:"none"},Stacked:{resolve:null,value:!1}}),e.type("pvc.visual.BoxPlot",Mt.visual.CategoricalPlot).add({type:"box",_getOptionsDefinition:function(){return Mt.visual.BoxPlot.optionsDef}}),Mt.visual.BoxPlot.optionsDef=e.create(Mt.visual.CategoricalPlot.optionsDef,{Stacked:{resolve:null,value:!1},OrthoRole:{value:["median","lowerQuartil","upperQuartil","minimum","maximum"]},BoxSizeRatio:{resolve:"_resolveFull",cast:function(e){return e=Mt.castNumber(e),null==e?e=1:.05>e?e=.05:e>1&&(e=1),e},value:1/3},BoxSizeMax:{resolve:"_resolveFull",data:{resolveV1:function(e){return this._specifyChartOption(e,"maxBoxSize"),!0}},cast:function(e){return e=Mt.castNumber(e),null==e?e=1/0:1>e&&(e=1),e},value:1/0}}),e.type("pvc.visual.BulletPlot",Mt.visual.Plot).add({type:"bullet",_getOptionsDefinition:function(){return Mt.visual.BulletPlot.optionsDef}}),Mt.visual.BulletPlot.optionsDef=e.create(Mt.visual.Plot.optionsDef,{ValuesVisible:{value:!0},ColorRole:{value:null}}),e.type("pvc.visual.TreemapPlot",Mt.visual.Plot).add({type:"treemap",_getOptionsDefinition:function(){return Mt.visual.TreemapPlot.optionsDef},collectDataCells:function(e){this.base(e);var t=this.option("SizeRole");t&&e.push(new Mt.visual.DataCell(this,"size",this.option("SizeAxis")-1,t,this.option("DataPart")))}}),Mt.visual.TreemapPlot.optionsDef=e.create(Mt.visual.Plot.optionsDef,{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},ValuesAnchor:{cast:Mt.parseAnchor,value:"center"},ValuesVisible:{value:!0},ValuesMask:{resolve:"_resolveFull",value:"{category}"},ValuesOptimizeLegibility:{value:!0},LayoutMode:{resolve:"_resolveFull",cast:Mt.parseTreemapLayoutMode,value:"squarify"},ColorMode:{resolve:"_resolveFull",cast:Mt.parseTreemapColorMode,value:"byparent"},RootCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"}}),e.type("pvc.visual.SunburstPlot",Mt.visual.Plot).add({type:"sunburst",_getOptionsDefinition:function(){return Mt.visual.SunburstPlot.optionsDef},collectDataCells:function(e){this.base(e);var t=this.option("SizeRole");t&&e.push(new Mt.visual.DataCell(this,"size",this.option("SizeAxis")-1,t,this.option("DataPart")))}}),Mt.visual.SunburstPlot.optionsDef=e.create(Mt.visual.Plot.optionsDef,{SizeRole:{resolve:"_resolveFixed",value:"size"},SizeAxis:{resolve:"_resolveFixed",value:1},ValuesAnchor:{cast:Mt.parseAnchor,value:"center"},ValuesVisible:{value:!0},ValuesMask:{resolve:"_resolveFull",value:"{category}"},ValuesOptimizeLegibility:{value:!0},RootCategoryLabel:{resolve:"_resolveFull",cast:String,value:"All"},SliceOrder:{resolve:"_resolveFull",cast:Mt.parseSunburstSliceOrder,value:"bySizeDescending"},EmptySlicesVisible:{resolve:"_resolveFull",cast:Boolean,value:!1},EmptySlicesLabel:{resolve:"_resolveFull",cast:String,value:""}}),e.type("pvc.Abstract").init(function(){this._syncLog()}).add({invisibleLineWidth:.001,defaultLineWidth:1.5,_logInstanceId:null,_syncLog:function(){if(Mt.debug&&"undefined"!=typeof console){var e=this._getLogInstanceId();["log","info",["trace","debug"],"error","warn",["group","groupCollapsed"],"groupEnd"].forEach(function(t){t=t instanceof Array?t:[t,t],i(this,"_"+t[0],t[1],e)},this)}},_getLogInstanceId:function(){return this._logInstanceId||(this._logInstanceId=this._processLogInstanceId(this._createLogInstanceId()))},_createLogInstanceId:function(){return""+this.constructor},_processLogInstanceId:function(t){var n=30,r=t.substr(0,n);return r.length<n&&(r+=e.array.create(n-r.length," ").join("")),"["+r+"]"}}),e.scope(function(){var e=Mt.Abstract.prototype,t=function(){this._syncLog()};["log","info","trace","error","warn","group","groupEnd"].forEach(function(n){e["_"+n]=t})}),e.type("pvc.BaseChart",Mt.Abstract).add(Mt.visual.Interactive).init(function(t){var n=t,r=this.parent=e.get(t,"parent")||null;r?t||e.fail.argumentRequired("options"):t=e.mixin.copy({},this.defaults,t),this.options=t,r?(this.root=r.root,this.smallColIndex=t.smallColIndex,this.smallRowIndex=t.smallRowIndex):this.root=this,this.base(),Mt.debug>=3&&this._info("NEW CHART\n"+Mt.logSeparator.replace(/-/g,"=")+"\n  DebugLevel: "+Mt.debug),Mt.debug>=3&&!r&&n&&(this._info("OPTIONS:\n",n),Mt.debug>=5&&this._trace(Mt.stringify(t,{ownOnly:!1,funs:!0}))),r&&r._addChild(this),this._constructData(t),this._constructVisualRoles(t)}).add({_disposed:!1,_animatable:!1,parent:null,children:null,root:null,isCreated:!1,_createVersion:0,renderCallback:void 0,multiChartPageCount:null,multiChartPageIndex:null,_multiChartOverflowClipped:!1,left:0,top:0,width:null,height:null,margins:null,paddings:null,_allowV1SecondAxis:!1,compatVersion:function(e){return(e||this.options).compatVersion},_createLogInstanceId:function(){return""+this.constructor+this._createLogChildSuffix()},_createLogChildSuffix:function(){return this.parent?" ("+(this.smallRowIndex+1)+","+(this.smallColIndex+1)+")":""},_addChild:function(t){t.parent===this||e.assert("Not a child of this chart."),this.children.push(t)},_create:function(e){this._createPhase1(e),this._createPhase2(e)},_createPhase1:function(e){this._createVersion++,this.isCreated=!1,Mt.debug>=3&&this._log("Creating"),this.children=[],this.parent||Mt.removeTipsyLegends(),this._processOptions(),this.parent||this._checkNoDataI(),!this.parent&&!this.data&&(this._initVisualRoles(),this._bindVisualRolesPreI(),this._complexTypeProj=this._createComplexTypeProject(),this._bindVisualRolesPreII()),this._initData(e),this.parent||this._checkNoDataII();var t=this.visualRoles.multiChart.isBound(),n=this._chartLevel();this._initPlots(t),this._initAxes(t),t&&!this.parent&&this._initMultiCharts(),this.parent||(this._interpolate(t),this._generateTrends(t)),this._setAxesScales(n)},_createPhase2:function(){var e=this.visualRoles.multiChart.isBound();this._initChartPanels(e),this.isCreated=!0},_setSmallLayout:function(t){if(t){var n=this.basePanel;this._setProp("left",t)|this._setProp("top",t)&&n&&e.set(n.position,"left",this.left,"top",this.top),this._setProp("width",t)|this._setProp("height",t)&&n&&(n.size=new Ft(this.width,this.height)),this._setProp("margins",t)&&n&&(n.margins=new Ht(this.margins)),this._setProp("paddings",t)&&n&&(n.paddings=new Ht(this.paddings))}},_setProp:function(e,t){var n=t[e];if(null!=n)return this[e]=n,!0},_processOptions:function(){var e=this.options;return this.parent||(this.width=e.width,this.height=e.height,this.margins=e.margins,this.paddings=e.paddings),this.compatVersion()<=1&&(e.plot2=this._allowV1SecondAxis&&!!e.secondAxis),this._processOptionsCore(e),this._processExtensionPoints(),e},_processOptionsCore:function(e){if(this.parent)this._ibits=this.parent._ibits,this._tooltipOptions=this.parent._tooltipOptions;else{var n="batik"!==t.renderer();n&&(n=e.interactive,null==n&&(n=!0));var r;if(n){var i=Mt.visual.Interactive;r=i.Interactive|i.ShowsInteraction,this._processTooltipOptions(e)&&(r|=i.ShowsTooltip),e.animate&&$.support.svg&&(r|=i.Animatable);var s=!1;if(e.selectable){r|=i.Selectable;switch(Mt.parseSelectionMode(e.selectionMode)){case"rubberband":r|=i.SelectableByRubberband|i.SelectableByClick;break;case"focuswindow":r|=i.SelectableByFocusWindow,s=!0}}s||"emptyspaceclick"!==Mt.parseClearSelectionMode(e.clearSelectionMode)||(r|=i.Unselectable),e.hoverable&&(r|=i.Hoverable),e.clickable&&(r|=i.Clickable|i.DoubleClickable)}else r=0;this._ibits=r}},_tooltipDefaults:{gravity:"s",delayIn:200,delayOut:80,offset:2,opacity:.9,html:!0,fade:!0,useCorners:!1,arrowVisible:!0,followMouse:!1,format:void 0},_processTooltipOptions:function(t){var n=this.compatVersion()<=1,r=t.tooltip,i=t.tooltipEnabled;return null==i&&(r&&(i=r.enabled),null==i&&(n&&(i=t.showTooltips),null==i&&(i=!0))),i?(r||(r={}),n&&this._importV1TooltipOptions(r,t),e.eachOwn(this._tooltipDefaults,function(n,i){var s=t["tooltip"+e.firstUpperCase(i)];void 0!==s?r[i]=s:void 0===r[i]&&(r[i]=n)})):r={},this._tooltipOptions=r,i},_importV1TooltipOptions:function(e,t){var n=t.tipsySettings;if(n){this.extend(n,"tooltip");for(var r in n)void 0===e[r]&&(e[r]=n[r]);null==e.html&&(e.html=!1)}},render:function(e,t,n){var r;Mt.debug>1&&Mt.group("CCC RENDER"),this._suspendSelectionUpdate();try{this.useTextMeasureCache(function(){try{for(;;){!this.isCreated||t?this._create({reloadData:n}):!this.parent&&this.isCreated&&Mt.removeTipsyLegends(),this.basePanel.render({bypassAnimation:e,recreate:t});if(!this._isMultiChartOverflowClip){this._isMultiChartOverflowClipRetry=!1;break}t=!0,n=!1,this._isMultiChartOverflowClipRetry=!0,this._isMultiChartOverflowClip=!1,this._multiChartOverflowClipped=!0}}catch(i){i instanceof NoDataException?(Mt.debug>1&&this._log("No data found."),this._addErrorPanelMessage("No data found",!0)):(r=!0,Mt.logError(i.message),Mt.debug>0&&this._addErrorPanelMessage("Error: "+i.message,!1))}})}finally{r||this._resumeSelectionUpdate(),Mt.debug>1&&Mt.groupEnd()}return this},_addErrorPanelMessage:function(e,n){var r=this.options,i=(new t.Panel).canvas(r.canvas).width(this.width).height(this.height),s=i.anchor("center").add(t.Label).text(e);n&&this.extend(s,"noDataMessage"),i.render()},useTextMeasureCache:function(e,n){var r=this.root,i=r._textMeasureCache||(r._textMeasureCache=t.Text.createCache());return t.Text.usingCache(i,e,n||this)},animate:function(e,t){return this.basePanel.animate(e,t)},animatingStart:function(){return this.basePanel.animatingStart()},animatable:function(){return this._animatable&&this.base()},isOrientationVertical:function(e){return(e||this.options.orientation)===Mt.orientation.vertical},isOrientationHorizontal:function(e){return(e||this.options.orientation)===Mt.orientation.horizontal},dispose:function(){this._disposed||(this._disposed=!0)},defaults:{width:400,height:300,orientation:"vertical",ignoreNulls:!0,crosstabMode:!0,isMultiValued:!1,seriesInRows:!1,groupedLabelSep:void 0,animate:!0,titlePosition:"top",titleAlign:"center",legend:!1,legendPosition:"bottom",v1StyleTooltipFormat:function(e,t,n,r){return e+", "+t+":  "+this.chart.options.valueFormat(n)+(r&&r.percent?" ("+r.percent.label+")":"")},valueFormat:e.scope(function(){var e=t.Format.number().fractionDigits(0,2);return function(t){return e.format(t)}}),percentValueFormat:e.scope(function(){var e=t.Format.number().fractionDigits(0,1);return function(t){return e.format(100*t)+"%"}}),clickable:!1,doubleClickMaxDelay:300,hoverable:!1,selectable:!1,selectionMode:"rubberband",ctrlSelectMode:!0,clearSelectionMode:"emptySpaceClick",compatVersion:1/0}}),Mt.BaseChart.add({visualRoles:null,visualRoleList:null,_serRole:null,_dataPartRole:null,_measureVisualRoles:null,visualRole:function(t){var n=e.getOwn(this.visualRoles,t);if(!n)throw e.error.operationInvalid("roleName","There is no visual role with name '{0}'.",[t]);return n},measureVisualRoles:function(){return this._measureVisualRoles},measureDimensionsNames:function(){return e.query(this._measureVisualRoles).select(function(e){return e.firstDimensionName()}).where(e.notNully).array()},_constructVisualRoles:function(){var e=this.parent;e?(this.visualRoles=e.visualRoles,this.visualRoleList=e.visualRoleList,this._measureVisualRoles=e._measureVisualRoles,["_multiChartRole","_serRole","_colorRole","_dataPartRole"].forEach(function(t){var n=e[t];n&&(this[t]=n)},this)):(this.visualRoles={},this.visualRoleList=[],this._measureVisualRoles=[])},_hasDataPartRole:e.fun.constant(!1),_getSeriesRoleSpec:e.fun.constant(null),_getColorRoleSpec:e.fun.constant(null),_addVisualRole:function(t,n){n=e.set(n,"index",this.visualRoleList.length);var r=new Mt.visual.Role(t,n);return this.visualRoleList.push(r),this.visualRoles[t]=r,r.isMeasure&&this._measureVisualRoles.push(r),r},_initVisualRoles:function(){this._multiChartRole=this._addVisualRole("multiChart",{defaultDimension:"multiChart*",requireIsDiscrete:!0}),this._hasDataPartRole()&&(this._dataPartRole=this._addVisualRole("dataPart",{defaultDimension:"dataPart",requireSingleDimension:!0,requireIsDiscrete:!0,dimensionDefaults:{isHidden:!0,comparer:e.compare}}));var t=this._getSeriesRoleSpec();t&&(this._serRole=this._addVisualRole("series",t));var n=this._getColorRoleSpec();n&&(this._colorRole=this._addVisualRole("color",n))},_assertUnboundRoleIsOptional:function(t){if(t.isRequired)throw e.error.operationInvalid("Chart type requires unassigned role '{0}'.",[t.name])},_bindVisualRolesPreI:function(){e.eachOwn(this.visualRoles,function(e){e.setIsReversed(!1)});var t=[],n=this.options,r=n.visualRoles;this.visualRoleList.forEach(function(e){var t=e.name,i=n[t+"Role"];void 0!==i&&(r||(r=n.visualRoles={}),void 0===r[t]&&(r[t]=i))});var i;if(r){i={};var s=e.query(e.keys(r)).select(this.visualRole,this).array();s.sort(function(e,t){return e.index-t.index}),s.forEach(function(n){var s,o,u=n.name,a=r[u];if(e.object.is(a)){e.nullyTo(a.isReversed,!1)&&n.setIsReversed(!0),o=a.from;if(o&&o!==u){var f=this.visualRoles[o]||e.fail.operationInvalid("Source role '{0}' is not supported by the chart type.",[o]);n.setSourceRole(f),t.push(n)}else s=a.dimensions}else s=a;if(void 0!==s){s||this._assertUnboundRoleIsOptional(n);var l=Mt.data.GroupingSpec.parse(s);n.preBind(l),l.dimensions().each(function(t){e.hasOwn(i,t.name)?delete i[t.name]:i[t.name]=n})}},this)}this._sourcedRoles=t,this._dimsBoundToSingleRole=i},_bindVisualRolesPreII:function(){var t=this._dimsBoundToSingleRole;t&&(delete this._dimsBoundToSingleRole,e.eachOwn(t,this._setRoleBoundDimensionDefaults,this));var n=this._sourcedRoles;delete this._sourcedRoles,e.query(this.visualRoleList).where(function(e){return e.defaultSourceRoleName&&!e.sourceRole&&!e.isPreBound()}).each(function(e){var t=this.visualRoles[e.defaultSourceRoleName];t&&(e.setSourceRole(t,!0),n.push(e))},this),n.forEach(function(e){var t=e.sourceRole;t.isReversed&&e.setIsReversed(!e.isReversed),!e.defaultDimensionName&&t.isPreBound()&&e.preBind(t.preBoundGrouping())})},_setRoleBoundDimensionDefaults:function(e,t){this._complexTypeProj.setDimDefaults(t,e.dimensionDefaults)},_bindVisualRolesPostI:function(){function t(t,n){e.array.lazy(h,t).push(n)}function n(e){return c.hasDim(e)}function r(n,r){e.array.is(r)?r.forEach(function(e){t(e,n)}):t(r,n),n.setSourceRole(null),n.preBind(Mt.data.GroupingSpec.parse(r))}function i(e,t){t.length&&(e.requireSingleDimension?r(e,t[0]):r(e,t))}function s(e,t){c.setDim(t,{isHidden:!0}),r(e,t)}function o(e){l._assertUnboundRoleIsOptional(e),e.bind(null),e.setSourceRole(null)}function u(e){e.preBoundGrouping().dimensionNames().forEach(t)}function a(t){if(!t.sourceRole||t.isDefaultSourceRole){var u=t.defaultDimensionName;if(u){var a=u.match(/^(.*?)(\*)?$/)||e.fail.argumentInvalid("defaultDimensionName"),f=a[1],l=a[2];if(l){var h=c.groupDimensionsNames(f);if(h){i(t,h);return}}else if(n(f)){r(t,f);return}t.autoCreateDimension?s(t,f):t.sourceRole?p.push(t):o(t)}else t.sourceRole?p.push(t):o(t)}else p.push(t)}function f(e){var t=e.sourceRole;t.isPreBound()?e.preBind(t.preBoundGrouping()):o(e)}var l=this,c=l._complexTypeProj,h={},p=[];e.query(l.visualRoleList).where(function(e){return e.isPreBound()}).each(u),e.query(l.visualRoleList).where(function(e){return!e.isPreBound()}).each(a),p.forEach(f),e.query(e.ownKeys(h)).where(function(e){return 1===h[e].length}).each(function(e){var t=h[e][0];l._setRoleBoundDimensionDefaults(t,e)})},_bindVisualRolesPostII:function(t){e.query(this.visualRoleList).where(function(e){return e.isPreBound()}).each(function(e){e.postBind(t)})},_logVisualRoles:function(){var t=e.ownKeys(this.visualRoles),n=Math.max(10,e.query(t).select(function(e){return e.length}).max()),r=e.string.padRight("VisualRole",n)+" < Dimension(s)",i=["VISUAL ROLES MAP SUMMARY",Mt.logSeparator,r,e.string.padRight("",n+1,"-")+"+--------------"];e.eachOwn(this.visualRoles,function(t,r){i.push(e.string.padRight(r,n)+" | "+(t.grouping||"-"))}),i.push(""),this._log(i.join("\n"))},_getDataPartDimName:function(){var e=this._dataPartRole;if(e){if(e.isBound())return e.firstDimensionName();var t=e.preBoundGrouping();return t?t.firstDimensionName():e.defaultDimensionName}}}),Mt.BaseChart.add({dataEngine:null,data:null,_partsDataCache:null,_visibleDataCache:null,resultset:[],metadata:[],_trendable:!1,_interpolatable:!1,_constructData:function(t){this.parent&&(this.dataEngine=this.data=t.data||e.fail.argumentRequired("options.data"))},_checkNoDataI:function(){if(!this.allowNoData&&!this.resultset.length)throw new NoDataException},_checkNoDataII:function(){if(!(this.allowNoData||this.data&&this.data.count()))throw this.data=null,new NoDataException},_initData:function(t){if(!this.parent){var n=this.data;n?e.get(t,"reloadData",!0)?this._onReloadData():(n.disposeChildren(),n.clearVirtuals()):this._onLoadData()}delete this._partsDataCache,delete this._visibleDataCache,Mt.debug>=3&&this._log(this.data.getInfo())},_onLoadData:function(){var t=this.data,n=this._translation;!t&&!n||e.assert("Invalid state.");var r=this.options,i=this._getDataPartDimName(),s=this._complexTypeProj||e.assert("Invalid state."),o=this._createTranslationOptions(i);n=this._translation=this._createTranslation(o),Mt.debug>=3&&(this._log(n.logSource()),this._log(n.logTranslatorType())),n.configureType(),i&&!s.isReadOrCalc(i)&&this._addDefaultDataPartCalculation(i),Mt.debug>=3&&this._log(n.logVItem()),this._bindVisualRolesPostI();var u=new Mt.data.ComplexType;s.configureComplexType(u,o),this._bindVisualRolesPostII(u),Mt.debug>=10&&this._log(u.describe()),Mt.debug>=3&&this._logVisualRoles(),t=this.dataEngine=this.data=new Mt.data.Data({type:u,labelSep:r.groupedLabelSep,keySep:o.separator});var a={where:this._getLoadFilter(),isNull:this._getIsNullDatum()},f=n.execute(t);t.load(f,a)},_onReloadData:function(){var t=this.data,n=this._translation;t&&n||e.assert("Invalid state."),this.options,n.setSource(this.resultset),Mt.debug>=3&&this._log(n.logSource());var r={where:this._getLoadFilter(),isNull:this._getIsNullDatum()},i=n.execute(t);t.load(i,r)},_createComplexTypeProject:function(){var e=this.options,t=new Mt.data.ComplexTypeProject(e.dimensionGroups),n=e.dimensions;for(var r in n)t.setDim(r,n[r]);var i=this._getDataPartDimName();i&&(t.setDim(i),this._addPlot2SeriesDataPartCalculation(t,i));var s=e.calculations;return s&&s.forEach(function(e){t.setCalc(e)}),t},_getLoadFilter:function(){},_getIsNullDatum:function(){var e=this.measureDimensionsNames(),t=e.length;return t?function(n){for(var r=n.atoms,i=0;t>i;i++)if(null!=r[e[i]].value)return!1;return!0}:void 0},_createTranslation:function(e){var t=this._getTranslationClass(e);return new t(this,this._complexTypeProj,this.resultset,this.metadata,e)},_getTranslationClass:function(e){return e.crosstabMode?Mt.data.CrosstabTranslationOper:Mt.data.RelationalTranslationOper},_createTranslationOptions:function(t){var n=this.options,r=n.dataOptions||{},i=n.dataSeparator;void 0===i&&(i=r.separator),i||(i="~");var s=n.dataMeasuresInColumns;void 0===s&&(s=r.measuresInColumns);var o=n.dataCategoriesCount;void 0===o&&(o=r.categoriesCount);var u=n.dataIgnoreMetadataLabels;void 0===u&&(u=r.ignoreMetadataLabels);var a,f=n.plot2,l=n.valueFormat;l&&l!==this.defaults.valueFormat&&(a=function(e){return null!=e?l(e):""});var c,h;if(f){if(this._allowV1SecondAxis&&this.compatVersion()<=1)h=n.secondAxisIdx;else{c=null!=this._serRole&&n.plot2Series&&e.array.as(n.plot2Series);if(!c||!c.length)c=null,h=n.plot2SeriesIndexes}c||(h=Mt.parseDistinctIndexArray(h,-1/0)||-1)}return{compatVersion:this.compatVersion(),plot2DataSeriesIndexes:h,seriesInRows:n.seriesInRows,crosstabMode:n.crosstabMode,isMultiValued:n.isMultiValued,dataPartDimName:t,dimensionGroups:n.dimensionGroups,dimensions:n.dimensions,readers:n.readers,measuresIndexes:n.measuresIndexes,multiChartIndexes:n.multiChartIndexes,separator:i,measuresInColumns:s,categoriesCount:o,measuresIndex:r.measuresIndex||r.measuresIdx,measuresCount:r.measuresCount||r.numMeasures,isCategoryTimeSeries:n.timeSeries,timeSeriesFormat:n.timeSeriesFormat,valueNumberFormatter:a,ignoreMetadataLabels:u}},_addPlot2SeriesDataPartCalculation:function(t,n){if(!(this.compatVersion()<=1)){var r=this.options,i=this._serRole,s=null!=i&&r.plot2&&r.plot2Series&&e.array.as(r.plot2Series);if(s&&s.length){var o,u,a,f,l=!1,c=e.query(s).uniqueIndex();t.setCalc({names:n,calculation:function(t,r){l||(i.isBound()&&(o=i.grouping.dimensionNames(),u=t.owner.dimensions(n)),l=!0);if(u){var s=Mt.data.Complex.compositeKey(t,o);r[n]=e.hasOwnProp.call(c,s)?f||(f=u.intern("1")):a||(a=u.intern("0"))}}})}}},_addDefaultDataPartCalculation:function(e){var t,n;this._complexTypeProj.setCalc({names:e,calculation:function(r,i){t||(t=r.owner.dimensions(e)),i[e]=n||(n=t.intern("0"))}})},partData:function(t,n){n||(n=this.data);if(null==t)return n;if(this.parent)return this.root.partData(t,n);var r=this._dataPartRole;if(!r||!r.isBound())return n;var i="\0"+n.id+":"+e.nullyTo(t,""),s=e.lazy(this,"_partsDataCache"),o=s[i];return o||(o=this._createPartData(n,r,t),s[i]=o),o},_createPartData:function(t,n,r){var i=n.firstDimensionName(),s=t.dimensions(i).getDistinctAtoms(e.array.to(r)),o=ut([e.set({},i,s)]);return t.where(null,{where:o})},visibleData:function(t,n){var r=e.get(n,"baseData")||this.data;if(this.parent)return n=n?Object.create(n):{},n.baseData=r,this.root.visibleData(t,n);var i=!!e.get(n,"inverted",!1),s=!!this.options.ignoreNulls||!!e.get(n,"ignoreNulls",!0),o="\0"+r.id+"|"+i+"|"+s+"|"+(null!=t?t:null),u=e.lazy(this,"_visibleDataCache"),a=u[o];if(!a){var f=this.partData(t,r);n=n?Object.create(n):{},n.visible=!0,n.isNull=s?!1:null,a=u[o]=this._createVisibleData(f,n)}return a},_createVisibleData:function(e,t){var n=this._serRole;return n&&n.isBound()?n.flatten(e,t):e.where(null,t)},_initMultiCharts:function(){var t=this;t.multiOptions=new Mt.visual.MultiChart(t),t.smallOptions=new Mt.visual.SmallChart(t);var n,r,i,s,o=t.multiOptions.option,u=t.visualRoles.multiChart.flatten(t.data,{visible:!0,isNull:null}),a=u.childNodes;t._isMultiChartOverflowClipRetry?(r=t._clippedMultiChartRowsMax,n=t._clippedMultiChartColsMax,s=n,i=r*n):i=o("Max");var f=Math.min(a.length,i);0===f?n=r=s=0:t._isMultiChartOverflowClipRetry||(s=o("ColumnsMax"),n=Math.min(f,s),n>=1&&isFinite(n)||e.assert("Must be at least 1 and finite"),r=Math.ceil(f/n),r>=1||e.assert("Must be at least 1")),t._multiInfo={data:u,smallDatas:a,count:f,rowCount:r,colCount:n,colsMax:s}},_interpolate:function(t){if(this._interpolatable){var n=e.query(this.axesList).selectMany(e.propGet("dataCells")).where(function(e){var t=e.nullInterpolationMode;return!!t&&"none"!==t}).distinct(function(e){return e.role.name+"|"+(e.dataPartValue||"")}).array();this._eachLeafDatasAndDataCells(t,n,this._interpolateDataCell,this)}},_generateTrends:function(t){var n=this._getDataPartDimName();if(this._trendable&&n){var r=e.query(this.axesList).selectMany(e.propGet("dataCells")).where(e.propGet("trend")).distinct(function(e){return e.role.name+"|"+(e.dataPartValue||"")}).array(),i=[];this._eachLeafDatasAndDataCells(t,r,function(e,t){this._generateTrendsDataCell(i,e,t)},this),i.length&&this.data.owner.add(i)}},_eachLeafDatasAndDataCells:function(e,t,n,r){var i=t.length;if(i){var s,o;e?(s=this._multiInfo.smallDatas,o=this._multiInfo.count):(s=[this.data],o=1);for(var u=0;o>u;u++)for(var a=s[u],f=0;i>f;f++)n.call(r,t[f],a,f,u)}},_interpolateDataCell:function(){},_generateTrendsDataCell:function(){},_getTrendDataPartAtom:function(){var e=this._getDataPartDimName();return e?this.data.owner.dimensions(e).intern("trend"):void 0},setData:function(e,t){return this.setResultset(e&&e.resultset),this.setMetadata(e&&e.metadata),$.extend(this.options,t),this},setResultset:function(t){return!this.parent||e.fail.operationInvalid("Can only set resultset on root chart."),this.resultset=t||[],this.resultset.length||this._warn("Resultset is empty"),this},setMetadata:function(t){return!this.parent||e.fail.operationInvalid("Can only set metadata on root chart."),this.metadata=t||[],this.metadata.length||this._warn("Metadata is empty"),this}}),Mt.BaseChart.add({_initPlots:function(e){this.plotPanelList=null;if(this.parent){var t=this.root;this.plots=t.plots,this.plotList=t.plotList,this.plotsByType=t.plotsByType}else this.plots={},this.plotList=[],this.plotsByType={},this._initPlotsCore(e)},_initPlotsCore:function(){},_addPlot:function(t){var n=this.plotsByType,r=this.plots,i=t.type,s=t.index,o=t.name,u=t.id;if(o&&e.hasOwn(r,o))throw e.error.operationInvalid("Plot name '{0}' already taken.",[o]);if(e.hasOwn(r,u))throw e.error.operationInvalid("Plot id '{0}' already taken.",[u]);var a=e.array.lazy(n,i);if(e.hasOwn(a,s))throw e.error.operationInvalid("Plot index '{0}' of type '{1}' already taken.",[s,i]);t.globalIndex=this.plotList.length,a[s]=t,this.plotList.push(t),r[u]=t,o&&(r[o]=t)},_collectPlotAxesDataCells:function(t,n){var r=[];t.collectDataCells(r),r.length&&e.query(r).where(function(e){return e.role.isBound()}).each(function(t){var r=e.array.lazy(n,t.axisType);e.array.lazy(r,t.axisIndex).push(t)})},_addPlotPanel:function(t){e.lazy(this,"plotPanels")[t.plot.id]=t,e.array.lazy(this,"plotPanelList").push(t)},_createPlotPanels:function(){throw e.error.notImplemented()}}),Mt.BaseChart.add({colors:null,axes:null,axesList:null,axesByType:null,_axisClassByType:{color:Mt.visual.ColorAxis,size:Mt.visual.SizeAxis,base:Qt,ortho:Qt},_axisCreateChartLevel:{color:1,size:2,base:3,ortho:3},_axisSetScaleChartLevel:{color:1,size:2,base:2,ortho:2},_axisCreationOrder:["color","size","base","ortho"],_axisCreateIfUnbound:{},_chartLevel:function(){var e=0;return this.parent||(e|=1),(this.parent||!this.visualRoles.multiChart.isBound())&&(e|=2),e},_initAxes:function(){this.axes={},this.axesList=[],this.axesByType={},delete this._rolesColorScale;var t;this.parent?t=this.root._dataCellsByAxisTypeThenIndex:(t={},this.plotList.forEach(function(e){this._collectPlotAxesDataCells(e,t)},this),this._dataCellsByAxisTypeThenIndex=t);var n=this._chartLevel();this._axisCreationOrder.forEach(function(e){if(0!==(this._axisCreateChartLevel[e]&n)){var r,i=t[e];i?(r=this._axisClassByType[e],r&&i.forEach(function(t,n){new r(this,e,n)},this)):this._axisCreateIfUnbound[e]&&(r=this._axisClassByType[e],r&&new r(this,e,0))}},this),this.parent&&this.root.axesList.forEach(function(t){e.hasOwn(this.axes,t.id)||this._addAxis(t)},this),e.eachOwn(t,function(e,t){this._axisCreateChartLevel[t]&n&&e.forEach(function(e,n){var r=this.axes[Mt.buildIndexedId(t,n)];r.isBound()||r.bind(e)},this)},this)},_addAxis:function(t){this.axes[t.id]=t,t.chart===this&&(t.axisIndex=this.axesList.length),this.axesList.push(t);var n=e.array.lazy(this.axesByType,t.type),r=n.count||0;return t.typeIndex=r,n[t.index]=t,r||(n.first=t),n.count=r+1,"color"===t.type&&t.isBound()&&this._onColorAxisScaleSet(t),this},_getAxis:function(e,t){var n=this.axesByType[e];return n&&null!=t&&+t>=0?n[t]:void 0},_setAxesScales:function(e){this.axesList.forEach(function(t){this._axisSetScaleChartLevel[t.type]&e&&t.isBound()&&this._setAxisScale(t,e)},this)},_setAxisScale:function(e,t){this._setAxisScaleByScaleType(e,t)},_setAxisScaleByScaleType:function(t,n){switch(t.scaleType){case"discrete":this._setDiscreteAxisScale(t,n);break;case"numeric":this._setNumericAxisScale(t,n);break;case"timeSeries":this._setTimeSeriesAxisScale(t,n);break;default:throw e.error("Unknown axis scale type.")}},_describeScale:function(t,n){n.isNull&&Mt.debug>=3&&this._log(e.format("{0} scale for axis '{1}'- no data",[t.scaleType,t.id]))},_setDiscreteAxisScale:function(e){if("color"!==e.type){var n=e.domainValues(),r=new t.Scale.ordinal;n.length?r.domain(n):r.isNull=!0,this._describeScale(e,r),e.setScale(r)}else this._setDiscreteColorAxisScale(e)},_setTimeSeriesAxisScale:function(e){var n=this._getContinuousVisibleExtentConstrained(e),r=new t.Scale.linear;if(n){var i=n.min,s=n.max,o=1,u=function(){var e=s-i;e&&Math.abs(e)<o&&(s=i=new Date(Math.round((i+s)/2)),e=0),e?0>e&&(!n.maxLocked||n.minLocked?s=new Date(i.getTime()+Mt.time.intervals.h):i=new Date(s.getTime()-Mt.time.intervals.h)):(n.minLocked||(i=new Date(i.getTime()-Mt.time.intervals.h)),(!n.maxLocked||n.minLocked)&&(s=new Date(s.getTime()+Mt.time.intervals.h)))};u(),r.domain(i,s),r.minLocked=n.minLocked,r.maxLocked=n.maxLocked}else r.isNull=!0;this._describeScale(e,r),e.setScale(r)},_setNumericAxisScale:function(e){if("color"!==e.type){var n=this._getContinuousVisibleExtentConstrained(e),r=new t.Scale.linear;if(n){var i=n.min,s=n.max,o=1e-10,u=function(){var e=s-i;e&&Math.abs(e)<=o&&(i=(i+s)/2,i=s=+i.toFixed(10),e=0),e?0>e&&(!n.maxLocked||n.minLocked?s=Math.abs(i)>o?1.01*i:.1:i=Math.abs(s)>o?.99*s:-0.1):(n.minLocked||(i=Math.abs(i)>o?.99*i:-0.1),(!n.maxLocked||n.minLocked)&&(s=Math.abs(s)>o?1.01*s:.1))};u();var a=e.option.isDefined("OriginIsZero")&&e.option("OriginIsZero");a&&(0===i?n.minLocked=!0:0===s?n.maxLocked=!0:i*s>0&&(i>0?n.minLocked||(n.minLocked=!0,i=0):n.maxLocked||(n.maxLocked=!0,s=0),u())),r.domain(i,s),r.minLocked=n.minLocked,r.maxLocked=n.maxLocked}else r.isNull=!0;this._describeScale(e,r),e.setScale(r)}else this._setNumericColorAxisScale(e)},_warnSingleContinuousValueRole:function(t){t.grouping.isSingleDimension||this._warn("A linear scale can only be obtained for a single dimension role."),t.grouping.isDiscrete()&&this._warn(e.format("The single dimension of role '{0}' should be continuous.",[t.name]))},_getContinuousVisibleExtentConstrained:function(e,t,n){var r,i=function(){return r||(r=this.data.owner.dimensions(e.role.grouping.firstDimensionName()))},s=!1,o=!1;null==t&&e.option.isDefined("FixedMin")&&(t=e.option("FixedMin"),null!=t&&(t=i.call(this).read(t)),s=null!=t,s&&(t=t.value,0>t&&e.scaleUsesAbs()&&(t=-t))),null==n&&e.option.isDefined("FixedMax")&&(n=e.option("FixedMax"),null!=n&&(n=i.call(this).read(n)),o=null!=n,o&&(n=n.value,0>n&&e.scaleUsesAbs()&&(n=-n)));if(null==t||null==n){var u=this._getContinuousVisibleExtent(e);if(!u)return null;null==t&&(t=u.min),null==n&&(n=u.max)}return{min:t,max:n,minLocked:s,maxLocked:o}},_getContinuousVisibleExtent:function(t){var n=t.dataCells;return 1===n.length?this._getContinuousVisibleCellExtent(t,n[0]):e.query(n).select(function(e){return this._getContinuousVisibleCellExtent(t,e)},this).reduce(Mt.unionExtents,null)},_getContinuousVisibleCellExtent:function(t,n){var r=n.role;this._warnSingleContinuousValueRole(r);if("series"===r.name)throw e.error.notImplemented();var i=t.scaleSumNormalized(),s=this.visibleData(n.dataPartValue),o=r.firstDimensionName();if(i){var u=s.dimensionsSumAbs(o);if(u)return{min:0,max:u}}else{var a=t.scaleUsesAbs(),f=s.dimensions(o).extent({abs:a});if(f){var l=f.min.value,c=f.max.value;return{min:a?Math.abs(l):l,max:a?Math.abs(c):c}}}},_setDiscreteColorAxisScale:function(e){var t=e.domainValues(),n=e.scheme()(t);this._describeScale(e,n),e.setScale(n,!0),this._onColorAxisScaleSet(e)},_setNumericColorAxisScale:function(t){if(1!==t.dataCells.length)throw e.error("Can't handle multiple continuous datacells in color axis.");this._warnSingleContinuousValueRole(t.role);var n=this.visibleData(t.dataCell.dataPartValue),r=t.option("NormByCategory"),i={type:t.option("ScaleType"),colors:t.option("Colors")().range(),colorDomain:t.option("Domain"),colorMin:t.option("Min"),colorMax:t.option("Max"),colorMissing:t.option("Missing"),data:n,colorDimension:t.role.firstDimensionName(),normPerBaseCategory:r};if(r)t.scalesByCateg=u(i);else{var s=a(i);this._describeScale(t,s),t.setScale(s)}this._onColorAxisScaleSet(t)},_onColorAxisScaleSet:function(e){switch(e.index){case 0:this.colors=e.scheme();break;case 1:this._allowV1SecondAxis&&(this.secondAxisColor=e.scheme())}},_getRoleColorScale:function(t){return e.lazy(e.lazy(this,"_rolesColorScale"),t,this._createRoleColorScale,this)},_createRoleColorScale:function(t){function n(t){var n=""+t;e.hasOwnProp.call(s,n)||(s[n]=i(t))}var r,i,s={};return this.axesByType.color.forEach(function(e){var s=e.role,o=s.name===t||s.sourceRole&&s.sourceRole.name===t;o&&e.scale&&(0===e.index||e.option.isSpecified("Colors")||e.option.isSpecified("Map"))&&(i=e.scale,r||(r=i),e.domainValues().forEach(n))},this),r?(i=function(t){var n=""+t;if(e.hasOwnProp.call(s,n))return s[n];var i=r(t);return s[n]=i,i},e.copy(i,r),i):Mt.createColorScheme()()},_onLaidOut:function(){}}),Mt.BaseChart.add({basePanel:null,titlePanel:null,legendPanel:null,_multiChartPanel:null,_initChartPanels:function(e){this._initBasePanel(),this._initTitlePanel();var t=this._initLegendPanel(),n=e&&!this.parent;n&&this._initMultiChartPanel(),t&&this._initLegendScenes(t);if(!n){var r=this.options;this._createContent({margins:e?r.smallContentMargins:r.contentMargins,paddings:e?r.smallContentPaddings:r.contentPaddings,clickAction:r.clickAction,doubleClickAction:r.doubleClickAction})}},_createContent:function(){},_initBasePanel:function(){var e=this.parent;this.basePanel=new Mt.BasePanel(this,e&&e._multiChartPanel,{margins:this.margins,paddings:this.paddings,size:{width:this.width,height:this.height}})},_initTitlePanel:function(){var t=this,n=t.options,r=n.title;e.empty(r)||(!t.parent,this.titlePanel=new Mt.TitlePanel(t,t.basePanel,{title:r,font:n.titleFont,anchor:n.titlePosition,align:n.titleAlign,alignTo:n.titleAlignTo,offset:n.titleOffset,keepInBounds:n.titleKeepInBounds,margins:n.titleMargins,paddings:n.titlePaddings,titleSize:n.titleSize,titleSizeMax:n.titleSizeMax}))},_initLegendPanel:function(){var t=this.options;if(t.legend){var n=new Mt.visual.Legend(this,"legend",0);return this.legendPanel=new Mt.LegendPanel(this,this.basePanel,{anchor:n.option("Position"),align:n.option("Align"),alignTo:t.legendAlignTo,offset:t.legendOffset,keepInBounds:t.legendKeepInBounds,size:n.option("Size"),sizeMax:n.option("SizeMax"),margins:n.option("Margins"),paddings:n.option("Paddings"),font:n.option("Font"),scenes:e.getPath(t,"legend.scenes"),textMargin:t.legendTextMargin,itemPadding:t.legendItemPadding,itemSize:n.option("ItemSize"),markerSize:t.legendMarkerSize})}},_getLegendBulletRootScene:function(){return this.legendPanel&&this.legendPanel._getBulletRootScene()},_initMultiChartPanel:function(){var e=this.basePanel,t=this.options;this._multiChartPanel=new Mt.MultiChartPanel(this,e,{margins:t.contentMargins,paddings:t.contentPaddings}),this._multiChartPanel.createSmallCharts(),e._children.unshift(e._children.pop())},_coordinateSmallChartsLayout:function(){},_initLegendScenes:function(t){var n=this.axesByType.color;if(n){var r,i,s,o=0,u=this,a=function(e,t){if("togglevisible"===e.option("LegendClickMode")){void 0===r&&(r=u._getTrendDataPartAtom()||null,r&&(i=r.dimension.name));if(r&&t.firstAtoms()[i]===r)return"none"}},f=function(){return s||(rootScene=t._getBulletRootScene())};e.query(n).where(function(e){return e.option("LegendVisible")&&e.isBound()&&e.isDiscrete()}).each(function(e){for(var t=e.scale,n=-1,r=e.dataCells,i=r.length;++n<i;){var s=r[n],u=e.domainCellData(n),l=f().createGroup({source:u,colorAxis:e,clickMode:a(e,u),extensionPrefix:Mt.buildIndexedId("",o++)});s.legendGroupScene(l),e.domainCellItems(u).forEach(function(n){var r=l.createItem({source:n}),i=e.domainItemValue(n);r.color=t(i)})}})}}}),Mt.BaseChart.add({_updateSelectionSuspendCount:0,_lastSelectedDatums:null,clearSelections:function(){return this.data.owner.clearSelected()&&this.updateSelections(),this},_updatingSelections:function(e,t){this._suspendSelectionUpdate();try{e.call(t||this)}finally{this._resumeSelectionUpdate()}},_suspendSelectionUpdate:function(){this===this.root?this._updateSelectionSuspendCount++:this.root._suspendSelectionUpdate()},_resumeSelectionUpdate:function(){this===this.root?this._updateSelectionSuspendCount>0&&(--this._updateSelectionSuspendCount||this.updateSelections()):this.root._resumeSelectionUpdate()},updateSelections:function(t){if(this===this.root){if(this._inUpdateSelections||this._updateSelectionSuspendCount)return this;var n=this._calcSelectedChangedDatums();if(!n)return this;Mt.removeTipsyLegends(),this._inUpdateSelections=!0;try{var r=this.options.selectionChangedAction;if(r){var i=this.data.selectedDatums(),s=n.values();r.call(this.basePanel.context(),i,s)}e.get(t,"render",!0)&&this.useTextMeasureCache(function(){this.basePanel.renderInteractive()},this)}finally{this._inUpdateSelections=!1}}else this.root.updateSelections();return this},_calcSelectedChangedDatums:function(){if(this.data){var e,t=this.data.selectedDatumMap(),n=this._lastSelectedDatums;if(n){e=n.symmetricDifference(t);if(!e.count)return}else{if(!t.count)return;e=t.clone()}return this._lastSelectedDatums=t,e}},_onUserSelection:function(e){if(!e||!e.length)return e;if(this===this.root){var t=this.options.userSelectionAction;return t?t.call(this.basePanel.context(),e)||e:e}return this.root._onUserSelection(e)}}),Mt.BaseChart.add({_processExtensionPoints:function(){var t;if(this.parent)t=this.parent._components;else{var n=this.options.extensionPoints;t={};if(n)for(var r in n){var i,s,o=r.indexOf("_");if(o>0){i=r.substring(0,o),s=r.substr(o+1);if(i&&s){var u=e.getOwn(t,i)||(t[i]=new e.OrderedMap);u.add(s,n[r])}}}}this._components=t},extend:function(t,n,r){e.array.is(n)?n.forEach(function(e){this._extendCore(t,e,r)},this):this._extendCore(t,n,r)},_extendCore:function(t,n,r){if(t){var i=e.getOwn(this._components,n);if(i){t.borderPanel&&(t=t.borderPanel);var s=Mt.debug>=3?[]:null,o=e.get(r,"constOnly",!1),u=t.wrap,a={tag:Mt.extensionTag},f=t instanceof _t,l=f&&(u||o),c=function(n,r){if(null!=n){var i=typeof n;if("object"===i){if("svg"===r||"css"===r){var s=t.propertyValue(r);s&&(n=e.copy(s,n))}else if(n instanceof Array)return n.map(function(e){return c(e,r)})}else if(l&&"function"===i){if(o)return;"add"!==r&&"call"!==r&&(n=u.call(t,n,r))}}return n},h=function(e,n){n instanceof Array?e.apply(t,n):e.call(t,n)};i.forEach(function(e,n){if(t.isLocked&&t.isLocked(n))s&&s.push(n+": locked extension point!");else if(t.isIntercepted&&t.isIntercepted(n))s&&s.push(n+":"+Mt.stringify(e)+" (controlled)");else{s&&s.push(n+": "+Mt.stringify(e)),e=c(e,n);if(void 0!==e){var r=t[n];"function"==typeof r?f&&t.properties[n]?t.intercept(n,e,a):e instanceof Array?e.forEach(function(e){h(r,e)}):h(r,e):t[n]=e}}}),s&&(s.length?this._log("Applying Extension Points for: '"+n+"'\n	* "+s.join("\n	* ")):Mt.debug>=5&&this._log("No Extension Points for: '"+n+"'"))}}else Mt.debug>=4&&this._log("Applying Extension Points for: '"+n+"' (target mark does not exist)")},_getExtension:function(t,n){var r;if(e.array.is(t))for(var i,s=t.length-1;s>=0;){r=e.getOwn(this._components,t[s--]);if(r&&void 0!==(i=r.get(n)))return i}else{r=e.getOwn(this._components,t);if(r)return r.get(n)}},_getComponentExtensions:function(t){return e.getOwn(this._components,t)},_getConstantExtension:function(t,n){var r=this._getExtension(t,n);return e.fun.is(r)?void 0:r}}),e.type("pvc.BasePanel",Mt.Abstract).add(Mt.visual.Interactive).init(function(t,n,r){this.chart=t,this.base(),this.axes=Object.create(t.axes);if(r){r.scenes&&(this._sceneTypeExtensions=r.scenes,delete r.scenes);var i=r.axes;i&&(e.copy(this.axes,i),delete r.axes)}$.extend(this,r),this.axes.color||(this.axes.color=t.axes.color),this.position={};var s=r&&r.margins;n||void 0!==s||(s=3),this.margins=new Ht(s),this.paddings=new Ht(r&&r.paddings),this.size=new Ft(r&&r.size),this.sizeMax=new Ft(r&&r.sizeMax),n?(this.parent=n,this.isTopRoot=!1,this.isRoot=n.chart!==t,this.root=this.isRoot?this:n.root,this.topRoot=n.topRoot,this._ibits=n._ibits,this.isRoot&&(this.position.left=t.left,this.position.top=t.top),n._addChild(this)):(this.parent=null,this.root=this,this.topRoot=this,this.isRoot=!0,this.isTopRoot=!0,this._ibits=t._ibits),this.data=(this.isRoot?t:n).data;if(this.isRoot)this.anchor=null,this.align=null,this.alignTo=null,this.offset=null;else{this.align=Mt.parseAlign(this.anchor,this.align);var o=this.alignTo,u=this.anchor;null==o||""===o||"left"!==u&&"right"!==u?o=this.align:"page-middle"!==o&&(o=isNaN(+o.charAt(0))?Mt.parseAlign(u,o):Bt.parse(o)),this.alignTo=o,this.offset=new It(this.offset)}if(null==this.borderWidth){var a,f=this._getExtensionId();if(f){var l=this._getExtension(f,"strokeStyle");null!=l&&(a=+this._getConstantExtension(f,"lineWidth"),(isNaN(a)||!isFinite(a))&&(a=null))}this.borderWidth=null==a?0:1.5}var c=Mt.visual.Interactive,h=this._ibits;h=e.bit.set(h,c.Clickable,t._ibits&c.Clickable&&!!this.clickAction),h=e.bit.set(h,c.DoubleClickable,t._ibits&c.DoubleClickable&&!!this.doubleClickAction),this._ibits=h}).add({chart:null,parent:null,_children:null,type:t.Panel,_extensionPrefix:"",_rubberSelectableMarks:null,height:null,width:null,borderWidth:null,anchor:"top",pvPanel:null,margins:null,paddings:null,isRoot:!1,isTopRoot:!1,root:null,topRoot:null,_layoutInfo:null,_signs:null,data:null,dataPartValue:null,_animating:0,_selectingByRubberband:!1,_v1DimRoleName:{series:"series",category:"category",value:"value"},_sceneTypeExtensions:null,clickAction:null,doubleClickAction:null,compatVersion:function(e){return this.chart.compatVersion(e)},_createLogInstanceId:function(){return""+this.constructor+this.chart._createLogChildSuffix()},_getLegendBulletRootScene:function(){return this.chart._getLegendBulletRootScene()},_addChild:function(t){t.parent===this||e.assert("Child has a != parent."),(this._children||(this._children=[])).push(t)},_addSign:function(t){e.array.lazy(this,"_signs").push(t),t.selectableByRubberband()&&e.array.lazy(this,"_rubberSelectableMarks").push(t.pvMark)},visibleData:function(e){return this.chart.visibleData(this.dataPartValue,e)},partData:function(){return this.chart.partData(this.dataPartValue)},layout:function(t,n){if(!this._layoutInfo||e.get(n,"force",!1)){var r=e.get(n,"referenceSize");!r&&t&&(r=e.copyOwn(t));var i=this.size.resolve(r),s=this.sizeMax.resolve(r);if(!t){if(null==i.width||null==i.height)throw e.error.operationInvalid("Panel layout without width or height set.");t=e.copyOwn(i)}!r&&t&&(r=e.copyOwn(t)),null!=s.width&&t.width>s.width&&(t.width=s.width),null!=s.height&&t.height>s.height&&(t.height=s.height);var o=this.borderWidth/2,u=(e.get(n,"margins")||this.margins).resolve(r),a=(e.get(n,"paddings")||this.paddings).resolve(r),f=Ht.inflate(u,o),l=Ht.inflate(a,o),c=f.width+l.width,h=f.height+l.height,p=new Ft(Math.max(t.width-c,0),Math.max(t.height-h,0)),d=e.copyOwn(i);null!=d.width&&(d.width=Math.max(d.width-c,0)),null!=d.height&&(d.height=Math.max(d.height-h,0));var v=this._layoutInfo||null,m=e.get(n,"canChange",!0),g=this._layoutInfo={canChange:m,referenceSize:r,realMargins:u,realPaddings:a,borderWidth:this.borderWidth,margins:f,paddings:l,desiredClientSize:d,clientSize:p,pageClientSize:v?v.pageClientSize:p.clone(),previous:v};v&&(delete v.previous,delete v.pageClientSize);var y,b=this._calcLayout(g);b?(g.clientSize=b,y={width:b.width+c,height:b.height+h}):(y=t,b=p),this.isVisible=b.width>0&&b.height>0,delete g.desiredClientSize,this.width=y.width,this.height=y.height,!m&&v&&delete g.previous,Mt.debug>=5&&(this._log("Size       = "+Mt.stringify(y)),this._log("Margins    = "+Mt.stringify(g.margins)),this._log("Paddings   = "+Mt.stringify(g.paddings)),this._log("ClientSize = "+Mt.stringify(g.clientSize))),this._onLaidOut()}},_onLaidOut:function(){this.isRoot&&this.chart._onLaidOut()},_calcLayout:function(t){function n(e,t,n){for(var r=0;e--;){if(t.call(n,e,r)===!1)return!0;r++}return!1}function r(t,n){h&&p._group("LayoutCycle #"+(n+1)+" (remaining: "+t+")");try{var r=t>0;l=new Ht(0),c=e.copyOwn(f);for(var s,o=0,u=b.length;u>o;){s=b[o],h&&p._group("SIDE Child #"+(o+1)+" at "+s.anchor);try{if(i.call(this,s,r))return!0}finally{h&&p._groupEnd()}o++}o=0,u=y.length;for(;u>o;){s=y[o],h&&p._group("FILL Child #"+(o+1));try{if(i.call(this,s,r))return!0}finally{h&&p._groupEnd()}o++}return!1}finally{h&&p._groupEnd()}}function i(e,t){var r,i=!1;return w.canChange=t,n(3,function(n,f){h&&p._group("Attempt #"+(f+1));try{w.paddings=r,w.canChange=n>0,e.layout(new Ft(c),w);if(e.isVisible){i=o.call(this,e,t);if(i)return!1;var l=e._layoutInfo.requestPaddings;if(s(r,l)){r=l;if(n>0)return r=new Ht(r),h&&this._log("Child requested paddings change: "+Mt.stringify(r)),!0;Mt.debug>=2&&this._warn("Child requests paddings change but iterations limit has been reached.")}u.call(this,e),"fill"!==e.anchor&&a.call(this,e)}return!1}finally{h&&p._groupEnd()}},this),i}function s(t,n){return n?e.query(Ht.names).each(function(e){var r=t&&t[e]||0,i=n&&n[e]||0;return Math.abs(i-r)>=.1?!1:void 0}):!1}function o(e,t){var n=!1,r=e.width-c.width;r>0&&(Mt.debug>=3&&this._log("Child added width = "+r),t?(n=!0,c.width+=r,f.width+=r):Mt.debug>=2&&this._warn("Child wanted more width, but layout iterations limit has been reached."));var i=e.height-c.height;return i>0&&(Mt.debug>=3&&this._log("Child added height ="+i),t?(n=!0,c.height+=i,f.height+=i):Mt.debug>=2&&this._warn("Child wanted more height, but layout iterations limit has been reached.")),n}function u(n){var r,i=n.anchor,s=n.align,o=n.alignTo;"fill"===i?(i="left",r=l.left+c.width/2-n.width/2,s=o="middle"):r=l[i];var u,a;switch(s){case"top":case"bottom":case"left":case"right":u=s,a=0;break;case"center":case"middle":u=m[v[i]],a=-n[d[u]]/2}var f,h;switch(o){case"top":case"bottom":case"left":case"right":h=o,f=h!==u?c[d[u]]:0;break;case"center":case"middle":h=m[v[i]],f=c[d[u]]/2;break;case"page-center":case"page-middle":h=m[v[i]];var p=d[u],y=Math.min(c[p],t.pageClientSize[p]);f=y/2}var b=l[h]+f+a,w=n.offset.resolve(c);w&&(r+=w[g[i]]||0,b+=w[g[u]]||0),n.keepInBounds&&(0>r&&(r=0),0>b&&(b=0)),n.setPosition(e.set({},i,r,u,b))}function a(e){var t=e.anchor,n=d[t],r=e[n];l[t]+=r,c[n]-=r}var f,l,c,h,p=this;if(p._children){var d=Mt.BasePanel.orthogonalLength,v=Mt.BasePanel.relativeAnchor,m=Mt.BasePanel.leftTopAnchor,g=It.namesSidesToOffset,y=[],b=[];p._children.forEach(function(t){var n=t.anchor;n&&("fill"===n?y.push(t):(e.hasOwn(v,n)||e.fail.operationInvalid("Unknown anchor value '{0}'",[n]),b.push(t)))}),h=Mt.debug>=5,f=e.copyOwn(t.clientSize);var w={force:!0,referenceSize:f};h&&p._group("CCC DOCK LAYOUT clientSize = "+Mt.stringify(f));try{n(5,r,p)}finally{h&&p._groupEnd()}}return f},invalidateLayout:function(){this._layoutInfo=null,this._children&&this._children.forEach(function(e){e.invalidateLayout()})},_create:function(n){if(!this.pvPanel||n){var r;delete this._invalidDataError,this.pvPanel=null,this.pvRootPanel&&(this.pvRootPanel=null),delete this._signs;try{this.layout()}catch(i){if(!(i instanceof InvalidDataException))throw i;this._invalidDataError=r=i}if(this.isTopRoot&&this.chart._isMultiChartOverflowClip)return;if(!this.isVisible)return;this.isRoot&&this._creating();var s=this._layoutInfo.margins,o=this._layoutInfo.paddings;if(this.isTopRoot){this.pvRootPanel=this.pvPanel=(new t.Panel).canvas(this.chart.options.canvas);var u=new Mt.visual.Scene(null,{panel:this});this.pvRootPanel.lock("data",[u]);if(s.width>0||s.height>0)this.pvPanel.width(this.width).height(this.height),this.pvPanel=this.pvPanel.add(t.Panel)}else this.pvPanel=this.parent.pvPanel.add(this.type);var a=this.pvPanel,f=this.width-s.width,l=this.height-s.height;a.width(f).height(l),Mt.debug>=15&&(s.width>0||s.height>0)&&(this.isTopRoot?this.pvRootPanel:this.parent.pvPanel).add(this.type).width(this.width).height(this.height).left(null!=this.position.left?this.position.left:null).right(null!=this.position.right?this.position.right:null).top(null!=this.position.top?this.position.top:null).bottom(null!=this.position.bottom?this.position.bottom:null).strokeStyle("orange").lineWidth(1).strokeDasharray("- .");var c={};e.eachOwn(this.position,function(e,t){a[t](e+s[t]),c[this.anchorLength(t)]=!0},this),c.width||(s.left>0&&a.left(s.left),s.right>0&&a.right(s.right)),c.height||(s.top>0&&a.top(s.top),s.bottom>0&&a.bottom(s.bottom)),(o.width>0||o.height>0)&&(this.pvPanel=a.add(t.Panel).width(f-o.width).height(l-o.height).left(o.left).top(o.top)),a.borderPanel=a,a.paddingPanel=this.pvPanel,this.pvPanel.paddingPanel=this.pvPanel,this.pvPanel.borderPanel=a,Mt.debug>=15&&(this.pvPanel.strokeStyle("lightgreen").lineWidth(1).strokeDasharray("- "),this.pvPanel!==a&&a.strokeStyle("blue").lineWidth(1).strokeDasharray(". "));var h=this._getExtensionId();new Mt.visual.Panel(this,null,{panel:a,extensionId:h});if(!r)try{this._createCore(this._layoutInfo)}catch(i){if(!(i instanceof InvalidDataException))throw i;this._invalidDataError=r=i}if(r){var p=a.anchor("center").add(t.Label).text(r.message);this.chart.extend(p,"invalidDataMessage")}this.isTopRoot&&(this.chart._multiChartOverflowClipped&&this._addMultichartOverflowClipMarker(),this._initSelection()),this.applyExtensions();if(this.isRoot&&Mt.debug>5){var d=["SCALES SUMMARY",Mt.logSeparator];this.chart.axesList.forEach(function(e){var t=e.scale;if(t){var n=t.domain&&t.domain(),r=t.range&&t.range();d.push(e.id),d.push("    domain: "+(n?Mt.stringify(n):"?")),d.push("    range : "+(r?Mt.stringify(r):"?"))}},this),this._log(d.join("\n"))}}},_creating:function(){this._children&&this._children.forEach(function(e){e._creating()})},_createCore:function(){this._children&&this._children.forEach(function(e){e._create()})},render:function(t){if(!this.isTopRoot)return this.topRoot.render(t);this._create(e.get(t,"recreate",!1));if((!this.isTopRoot||!this.chart._isMultiChartOverflowClip)&&this.isVisible){var n=this.pvRootPanel;if(this._invalidDataError)n.render();else{this._onRender();var r=(this.chart.options,this._animating),i=this.chart.animatable();this._animating=i&&!e.get(t,"bypassAnimation",!1)?1:0;try{n.render();if(this._animating){this._animating=2;var s=this;n.transition().duration(2e3).ease("cubic-in-out").start(function(){r?r=0:(s._animating=0,s._onRenderEnd(!0))})}else this._onRenderEnd(!1)}finally{this._animating=0}}}},_onRender:function(){var e=this.chart.options.renderCallback;if(e)if(this.compatVersion()<=1)e.call(this.chart);else{var t=this.context();e.call(t,t.scene)}},_onRenderEnd:function(e){this._children&&this._children.forEach(function(t){t._onRenderEnd(e)})},renderInteractive:function(){if(this.isVisible){var e=this._getSelectableMarks();if(e&&e.length)e.forEach(function(e){e.render()});else if(!this._children){this.pvPanel.render();return}this._children&&this._children.forEach(function(e){e.renderInteractive()})}},_getSelectableMarks:function(){return this._rubberSelectableMarks},animate:function(e,t){return 1===this.topRoot._animating?e:t},animatingStart:function(){return 1===this.topRoot._animating},animating:function(){return this.topRoot._animating>0},setPosition:function(t){for(var n in t)if(e.hasOwn(Ht.namesSet,n)){var r=t[n];null===r?delete this.position[n]:(r=+r,!isNaN(r)&&isFinite(r)&&(this.position[n]=r))}},createAnchoredSize:function(e,t){return this.isAnchorTopOrBottom()?new Ft(t.width,Math.min(t.height,e)):new Ft(Math.min(t.width,e),t.height)},applyExtensions:function(){this._signs&&this._signs.forEach(function(e){e.applyExtensions()})},extend:function(e,t,n){this.chart.extend(e,this._makeExtensionAbsId(t),n)},extendAbs:function(e,t,n){this.chart.extend(e,t,n)},_extendSceneType:function(t,n,r){var i=e.get(this._sceneTypeExtensions,t);i&&Mt.extendType(n,i,r)},_absBaseExtId:{abs:"base"},_absSmallBaseExtId:{abs:"smallBase"},_getExtensionId:function(){return this.isRoot?this.chart.parent?this._absSmallBaseExtId:this._absBaseExtId:void 0},_getExtensionPrefix:function(){return this._extensionPrefix},_makeExtensionAbsId:function(e){return Mt.makeExtensionAbsId(e,this._getExtensionPrefix())},_getExtension:function(e,t){return this.chart._getExtension(this._makeExtensionAbsId(e),t)},_getExtensionAbs:function(e,t){return this.chart._getExtension(e,t)},_getConstantExtension:function(e,t){return this.chart._getConstantExtension(this._makeExtensionAbsId(e),t)},getPvPanel:function(n){var r=this.pvPanel;if(!n)return r;if(!this.parent)throw e.error.operationInvalid("Layers are not possible in a root panel.");if(!r)throw e.error.operationInvalid("Cannot access layer panels without having created the main panel.");var i=null;this._layers?i=this._layers[n]:this._layers={};if(!i){var s=this.parent.pvPanel;i=s.borderPanel.add(this.type).extend(r.borderPanel);var o=i;r!==r.borderPanel&&(i=o.add(t.Panel).extend(r)),o.borderPanel=o,o.paddingPanel=i,i.paddingPanel=i,i.borderPanel=o,this.initLayerPanel(i,n),this._layers[n]=i}return i},initLayerPanel:function(){},_getV1DimName:function(e){var t=this._v1DimName||(this._v1DimNameCache={}),n=t[e];if(null==n){var r=this.chart.visualRoles[this._v1DimRoleName[e]];n=r?r.firstDimensionName():"",t[e]=n}return n},_getV1Datum:function(e){return e.datum},context:function(){var e=this._context;return!e||e.isPinned?e=this._context=new Mt.visual.Context(this):dt.call(e),e},_isTooltipEnabled:function(){return!this.selectingByRubberband()&&!this.animating()},_getTooltipFormatter:function(e){var t=this.compatVersion()<=1,n=e.format;if(!n){if(!t)return this._summaryTooltipFormatter;n=this.chart.options.v1StyleTooltipFormat;if(!n)return}return t?function(e){return n.call(e.panel,e.getV1Series(),e.getV1Category(),e.getV1Value()||"",e.getV1Datum())}:function(e){return n.call(e,e.scene)}},_summaryTooltipFormatter:function(t){function n(t,n){l.push("<b>"+t+"</b>: "+(e.html.escape(n)||" - ")+"<br/>")}function r(e,t){var n;return n=s?s.dimensions(t).valuePercent(f):a.dimensions(t).percent(e.value,f),p(n)}var i=t.scene;if(!i.datum)return"";var s=i.group,o=s&&s.count()>1,u=i.datum;if(!o&&(!u||u.isNull))return"";var a=i.data(),f={visible:!0},l=[];u.isInterpolated?l.push("<i>Interpolation</i>: "+e.html.escape(u.interpolation)+"<br/>"):u.isTrend&&l.push("<i>"+e.html.escape(u.trend.label)+"</i><br/>");var c=a.type,h=t.panel.stacked===!1?null:c.getPlayingPercentVisualRoleDimensionMap(),p=h?t.chart.options.percentValueFormat:null,d=o?s.atoms:i.datum.atoms,v=c.sortDimensionNames(e.keys(d)),m=!1;return v.forEach(function(t){var i=d[t],s=i.dimension.type;if(!(s.isHidden||o&&null==i.value)){m=!0;var u=i.label;h&&h.has(t)&&(u+=" ("+r(i,t)+")"),n(e.html.escape(i.dimension.type.label),u)}}),o&&(m&&l.push("<hr />"),l.push("<b>#</b>: "+s._datums.length+"<br/>"),c.sortDimensionNames(s.freeDimensionsNames()).forEach(function(t){var i=s.dimensions(t);if(!i.type.isHidden){var o,u=e.html.escape(i.type.label);i.type.valueType===Number?(o=i.format(i.value(f)),h&&h.has(t)&&(o+=" ("+r(null,t)+")"),u="&sum; "+u):o=i.atoms(f).map(function(e){return e.label||"- "}).join(", "),n(u,o)}})),'<div style="text-align: left;">'+l.join("\n")+"</div>"},_onClick:function(e){var t=this.clickAction;t&&(this.compatVersion()<=1?this._onV1Click(e,t):t.call(e,e.scene))},_onDoubleClick:function(e){var t=this.doubleClickAction;t&&(this.compatVersion()<=1?this._onV1DoubleClick(e,t):t.call(e,e.scene))},_onV1Click:function(e,t){t.call(e.pvMark,e.getV1Series(),e.getV1Category(),e.getV1Value(),e.event,e.getV1Datum())},_onV1DoubleClick:function(e,t){t.call(e.pvMark,e.getV1Series(),e.getV1Category(),e.getV1Value(),e.event,e.getV1Datum())},_addMultichartOverflowClipMarker:function(){function t(e){var t=e.shapeRadius();if(null==t){var n=e.shapeSize();null!=n&&(t=Math.sqrt(n))}return t||r}var n=10,r=5,i=(new Mt.visual.Dot(this,this.pvPanel,{noSelect:!0,noHover:!0,noClick:!0,noDoubleClick:!0,noTooltip:!1,freePosition:!0,extensionId:"multiChartOverflowMarker"})).lock("data").pvMark.shape("triangle").shapeRadius(r).top(null).left(null).bottom(function(){return t(this)+n}).right(function(){return t(this)+n}).shapeAngle(0).lineWidth(1.5).strokeStyle("red").fillStyle("rgba(255, 0, 0, 0.2)");e.fun.is(i.tooltip)&&i.tooltip("Some charts did not fit the available space.")},selectingByRubberband:function(){return this.topRoot._selectingByRubberband},_initSelection:function(){var n=this,r=n.chart;if(n.interactive()){var i=n.unselectable(),s=n.selectableByRubberband();if(s||i){var o=n.data,u=n.pvRootPanel||n.pvPanel.paddingPanel;n._getExtensionAbs("base","fillStyle")||u.fillStyle(Mt.invisibleFill),u.lock("events","all");if(s){var a=4;n._selectingByRubberband=!1;var f,l,c,h=this.selectBar=(new Mt.visual.Bar(n,u,{extensionId:"rubberBand",normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0})).override("defaultStrokeWidth",e.fun.constant(1.5)).override("defaultColor",function(e,t){return"stroke"===t?"#86fe00":"rgba(203, 239, 163, 0.6)"}).override("interactiveColor",function(e,t){return t}).pvMark.lock("visible",function(){return!!l}).lock("left",function(){return l.x}).lock("right").lock("top",function(){return l.y}).lock("bottom").lock("width",function(){return l.dx}).lock("height",function(){return l.dy}).lock("cursor").lock("events","none");u.intercept("data",function(){var e=this.delegate();return e&&e.forEach(function(e){null==e.x&&(e.x=e.y=e.dx=e.dy=0)}),e}).event("mousedown",t.Behavior.select().autoRender(!1)).event("select",function(e){if(l)l=new t.Shape.Rect(e.x,e.y,e.dx,e.dy);else{if(n.animating())return;if(e.dx*e.dx+e.dy*e.dy<=a)return;l=new t.Shape.Rect(e.x,e.y,e.dx,e.dy),n._selectingByRubberband=!0,f||(f=u.toScreenTransform()),n.rubberBand=l.apply(f)}h.render()}).event("selectend",function(){if(l){var e=arguments[arguments.length-1];f||(f=u.toScreenTransform());var t=l.apply(f);l=null,n._selectingByRubberband=!1,h.render();try{n._processRubberBand(t,e)}finally{c=new Date}}}),i&&u.event("click",function(){if(c){var e=new Date-c;if(300>e){c=null;return}}o.clearSelected()&&r.updateSelections()})}else i&&u.event("click",function(){o.clearSelected()&&r.updateSelections()})}}},_processRubberBand:function(e,t,n){this.rubberBand=e;try{this._onRubberBandSelectionEnd(t,n)}finally{this.rubberBand=null}},_onRubberBandSelectionEnd:function(e,t){Mt.debug>=20&&this._log("rubberBand "+Mt.stringify(this.rubberBand)),t=Object.create(t||{}),t.toggle=!1;var n=this._getDatumsOnRubberBand(e,t);if(n){var r=this.chart;r._updatingSelections(function(){var i=!e.ctrlKey&&r.options.ctrlSelectMode;i?(r.data.owner.clearSelected(),Mt.data.Data.setSelected(n,!0)):t.toggle?Mt.data.Data.toggleSelected(n):Mt.data.Data.setSelected(n,!0)})}},_getDatumsOnRubberBand:function(t,n){var r=new e.Map;this._getDatumsOnRect(r,this.rubberBand,n);var i=r.values();return i.length&&(i=this.chart._onUserSelection(i),i&&!i.length&&(i=null)),i},_getDatumsOnRect:function(e,t,n){this._getOwnDatumsOnRect(e,t,n);var r=this._children;r&&r.forEach(function(r){r._getDatumsOnRect(e,t,n)})},_getOwnDatumsOnRect:function(t,n,r){var i=this;if(!i.isVisible)return!1;var s=i._getSelectableMarks();if(!s||!s.length)return!1;var o=t.count,u=e.get(r,"markSelectionMode"),a=function(e){e.isNull||t.set(e.id,e)},f=function(e){e.selectableByRubberband()&&e.datums().each(a)},l=function(e){e.eachSceneWithDataOnRect(n,f,null,u)};return s.forEach(l),o<t.count},isAnchorTopOrBottom:function(e){return e||(e=this.anchor),"top"===e||"bottom"===e},isOrientationVertical:function(e){return this.chart.isOrientationVertical(e)},isOrientationHorizontal:function(e){return this.chart.isOrientationHorizontal(e)}}).addStatic({relativeAnchor:{top:"left",bottom:"left",left:"bottom",right:"bottom"},leftBottomAnchor:{top:"bottom",bottom:"bottom",left:"left",right:"left"},leftTopAnchor:{top:"top",bottom:"top",left:"left",right:"left"},horizontalAlign:{top:"right",bottom:"left",middle:"center",right:"right",left:"left",center:"center"},verticalAlign:{top:"top",bottom:"bottom",middle:"middle",right:"bottom",left:"top",center:"middle"},verticalAlign2:{top:"top",bottom:"bottom",middle:"middle",right:"top",left:"bottom",center:"middle"},relativeAnchorMirror:{top:"right",bottom:"right",left:"top",right:"top"},oppositeAnchor:{top:"bottom",bottom:"top",left:"right",right:"left"},parallelLength:{top:"width",bottom:"width",right:"height",left:"height"},orthogonalLength:{top:"height",bottom:"height",right:"width",left:"width"},oppositeLength:{width:"height",height:"width"}}),e.scope(function(){var t=Mt.BasePanel,n={},r={anchorOrtho:"relativeAnchor",anchorOrthoMirror:"relativeAnchorMirror",anchorOpposite:"oppositeAnchor",anchorLength:"parallelLength",anchorOrthoLength:"orthogonalLength"};e.eachOwn(r,function(e,r){var i=t[e];n[r]=function(e){return i[e||this.anchor]}}),t.add(n)}),e.type("pvc.PlotPanel",Mt.BasePanel).init(function(e,t,n,r){this.base(e,t,r),this.plot=n,this._extensionPrefix=n.extensionPrefixes,this.dataPartValue=n.option("DataPart"),this.axes.color=e._getAxis("color",(n.option("ColorAxis")||0)-1),this.orientation=n.option("Orientation"),this.valuesVisible=n.option("ValuesVisible"),this.valuesAnchor=n.option("ValuesAnchor"),this.valuesMask=n.option("ValuesMask"),this.valuesFont=n.option("ValuesFont"),this.valuesOverflow=n.option("ValuesOverflow"),this.valuesOptimizeLegibility=n.option("ValuesOptimizeLegibility");var i=this.visualRoles=Object.create(e.visualRoles),s=n.option("ColorRole");i.color=s?e.visualRole(s):null,this.chart._addPlotPanel(this)}).add({anchor:"fill",visualRoles:null,_getExtensionId:function(){var e=["chart","plot"];return this.plotName&&e.push(this.plotName),e},defaultLegendGroupScene:function(){var t=this.axes.color;return t&&t.option("LegendVisible")&&t.isBound()?e.query(t.dataCells).where(function(e){return e.plot===this.plot},this).select(function(e){return e.legendGroupScene()}).first(e.notNully):void 0},isOrientationVertical:function(){return this.orientation===Mt.orientation.vertical},isOrientationHorizontal:function(){return this.orientation===Mt.orientation.horizontal}}),e.type("pvc.MultiChartPanel",Mt.BasePanel).add({anchor:"fill",createSmallCharts:function(){var t,n=this.chart,r=n._multiInfo;if(r&&(t=r.count)){var i,s,o,u=this._getCoordinatedRootAxesByScopeType();u&&(i={},s=function(t,n,r){var s=e.array.lazy(i,n);e.array.lazy(s,r).push(t)},o=function(e){u.row&&s(e,"row",e.smallRowIndex),u.column&&s(e,"column",e.smallColIndex),u.global&&s(e,"global",0)});for(var a=this._buildSmallChartsBaseOptions(),f=n.constructor,l=r.smallDatas,c=r.colCount,h=0;t>h;h++){var p=l[h],d=h%c,v=Math.floor(h/c),m=e.set(Object.create(a),"smallColIndex",d,"smallRowIndex",v,"title",p.absLabel,"data",p),g=new f(m);u?(g._createPhase1(),o(g)):g._create()}if(u){var y=this;e.eachOwn(u,function(e,t){e.forEach(function(e){i[t].forEach(function(t){y._coordinateScopeAxes(e.id,t)})})}),n.children.forEach(function(e){e._createPhase2()})}r.coordScopesByType=i}},_getCoordinatedRootAxesByScopeType:function(){var t=!1,n=e.query(this.chart.axesList).multipleIndex(function(e){if("discrete"!==e.scaleType&&e.option.isDefined("DomainScope")){var n=e.option("DomainScope");if("cell"!==n)return t=!0,n}});return t?n:null},_coordinateScopeAxes:function(t,n){var r=e.query(n).select(function(e){var n=e.axes[t].scale;if(!n.isNull){var r=n.domain();return{min:r[0],max:r[1]}}}).reduce(Mt.unionExtents,null);r&&n.forEach(function(e){var n=e.axes[t],i=n.scale;i.isNull||(i.domain(r.min,r.max),n.setScale(i))})},_buildSmallChartsBaseOptions:function(){var t=this.chart,n=t.options;return e.set(Object.create(n),"parent",t,"legend",!1,"titleFont",n.smallTitleFont,"titlePosition",n.smallTitlePosition,"titleAlign",n.smallTitleAlign,"titleAlignTo",n.smallTitleAlignTo,"titleOffset",n.smallTitleOffset,"titleKeepInBounds",n.smallTitleKeepInBounds,"titleMargins",n.smallTitleMargins,"titlePaddings",n.smallTitlePaddings,"titleSize",n.smallTitleSize,"titleSizeMax",n.smallTitleSizeMax)},_calcLayout:function(t){var n=this.chart,r=n._multiInfo;if(r){var i=n.multiOptions.option,s=n.smallOptions.option,o=t.clientSize,u=t.previous,a=u?u.initialClientWidth:o.width,f=u?u.initialClientHeight:o.height,l=s("Width");null!=l&&(l=Bt.resolve(l,a));var c=s("Height");null!=c&&(c=Bt.resolve(c,f));var h=s("AspectRatio"),p=r.rowCount,d=r.colCount;null==l&&(isFinite(r.colsMax)?l=o.width/d:(null==c&&(c=f),l=h*c)),null==c&&(c=1===p&&i("SingleRowFillsHeight")||1===d&&i("SingleColFillsHeight")?f:l/h);var v=l*d,m=c*p;if(!n._isMultiChartOverflowClipRetry){n._isMultiChartOverflowClip=!1;switch(i("Overflow")){case"fit":v>a&&(v=a,l=v/d),m>f&&(m=f,c=m/p);break;case"clip":var g=d,y=p,b=v>a;b&&(g=Math.floor(a/l));var w=m>f;w&&(y=Math.floor(f/c));if(w||b)n._isMultiChartOverflowClip=!0,n._clippedMultiChartRowsMax=y,n._clippedMultiChartColsMax=g}}return e.set(t,"initialClientWidth",a,"initialClientHeight",f,"width",l,"height",c),{width:v,height:Math.max(o.height,m)}}},_getExtensionId:function(){return"content"},_createCore:function(t){var n=this.chart;!n._isMultiChartOverflowClip||e.assert("Overflow&clip condition should be resolved.");var r=n._multiInfo;if(r){var i=n.smallOptions.option,s=i("Margins"),o=i("Paddings");n.children.forEach(function(e){e._setSmallLayout({left:e.smallColIndex*t.width,top:e.smallRowIndex*t.height,width:t.width,height:t.height,margins:this._buildSmallMargins(e,s,r),paddings:o})},this);var u=r.coordScopesByType;u&&n._coordinateSmallChartsLayout(u),this.base(t)}},_buildSmallMargins:function(e,t,n){var r=n.colCount-1,i=n.rowCount-1,s=e.smallColIndex,o=e.smallRowIndex,u={};return s>0&&(u.left=t.left),r>s&&(u.right=t.right),o>0&&(u.top=t.top),i>o&&(u.bottom=t.bottom),u}}),e.type("pvc.TitlePanelAbstract",Mt.BasePanel).init(function(e,t,n){n||(n={});var r=n.anchor||this.anchor;if(null==n.size){var i=n.titleSize;null!=i&&(n.size=(new Ft).setSize(i,{singleProp:this.anchorOrthoLength(r)}))}if(null==n.sizeMax){var s=n.titleSizeMax;null!=s&&(n.sizeMax=(new Ft).setSize(s,{singleProp:this.anchorOrthoLength(r)}))}null==n.paddings&&(n.paddings=this.defaultPaddings),this.base(e,t,n);if(void 0===n.font){var o=this._getExtension("label","font");"string"==typeof o&&(this.font=o)}}).add({pvLabel:null,anchor:"top",title:null,titleSize:void 0,font:"12px sans-serif",defaultPaddings:2,_extensionPrefix:"title",_calcLayout:function(e){var n=new Ft,r=this.anchor,i=this.anchorLength(r),s=this.anchorOrthoLength(r),o=t.Text.measureWidth(this.title,this.font)+2,u=e.clientSize[i],a=e.desiredClientSize[i];null==a?a=o>u?u:o:a>u&&(a=u);var f;f=o>a?Mt.text.justify(this.title,a,this.font):this.title?[this.title]:[];var l=t.Text.fontHeight(this.font),c=f.length*l,h=e.clientSize[s],p=e.desiredClientSize[s];null==p?p=c:p>h&&(p=h);if(c>p){var d=Math.max(1,Math.floor(p/l));if(f.length>d){var v=f[d];f.length=d,c=p=d*l;var m=f[d-1]+" "+v;f[d-1]=Mt.text.trimToWidthB(a,m,this.font,"..")}}return e.lines=f,e.topOffset=(p-c)/2,e.lineSize={width:a,height:l},e.a_width=i,e.a_height=s,n[i]=a,n[s]=p,n},_createCore:function(e){var t,n=this._buildScene(e),r={top:0,right:Math.PI/2,bottom:0,left:-Math.PI/2},i=Mt.BasePanel.horizontalAlign[this.align],s=Mt.BasePanel.leftTopAnchor[this.anchor];this.compatVersion()<=1&&(t=function(e){return function(){return e.call(this)}}),this.pvLabel=(new Mt.visual.Label(this,this.pvPanel,{extensionId:"label",wrapper:t})).lock("data",n.lineScenes).pvMark[s](function(t){return e.topOffset+t.vars.size.height/2+this.index*t.vars.size.height}).textAlign(i)[this.anchorOrtho(s)](function(e){switch(this.textAlign()){case"center":return e.vars.size.width/2;case"left":return 0;case"right":return e.vars.size.width}}).text(function(e){return e.vars.textLines[this.index]}).font(this.font).textBaseline("middle").textAngle(r[this.anchor])},_buildScene:function(t){var n=new Mt.visual.Scene(null,{panel:this,source:this.chart.data}),r=t.lines;return n.vars.size=t.lineSize,n.vars.textLines=r,n.lineScenes=e.array.create(r.length,n),n},_getExtensionId:e.fun.constant("")}),e.type("pvc.TitlePanel",Mt.TitlePanelAbstract).init(function(e,t,n){n||(n={});var r=e.compatVersion()<=1;if(r){var i=n.titleSize;null==i&&(n.titleSize=25)}this._extensionPrefix=e.parent?"smallTitle":"title",this.base(e,t,n)}).add({font:"14px sans-serif",defaultPaddings:4}),e.type("pvc.LegendPanel",Mt.BasePanel).init(function(e,t,n){this.base(e,t,n);if(void 0===n.font){var r=this._getConstantExtension("label","font");r&&(this.font=r)}var i=Mt.visual.Interactive;this._ibits&i.Interactive&&(this._ibits|=i.Clickable)}).add({pvRule:null,pvDot:null,pvLabel:null,anchor:"bottom",pvLegendPanel:null,textMargin:6,itemPadding:2.5,itemSize:null,markerSize:15,font:"10px sans-serif",_calcLayout:function(e){return this._getBulletRootScene().layout(e)},_createCore:function(e){var n=e.clientSize,r=this._getBulletRootScene(),i=r.vars.itemPadding,s=r.vars.contentSize,o=this.isAnchorTopOrBottom(),u=o?"top":"left",a=this.anchorOpposite(u),f=this.anchorLength(u),l=this.anchorOrthoLength(u),c=o?"center":"middle",h=o?"left":"top",p=this.anchorOpposite(h),d=0;switch(this.align){case p:d=n[f]-s[f];break;case c:d=(n[f]-s[f])/2}this.pvPanel.borderPanel.overflow("hidden");var v,m=this.pvPanel.add(t.Panel).data(r.vars.sections)[h](d)[u](function(){var e=this.sibling();return e?e[u]+e[l]+i[l]:0})[f](function(e){return e.size[f]})[l](function(e){return e.size[l]});this.compatVersion()<=1&&(v=function(e){return function(t){return e.call(this,t.vars.value.rawValue)}});var g=this.pvLegendPanel=(new Mt.visual.Panel(this,m,{extensionId:"panel",wrapper:v,noSelect:!1,noHover:!0,noClick:!1,noClickSelect:!0})).pvMark.lock("data",function(e){return e.items})[p](null)[a](null)[h](function(e){var t=e.vars.itemPadding,n=this.sibling();return n?n[h]+n[f]+t[f]:0})[u](o?function(e){var t=e.vars;return t.section.size.height/2-t.itemClientSize.height/2}:0).height(function(e){return e.vars.itemClientSize.height}).width(o?function(e){return e.vars.itemClientSize.width}:function(){return this.parent.width()}).def("hidden","false").fillStyle(function(){return"true"==this.hidden()?"rgba(200,200,200,1)":"rgba(200,200,200,0.0001)"}),y=(new Mt.visual.Panel(this,g,{extensionId:"markerPanel"})).pvMark.left(0).top(0).right(null).bottom(null).width(function(e){return e.vars.markerSize}).height(function(e){return e.vars.itemClientSize.height});Mt.debug>=20&&(m.strokeStyle("red").lineWidth(.5).strokeDasharray("."),g.strokeStyle("green").lineWidth(.5).strokeDasharray("."),y.strokeStyle("blue").lineWidth(.5).strokeDasharray(".")),r.childNodes.forEach(function(e){var t=(new Mt.visual.Panel(this,y)).pvMark.visible(function(t){return t.parent===e});e.renderer().create(this,t,e.extensionPrefix,v)},this),this.pvLabel=(new Mt.visual.Label(this,y.anchor("right"),{extensionId:"label",noTooltip:!1,noClick:!1,wrapper:v})).intercept("textStyle",function(e){var t=this.delegateExtension()||"black";return e.isOn()?t:Mt.toGrayScale(t,null,void 0,150)}).pvMark.textAlign("left").text(function(e){var t=e.labelText(),n=e.vars;return n.textSize.width>n.labelWidthMax&&(t=Mt.text.trimToWidthB(n.labelWidthMax,t,n.font,"..",!1)),t}).textMargin(function(e){return e.vars.textMargin}).font(function(e){return e.vars.font}).textDecoration(function(e){return e.isOn()?"":"line-through"}),Mt.debug>=16&&y.anchor("right").add(t.Panel)[this.anchorLength()](0)[this.anchorOrthoLength()](0).fillStyle(null).strokeStyle(null).lineWidth(0).add(t.Line).data(function(e){var t=e.vars,n=Mt.text.getLabelBBox(Math.min(t.labelWidthMax,t.textSize.width),2*t.textSize.height/3,"left","middle",0,t.textMargin),r=n.source.points();return r.length>1&&(r=r.concat(r[0])),r}).left(function(e){return e.x}).top(function(e){return e.y}).strokeStyle("red").lineWidth(.5).strokeDasharray("-")},_onClick:function(t){var n=t.scene;e.fun.is(n.execute)&&n.executable()&&n.execute()},_getExtensionPrefix:function(){return"legend"},_getExtensionId:function(){return"area"},_getSelectableMarks:function(){return[this.pvLegendPanel]},_getBulletRootScene:function(){var e=this._rootScene;return e||(e=new Mt.visual.legend.BulletRootScene(null,{panel:this,source:this.chart.data,horizontal:this.isAnchorTopOrBottom(),font:this.font,markerSize:this.markerSize,textMargin:this.textMargin,itemPadding:this.itemPadding,itemSize:this.itemSize}),this._rootScene=e),e},_getTooltipFormatter:function(e){return e.isLazy=!1,function(e){var t=e.scene.vars.value,n=t.absLabel||t.label,r=e.pvMark.text();return n!==r?n:""}}}),e.type("pvc.CartesianAbstract",Mt.BaseChart).init(function(e){this.axesPanels={},this.base(e)}).add({_gridDockPanel:null,axesPanels:null,yAxisPanel:null,xAxisPanel:null,secondXAxisPanel:null,secondYAxisPanel:null,yScale:null,xScale:null,_getSeriesRoleSpec:function(){return{isRequired:!0,defaultDimension:"series*",autoCreateDimension:!0,requireIsDiscrete:!0}},_getColorRoleSpec:function(){return{isRequired:!0,defaultDimension:"color*",defaultSourceRole:"series",requireIsDiscrete:!0}},_addAxis:function(e){this.base(e);switch(e.type){case"base":case"ortho":this.axes[e.orientedId]=e,e.v1SecondOrientedId&&(this.axes[e.v1SecondOrientedId]=e)}return this},_setAxisScale:function(e,t){this.base(e,t);var n="ortho"===e.type,r=n||"base"===e.type;r&&(n&&1===e.index?this.secondScale=e.scale:e.index||(this[e.orientation+"Scale"]=e.scale))},_createContent:function(t){this._createFocusWindow(),this._gridDockPanel=new Mt.CartesianGridDockingPanel(this,this.basePanel,{margins:t.margins,paddings:t.paddings}),["base","ortho"].forEach(function(t){var n=this.axesByType[t];n&&e.query(n).reverse().each(function(e){this._createAxisPanel(e)},this)},this),this._createPlotPanels(this._gridDockPanel,{clickAction:t.clickAction,doubleClickAction:t.doubleClickAction})},_createFocusWindow:function(){if(this.selectableByFocusWindow()){var e,t=this.focusWindow;t&&(e=t._exportData()),t=this.focusWindow=new Mt.visual.CartesianFocusWindow(this),e&&t._importData(e),t._initFromOptions()}else this.focusWindow&&delete this.focusWindow},_createAxisPanel:function(t){if(t.option("Visible")){var n,r=t.option("Title");e.empty(r)||(n=new Mt.AxisTitlePanel(this,this._gridDockPanel,t,{title:r,font:t.option("TitleFont")||t.option("Font"),anchor:t.option("Position"),align:t.option("TitleAlign"),margins:t.option("TitleMargins"),paddings:t.option("TitlePaddings"),titleSize:t.option("TitleSize"),titleSizeMax:t.option("TitleSizeMax")}));var i=new Mt.AxisPanel(this,this._gridDockPanel,t,{anchor:t.option("Position"),size:t.option("Size"),sizeMax:t.option("SizeMax"),clickAction:t.option("ClickAction"),doubleClickAction:t.option("DoubleClickAction"),useCompositeAxis:t.option("Composite"),font:t.option("Font"),labelSpacingMin:t.option("LabelSpacingMin"),grid:t.option("Grid"),gridCrossesMargin:t.option("GridCrossesMargin"),ruleCrossesMargin:t.option("RuleCrossesMargin"),zeroLine:t.option("ZeroLine"),desiredTickCount:t.option("DesiredTickCount"),showTicks:t.option("Ticks"),showMinorTicks:t.option("MinorTicks")});return n&&(i.titlePanel=n),this.axesPanels[t.id]=i,this.axesPanels[t.orientedId]=i,t.index<=1&&t.v1SecondOrientedId&&(this[t.v1SecondOrientedId+"AxisPanel"]=i),i}},_onLaidOut:function(){this.plotPanelList&&this.plotPanelList[0]&&["base","ortho"].forEach(function(e){var t=this.axesByType[e];t&&t.forEach(this._setCartAxisScaleRange,this)},this)},_setCartAxisScaleRange:function(e){var t=this.plotPanelList[0]._layoutInfo,n=t.clientSize,r="x"===e.orientation?n.width:n.height;return e.setScaleRange(r),e.scale},_getAxesRoundingPaddings:function(){function e(e,t,r){var i=n[e];null==i||t>i?(n[e]=t,n[e+"Locked"]=r):r&&(n[e+"Locked"]=r)}function t(t){if(t){var n=t.getScaleRoundingPaddings();if(n){var r="x"===t.orientation;e(r?"left":"bottom",n.begin,n.beginLocked),e(r?"right":"top",n.end,n.endLocked)}}}var n={},r=this.axesByType;return["base","ortho"].forEach(function(e){var n=r[e];n&&n.forEach(t)}),n},markEventDefaults:{strokeStyle:"#5BCBF5",lineWidth:"0.5",textStyle:"#5BCBF5",verticalOffset:10,verticalAnchor:"bottom",horizontalAnchor:"right",forceHorizontalAnchor:!1,horizontalAnchorSwapLimit:80,font:"10px sans-serif"},markEvent:function(n,r,i){var s=this,o=s.axes.base,u=s.axes.ortho,a=o.role,f=o.scale,l=s.data.owner.dimensions(a.grouping.firstDimensionName());l.type;if(o.isDiscrete())return s._warn("Can only mark events in charts with a continuous base scale."),s;var c=$.extend({},s.markEventDefaults,i),h=l.read(n,r),p=f(h.value),d=f.range(),v=d[1];if(p<d[0]||p>v)return this._warn("Cannot mark event because it is outside the base scale's domain."),this;var m=this.plotPanelList[0].pvPanel,g=u.scale.range()[1],y=c.horizontalAnchor;if(!c.forceHorizontalAnchor){var b="right"===y,w=b?v-p:p,E=t.Text.measureWidth(h.label,c.font);E>w&&(y=b?"left":"right")}var S="top"===c.verticalAnchor?c.verticalOffset:g-c.verticalOffset,x=m.add(t.Line).data([0,g]).bottom(e.identity).left(p).lineWidth(c.lineWidth).strokeStyle(c.strokeStyle);return x.anchor(y).visible(function(){return!this.index}).top(S).add(t.Label).font(c.font).text(h.label).textStyle(c.textStyle),s},defaults:{panelSizeRatio:.9,timeSeries:!1,timeSeriesFormat:"%Y-%m-%d"}}),e.type("pvc.GridDockingPanel",Mt.BasePanel).add({anchor:"fill",_calcLayout:function(t){function n(e,r){m&&v._group("LayoutCycle "+(M?"- Disaster MODE":"#"+(r+1)));try{var i,s,a,f,l=t.canChange!==!1&&!M&&e>0,c=!1;i=0,s=N.length;for(;s>i;){m&&v._group("SIDE Child #"+(i+1));try{a=u(N[i],l);if(!M&&a){f=!1,0!==(a&A)&&(m&&v._log("SIDE Child #"+(i+1)+" changed overflow paddings"),c||(c=!0,t.requestPaddings=t.paddings)),0!==(a&L)&&(e>0?(m&&v._log("SIDE Child #"+(i+1)+" changed normal paddings"),f=!0):Mt.debug>=2&&v._warn("SIDE Child #"+(i+1)+" changed paddings but no more iterations possible."));if(0!==(a&k))return M=!0,n(0),!1;if(f)return!0}}finally{m&&v._groupEnd()}i++}if(c)return m&&v._log("Restarting due to overflowPaddings change"),!1;i=0,s=T.length;for(;s>i;){m&&v._group("FILL Child #"+(i+1));try{a=o(T[i],l);if(!M&&a){f=!1,0!==(a&L)&&(e>0?(Mt.debug>=5&&v._log("FILL Child #"+(i+1)+" increased paddings"),f=!0):Mt.debug>=2&&v._warn("FILL Child #"+(i+1)+" increased paddings but no more iterations possible."));if(0!==(a&k))return M=!0,n(0),!1;if(f)return!0}}finally{m&&v._groupEnd()}i++}return!1}finally{m&&v._groupEnd()}}function r(e,t){for(var n=0;e--;){if(t(e,n)===!1)return!0;n++}return!1}function i(t){var n=t.anchor;if(n)if("fill"===n){T.push(t);var r=t.paddings.resolve(x.referenceSize);y=Ht.resolvedMax(y,r)}else e.hasOwn(E,n)||e.fail.operationInvalid("Unknown anchor value '{0}'",[n]),N.push(t)}function s(e,t){m&&v._group("SIDE Child #"+(t+1));try{var n=0,r=e.anchor;return x.paddings=c(r,y),e.layout(new Ft(b),x),e.isVisible&&(n|=h(r,y,e),a(r,e),f(r,e)),n}finally{m&&v._groupEnd()}}function o(e,t){var n=0,r=e.anchor;return x.paddings=c(r,y),x.canChange=t,e.layout(new Ft(b),x),e.isVisible&&(n|=h(r,y,e,t),a(r,e),l(e,r)),n}function u(n,r){var i=0;if(n.isVisible){var s=n.anchor,o=S[s],u=w[s],a=b[o],f=n[u],d=new Ft(e.set({},o,a,u,f));x.paddings=c(s,y),x.canChange=r,n.layout(d,x),n.isVisible&&(i=h(s,y,n,r)|p(s,t.paddings,n,r),i||l(n,n.align))}return i}function a(t,n){var r;"fill"===t?(t="left",r=g.left+b.width/2-n.width/2):r=g[t],n.setPosition(e.set({},t,r))}function f(e,t){var n=w[e],r=t[n];g[e]+=r,b[n]-=r}function l(t,n){var r;"fill"===n&&(n="middle");var i;switch(n){case"top":case"bottom":case"left":case"right":r=n,i=g[r];break;case"middle":r="bottom",i=g.bottom+b.height/2-t.height/2;break;case"center":r="left",i=g.left+b.width/2-t.width/2}t.setPosition(e.set({},r,i))}function c(e,t){var n=new Ht;return d(e).forEach(function(e){n.set(e,t[e])}),n}function h(t,n,r,i){var s=r._layoutInfo.requestPaddings,o=0;if(s){m&&Mt.debug>=10&&(v._log("=> clientSize="+Mt.stringify(r._layoutInfo.clientSize)),v._log("<= requestPaddings="+Mt.stringify(s))),d(t).forEach(function(e){var t=n[e]||0,r=Math.floor(1e4*(s[e]||0))/1e4,u=r-t,a=Math.max(1,Math.abs(.01*t));0!==u&&Math.abs(u)>=a&&(i?(o|=L,n[e]=r,m&&v._log("Changed padding "+e+" <- "+r)):Mt.debug>=2&&v._warn("CANNOT change but child wanted to: "+e+"="+r))});if(o){var u=Ht.names.map(function(e){return(n[e]||0).toFixed(0)}).join("|");e.hasOwn(C,u)?(Mt.debug>=2&&v._warn("LOOP detected!!!!"),o|=k):C[u]=!0,n.width=n.left+n.right,n.height=n.top+n.bottom}}return o}function p(e,t,n,r){var i=n._layoutInfo.overflowPaddings||O,s=0;return m&&Mt.debug>=10&&v._log("<= overflowPaddings="+Mt.stringify(i)),d(e).forEach(function(e){if(i.hasOwnProperty(e)){var n=t[e]||0,o=Math.floor(1e4*(i[e]||0))/1e4;o-=g[e];var u=o-n,a=Math.max(1,Math.abs(.05*n));u>=a&&(r?(s|=A,t[e]=o,m&&v._log("changed overflow padding "+e+" <- "+o)):Mt.debug>=2&&v._warn("CANNOT change overflow padding but child wanted to: "+e+"="+o))}}),s&&(t.width=t.left+t.right,t.height=t.top+t.bottom),s}function d(e){switch(e){case"left":case"right":return Ht.vnames;case"top":case"bottom":return Ht.hnames;case"fill":return Ht.names}}var v=this;if(v._children){var m=Mt.debug>=5,g=new Ht(0),y=new Ht(0),b=e.copyOwn(t.clientSize),w=Mt.BasePanel.orthogonalLength,E=Mt.BasePanel.relativeAnchor,S=Mt.BasePanel.parallelLength,x={force:!0,referenceSize:t.clientSize},T=[],N=[],C={},k=1,L=2,A=4,O=new Ht,M=!1;m&&v._group("CCC GRID LAYOUT clientSize = "+Mt.stringify(b));try{this._children.forEach(i),m&&v._group("Phase 1 - Determine MARGINS and FILL SIZE from SIDE panels");try{N.forEach(s)}finally{m&&(v._groupEnd(),v._log("Final FILL margins = "+Mt.stringify(g)),v._log("Final FILL border size = "+Mt.stringify(b)))}m&&v._group("Phase 2 - Determine COMMON PADDINGS");try{r(9,n)}finally{m&&(v._groupEnd(),v._log("Final FILL clientSize = "+Mt.stringify({width:b.width-y.width,height:b.height-y.height})),v._log("Final COMMON paddings = "+Mt.stringify(y)))}t.gridMargins=new Ht(g),t.gridPaddings=new Ht(y),t.gridSize=new Ft(b)}finally{m&&v._groupEnd()}}}}),e.type("pvc.CartesianGridDockingPanel",Mt.GridDockingPanel).init(function(e,t,n){this.base(e,t,n),this._plotBgPanel=new Mt.PlotBgPanel(e,this)}).add({_getExtensionId:function(){return this.chart.parent?"smallContent":"content"},_createCore:function(t){var n=this.chart,r=n.axes,i=r.x,s=r.y;i.isBound()||(i=null),s.isBound()||(s=null),i&&i.option("Grid")&&(this.xGridRule=this._createGridRule(i)),s&&s.option("Grid")&&(this.yGridRule=this._createGridRule(s)),this.base(t),n.focusWindow&&this._createFocusWindow(t);var o;o=n.compatVersion()<=1?!!i.option("EndLine")||!!s.option("EndLine"):e.get(n.options,"plotFrameVisible",!0),o&&(this.pvFrameBar=this._createFrame(t,r)),i&&"discrete"!==i.scaleType&&i.option("ZeroLine")&&(this.xZeroLine=this._createZeroLine(i,t)),s&&"discrete"!==s.scaleType&&s.option("ZeroLine")&&(this.yZeroLine=this._createZeroLine(s,t))},_createGridRule:function(n){var r=n.scale;if(!r.isNull){var i=n.role.grouping.isDiscrete(),s=this._getAxisGridRootScene(n);if(s){var o=this._layoutInfo.gridMargins,u=this._layoutInfo.gridPaddings,a="x"===n.orientation?"left":"bottom",f=this.anchorLength(a),l=this.anchorOrtho(a),c=this.anchorOpposite(l),h=o[a]+u[a],p=o[l],d=o[c],v=s.leafs().array(),m=v.length;i&&m&&v.push(v[m-1]);var g;this.compatVersion()<=1&&(g=function(e){return function(t){return e.call(this,t.vars.tick.rawValue)}});var y=(new Mt.visual.Rule(this,this.pvPanel,{extensionId:n.extensionPrefixes.map(function(e){return e+"Grid"}),wrapper:g})).lock("data",v).lock(f,null).override("defaultColor",e.fun.constant(t.color("#f0f0f0"))).pvMark.antialias(!0)[l](p)[c](d).zOrder(-12).events("none");if(i){var b=r.range().step/2;y[a](function(e){var t=h+r(e.vars.tick.value),n=this.index===m;return t+(n?b:-b)})}else y[a](function(e){return h+r(e.vars.tick.value)});return y}}},_getAxisGridRootScene:function(e){var t=e.isDiscrete(),n=t?e.domainData():this.data,r=new Mt.visual.CartesianAxisRootScene(null,{panel:this,source:n});if(t)n.childNodes.forEach(function(e){new Mt.visual.CartesianAxisTickScene(r,{source:e,tick:e.value,tickRaw:e.rawValue,tickLabel:e.label})});else{var i=e.ticks||e.calcContinuousTicks();i.forEach(function(t){new Mt.visual.CartesianAxisTickScene(r,{tick:t,tickRaw:t,tickLabel:e.scale.tickFormat(t)})},this)}return r},_createFrame:function(e,t){if(!t.base.scale.isNull&&(!t.ortho.scale.isNull||t.ortho2&&!t.ortho2.scale.isNull)){var n=e.gridMargins,r=n.left,i=n.right,s=n.top,o=n.bottom,u=[];return this.compatVersion()<=1&&(u.push("xAxisEndLine"),u.push("yAxisEndLine")),u.push("plotFrame"),(new Mt.visual.Panel(this,this.pvPanel,{extensionId:u})).pvMark.lock("left",r).lock("right",i).lock("top",s).lock("bottom",o).lock("fillStyle",null).events("none").strokeStyle("#666666").lineWidth(1).antialias(!1).zOrder(-8)}},_createZeroLine:function(n,r){var i=n.scale;if(!i.isNull){var s=i.domain();if(s[0]*s[1]<-1e-12){var o="x"===n.orientation?"left":"bottom",u=this.anchorLength(o),a=this.anchorOrtho(o),f=this.anchorOpposite(a),l=r.gridMargins,c=r.gridPaddings,h=l[o]+c[o]+i(0),p=l[a],d=l[f],v=new Mt.visual.Scene(null,{panel:this});return(new Mt.visual.Rule(this,this.pvPanel,{extensionId:n.extensionPrefixes.map(function(e){return e+"ZeroLine"})})).lock("data",[v]).lock(u,null).lock(a,p).lock(f,d).lock(o,h).override("defaultColor",e.fun.constant(t.color("#666666"))).pvMark.events("none").lineWidth(1).antialias(!0).zOrder(-9)}}},_createFocusWindow:function(n){function r(){B[T]=0-k[g],B[N]=D+k[g]+k[E]}function i(){var e=arguments[arguments.length-1],t="end"===e.drag.phase;u._selectingByRubberband=!t,z.render(),X.render();var n=B[S],r=B[S]+B[x];if(!v){var i=_-n;n=_-r,r=i}f._updatePosition(n,r,t,!0)}function s(e,t){var n,r,i=e.m,s=i[K],o=B[Q];switch(t){case"new":n=0,r="begin";break;case"resize-begin":n=o,r="begin";break;case"move":n=o,r="begin";break;case"resize-end":n=s-B[K],r="end"}var u=e.min[K],a=e.max[K],l={type:t,target:r,point:s,length:n,length0:o,min:u,max:a,minView:0,maxView:_};f._constraintPosition(l),i[K]=l.point;switch(t){case"resize-begin":l.max=Math.min(l.max,B[K]+B[Q]);break;case"resize-end":l.min=Math.max(l.min,B[K])}e.min[K]=l.min,e.max[K]=l.max}var o=this,u=o.topRoot,a=o.chart,f=a.focusWindow.base,l=f.axis,c=l.scale;if(!c.isNull){var h=f.option("Resizable"),p=f.option("Movable"),d=l.isDiscrete(),v=a.isOrientationVertical(),m=v?"left":"top",g=v?"top":"left",y=o.anchorOrthoLength(m),b=o.anchorOpposite(m),w=o.anchorOrthoLength(g),E=o.anchorOpposite(g),S=v?"x":"y",x="d"+S,T=v?"y":"x",N="d"+T,C=n.gridMargins,k=n.gridPaddings,L={left:C.left+k.left,right:C.right+k.right,top:C.top+k.top,bottom:C.bottom+k.bottom};L.width=L.left+L.right,L.height=L.top+L.bottom;var A=n.clientSize,O=A[y],M=A[w],_=O-L[y],D=M-L[w],P=k[m],H=k[b],B=new Mt.visual.Scene(null,{panel:this}),j=d?c.range().step:0,F=j/2;B[S]=c(f.begin)-F,B[x]=j+(c(f.end)-F)-B[S],r();var I=function(e){return function(){return B[e]}},q=function(){var e=B[S];return Math.max(0,Math.min(_,e))},R=function(){var e=q(),t=B[S]+B[x];return t=Math.max(0,Math.min(_,t)),t-e},U=function(e,t){return(new Mt.visual.Bar(o,e,{extensionId:t,normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,showsInteraction:!1})).pvMark.lock("data").lock("visible").lock(m,q).lock(y,R).lock(g,I(T)).lock(w,I(N)).lock(E).lock(b).sign},z=this._plotBgPanel.pvPanel.borderPanel;z.lock("data",[B]),p&&h?z.paddingPanel.lock("events","all").lock("cursor","crosshair").event("mousedown",t.Behavior.select().autoRender(!1).collapse(v?"y":"x").positionConstraint(function(e){var t="start"===e.phase?"new":"resize-end";return s(e,t)})).event("selectstart",function(e){r(),i(e)}).event("select",i).event("selectend",i):z.paddingPanel.events("all");var W=U(z.paddingPanel,"focusWindowBg").override("defaultColor",e.fun.constant(Mt.invisibleFill)).pvMark;p?W.lock("events","all").lock("cursor","move").event("mousedown",t.Behavior.drag().autoRender(!1).collapse(v?"y":"x").positionConstraint(function(e){s(e,"move")})).event("drag",i).event("dragend",i):W.events("none");var X=(new Mt.visual.Panel(o,o.pvPanel)).pvMark.lock("data",[B]).lock("visible").lock("fillStyle",Mt.invisibleFill).lock("left",L.left).lock("right",L.right).lock("top",L.top).lock("bottom",L.bottom).lock("zOrder",10).lock("events",function(){var e=B.drag;return e&&"end"!==e.phase?"all":"none"}).lock("cursor",function(){var e=B.drag;return e&&"end"!==e.phase?"drag"===e.type||"select"===e.type&&!h?"move":v?"ew-resize":"ns-resize":null}).antialias(!1),V="rgba(20, 20, 20, 0.1)";(new Mt.visual.Bar(o,X,{extensionId:"focusWindowBaseCurtain",normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,showsInteraction:!1})).override("defaultColor",function(e,t){return"stroke"===t?null:V}).pvMark.lock("data",[B,B]).lock("visible").lock("events","none").lock(m,function(){return this.index?q()+R():-P}).lock(b,function(){return this.index?-H:null}).lock(y,function(){return this.index?null:P+q()}).lock(g,I(T)).lock(w,I(N)).lock(E);var $=U(X,"focusWindow").override("defaultColor",e.fun.constant(null)).pvMark.lock("events","none"),J=function(n){var r="left"===n||"top"===n?"begin":"end",u=o.anchorOpposite(n),a="linear-gradient(to "+u+", "+V+", #444 90%)",l=(new Mt.visual.Bar(o,$.anchor(n),{extensionId:f.id+"Grip"+e.firstUpperCase(r),normalStroke:!0,noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,showsInteraction:!1})).override("defaultColor",function(e,t){return"stroke"===t?null:a}).pvMark.lock("data").lock("visible")[g](B[T])[w](B[N]);if(h){var c="resize-"+r;l.lock("events","all")[y](5).cursor(v?"ew-resize":"ns-resize").event("mousedown",t.Behavior.resize(n).autoRender(!1).positionConstraint(function(e){s(e,c)}).preserveOrtho(!0)).event("resize",i).event("resizeend",i)}else l.events("none")[y](1);return l};J(m),J(b);var K=S,Q=x}},_getDatumsOnRect:function(t,n,r){var i,s,o=this.chart,u=o.axesPanels.x,a=o.axesPanels.y;u&&(i=new e.Map,u._getDatumsOnRect(i,n,r),i.count||(i=null)),a&&(s=new e.Map,a._getOwnDatumsOnRect(s,n,r),s.count||(s=null)),i&&s?(i.intersect(s,t),r.toggle=!0):i?t.copy(i):s?t.copy(s):o.plotPanelList.forEach(function(e){e._getDatumsOnRect(t,n,r)},this)}}),e.type("pvc.CartesianAbstractPanel",Mt.PlotPanel).init(function(e,t,n,r){function i(e){u[e.type]=e,u[e.orientedId]=e,e.v1SecondOrientedId&&(u[e.v1SecondOrientedId]=e)}function s(e,t){var n=a[e];if(null==n||t>n)f=!0,a[e]=t}function o(e){var t=e&&e.option("Offset");null!=t&&t>0&&1>t&&("x"===e.orientation?(s("left",t),s("right",t)):(s("top",t),s("bottom",t)))}this.base(e,t,n,r);var u=this.axes;i(e._getAxis("base",n.option("BaseAxis")-1)),i(e._getAxis("ortho",n.option("OrthoAxis")-1));var a={},f=!1,l=e.axesByType;["base","ortho"].forEach(function(e){var t=l[e];t&&t.forEach(o)}),f&&(this.offsetPaddings=a)}).add({offsetPaddings:null,_calcLayout:function(e){e.requestPaddings=this._calcRequestPaddings(e)},_calcRequestPaddings:function(e){var t,n=this.offsetPaddings;if(n){var r=this.chart._getAxesRoundingPaddings(),i=e.clientSize,s=e.paddings;Ht.names.forEach(function(e){var o=Mt.BasePanel.orthogonalLength[e],u=i[o],a=s[o],f=u+a;if(!r[e+"Locked"]){var l=f*(n[e]||0),c=u*(r[e]||0);(t||(t={}))[e]=Math.max(l-c,0)}},this)}return t},_createCore:function(){this.pvPanel.zOrder(-10);var t,n=this.chart.options.leafContentOverflow||"auto";t="auto"===n?e.query(["ortho","base"]).select(function(e){return this.axes[e]},this).any(function(e){return null!=e.option("FixedMin")||null!=e.option("FixedMax")}):"hidden"===n,t&&this.pvPanel.borderPanel.overflow("hidden")}}),e.type("pvc.PlotBgPanel",Mt.BasePanel).init(function(e,t,n){this.base(e,t,n)}).add({anchor:"fill",_getExtensionId:function(){return"plotBg"},_createCore:function(e){this.pvPanel.borderPanel.lock("zOrder",-13).antialias(!1),this.base(e)}}),e.type("pvc.CategoricalAbstract",Mt.CartesianAbstract).init(function(e){this.base(e);var t=this.parent;t&&(this._catRole=t._catRole)}).add({_interpolatable:!0,_initVisualRoles:function(){this.base(),this._catRole=this._addVisualRole("category",this._getCategoryRoleSpec())},_getCategoryRoleSpec:function(){return{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0}},_createVisibleData:function(t,n){var r=this._serRole&&this._serRole.flattenedGrouping(),i=this._catRole.flattenedGrouping();return r?t.groupBy(e.get(n,"inverted",!1)?[r,i]:[i,r],n):t.groupBy(i,n)},_interpolateDataCell:function(e,t){var n=this._getNullInterpolationOperType(e.nullInterpolationMode);if(n){this._warnSingleContinuousValueRole(e.role);var r=e.dataPartValue,i=this.partData(r,t),s=this.visibleData(r,{baseData:t});s.childCount()>0&&(new n(t,i,s,this._catRole,this._serRole,e.role,!0)).interpolate()}},_getNullInterpolationOperType:function(t){switch(t){case"linear":return Mt.data.LinearInterpolationOper;case"zero":return Mt.data.ZeroInterpolationOper;case"none":break;default:throw e.error.argumentInvalid("nullInterpolationMode",""+t)}},_generateTrendsDataCell:function(t,n,r){function i(n){var r=h?null:function(e){return e.atoms[l].value},i=function(e){var t=v.child(e.key);return t&&n&&(t=t.child(n.key)),t?t.dimensions(c).value(p):null},s=e.create(a,{rows:e.query(y),x:r,y:i}),o=f.model(s);o&&y.forEach(function(r,s){var u=h?s:r.atoms[l].value,f=o.sample(u,i(r),s);if(null!=f){var p,d=v.child(r.key),y=d||r;if(n){var b=d&&d.child(n.key);b?p=Object.create(b._datums[0].atoms):(p=Object.create(y._datums[0].atoms),e.copyOwn(p,n.atoms))}else p=Object.create(y._datums[0].atoms);p[c]=f,p[g]=m,t.push(new Mt.data.TrendDatum(y.owner,p,a))}},this)}var s=this._serRole,o=this._catRole,u=n.role,a=n.trend,f=a.info;this._warnSingleContinuousValueRole(u);var l,c=u.firstDimensionName(),h=o.isDiscrete();h||(l=o.firstDimensionName());var p={zeroIfNone:!1},d=this.partData(n.dataPartValue,r),v=this.visibleData(n.dataPartValue,{baseData:r}),m=this._getTrendDataPartAtom(),g=m.dimension.name,y=o.flatten(r,{visible:!0}).childNodes,b=s&&s.isBound()?s.flatten(d,{visible:!0}).children():e.query([null]);b.each(i,this)},_getContinuousVisibleCellExtent:function(t,n){var r=n.role;switch(r.name){case"series":case"category":return this.base(t,n)}this._warnSingleContinuousValueRole(r);var i=n.dataPartValue,s=r.firstDimensionName(),o=this.visibleData(i),u=t.scaleUsesAbs();return"ortho"===t.type&&n.isStacked?o.children().select(function(e){var t=this._getStackedCategoryValueExtent(e,s,u);return t?{range:t,group:e}:void 0},this).where(e.notNully).reduce(function(e,t){return this._reduceStackedCategoryValueExtent(e,t.range,t.group)}.bind(this),null):o.leafs().select(function(e){var t=e.dimensions(s).value();return u&&0>t?-t:t}).range()},_getStackedCategoryValueExtent:function(e,t,n){var r=null,i=null;return e.children().select(function(e){var r=e.dimensions(t).value();return n&&0>r?-r:r}).each(function(e){null!=e&&(e>=0?r+=e:i+=e)}),null==r&&null==i?null:{max:r||0,min:i||0}},_reduceStackedCategoryValueExtent:function(e,t){return Mt.unionExtents(e,t)},_coordinateSmallChartsLayout:function(t){this.base(t);var n,r=0,i=null,s={};this.children.forEach(function(t){t.basePanel.layout();var o,u=t.titlePanel;u&&(n||(n=u.anchorOrthoLength()),o=u[n],o>r&&(r=o));var a=t.axesPanels;i||(i=e.query(e.ownKeys(a)).where(function(e){return e===a[e].axis.id}).select(function(e){return s[e]={axis:0,title:0},e}).array()),i.forEach(function(e){var t=a[e],n=s[e],r="x"===t.axis.orientation?"height":"width";o=t[r],o>n.axis&&(n.axis=o);var i=t.titlePanel;i&&(o=i[r],o>n.title&&(n.title=o))})},this),this.children.forEach(function(e){if(r>0){var t=e.titlePanel;t.size=t.size.clone().set(n,r)}var o=e.axesPanels;i.forEach(function(e){var t=o[e],n=s[e],r="x"===t.axis.orientation?"height":"width";t.size=t.size.clone().set(r,n.axis);var i=t.titlePanel;i&&(i.size=i.size.clone().set(r,n.title))}),e.basePanel.invalidateLayout()},this)}}),e.type("pvc.CategoricalAbstractPanel",Mt.CartesianAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.stacked=n.option("Stacked")}),e.type("pvc.AxisPanel",Mt.BasePanel).init(function(t,n,r,i){i=e.create(i,{anchor:r.option("Position")});var s=i.anchor||this.anchor;this.axis=r,this.base(t,n,i),this.roleName=r.role.name,this.isDiscrete=r.role.isDiscrete(),this._extensionPrefix=r.extensionPrefixes,null==this.labelSpacingMin&&(this.labelSpacingMin=this.isDiscrete?.25:1.5),null==this.showTicks&&(this.showTicks=!this.isDiscrete);if(void 0===i.font){var o=this._getConstantExtension("label","font");o&&(this.font=o)}if(void 0===i.tickLength){var u=+this._getConstantExtension("ticks",this.anchorOrthoLength(s));!isNaN(u)&&isFinite(u)&&(this.tickLength=u)}}).add({pvRule:null,pvTicks:null,pvLabel:null,pvRuleGrid:null,pvScale:null,isDiscrete:!1,roleName:null,axis:null,anchor:"bottom",tickLength:6,scale:null,ruleCrossesMargin:!0,font:"9px sans-serif",labelSpacingMin:null,desiredTickCount:null,showMinorTicks:!0,showTicks:null,hiddenLabelText:"¬∑",_isScaleSetup:!1,_createLogInstanceId:function(){return this.base()+" - "+this.axis.id},getTicks:function(){return this._layoutInfo&&this._layoutInfo.ticks},_calcLayout:function(e){var t=this.axis.scale;return this._isScaleSetup||(this.pvScale=t,this.scale=t,this.extend(t,"scale"),this._isScaleSetup=!0),t.isNull?e.axisSize=0:this._calcLayoutCore(e),this.createAnchoredSize(e.axisSize,e.clientSize)},_calcLayoutCore:function(e){var t=e.desiredClientSize[this.anchorOrthoLength()];e.axisSize=t,this.isDiscrete&&this.useCompositeAxis?null==e.axisSize&&(e.axisSize=50):(this._readTextProperties(e),this._calcTicks(),"discrete"===this.scale.type&&(this._tickIncludeModulo=this._calcDiscreteTicksIncludeModulo()),this._calcAxisSizeFromLabel(e),null==e.axisSize&&(e.axisSize=e.requiredAxisSize),this._calcMaxTextLengthThatFits(),this._calcOverflowPaddings())},_calcAxisSizeFromLabel:function(e){this._calcTicksLabelBBoxes(e),this._calcAxisSizeFromLabelBBox(e)},_readTextProperties:function(t){var n=this._getExtension("label","textAngle");t.isTextAngleFixed=null!=n,t.textAngle=e.number.as(n,0),t.textMargin=e.number.as(this._getExtension("label","textMargin"),3);var r=this._getExtension("label","textAlign");"string"!=typeof r&&(r=this.isAnchorTopOrBottom()?"center":"left"==this.anchor?"right":"left"),t.textAlign=r;var i=this._getExtension("label","textBaseline");if("string"!=typeof i)switch(this.anchor){case"right":case"left":case"center":i="middle";break;case"bottom":i="top";break;default:i="bottom"}t.textBaseline=i},_calcAxisSizeFromLabelBBox:function(e){var t=e.maxLabelBBox,n=this._getLabelBBoxQuadrantLength(t,this.anchor),r=this.tickLength+n,i=t.sourceAngle;0===i&&this.isAnchorTopOrBottom()||(r+=this.tickLength),e.requiredAxisSize=r},_getLabelBBoxQuadrantLength:function(e,t){var n;switch(t){case"left":n=-e.x;break;case"right":n=e.x2;break;case"top":n=-e.y;break;case"bottom":n=e.y2}return Math.max(n,0)},_calcOverflowPaddings:function(){this._layoutInfo.canChange?this._calcOverflowPaddingsFromLabelBBox():Mt.debug>=2&&this._warn("Layout cannot change. Skipping calculation of overflow paddings.")},_calcOverflowPaddingsFromLabelBBox:function(){var t=null,n=this,r=n._layoutInfo,i=r.ticks,s=i.length;if(s){var o=r.ticksBBoxes,u=r.paddings,a=n.isAnchorTopOrBottom(),f=a?"left":"bottom",l=a?"right":"top",c=n.scale,h="discrete"===c.type,p=r.clientSize[n.anchorLength()];this.axis.setScaleRange(p);var d=function(r,s,o,a){var f=n._getLabelBBoxQuadrantLength(r,s);if(f>1){var l=c(h?i[a].value:i[a]),d=o?l-f:l+f,v=Math.max(0,o?-d:d-p);if(v>1){v-=u[s]||0;if(v>1){h&&(v*=1.05);if(t){var m=t[s];(null==m||v>m)&&(t[s]=v)}else t=e.set({},s,v)}}}};o.forEach(function(e,t){d(e,f,!0,t),d(e,l,!1,t)}),Mt.debug>=6&&t&&n._log("OverflowPaddings = "+Mt.stringify(t))}r.overflowPaddings=t},_calcMaxTextLengthThatFits:function(){var e=this._layoutInfo;if(this.compatVersion()<=1)e.maxTextWidth=null;else{var n=e.clientSize[this.anchorOrthoLength()],r=Math.min(e.axisSize,n);if(r>=e.requiredAxisSize-this.tickLength)e.maxTextWidth=null;else{var i,s,o=e.maxLabelBBox,u=r-2*this.tickLength;switch(this.anchor){case"left":s=t.vector(0,1),i=t.vector(-u,0);break;case"right":s=t.vector(0,1),i=t.vector(u,0);break;case"top":s=t.vector(1,0),i=t.vector(0,-u);break;case"bottom":s=t.vector(1,0),i=t.vector(0,u)}var a=i.norm(),f=o.source.points(),l=f[0],c=f[1],h=f[2],p=f[3],d=h.minus(p),v=c.minus(l),m=t.SvgScene.lineIntersect,g=m(i,s,l,v),y=m(i,s,p,d),b=o.sourceTextWidth,w=b,E=g.minus(l),S=E.length();b>=S&&E.dot(d)>=0&&(w=l.dot(a)<c.dot(a)?S:g.minus(c).length());var x=y.minus(p),T=x.length();b>=T&&x.dot(d)>=0&&(w=p.dot(a)<h.dot(a)?Math.min(w,T):Math.min(w,y.minus(h).length()));if("center"===o.sourceAlign){var N=b-w;w-=N}e.maxTextWidth=w,Mt.debug>=3&&this._log("Trimming labels' text at length "+w.toFixed(2)+"px maxOrthoLength="+u.toFixed(2)+"px")}}},_calcTicks:function(){var n=this._layoutInfo;n.textHeight=2*t.Text.fontHeight(this.font)/3,n.maxTextWidth=null,this.axis.setTicks(null);switch(this.scale.type){case"discrete":this._calcDiscreteTicks();break;case"timeSeries":this._calcTimeSeriesTicks();break;case"numeric":this._calcNumberTicks(n);break;default:throw e.error.operationInvalid("Undefined axis scale type")}this.axis.setTicks(n.ticks);var r=n.clientSize[this.anchorLength()];this.axis.setScaleRange(r),null==n.maxTextWidth&&this._calcTicksTextLength(n)},_calcDiscreteTicks:function(){var n=this.axis,r=this._layoutInfo;r.ticks=n.domainItems();var i,s,o=n.role.grouping;if(o.isSingleDimension&&(s=o.firstDimensionType())&&s.valueType===Date){var u=e.query(n.domainValues()).range();if(u&&u.min!==u.max){var a=new t.Scale.linear(u.min,u.max);a.ticks();var f=n.option("TickFormatter");f&&a.tickFormatter(f);var l=n.domainValues();i=function(e,t){return a.tickFormat(l[t])}}}i||(i=function(e){return e.absLabel}),r.ticksText=r.ticks.map(i),this._clearTicksTextDeps(r)},_clearTicksTextDeps:function(e){e.maxTextWidth=e.ticksTextLength=e.ticksBBoxes=null},_calcTimeSeriesTicks:function(){this._calcContinuousTicks(this._layoutInfo,this.desiredTickCount)},_calcNumberTicks:function(){var e=this.desiredTickCount;if(null==e){if(this.isAnchorTopOrBottom()){this._calcNumberHTicks();return}e=this._calcNumberVDesiredTickCount()}this._calcContinuousTicks(this._layoutInfo,e)},_calcContinuousTicks:function(e,t){this._calcContinuousTicksValue(e,t),this._calcContinuousTicksText(e)},_calcContinuousTicksValue:function(e,t){e.ticks=this.axis.calcContinuousTicks(t),Mt.debug>4&&(this._log("DOMAIN: "+Mt.stringify(this.scale.domain())),this._log("TICKS:  "+Mt.stringify(e.ticks)))},_calcContinuousTicksText:function(e){var t=e.ticksText=e.ticks.map(function(e){return this.scale.tickFormat(e)},this);return this._clearTicksTextDeps(e),t},_calcTicksTextLength:function(e){var n=0,r=this.font,i=e.ticksText||this._calcContinuousTicksText(e),s=e.ticksTextLength=i.map(function(e){var i=t.Text.measureWidth(e,r);return i>n&&(n=i),i});return e.maxTextWidth=n,e.ticksBBoxes=null,s},_calcTicksLabelBBoxes:function(e){var t,n=this,r=n._layoutInfo,i=e.ticksTextLength||n._calcTicksTextLength(e),s=r.maxTextWidth;e.ticksBBoxes=i.map(function(e){var r=n._calcLabelBBox(e);return t||e!==s||(t=r),r},n),r.maxLabelBBox=t},_calcLabelBBox:function(e){var t=this._layoutInfo;return Mt.text.getLabelBBox(e,t.textHeight,t.textAlign,t.textBaseline,t.textAngle,t.textMargin)},_calcDiscreteTicksIncludeModulo:function(){var e=this.axis.option("OverlappedLabelsMode");if("hide"!==e&&"rotatethenhide"!==e)return 1;var n=this._layoutInfo,r=n.ticks,i=r.length;if(2>=i)return 1;var s=this.scale.range().step,o=n.textHeight,u=n.maxTextWidth;if(u>0&&o>0&&s>0){var a=o*this.labelSpacingMin,f=a,l=t.Text.measureWidth("x",this.font),c=l+a,h=n.textAngle,p=this.isAnchorTopOrBottom(),d=Math.abs(Math[p?"sin":"cos"](h)),v=Math.abs(Math[p?"cos":"sin"](h)),m=1e-8>d?1/0:Math.ceil((f+o)/(s*d)),g=1e-8>v?1/0:Math.ceil((c+u)/(s*v)),y=Math.min(m,g);return(!isFinite(y)||1>y||Math.ceil(i/y)<2)&&(y=1),y}return 1},_tickMultipliers:[1,2,5,10],_calcNumberVDesiredTickCount:function(){var e=this._layoutInfo,n=e.textHeight*(1+Math.max(0,this.labelSpacingMin)),r=e.clientSize[this.anchorLength()],i=Math.max(1,~~(r/n));if(1>=i)return 1;var s=this.scale.domain(),o=s[1]-s[0];if(0>=o)return i;for(var u,a=o/i,f=Math.floor(t.log(a,10)),l=Math.pow(10,f),c=this._tickMultipliers,h=0;h<c.length;h++){u=c[h]*l;if(u>=a)break}return Math.max(1,Math.floor(o/u))},_calcNumberHTicks:function(){for(var e,t,n,r,i,s=this._layoutInfo,o=s.clientSize[this.anchorLength()],u=s.textHeight*Math.max(0,this.labelSpacingMin),a=this._calcNumberHDesiredTickCount(u),f=Mt.debug>=7;;){f&&this._log("calculateNumberHTicks TickCount IN desired = "+a),n={},this._calcContinuousTicksValue(n,a);var l=n.ticks,c=l.length;if(l.exponentOverflow){if(null!=e){if(1===e){r&&(n=r);break}i&&(n=i);break}l.exponent===this.exponentMin?(r=n,e=1):(i=n,e=-1)}else if(null==t||c!==t){f&&this._log("calculateNumberHTicks TickCount desired/resulting = "+a+" -> "+c),t=c,this._calcContinuousTicksText(n);var h=this._calcNumberHLength(n,u),p=n.excessLength=h-o,d=n.error=Math.abs(p/o);f&&(this._log("calculateNumberHTicks error="+(p>=0?"+":"-")+(100*n.error).toFixed(0)+"% count="+c+" step="+l.step),this._log("calculateNumberHTicks Length client/resulting = "+o+" / "+h+" spacing = "+u));if(p>0){if(1===a){3===c&&1>=d?(n.ticks.splice(1,1),n.ticksText.splice(1,1),n.ticks.step*=2):(n.ticks.length=1,n.ticksText.length=1),delete n.maxTextWidth;break}if(r){n=r;break}i=n,e=-1}else{if(.05>=d||-1===e)break;r=n,e=1}}a+=e}n&&(s.ticks=n.ticks,s.ticksText=n.ticksText,s.maxTextWidth=n.maxTextWidth,Mt.debug>=5&&this._log("calculateNumberHTicks RESULT error="+(n.excessLength>=0?"+":"-")+(100*n.error).toFixed(0)+"% count="+n.ticks.length+" step="+n.ticks.step)),f&&this._log("calculateNumberHTicks END")},_calcNumberHDesiredTickCount:function(e){var n=this._layoutInfo,r=this.scale.domain().map(function(e){e=+e.toFixed(2);var n=this.scale.tickFormat(e);return t.Text.measureWidth(n,this.font)},this),i=Math.max((r[1]+r[0])/2,n.textHeight),s=n.clientSize[this.anchorLength()];return Math.max(1,~~(s/(i+e)))},_calcNumberHLength:function(n,r){var i=n.ticksText,s=e.query(i).select(function(e){return t.Text.measureWidth(e,this.font)},this).max();return Math.max(s,(i.length-1)*(s+r))},_createCore:function(){if(!this.scale.isNull){var t=this._layoutInfo.clientSize,n=this._layoutInfo.paddings,r=this.anchorOrtho(),i=this.anchorOpposite(r),s=this.anchorOrthoLength(r),o=this.ruleCrossesMargin?-n[r]:0,u=t[s]+(this.ruleCrossesMargin?n[i]:0),a=u-o;this._rSize=a;var f=this._getRootScene();this.pvRule=(new Mt.visual.Rule(this,this.pvPanel,{extensionId:"rule"})).lock("data",[f]).override("defaultColor",e.fun.constant("#666666")).lock(this.anchorOpposite(),0).lock(r,o).lock(s,a).pvMark.zOrder(30).strokeDasharray(null).lineCap("square"),this.isDiscrete?this.useCompositeAxis?this.renderCompositeOrdinalAxis():this.renderOrdinalAxis():this.renderLinearAxis()}},_getExtensionId:function(){return""},_getRootScene:function(){if(!this._rootScene){var e=this._rootScene=new Mt.visual.CartesianAxisRootScene(null,{panel:this,source:this._getRootData()}),t=this._layoutInfo,n=t.ticks,r=t.ticksText;if(this.isDiscrete)if(this.useCompositeAxis)this._buildCompositeScene(e);else{var i=this._tickIncludeModulo,s=this.hiddenLabelText;e.vars.tickIncludeModulo=i,e.vars.hiddenLabelText=s;var o,u,a,f;if(i>2){Mt.debug>=3&&this._info("Showing only one in every "+i+" tick labels");var l=e.group.owner.keySep;a=function(){var t=o.map(function(e){return e.key}).join(l),n=u.slice(0,10).join(", ")+(u.length>10?", ...":""),r=new Mt.visual.CartesianAxisTickScene(e,{source:o,tick:t,tickRaw:t,tickLabel:n,isHidden:!0});r.dataIndex=f,o=u=f=null}}n.forEach(function(t,n){var s=n%i!==0;if(s&&i>2)null==f&&(f=n),(o||(o=[])).push(t),(u||(u=[])).push(r[n]);else{o&&a();var l=new Mt.visual.CartesianAxisTickScene(e,{source:t,tick:t.value,tickRaw:t.rawValue,tickLabel:r[n],isHidden:s});l.dataIndex=n}}),o&&a()}else n.forEach(function(t,n){var i=new Mt.visual.CartesianAxisTickScene(e,{tick:t,tickRaw:t,tickLabel:r[n]});i.dataIndex=n},this)}return this._rootScene},_buildCompositeScene:function(e){function t(e){var r=e.group;if(n){var i=e.vars.tick;e.nodeValue=e.value=i.rawValue,e.nodeLabel=e.label=i.label}r.childCount()&&r.children().each(function(n){var r=new Mt.visual.CartesianAxisTickScene(e,{source:n,tick:n.value,tickRaw:n.rawValue,tickLabel:n.label});r.dataIndex=n.childIndex(),t(r)})}var n=this.compatVersion()<=1;e.vars.tick=new Xt("",""),t(e)},_getRootData:function(){var e;if(this.isDiscrete&&this.useCompositeAxis){var t=this.anchor,n={visible:this.axis.domainVisibleOnly()?!0:null,isNull:this.chart.options.ignoreNulls||this.axis.domainIgnoreNulls()?!1:null,reverse:"bottom"==t||"left"==t};e=this.axis.role.select(this.data,n)}else e=this.data;return e},renderOrdinalAxis:function(){var e,n=this.scale,r=this.hiddenLabelText,i=this._tickIncludeModulo,s=i*n.range().step/2,o=this.anchorOpposite(),u=this.anchorLength(),a=this.anchorOrtho(),f=this.anchorOrthoLength(),l=this.pvRule,c=this._getRootScene(),h=this._layoutInfo,p=this.compatVersion()<=1;if(p){var d=function(e){this.value=this.absValue=e.rawValue,this.nodeName=""+(this.value||""),this.path=this.nodeName?[this.nodeName]:[],this.label=this.absLabel=e.label};d.prototype.toString=function(){return""+this.value},e=function(e){return function(t){var n=Object.create(this);return n.index=this.parent.index,e.call(n,new d(t.vars.tick))}}}var v=(new Mt.visual.Panel(this,this.pvPanel,{extensionId:"ticksPanel"})).lock("data",c.childNodes).lock(o,0).lockMark(a,function(e){return e.isHidden?n(e.previousSibling.vars.tick.value)+s:n(e.vars.tick.value)}).lock("strokeDasharray",null).lock("strokeStyle",null).lock("fillStyle",null).lock("lineWidth",0).pvMark.zOrder(20);if(p||this.showTicks)this.pvTicks=(new Mt.visual.Rule(this,v,{extensionId:"ticks",wrapper:e})).lock("data").intercept("visible",function(e){return!e.isHidden&&this.delegateExtension(!0)}).optional("lineWidth",1).lock(o,0).lock(a,0).lock(u,null).optional(f,2*this.tickLength/3).override("defaultColor",function(){return p?t.Color.names.transparent:l.scene?l.scene[0].strokeStyle:"#666666"}).pvMark;var m=this.font,g=this._layoutInfo.maxTextWidth;isFinite(g)||(g=0),this.pvLabel=(new Mt.visual.Label(this,v,{extensionId:"label",showsInteraction:!0,noClick:!1,noDoubleClick:!1,noSelect:!1,noTooltip:!1,noHover:!1,wrapper:e})).intercept("visible",function(e){return e.isHidden?!!e.vars.hiddenLabelText:this.delegateExtension(!0)}).intercept("text",function(e){var t;return e.isHidden?t=r:(t=this.delegateExtension(),void 0===t&&(t=e.vars.tick.label),!g||this.showsInteraction()&&e.isActive||(t=Mt.text.trimToWidthB(g,t,m,"..",!1))),t}).pvMark.zOrder(40).lock(o,this.tickLength).lock(a,0).font(m).textStyle("#666666").textAlign(h.textAlign).textBaseline(h.textBaseline),this._debugTicksPanel(v)},_getTooltipFormatter:function(e){if(this.axis.option("TooltipEnabled")){e.gravity=this._calcTipsyGravity();var t=this.axis.option("TooltipFormat");if(t)return function(e){return t.call(e,e.scene)};var n=this.axis.option("TooltipAutoContent");if("summary"===n)return this._summaryTooltipFormatter;if("value"===n)return e.isLazy=!1,function(e){return e.scene.vars.tick.label}}},_debugTicksPanel:function(e){if(Mt.debug>=16){var n=(this.font,this._layoutInfo),r=n.ticksBBoxes||this._calcTicksLabelBBoxes(n);e.add(t.Panel)[this.anchorOpposite()](this.tickLength)[this.anchorOrtho()](0)[this.anchorLength()](0)[this.anchorOrthoLength()](0).fillStyle(null).strokeStyle(null).lineWidth(0).visible(function(e){return!e.isHidden}).add(t.Line).data(function(e){var t=r[e.dataIndex],n=t.source.points();return n.length>1&&(n=n.concat(n[0])),n}).left(function(e){return e.x}).top(function(e){return e.y}).strokeStyle("red").lineWidth(.5).strokeDasharray("-")}},renderLinearAxis:function(){var e,n=this.scale,r=this.pvRule,i=this.anchorOpposite(),s=this.anchorLength(),o=this.anchorOrtho(),u=this.anchorOrthoLength(),a=this._getRootScene();this.compatVersion()<=1&&(e=function(e){return function(t){var n=Object.create(this);return n.index=this.parent.index,e.call(n,t.vars.tick.rawValue)}});var f=(new Mt.visual.Panel(this,this.pvPanel,{extensionId:"ticksPanel"})).lock("data",a.childNodes).lock(i,0).lockMark(o,function(e){return n(e.vars.tick.value)}).lock("strokeStyle",null).lock("fillStyle",null).lock("lineWidth",0).pvMark.zOrder(20);if(this.showTicks){var l=this.pvTicks=(new Mt.visual.Rule(this,f,{extensionId:"ticks",wrapper:e})).lock("data").override("defaultColor",function(){return r.scene?r.scene[0].strokeStyle:"#666666"}).lock(i,0).lock(o,0).lock(s,null).optional(u,this.tickLength).pvMark;if(this.showMinorTicks){var c=this._layoutInfo,h=c.ticks,p=h.length,d=p>1?Math.abs(n(h[1])-n(h[0]))/2:0;this.pvMinorTicks=(new Mt.visual.Rule(this,this.pvTicks,{extensionId:"minorTicks",wrapper:e})).lock("data").intercept("visible",function(e){var t=e.childIndex()<p-1&&(!l.scene||l.scene[0].visible);return t&&this.delegateExtension(!0)}).override("defaultColor",function(){return l.scene?l.scene[0].strokeStyle:t.Color.names.d}).lock(i,0).lock(s,null).optional(u,this.tickLength/2).lockMark(o,d).pvMark}}this.renderLinearAxisLabel(f,e),this._debugTicksPanel(f)},renderLinearAxisLabel:function(e,t){var n=(this.pvTicks,this.anchorOpposite()),r=this.anchorOrtho(),i=(this.scale,this.font),s=this._layoutInfo.maxTextWidth;isFinite(s)||(s=0);var o=this.pvLabel=(new Mt.visual.Label(this,e,{extensionId:"label",noHover:!1,showsInteraction:!0,wrapper:t})).lock("data").intercept("text",function(e){var t=e.vars.tick.label;return!s||this.showsInteraction()&&e.isActive||(t=Mt.text.trimToWidthB(s,t,i,"..",!1)),t}).pvMark.lock(n,this.tickLength).lock(r,0).zOrder(40).font(this.font).textStyle("#666666"),u=this.pvPanel.root;this.isAnchorTopOrBottom()?o.textBaseline(n).textAlign(function(e){var t;if(0===this.index){t=o.toScreenTransform().transformHPosition(o.left());if(0>=t)return"left"}else if(this.index===e.parent.childNodes.length-1){t=o.toScreenTransform().transformHPosition(o.left());if(t>=u.width())return"right"}return"center"}):o.textAlign(n).textBaseline(function(e){var t;if(0===this.index){t=o.toScreenTransform().transformVPosition(o.top());if(t>=u.height())return"bottom"}else if(this.index===e.parent.childNodes.length-1){t=o.toScreenTransform().transformVPosition(o.top());if(0>=t)return"top"}return"middle"})},_onV1Click:function(e,t){this.isDiscrete&&this.useCompositeAxis&&t.call(e.pvMark,e.scene,e.event)},_onV1DoubleClick:function(e,t){this.isDiscrete&&this.useCompositeAxis&&t.call(e.pvMark,e.scene,e.event)},_getSelectableMarks:function(){return this.isDiscrete&&this.isVisible&&this.pvLabel?this.base():void 0},renderCompositeOrdinalAxis:function(){var n=this.isAnchorTopOrBottom(),r=n?"h":"v",i=2,s=2,o=this.font,u=t.Text.fontHeight(o)/2,a=this._pvLayout=this._getCompositeLayoutSingleCluster();a.node.def("fitInfo",null).height(function(e){var t=Mt.text.getFitInfo(e.dx,e.dy,e.vars.tick.label,o,u);return t.h||("v"===r&&t.v?s=Math.min(i,e.depth):i=Math.min(i,e.depth)),this.fitInfo(t),e.dy}),a.node.add(t.Bar).fillStyle("rgba(127,127,127,.001)").strokeStyle(function(e){return 1!==e.maxDepth&&e.maxDepth?"rgba(127,127,127,0.3)":null}).lineWidth(function(e){return 1!==e.maxDepth&&e.maxDepth?.5:0}).text(function(e){return e.vars.tick.label});var f,l=.3,c=1.27,h=n?"center":"left"==this.anchor?"right":"left";this.compatVersion()<=1&&(f=function(e){return function(t){return e.call(this,t)}}),this.pvLabel=(new Mt.visual.Label(this,a.label,{extensionId:"label",noClick:!1,noDoubleClick:!1,noSelect:!1,noTooltip:!1,noHover:!1,showsInteraction:!0,wrapper:f,tooltipArgs:{options:{offset:2*u}}})).pvMark.def("lblDirection","h").textAngle(function(e){if(e.depth>=s&&e.depth<i)return this.lblDirection("v"),-Math.PI/2;if(e.depth>=i){var t=e.dy/e.dx,n=Math.atan(t);if(n>c)return this.lblDirection("v"),-Math.PI/2;if(n>l)return this.lblDirection("d"),-n}return this.lblDirection("h"),0}).textMargin(1).textAlign(function(e){return"v"!=r||e.depth>=s||e.depth>=i?"center":h}).left(function(e){return"v"!=r||e.depth>=s||e.depth>=i?e.x+e.dx/2:"right"==h?e.x+e.dx:e.x}).font(o).textStyle("#666666").text(function(t){var n=t.vars.tick.label;if(!t.isActive||!this.sign.showsInteraction()){var r=this.fitInfo();switch(this.lblDirection()){case"h":if(!r.h)return Mt.text.trimToWidthB(t.dx,n,o,"..");break;case"v":if(!r.v)return Mt.text.trimToWidthB(t.dy,n,o,"..");break;case"d":if(!r.d){var i=Math.sqrt(e.sqr(t.dy)+e.sqr(t.dx));return Mt.text.trimToWidthB(i-u,n,o,"..")}}}return n})},_getCompositeLayoutSingleCluster:function(){var n=this._getRootScene(),r=this.anchor,i=n.group.treeHeight,s=this._layoutInfo.axisSize;i++;var o=s/i,u=i>2?1/12*s:0;o-=u;var a=i/(i-1),f=Mt.BasePanel.orthogonalLength[r],l="width"==f?"left"===r?[-o,0]:[o,0]:"top"===r?[0,-o]:[0,o];this.pvRule.sign.override("defaultColor",e.fun.constant(null)).override("defaultStrokeWidth",e.fun.constant(0));var c=this.pvRule.add(t.Panel)[f](s).strokeStyle(null).lineWidth(0).add(t.Panel)[f](s*a).strokeStyle(null).lineWidth(0);return c.transform(t.Transform.identity.translate(l[0],l[1])),c.add(t.Layout.Cluster.Fill).nodes(n.nodes()).orient(r)},_calcTipsyGravity:function(){switch(this.anchor){case"bottom":return"s";case"top":return"n";case"left":return"w";case"right":return"e"}return"s"}}),e.type("pvc.AxisTitlePanel",Mt.TitlePanelAbstract).init(function(e,t,n,r){this.axis=n,this.base(e,t,r),this._extensionPrefix=n.extensionPrefixes.map(function(e){return e+"Title"})}).add({_calcLayout:function(e){var t=this.axis.scale;return!t||t.isNull?new Ft(0,0):this.base(e)},_createCore:function(e){var t=this.axis.scale;return t&&!t.isNull?this.base(e):void 0}}),e.type("pvc.PiePanel",Mt.PlotPanel).init(function(e,t,n,r){var i=n.option("ValuesLabelStyle");this.base(e,t,n,r),this.explodedOffsetRadius=n.option("ExplodedSliceRadius"),this.explodedSliceIndex=n.option("ExplodedSliceIndex"),this.activeOffsetRadius=n.option("ActiveSliceRadius"),this.labelStyle=i,"linked"===i&&(this.linkInsetRadius=n.option("LinkInsetRadius"),this.linkOutsetRadius=n.option("LinkOutsetRadius"),this.linkMargin=n.option("LinkMargin"),this.linkHandleWidth=n.option("LinkHandleWidth"),this.linkLabelSize=n.option("LinkLabelSize"),this.linkLabelSpacingMin=n.option("LinkLabelSpacingMin"))}).add({pvPie:null,pvPieLabel:null,valueRoleName:"value",_getV1Datum:function(e){var t=e.datum;if(t){var n=Object.create(t);n.percent=e.vars.value.percent,t=n}return t},_calcLayout:function(n){function r(t){return e.between(Bt.resolve(t,u),0,u)}function i(t){return e.between(Bt.resolve(t,o),0,o)}var s=n.clientSize,o=s.width,u=Math.min(o,s.height)/2;if(!u)return new Ft(0,0);var a=t.vector(s.width/2,s.height/2),f=this._getConstantExtension("label","font");e.string.is(f)||(f=this.valuesFont);var l=u;if(this.valuesVisible&&"linked"===this.labelStyle){var c=r(this.linkInsetRadius),h=r(this.linkOutsetRadius),p=i(this.linkMargin),d=i(this.linkLabelSize),v=e.number.to(this._getConstantExtension("label","textMargin"),3),m=2*t.Text.fontHeight(f)/3,g=this.linkHandleWidth*m;p+=g;var y=this.linkLabelSpacingMin*m,b=Math.max(0,o/2-u),w=Math.max(0,h+p+d-b),E=h+m,S=Math.max(0,E,w);S>=l?(this.valuesVisible=!1,Mt.debug>=2&&this._log("Hiding linked labels due to insufficient space.")):(l-=S,n.link={insetRadius:c,outsetRadius:h,elbowRadius:l+h,linkMargin:p,handleWidth:g,labelSize:d,maxTextWidth:d-v,labelSpacingMin:y,textMargin:v,lineHeight:m})}var x=r(this.explodedOffsetRadius),T=0;this.hoverable()&&(T=r(this.activeOffsetRadius));var N=x+T,C=l-N;if(0>C)return new Ft(0,0);n.resolvePctRadius=r,n.center=a,n.clientRadius=u,n.normalRadius=C,n.explodedOffsetRadius=x,n.activeOffsetRadius=T,n.maxOffsetRadius=N,n.labelFont=f},_createCore:function(n){var r,i=this,s=i.chart,o=this._buildScene(),u=n.center,a=n.normalRadius,f=["slice"];this.compatVersion()<=1&&(f.push(""),r=function(e){return function(t){return e.call(this,t.vars.value.value)}}),this.pvPie=(new Mt.visual.PieSlice(this,this.pvPanel,{extensionId:f,center:u,activeOffsetRadius:n.activeOffsetRadius,maxOffsetRadius:n.maxOffsetRadius,resolvePctRadius:n.resolvePctRadius,wrapper:r,tooltipArgs:{options:{useCorners:!0,gravity:function(){var e=this.midAngle(),t=Math.cos(e)>=0,n=Math.sin(e)>=0;return t?n?"nw":"sw":n?"ne":"se"}}}})).lock("data",o.childNodes).override("angle",function(e){return e.vars.value.angle}).override("defaultOffsetRadius",function(){var e=i.explodedSliceIndex;return null==e||e==this.pvMark.index?n.explodedOffsetRadius:0}).lockMark("outerRadius",function(){return s.animate(0,a)}).localProperty("innerRadiusEx",Bt.parse).intercept("innerRadius",function(){var e=this.delegateExtension();if(null==e){var t=this.pvMark.innerRadiusEx();e=null!=t?Bt.resolve(t,this.pvMark.outerRadius())||0:0}return e>0?s.animate(0,e):0}).pvMark;if(this.valuesVisible){this.valuesFont=n.labelFont;if("inside"===this.labelStyle)this.pvPieLabel=Mt.visual.ValueLabel.maybeCreate(this,this.pvPie,{wrapper:r}).override("defaultText",function(e){return e.vars.value.sliceLabel}).override("calcTextFitInfo",function(e,n){var r=this.pvMark,s=r.textMargin();if(!(-0.000001>s)){var o=r.textBaseline();if("middle"===o){var u=Mt.normAngle(i.pvPie.midAngle()),a=Mt.normAngle(r.textAngle()),f=Math.abs(u-a)<1e-6,l=!1;if(!f){var c=Mt.normAngle(a+Math.PI);l=Math.abs(u-c)<1e-6}if(f||l){var h=r.name(),p=r.textAlign(),d="outer"===h?p===(f?"right":"left"):!1;if(d){var v=!1,m=t.Text.measure(n,r.font()),g=.85*m.height,y=i.pvPie.outerRadius(),b=i.pvPie.innerRadius(),w=e.vars.value.angle,E=g+s/2,S=w<Math.PI?Math.max(b,E/(2*Math.tan(w/2))):b,x=y-s-S;return v|=0>=x,x-=s,v|=this.hideOverflowed&&m.width>x,{hide:v,widthMax:x}}}}}}).pvMark.textMargin(10);else if("linked"===this.labelStyle){var l=n.link;o.layoutLinkLabels(n),this.pvLinkPanel=this.pvPanel.add(t.Panel).data(o.childNodes).localProperty("pieSlice").pieSlice(function(){return i.pvPie.scene[this.index]});var c=!1,h=!0;this.pvLinkLine=(new Mt.visual.Line(this,this.pvLinkPanel,{extensionId:"linkLine",freePosition:h,noClick:h,noDoubleClick:h,noSelect:h,noTooltip:h,noHover:h,showsActivity:c})).lockMark("data",function(e){var t=this.parent.pieSlice(),n=t.startAngle+t.angle/2,r=t.outerRadius-l.insetRadius,i=t.left+r*Math.cos(n),s=t.top+r*Math.sin(n),o=e.childNodes[0];return o&&o._isFirstDynamicScene?(o.x=i,o.y=s):(o=new Mt.visual.PieLinkLineScene(e,i,s,0),o._isFirstDynamicScene=h),e.childNodes}).override("defaultColor",function(e,t){return"stroke"===t?"black":this.base(e,t)}).override("defaultStrokeWidth",e.fun.constant(.5)).pvMark.lock("visible").lock("top",function(e){return e.y}).lock("left",function(e){return e.x}),this.pvPieLabel=(new Mt.visual.Label(this,this.pvLinkPanel,{extensionId:"label",noClick:c,noDoubleClick:c,noSelect:c,noHover:c,showsInteraction:h})).lockMark("data",function(e){return e.lineScenes}).intercept("textStyle",function(e){this._finished=c;var t=this.delegate();return t&&!this._finished&&!this.mayShowActive(e)&&this.mayShowNotAmongSelected(e)&&(t=this.dimColor(t,"text")),t}).pvMark.lock("visible").left(function(e){return e.vars.link.labelX}).top(function(e){return e.vars.link.labelY+(this.index+1)*l.lineHeight}).textAlign(function(e){return e.vars.link.labelAnchor}).textMargin(l.textMargin).textBaseline("bottom").text(function(e){return e.vars.link.labelLines[this.index]});if(Mt.debug>=20){this.pvPanel.add(t.Panel).zOrder(-10).left(u.x-n.clientRadius).top(u.y-n.clientRadius).width(2*n.clientRadius).height(2*n.clientRadius).strokeStyle("red"),this.pvPanel.strokeStyle("green");var p=t.Colors.category10();this.pvLinkLine.segmented(h).strokeStyle(function(){return p(this.index)})}}this.pvPieLabel.font(n.labelFont)}},_getExtensionId:function(){var e=[{abs:"content"}];return this.chart.parent&&e.push({abs:"smallContent"}),e.concat(this.base())},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(){var e=new Mt.visual.PieRootScene(this);return this.sum=e.vars.sumAbs.value,e}}),e.type("pvc.visual.PieRootScene",Mt.visual.Scene).init(function(t){function n(e,t){if(t){var n=t._datums;if(1===n.length)return n[0].atoms[o].label}return u.format(e)}var r=t.axes.category,i=r.domainData();this.base(null,{panel:t,source:i});var s=new Mt.visual.RoleVarHelper(this,t.visualRoles.color,{roleVar:"color"}),o=t.visualRoles[t.valueRoleName].firstDimensionName(),u=i.dimensions(o),a=t.chart.options.percentValueFormat,f=t.axes.angle.scale,l=f.isNull?0:f.domain()[1];this.vars.sumAbs=new Xt(l,n(l));var c=this,h=e.type(Mt.visual.PieCategoryScene).init(function(e,t){this.base(c,{source:e}),this.vars.category=Xt.fromComplex(e);var r=new Xt(t,n(t,e));r.angle=f(t);var i=Math.abs(t)/l;r.percent=new Xt(i,a(i)),this.vars.value=r,r.sliceLabel=this.sliceLabel(),s.onNewScene(this,!0)});t._extendSceneType("category",h,["sliceLabel","sliceLabelMask"]);var p=r.domainItems();if(p.length){p.forEach(function(e){var t=e.dimensions(o).value();0!==t&&new h(e,t)});if(!c.childNodes.length&&!t.visualRoles.multiChart.isBound())throw new InvalidDataException("Unable to create a pie chart, please check the data values.")}}).add({layoutLinkLabels:function(e){var t=-Math.PI/2,n=[],r=[];this.childNodes.forEach(function(i){t=i.layoutI(e,t),(i.vars.link.dir>0?r:n).push(i)}),this._distributeLabels(-1,n,e),this._distributeLabels(1,r,e)},_distributeLabels:function(t,n,r){n.sort(function(t,n){return e.compare(t.vars.link.targetY,n.vars.link.targetY)}),this._distributeLabelsDownwards(n,r)&&this._distributeLabelsUpwards(n,r)&&this._distributeLabelsEvenly(n,r),n.forEach(function(e){e.layoutII(r)})},_distributeLabelsDownwards:function(e,t){for(var n=t.link,r=n.labelSpacingMin,i=t.clientSize.height,s=!1,o=0,u=e.length-1;u>o;o++){var a=e[o].vars.link;!o&&a.labelTop()<0&&(s=!0);var f=e[o+1].vars.link,l=a.labelBottom()+r;if(f.labelTop()<l){var c=f.labelHeight/2,h=l+c,p=i-c;h>p?(s=!0,f.targetY=p):f.targetY=h}}return s},_distributeLabelsUpwards:function(e,t){for(var n=t.link,r=n.labelSpacingMin,i=!1,s=e.length-1;s>0;s--){var o=e[s-1].vars.link,u=e[s].vars.link;1===s&&o.labelTop()<0&&(i=!0);var a=u.labelTop()-r;if(o.labelBottom()>a){var f=o.labelHeight/2,l=a-f,c=f;c>l?(i=!0,o.targetY=c):o.targetY=l}}return i},_distributeLabelsEvenly:function(e,t){var n=0;e.forEach(function(e){n+=e.vars.link.labelHeight});var r=t.clientSize.height-n,i=r;e.length>1&&(i/=e.length-1);var s=0;return e.forEach(function(e){var t=e.vars.link,n=t.labelHeight/2;s+=n,t.targetY=s,s+=n+i}),!0}}),e.type("pvc.visual.PieLinkLabelVar").add({labelTop:function(){return this.targetY-this.labelHeight/2},labelBottom:function(){return this.targetY+this.labelHeight/2}}),e.type("pvc.visual.PieCategoryScene",Mt.visual.Scene).add({sliceLabelMask:function(){return this.panel().valuesMask},sliceLabel:function(){return this.format(this.sliceLabelMask())},layoutI:function(t,n){var r=this.vars.value,i=n+r.angle,s=(n+i)/2,o=this.vars.link=new Mt.visual.PieLinkLabelVar,u=t.link,a=Mt.text.justify(r.sliceLabel,u.maxTextWidth,t.labelFont),f=a.length;o.labelLines=a,o.labelHeight=f*u.lineHeight,this.lineScenes=e.array.create(f,this);var l=Math.cos(s),c=Math.sin(s),h=l>=0,p=h?1:-1;o.labelAnchor=h?"left":"right";var d=t.center,v=u.elbowRadius,m=d.x+v*l,g=d.y+v*c,y=d.x+p*v,b=y+p*u.linkMargin;return new Mt.visual.PieLinkLineScene(this,m,g),new Mt.visual.PieLinkLineScene(this,y,g),o.elbowY=g,o.targetY=g+0,o.targetX=b,o.dir=p,i},layoutII:function(e){var t=this.vars.link,n=t.targetY,r=t.targetX,i=e.link.handleWidth;i>0&&new Mt.visual.PieLinkLineScene(this,r-t.dir*i,n),new Mt.visual.PieLinkLineScene(this,r,n),t.labelX=r,t.labelY=n-t.labelHeight/2}}),e.type("pvc.visual.PieLinkLineScene",Mt.visual.Scene).init(function(e,t,n,r){this.base(e,{source:e.group,index:r}),this.x=t,this.y=n}).add(t.Vector),e.type("pvc.PieChart",Mt.BaseChart).add({_animatable:!0,_axisClassByType:{category:Mt.visual.Axis,angle:Mt.visual.NormalizedAxis},_axisCreateChartLevel:{category:2,angle:2},_axisSetScaleChartLevel:{category:2,angle:2},_axisCreationOrder:function(){var e=Mt.BaseChart.prototype._axisCreationOrder.slice();return e.push("category","angle"),e}(),pieChartPanel:null,_getColorRoleSpec:function(){return{isRequired:!0,defaultSourceRole:"category",defaultDimension:"color*",requireIsDiscrete:!0}},_initVisualRoles:function(){this.base(),this._addVisualRole("category",{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0}),this._addVisualRole("value",{isMeasure:!0,isRequired:!0,isPercent:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"value"})},_initPlotsCore:function(){new Mt.visual.PiePlot(this)},_createVisibleData:function(e,t){return this.visualRoles.category.flatten(e,t)},_setAxisScale:function(e,t){this.base(e,t),2&t&&"angle"===e.type&&e.setScaleRange({min:0,max:2*Math.PI})},_createContent:function(t){this.base();var n=this.compatVersion()<=1;if(n){var r=Mt.castNumber(this.options.innerGap)||.95;r=e.between(r,.1,1),t.paddings=(100*(1-r)/2).toFixed(2)+"%"}else null==t.paddings&&(t.paddings=new Bt(.025));var i=this.plots.pie;this.pieChartPanel=new Mt.PiePanel(this,this.basePanel,i,e.create(t,{scenes:e.getPath(this.options,"pie.scenes")}))}}),e.type("pvc.BarAbstractPanel",Mt.CategoricalAbstractPanel).add({pvBar:null,pvBarLabel:null,pvCategoryPanel:null,pvSecondLine:null,pvSecondDot:null,_creating:function(){var e=this.defaultLegendGroupScene();if(e&&!e.hasRenderer()){var t=e.colorAxis,n=t.option("LegendDrawLine"),r=!n||t.option("LegendDrawMarker");if(r){var i={drawMarker:!0,markerShape:t.option("LegendShape"),drawRule:n,markerPvProto:new _t};this.extend(i.markerPvProto,"",{constOnly:!0}),e.renderer(new Mt.visual.legend.BulletItemDefaultRenderer(i))}}},_createCore:function(){this.base();var e,n,r=this,i=r.chart,s=r.plot,o=!!r.stacked,u=r.isOrientationVertical(),a=r.visibleData({ignoreNulls:!1}),f=r.axes.ortho,l=r.axes.base,c=l.domainItems(),h=r.visualRoles.series.flatten(r.partData(),{visible:!0,isNull:i.options.ignoreNulls?!1:null}).childNodes,p=r._buildScene(a,h,c),d=f.scale,v=d(0),m=f.sceneScale({sceneVarName:"value",nullToZero:!1}),g=l.sceneScale({sceneVarName:"category"}),y=s.option("BarSizeRatio"),b=s.option("BarSizeMax"),w=s.option("BarStackedMargin"),E=s.option("BarOrthoSizeMin"),S=l.scale.range(),x=S.band,T=S.step,N=S.margin,C=u===o;o?e=x:(n=h.length,e=n?1===n?x:y*x/n:0),e>b&&(e=b),r.barWidth=e,r.barStepWidth=T;var k;r.compatVersion()<=1&&(k=function(e){return function(t){var n=Object.create(this.parent),r=Object.create(this);r.parent=n;var i=t.parent.childIndex(),s=t.childIndex();return o?(n.index=i,r.index=s):(n.index=s,r.index=i),e.call(r,t.vars.value.rawValue)}}),r.pvBarPanel=(new Mt.visual.Panel(r,r.pvPanel,{panelType:t.Layout.Band,extensionId:"panel"})).lock("layers",p.childNodes).lockMark("values",function(e){return e.childNodes}).lockMark("orient",u?"bottom-left":"left-bottom").lockMark("layout",o?"stacked":"grouped").lockMark("verticalMode",r._barVerticalMode()).lockMark("yZero",v).optionalMark("hZero",E).pvMark.band.x(g).w(x).differentialControl(r._barDifferentialControl()).item.order(C?"reverse":null).h(function(e){var t=m(e);return null!=t?i.animate(0,t-v):null}).w(e).horizontalRatio(y).verticalMargin(w).end;var L=4>=e||2>N,A=this.pvBar=(new Mt.visual.Bar(r,r.pvBarPanel.item,{extensionId:"",freePosition:!0,wrapper:k})).lockDimensions().pvMark.antialias(function(e){if(L)return!0;var t=m(e),n=null==t?0:Math.abs(t-v);return 1e-8>n});s.option("OverflowMarkersVisible")&&this._addOverflowMarkers(k);var O=Mt.visual.ValueLabel.maybeCreate(r,A,{wrapper:k});if(O){var M;O.hideOrTrimOverflowed&&(M=x,!o&&n>1&&(M/=n)),r.pvBarLabel=O.override("calcTextFitInfo",function(e,n){var r=this.pvMark,i=r.textMargin();if(!(-0.000001>i)){var s=r.textAngle(),o=Math.sin(s),a=Math.abs(o)<1e-6,f=!a&&Math.abs(Math.cos(s))<1e-6;if(a||f&&u){var l,c,h,p=A.height(),d=A.width(),v=u?p:d,m=u?d:p,g=t.Text.measure(n,r.font()),y=.75*g.height,b=g.width,w=r.name(),E=r.textBaseline(),S=r.textAlign(),x="center"===w,T=!1;if(u)if(a){c=x||w===E;if(!c)return;T|=x&&"middle"!==E?y+i>v/2:y+2*i>v}else T|=y>v,h="center"===S,c=x,c||h||(c=o>=1e-6?"left"===S?"top"===w:"bottom"===w:"left"===S?"bottom"===w:"top"===w),c?(l=!x||h?v-2*i:(v-i)/2,T|=("middle"===E?y>m:y>m/2)||this.hideOverflowed&&b>l):T|=y>=Math.max(m,M);else T|=y>v,c=x||w===S,c?(l=x&&"center"!==S?(v-i)/2:v-2*i,T|=("middle"===E?y>m:y>m/2)||this.hideOverflowed&&b>l):T|=y>=Math.max(m,M);return{hide:T,widthMax:l}}}}).pvMark}},_barVerticalMode:function(){return null},_barDifferentialControl:function(){return null},_getV1Datum:function(e){var t=e.datum;if(t){var n=Object.create(t);n.percent=e.vars.value.percent,t=n}return t},_addOverflowMarkers:function(e){var t=this.axes.ortho;null!=t.option("FixedMax")&&(this.pvOverflowMarker=this._addOverflowMarker(!1,t.scale,e)),null!=t.option("FixedMin")&&(this.pvUnderflowMarker=this._addOverflowMarker(!0,t.scale,e))},_addOverflowMarker:function(e,t,n){var r,i=this.isOrientationVertical(),s=i?"bottom":"left",o=this.anchorOpposite(s),u=this.anchorOrthoLength(s),a=this.anchorLength(s),f=this._layoutInfo.paddings,l=e?t.min-f[s]:t.max+f[o];return r=e?i?0:Math.PI/2:i?Math.PI:-Math.PI/2,(new Mt.visual.Dot(this,this.pvBar.anchor("center"),{noSelect:!0,noHover:!0,noClick:!0,noDoubleClick:!0,noTooltip:!0,freePosition:!0,extensionId:e?"underflowMarker":"overflowMarker",wrapper:n})).intercept("visible",function(t){var n=this.delegateExtension();if(void 0!==n&&!n)return!1;var r=t.vars.value.value;if(null==r)return!1;var i=this.pvMark.scene.target[this.pvMark.index],o=i[s]+(r>0?i[u]:0);return e?l>o:o>l}).lock(o,null).lock("shapeSize").pvMark.shape("triangle").shapeRadius(function(){return Math.min(Math.sqrt(10),this.scene.target[this.index][a]/2)}).shapeAngle(r).lineWidth(1.5).strokeStyle("red").fillStyle("white")[s](function(){return l+(e?1:-1)*(this.shapeRadius()+2)})},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(e,t,n){function r(t){var r=new Mt.visual.Scene(i,{source:t}),s=t.key;r.vars.series=Xt.fromComplex(t),u.onNewScene(r,!1),n.forEach(function(t){var n=e.child(t.key),i=n&&n.child(s),a=new Mt.visual.Scene(r,{source:i}),f=a.vars.category=Xt.fromComplex(n);f.group=n,o.onNewScene(a,!0),u.onNewScene(a,!0)})}var i=new Mt.visual.Scene(null,{panel:this,source:e}),s=(e.childNodes,this.visualRoles),o=new Mt.visual.RoleVarHelper(i,s.value,{roleVar:"value",hasPercentSubVar:this.stacked}),u=new Mt.visual.RoleVarHelper(i,s.color,{roleVar:"color"});return t.forEach(r),i}}),e.type("pvc.BarAbstract",Mt.CategoricalAbstract).init(function(e){this.base(e);var t=this.parent;t&&(this._valueRole=t._valueRole)}).add({_initVisualRoles:function(){this.base(),this._addVisualRole("value",{isMeasure:!0,isRequired:!0,isPercent:this.options.stacked,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"value"}),this._valueRole=this.visualRoles.value},_getCategoryRoleSpec:function(){var e=this.base();return e.requireIsDiscrete=!0,e},_initData:function(){this.base.apply(this,arguments);var e=this.data;this._valueDim=e.dimensions(this._valueRole.firstDimensionName())}}),e.type("pvc.BarPanel",Mt.BarAbstractPanel).add({}),e.type("pvc.BarChart",Mt.BarAbstract).add({_animatable:!0,_trendable:!0,_allowV1SecondAxis:!0,_initPlotsCore:function(){var e=this.options,t=new Mt.visual.BarPlot(this),n=t.option("Trend");if(e.plot2){var r=new Mt.visual.PointPlot(this,{name:"plot2",fixed:{DataPart:"1"},defaults:{ColorAxis:2,LinesVisible:!0,DotsVisible:!0}});n||(n=r.option("Trend"))}this._trendable=!!n,n&&new Mt.visual.PointPlot(this,{name:"trend",fixed:{DataPart:"trend",TrendType:"none",ColorRole:"series",NullInterpolatioMode:"none"},defaults:{ColorAxis:2,LinesVisible:!0,DotsVisible:!1}})},_hasDataPartRole:function(){return!0},_createPlotPanels:function(e,t){var n=this.plots,r=n.bar,i=new Mt.BarPanel(this,e,r,Object.create(t));this.barChartPanel=i;var s=n.plot2;if(s){Mt.debug>=3&&this._log("Creating Point panel.");var o=new Mt.PointPanel(this,e,s,Object.create(t));i.pvSecondLine=o.pvLine,i.pvSecondDot=o.pvDot,o._applyV1BarSecondExtensions=!0}var u=n.trend;u&&(Mt.debug>=3&&this._log("Creating Trends Point panel."),new Mt.PointPanel(this,e,u,Object.create(t)))}}),e.type("pvc.NormalizedBarPanel",Mt.BarAbstractPanel).add({_barVerticalMode:function(){return"expand"}}),e.type("pvc.NormalizedBarChart",Mt.BarAbstract).add({_processOptionsCore:function(e){e.stacked=!0,this.base(e)},_getContinuousVisibleExtentConstrained:function(e,t,n){return"ortho"===e.type?{min:0,max:100,minLocked:!0,maxLocked:!0}:this.base(e,t,n)},_initPlotsCore:function(){new Mt.visual.NormalizedBarPlot(this)},_createPlotPanels:function(e,t){var n=this.plots.bar;this.barChartPanel=new Mt.NormalizedBarPanel(this,e,n,Object.create(t))}}),e.type("pvc.visual.legend.WaterfallBulletGroupScene",Mt.visual.legend.BulletGroupScene).init(function(t,n){n=e.set(n,"clickMode","none"),this.base(t,n),this.createItem(n)}).add({renderer:function(e){return null!=e&&(this._renderer=e),this._renderer},itemSceneType:function(){return Mt.visual.legend.WaterfallBulletItemScene}}),e.type("pvc.visual.legend.WaterfallBulletItemScene",Mt.visual.legend.BulletItemScene).init(function(t,n){this.base.apply(this,arguments);var r=Mt.visual.Interactive;this._ibits=r.Interactive|r.ShowsInteraction,this.color=e.get(n,"color"),this.vars.value=new Xt(null,e.get(n,"label"))}),e.type("pvc.WaterfallPanel",Mt.BarAbstractPanel).add({pvWaterfallLine:null,ruleData:null,_barDifferentialControl:function(){var e=this.chart._isFalling;return function(t){if(e&&!this.index)return 1;var n=t.vars.category.group,r=n._isFlattenGroup&&!n._isDegenerateFlattenGroup;return r?-2:e?-1:1}},_creating:function(){var e=this._getLegendBulletRootScene();if(e){var t=e.firstChild;if(t&&!t.hasRenderer()){var n={drawRule:!0,drawMarker:!1,rulePvProto:new _t};this.extend(n.rulePvProto,"line",{constOnly:!0}),t.renderer(new Mt.visual.legend.BulletItemDefaultRenderer(n))}}},_createCore:function(){this.base();var n=this.chart,r=this.isOrientationVertical(),i=r?"bottom":"left",s=this.anchorOrtho(i),o=this._buildRuleScene(),u=n.axes.ortho.scale,a=u(0),f=n.axes.ortho.sceneScale({sceneVarName:"value"}),l=n.axes.base.sceneScale({sceneVarName:"category"}),c=n.axes.base.scale,h=this.barWidth/2,p=this.barWidth,d=this.barStepWidth,v=n._isFalling,m=n._waterColor;if(this.plot.option("AreasVisible")){var g=t.Colors.category10(),y=this._buildWaterGroupScene(),b=u.range(),w=.04*(b[1]-b[0]);this.pvWaterfallGroupPanel=(new Mt.visual.Panel(this,this.pvPanel,{extensionId:"group"})).lock("data",y.childNodes).pvMark.zOrder(-1).fillStyle(function(){return g(0).alpha(.15)})[s](function(e){var t=e.vars.category;return c(t.valueLeft)-d/2})[this.anchorLength(i)](function(e){var t=e.vars.category,n=Math.abs(c(t.valueRight)-c(t.valueLeft));return n+d})[i](function(e){var t=e.vars.value,r=u(t.valueBottom)-w/2;return n.animate(a,r)})[this.anchorOrthoLength(i)](function(e){var t=e.vars.value,r=u(t.valueTop)-u(t.valueBottom)+w;return n.animate(0,r)})}this.pvBar.sign.override("baseColor",function(e,n){var r=this.base(e,n);return"fill"!==n||e.vars.category.group._isFlattenGroup?r:t.color(r).alpha(.5)}),this.pvWaterfallLine=(new Mt.visual.Rule(this,this.pvPanel,{extensionId:"line",noTooltip:!1,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1})).lock("data",o.childNodes).optional("visible",function(e){return v&&!!e.previousSibling||!v&&!!e.nextSibling}).optional(i,function(e){return a+n.animate(0,f(e)-a)}).optional(this.anchorLength(i),d+p).optional(s,v?function(e){return l(e)-d-h}:function(e){return l(e)-h}).override("defaultColor",e.fun.constant(m)).pvMark.antialias(!0).lineCap("butt"),this.plot.option("TotalValuesVisible")&&(this.pvWaterfallLabel=(new Mt.visual.Label(this,this.pvWaterfallLine,{extensionId:"lineLabel"})).intercept("visible",function(e){return e.vars.category.group._isFlattenGroup?!1:v||!!e.nextSibling}).pvMark[i](function(e){return a+n.animate(0,f(e)-a)})[this.anchorOrtho(i)](l).textAlign(r?"center":"left").textBaseline(function(e){if(!r)return"middle";var t=e.vars.direction;if(null==t)return"bottom";var n=!v;return n===("up"===t)?"bottom":"top"}).textStyle(t.Color.names.darkgray.darker(2)).textMargin(5).text(function(e){return e.vars.value.label}))},_buildRuleScene:function(){function t(e){var t=e.group,n=new Mt.visual.Scene(s,{source:t}),r=n.vars.category=Xt.fromComplex(t);r.group=t;var i=e.offset;n.vars.value=new Xt(i,this.chart._valueDim.format(i))}function n(e,t){var n=e.vars.value.value;e.vars.direction=t&&r!==n?i===n>r?"up":"down":null,r=n}var r,i,s=new Mt.visual.Scene(null,{panel:this,source:this.visibleData({ignoreNulls:!1})}),o=this.chart._ruleInfos;if(o){o.forEach(t,this);var u=e.query(s.childNodes);i=!this.chart._isFalling,i||(u=u.reverse()),u.each(n,this)}return s},_buildWaterGroupScene:function(){function t(e,r){var i=e.children().where(function(e){return""!==e.key});if(i.next()){r&&n(e,r),r++;do t(i.item,r);while(i.next())}}function n(e,t){var n=new Mt.visual.Scene(f,{source:e}),u=n.vars.category=Xt.fromComplex(e);u.group=e,u.level=t;var a,l,c,h,p,d=n.vars.value={},v=s[e.absKey],m=v.offset,g=v.range,y=-g.min+g.max;o?(a=i(e),l=s[a.absKey],c=v.group.value,h=l.group.value,p=m-g.max):(a=r(e),l=s[a.absKey],c=l.group.value,h=v.group.value,p=m-g.max),u.valueLeft=c,u.valueRight=h,d.valueHeight=y,d.valueBottom=p,d.valueTop=p+y}function r(e){var t=e.childNodes,n=t&&t[0];return n?r(n):e}function i(e){var t=e.childNodes,n=t&&t[t.length-1];return n?i(n):e}var s,o,u=this.chart,a=u._catRole.select(u.partData(this.dataPartValue),{visible:!0}),f=new Mt.visual.Scene(null,{panel:this,source:a}),l=u._ruleInfos;return l&&(s=e.query(l).object({name:function(e){return e.group.absKey}}),o=u._isFalling,t(a,0)),f}}),e.type("pvc.WaterfallChart",Mt.BarAbstract).init(function(e){this.base(e);var t=this.parent;t&&(this._isFalling=t._isFalling)}).add({_animatable:!0,_isFalling:!0,_ruleInfos:null,_waterColor:t.color("#1f77b4").darker(),_processOptionsCore:function(e){e.stacked=!0,e.baseAxisComposite=!1,this.base(e),e.plot2=!1},_initPlotsCore:function(){var e=(this.options,new Mt.visual.WaterfallPlot(this));this._isFalling="down"===e.option("Direction");var t=this._isFalling?"FlattenDfsPre":"FlattenDfsPost";this._catRole.setTraversalMode(Mt.visual.TraversalMode[t]),this._catRole.setRootLabel(e.option("AllCategoryLabel"))},_initLegendScenes:function(e){var n=this.plots.water,r=Mt.makeExtensionAbsId("line",n.extensionPrefixes),i=this._getConstantExtension(r,"strokeStyle");i&&(this._waterColor=t.color(i));var s=e._getBulletRootScene();new Mt.visual.legend.WaterfallBulletGroupScene(s,{extensionPrefix:Mt.buildIndexedId("",1),label:n.option("TotalLineLabel"),color:this._waterColor}),this.base(e)},_reduceStackedCategoryValueExtent:function(e,t,n){var r,i=e?e.offset:0,s=t.min+t.max;if(!e)return t?(r=i+s,this._ruleInfos=[{offset:r,group:n,range:t}],{min:t.min,max:t.max,offset:r}):null;var o=this._isFalling,u=n._isFlattenGroup&&!n._isDegenerateFlattenGroup;if(u){var a=-t.min;if(a>0){var f=i+a;f>e.max&&(e.max=f)}var l=-t.max;if(0>l){var c=i+l;c<e.min&&(e.min=c)}}else{var h=o?-1:1;r=e.offset=i+h*s,r>e.max?e.max=r:r<e.min&&(e.min=r)}return this._ruleInfos.push({offset:o?i:e.offset,group:n,range:t}),e},_createPlotPanels:function(t,n){this.wfChartPanel=new Mt.WaterfallPanel(this,t,this.plots.water,e.create(n,{waterfall:this.options.waterfall}))}}),e.type("pvc.PointPanel",Mt.CategoricalAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.linesVisible=n.option("LinesVisible"),this.dotsVisible=n.option("DotsVisible"),this.areasVisible=n.option("AreasVisible"),!this.linesVisible&&!this.dotsVisible&&!this.areasVisible&&(this.linesVisible=!0,n.option.specify({LinesVisible:!0})),this.visualRoles.value=e.visualRole(n.option("OrthoRole"))}).add({pvLine:null,pvArea:null,pvDot:null,pvLabel:null,pvScatterPanel:null,_creating:function(){var n=this.defaultLegendGroupScene();if(n&&!n.hasRenderer()){var r=n.colorAxis,i=e.nullyTo(r.option("LegendDrawMarker",!0),this.dotsVisible||this.areasVisible),s=!i||e.nullyTo(r.option("LegendDrawLine",!0),this.linesVisible&&!this.areasVisible);if(i||s){var o={drawMarker:i,drawRule:s};if(i){var u=r.option("LegendShape",!0);this.dotsVisible?(u||(u="circle"),o.markerPvProto=(new t.Dot).lineWidth(1.5,Mt.extensionTag).shapeSize(12,Mt.extensionTag)):o.markerPvProto=new _t,o.markerShape=u,this._applyV1BarSecondExtensions&&this.chart.extend(o.markerPvProto,"barSecondDot",{constOnly:!0}),this.extend(o.markerPvProto,"dot",{constOnly:!0})}s&&(o.rulePvProto=(new t.Line).lineWidth(1.5,Mt.extensionTag),this._applyV1BarSecondExtensions&&this.chart.extend(o.rulePvProto,"barSecondLine",{constOnly:!0}),this.extend(o.rulePvProto,"line",{constOnly:!0})),n.renderer(new Mt.visual.legend.BulletItemDefaultRenderer(o))}}},_createCore:function(){this.base();var n=this,r=this.chart,i=this.stacked,s=this.dotsVisible,o=this.areasVisible,u=this.linesVisible,a=this.isOrientationVertical()?"bottom":"left",f=this.axes.base,l=f.domainItems(),c=f.role.grouping.isDiscrete(),h=this.visibleData({ignoreNulls:!1}),p=this._buildScene(h,l,c);this.pvPanel.zOrder(o?-7:1),this.pvScatterPanel=(new Mt.visual.Panel(this,this.pvPanel,{extensionId:"panel"})).lock("data",p.childNodes).pvMark;var d,v=o&&u&&!i?.5:null;this.compatVersion()<=1&&(d=i?function(e){return function(t){return e.call(this,t.vars.value.rawValue)}}:function(e){return function(t){var n={category:t.vars.category.rawValue,value:t.vars.value.rawValue},r=Object.create(this);return r.index=t.dataIndex,e.call(r,n)}});var m=c&&i?function(e){return!e.isNull||e.isIntermediate}:function(e){return!e.isNull},g=r.selectableByFocusWindow();this.pvArea=(new Mt.visual.Area(this,this.pvScatterPanel,{extensionId:"area",noTooltip:!1,wrapper:d,noSelect:g,noRubberSelect:!0,showsSelection:!g})).lockMark("data",function(e){return e.childNodes}).lockMark("visible",m).override("x",function(e){return e.basePosition}).override("y",function(e){return e.orthoPosition}).override("dy",function(e){return r.animate(0,e.orthoLength)}).override("color",function(e,t){return o?this.base(e,t):null}).override("baseColor",function(e,t){var n=this.base(e,t);return!this._finished&&n&&null!=v&&(n=n.alpha(v)),n}).override("dimColor",function(e,t){return i?Mt.toGrayScale(e,1,null,null).brighter():this.base(e,t)}).lock("events",o?"painted":"none").pvMark;var y=s&&!u&&!o,b=i&&o,w=["line"];this._applyV1BarSecondExtensions&&w.push({abs:"barSecondLine"});var E=!y&&m,S=o&&!u;this.pvLine=(new Mt.visual.Line(this,this.pvArea.anchor(this.anchorOpposite(a)),{extensionId:w,freePosition:!0,wrapper:d,noTooltip:S,noDoubleClick:S,noClick:S,noHover:S,noSelect:S||g,showsSelection:!g})).lockMark("visible",E).override("defaultColor",function(e,t){var n=this.base(e,t);return!this._finished&&b&&n&&(n=n.darker(.6)),n}).override("normalColor",function(e,t){return u?t:null}).override("interactiveColor",function(e,t,n){return u||this.mayShowAnySelected(e)||this.mayShowActive(e)?this.base(e,t,n):null}).override("baseStrokeWidth",function(e){var t;return u&&(t=this.base(e)),null==t?1.5:t}).intercept("strokeDasharray",function(e){var t=this.delegateExtension();if(void 0===t){var n=e.isInterpolated;if(!n){var r=e.nextSibling;n=r&&r.isIntermediate&&r.isInterpolated;if(!n){var i=e.previousSibling;n=i&&e.isIntermediate&&i.isInterpolated}}t=n?". ":null}return t}).pvMark;var x=!(o&&c&&i);w=["dot"],this._applyV1BarSecondExtensions&&w.push({abs:"barSecondDot"}),this.pvDot=(new Mt.visual.Dot(this,this.pvLine,{extensionId:w,freePosition:!0,wrapper:d})).intercept("visible",function(e){return!e.isNull&&!e.isIntermediate&&this.delegateExtension(!0)}).override("color",function(e,n){if(!s){var r=e.isActive||!x&&e.isSingle||x&&e.isAlone;if(!r)return Mt.invisibleFill}var i=this.base(e,n);return e.isInterpolated&&"fill"===n?i&&t.color(i).brighter(.5):i}).override("defaultColor",function(e,t){var n=this.base(e,t);return!this._finished&&b&&n&&(n=n.darker(.6)),n}).override("baseSize",function(t){if(!s){var r=t.isActive||!x&&t.isSingle||x&&t.isAlone;if(r&&!t.isActive){var i=Math.max(n.pvLine.lineWidth(),.2)/2;return e.sqr(i)}}return t.isInterpolated?.8*this.base(t):this.base(t)}).pvMark;var T=Mt.visual.ValueLabel.maybeCreate(this,this.pvDot,{wrapper:d});T&&(this.pvLabel=T.pvMark)},renderInteractive:function(){this.pvScatterPanel.render()},_buildScene:function(t,n,r){function i(e){for(var t,n=[],r=e.childNodes,i=0,u=null,a=0,f=0,l=r.length;l>a;a++,f++){var c=r[f],p=2*a;n[p]=c,s.call(this,t,c,S&&S[p]),c.isAlone&&!u&&(u=c),c.isNull||i++;if(t){var d=o.call(this,e,t,c,f,S&&S[p-1]);d&&(n[p-1]=d,f++)}t=c}1===i&&u&&1===l&&(u.isSingle=!0),h&&(S=n)}function s(e,t,n){var i=t.vars.value.accValue;n&&(t.isNull&&!r?i=b:i+=n.vars.value.accValue,t.vars.value.accValue=i),t.basePosition=E(t),t.orthoPosition=w,t.orthoLength=y(i)-w;var s=!e||e.isNull,o=s&&!t.isNull;if(o){var u=t.nextSibling;o=!u||u.isNull}t.isAlone=o,t.isSingle=!1}function o(e,t,n,i,s){var o=t.isNull||n.isNull;if(o&&!this.areasVisible)return null;var u,a,f;if(o){if(s&&r){var l=s.vars.value;a=l.accValue,u=l[c.name]}else u=a=b;f=h&&r?n.basePosition-E.range().step/2:t.isNull?n.basePosition:t.basePosition}else{var p=t.vars.value,v=n.vars.value;u=(v.value+p.value)/2,a=(v.accValue+p.accValue)/2,f=(n.basePosition+t.basePosition)/2}var g=new Mt.visual.Scene(e,{index:i,source:n.source});g.dataIndex=n.dataIndex,g.vars.category=n.vars.category;var S=new Xt(u,m.format(u),u);return S.accValue=a,g.vars.value=S,g.ownerScene=n,g.isInterpolated=n.isInterpolated,g.isIntermediate=!0,g.isSingle=!1,g.isNull=o,g.isAlone=o&&n.isNull&&t.isNull,g.basePosition=f,g.orthoPosition=w,g.orthoLength=y(a)-w,d.onNewScene(g,!0),g}function u(e){for(var t,n,r=e.childNodes,i=r.length;i&&(t=r[0]).isNull;){n=t.nextSibling;if(n&&!n.isNull)break;e.removeAt(0),i--}for(;i&&(t=r[i-1]).isNull;){n=t.previousSibling;if(n&&!n.isNull)break;e.removeAt(i-1),i--}}var a=new Mt.visual.Scene(null,{panel:this,source:t}),f=this.chart,l=this.visualRoles.series,c=this.visualRoles.value,h=this.stacked,p=new Mt.visual.RoleVarHelper(a,c,{roleVar:"value",hasPercentSubVar:h}),d=new Mt.visual.RoleVarHelper(a,this.visualRoles.color,{roleVar:"color"}),v=c.firstDimensionName(),m=t.owner.dimensions(v),g=l.isBound()?l.flatten(this.partData(),{visible:!0,isNull:f.options.ignoreNulls?!1:null}):null,y=this.axes.ortho.scale,b=e.scope(function(){var e=y.domain(),t=e[0],n=e[1];return t*n>=0?t>=0?t:n:0}),w=y(b),E=this.axes.base.sceneScale({sceneVarName:"category"});(g?g.children():e.query([null])).each(function(r){var i=new Mt.visual.Scene(a,{source:r||t});i.vars.series=Xt.fromComplex(r),d.onNewScene(i,!1),n.forEach(function(n,s){var o=t.child(n.key),u=o;u&&r&&(u=u.child(r.key));var a=new Mt.visual.Scene(i,{source:u});a.dataIndex=s,a.vars.category=Xt.fromComplex(o),p.onNewScene(a,!0);var f=a.vars.value,l=f.value;f.accValue=null!=l?l:b,d.onNewScene(a,!0);var c=null!=u&&u.datums().prop("isInterpolated").any(e.truthy);a.isInterpolated=c,a.isNull=null==l,a.isIntermediate=!1},this)},this);var S,x=a.children().reverse().array();return x.forEach(i,this),x.forEach(u,this),a}}),e.type("pvc.PointAbstract",Mt.CategoricalAbstract).add({_animatable:!0,_trendable:!0,_processOptionsCore:function(e){e.panelSizeRatio=1,this.base(e)},_hasDataPartRole:function(){return!0},_initVisualRoles:function(){this.base(),this._addVisualRole("value",{isMeasure:!0,isRequired:!0,isPercent:this.options.stacked,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"value"})},_initPlotsCore:function(){var e=this.options,t=this._createPointPlot(),n=t.option("Trend");if(e.plot2){var r=new Mt.visual.PointPlot(this,{name:"plot2",fixed:{DataPart:"1"},defaults:{ColorAxis:2,LinesVisible:!0,DotsVisible:!0}});n||(n=r.option("Trend"))}this._trendable=!!n,n&&new Mt.visual.PointPlot(this,{name:"trend",fixed:{DataPart:"trend",TrendType:"none",ColorRole:"series",NullInterpolatioMode:"none"},defaults:{ColorAxis:2,LinesVisible:!0,DotsVisible:!1}})},_initAxes:function(e){this.base(e);var t=this.axesByType.base;t&&t.forEach(function(e){var t="discrete"===e.scaleType;t||e.option.defaults({Offset:.01})}),t=this.axesByType.ortho,t&&t.forEach(function(e){e.option.defaults({Offset:.04})})},_createPlotPanels:function(e,t){var n=this.plots,r=n.point;this.scatterChartPanel=new Mt.PointPanel(this,e,r,Object.create(t));var i=n.plot2;i&&(Mt.debug>=3&&this._log("Creating second Point panel."),new Mt.PointPanel(this,e,i,Object.create(t)));var s=n.trend;s&&(Mt.debug>=3&&this._log("Creating Trends Point panel."),new Mt.PointPanel(this,e,s,Object.create(t)))},defaults:{tooltipOffset:10}}),e.type("pvc.DotChart",Mt.PointAbstract).add({_createPointPlot:function(){return new Mt.visual.PointPlot(this,{fixed:{DotsVisible:!0}})}}),e.type("pvc.LineChart",Mt.PointAbstract).add({_createPointPlot:function(){return new Mt.visual.PointPlot(this,{fixed:{LinesVisible:!0}})}}),e.type("pvc.AreaChart",Mt.PointAbstract).add({_createPointPlot:function(){return new Mt.visual.PointPlot(this,{fixed:{AreasVisible:!0}})}}),Mt.mStackedLineChart=e.type("pvc.StackedLineChart",Mt.PointAbstract).add({_createPointPlot:function(){return new Mt.visual.PointPlot(this,{fixed:{LinesVisible:!0,Stacked:!0}})}}),e.type("pvc.StackedDotChart",Mt.PointAbstract).add({_createPointPlot:function(){return new Mt.visual.PointPlot(this,{fixed:{DotsVisible:!0,Stacked:!0}})}}),Mt.mStackedAreaChart=e.type("pvc.StackedAreaChart",Mt.PointAbstract).add({_createPointPlot:function(){return new Mt.visual.PointPlot(this,{fixed:{AreasVisible:!0,Stacked:!0},defaults:{LinesVisible:!0}})}}),e.type("pvc.HeatGridPanel",Mt.CategoricalAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.axes.size=e._getAxis("size",n.option("SizeAxis")-1);var i=this.visualRoles,s=n.option("SizeRole");i.size=e.visualRole(s),this.useShapes=n.option("UseShapes"),this.shape=n.option("Shape"),this.nullShape=n.option("NullShape")}).add({defaultBorder:1,nullBorder:2,selectedBorder:2,_createCore:function(){var t=this;t.base();var n=t._calcCellSize(),r=t.isOrientationVertical()?"bottom":"left",i=Mt.BasePanel.relativeAnchor[r],s=Mt.BasePanel.parallelLength[r],o=Mt.BasePanel.orthogonalLength[r],u=t.visualRoles.series.flatten(t.partData(),{visible:!0,isNull:t.chart.options.ignoreNulls?!1:null}),a=t._buildScene(t.visibleData({ignoreNulls:!1}),u,n),f=a.isColorBound,l=a.isSizeBound,c=t._buildSignsWrapper(a),h=t.compatVersion()<=1,p=this.axes.base.scale,d=this.axes.ortho.scale,v=p.range().step,m=d.range().step,g=v/2,y=m/2,b=(new Mt.visual.Panel(t,t.pvPanel)).pvMark.data(a.childNodes)[r](function(e){return d(e.vars.series.value)-y})[o](m),w=["panel"];h&&w.push("");var E={extensionId:w,wrapper:c};if(!t.useShapes){var S=!1;e.copy(E,{noSelect:S,noHover:S,noClick:S,noDoubleClick:S,freeColor:S,noTooltip:h})}t.pvHeatGrid=(new Mt.visual.Panel(t,b,E)).pvMark.lock("data",function(e){return e.childNodes}).lock(i,function(e){return p(e.vars.category.value)-g}).lock(s,v).antialias(!1),t.shapes=t.useShapes?t._createShapesHeatMap(n,c,f,l):t._createNoShapesHeatMap(f),t.valuesVisible&&!t.valuesMask&&(t.valuesMask=t._getDefaultValuesMask(f,l));var x=Mt.visual.ValueLabel.maybeCreate(t,t.pvHeatGrid,{wrapper:c});x&&(t.pvHeatGridLabel=x.pvMark)},_calcCellSize:function(){var e=this.axes.x.scale,t=this.axes.y.scale,n=(e.max-e.min)/e.domain().length,r=(t.max-t.min)/t.domain().length;if(!this.isOrientationVertical()){var i=n;n=r,r=i}return{width:n,height:r}},_buildSignsWrapper:function(t){if(this.compatVersion()>1)return null;var n=e.query(t.childNodes).object({name:function(e){return""+e.vars.series.value},value:function(t){return e.query(t.childNodes).object({name:function(e){return""+e.vars.category.value},value:function(e){var t=e.vars.color;return t?""+t.value:null}})}});return function(e){return function(t){var r=n[t.vars.series.value],i=t.vars.category.rawValue,s=Object.create(this.parent),o=Object.create(this);o.parent=s;var u=t.childIndex(),a=t.parent.childIndex();return s.index=u,o.index=a,e.call(o,r,i)}}},_getDefaultValuesMask:function(e,t){var n=this.visualRoles,r=e?"color":t?"size":null;if(r){var i=n[r].firstDimensionName();return"{#"+i+"}"}},_createNoShapesHeatMap:function(e){var t=this._buildGetBaseFillColor(e);return this.pvHeatGrid.sign.override("defaultColor",function(e,n){return"stroke"===n?null:t.call(this.pvMark,e)}).override("interactiveColor",function(e,t,n){return e.isActive?t.alpha(.6):e.anySelected()&&!e.isSelected()?this.dimColor(t,n):this.base(e,t,n)}).override("dimColor",function(e){return Mt.toGrayScale(e,.6)}).pvMark.lineWidth(1.5)},_buildGetBaseFillColor:function(t){var n=this.axes.color;return t?n.sceneScale({sceneVarName:"color"}):e.fun.constant(n.option("Unbound"))},_createShapesHeatMap:function(t,n,r,i){var s=this,o=s._calcDotAreaRange(t);i&&s.axes.size.setScaleRange(o);var u={extensionId:"dot",freePosition:!0,activeSeriesAware:!1,wrapper:n,tooltipArgs:s._buildShapesTooltipArgs(r,i)},a=(new Mt.visual.DotSizeColor(s,s.pvHeatGrid,u)).override("dimColor",function(e){return Mt.toGrayScale(e,.6)}).pvMark;return i||a.sign.override("defaultSize",e.fun.constant(o.max)),a},_calcDotAreaRange:function(t){var n=t.width,r=t.height,i=Math.min(n,r)/2;"diamond"===this.shape&&(i/=Math.SQRT2),i-=2;var s=e.sqr(i),o=12,u=s-o;return 1>=u&&(s=Math.max(s,2),o=1,u=s-o,Mt.debug>=2&&this._warn("Using rescue mode dot area calculation due to insufficient space.")),{min:o,max:s,span:u}},_buildShapesTooltipArgs:function(e,t){var n=this.chart;if(this.compatVersion()<=1&&this.showsTooltip()){var r=n.options,i=r.customTooltip;i||(i=function(e,t,n){return null!=n&&void 0!==n[0]?n.join(", "):n});var s=this.visualRoles,o=s.series.grouping.dimensionNames(),u=s.category.grouping.dimensionNames();return{buildTooltip:r.isMultiValued?function(n){var s=n.scene.group;if(!s)return"";var a=Mt.data.Complex.values(s,o),f=Mt.data.Complex.values(s,u),l=[],c=n.scene.vars;return t&&(l[r.sizeValIdx||0]=c.size.value),e&&(l[r.colorValIdx||0]=c.color.value),i.call(r,a,f,l)}:function(t){var n=t.scene.vars,s=n.series.rawValue,o=n.category.rawValue,u=n[e?"color":"size"],a=u?u.value:null;return i.call(r,s,o,a)}}}},renderInteractive:function(){this.pvPanel.render()},_buildScene:function(e,t,n){function r(e){var t=new Mt.visual.Scene(o,{source:e});t.vars.series=Xt.fromComplex(e),u.forEach(function(n){i.call(s,t,n,e)})}function i(t,n,r){var i=e.child(n.key).child(r.key),s=new Mt.visual.Scene(t,{source:i});s.vars.category=Xt.fromComplex(n),f.onNewScene(s,!0),l.onNewScene(s,!0)}var s=this,o=new Mt.visual.Scene(null,{panel:s,source:e}),u=e.childNodes,a=s.visualRoles,f=new Mt.visual.RoleVarHelper(o,a.color,{roleVar:"color"}),l=new Mt.visual.RoleVarHelper(o,a.size,{roleVar:"size"});return o.cellSize=n,t.children().each(r),o}}),e.type("pvc.HeatGridChart",Mt.CategoricalAbstract).add({_allowColorPerCategory:!0,_interpolatable:!1,_axisCreateIfUnbound:{color:!0},_processOptionsCore:function(t){this.base(t),e.set(t,"legend",!1,"panelSizeRatio",1);var n="value",r="value2";if(this.compatVersion()<=1){switch(this.options.colorValIdx){case 0:n="value";break;case 1:n="value2";break;default:n="value"}switch(this.options.sizeValIdx){case 0:r="value";break;case 1:r="value2";break;default:r="value"}}this._colorDimName=n,this._sizeDimName=r},_getCategoryRoleSpec:function(){var e=this.base();return e.requireIsDiscrete=!0,e},_getColorRoleSpec:function(){return{isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:this._colorDimName}},_initVisualRoles:function(){this.base(),this._addVisualRole("size",{isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:this._sizeDimName})},_initPlotsCore:function(){new Mt.visual.HeatGridPlot(this)},_createPlotPanels:function(e,t){var n=this.plots.heatGrid;this.heatGridChartPanel=new Mt.HeatGridPanel(this,e,n,Object.create(t))},defaults:{colorValIdx:0,sizeValIdx:1,measuresIndexes:[2],axisOffset:0,plotFrameVisible:!1,colorNormByCategory:!0,numSD:2}}),e.type("pvc.MetricXYAbstract",Mt.CartesianAbstract).add({_processOptionsCore:function(e){this.base(e),e.panelSizeRatio=1},_initVisualRoles:function(){this.base(),this._addVisualRole("x",{isMeasure:!0,isRequired:!0,requireSingleDimension:!0,requireIsDiscrete:!1,defaultDimension:"x",dimensionDefaults:{valueType:this.options.timeSeries?Date:Number}}),this._addVisualRole("y",{isMeasure:!0,isRequired:!0,requireSingleDimension:!0,requireIsDiscrete:!1,defaultDimension:"y",dimensionDefaults:{valueType:Number}})},_generateTrendsDataCell:function(t,n,r){function i(n){var r=function(e){return e.atoms[l].value},i=function(e){return e.atoms[c].value},s=n.datums().sort(null,r).array(),o=e.create(a,{rows:e.query(s),x:r,y:i}),u=f.model(o);u&&s.forEach(function(s,o){var f=r(s);if(f){var v=u.sample(f,i(s),o);if(null!=v){var m=e.set(Object.create(n.atoms),l,f,c,v,d,p);t.push(new Mt.data.TrendDatum(h.owner,m,a))}}})}var s=this._serRole,o=this.visualRoles.x,u=n.role,a=n.trend,f=a.info;this._warnSingleContinuousValueRole(u);var l=o.firstDimensionName(),c=u.firstDimensionName(),h=this.visibleData(n.dataPartValue,{baseData:r}),p=this._getTrendDataPartAtom(),d=p.dimension.name;(s.isBound()?h.children():e.query([h])).each(i,this)}}),e.type("pvc.data.MetricPointChartTranslationOper").add({_meaLayoutRoles:["x","y","color","size"],configureType:function(){var e=[],t=[];this.collectFreeDiscreteAndConstinuousIndexes(t,e);var n,r=[],i=e.length;if(i>0){for(var s=this._meaLayoutRoles.length,o=0;s>o&&r.length<i;)this._getUnboundRoleDefaultDimNames(this._meaLayoutRoles[o],1,r),o++;n=r.length,n>0&&(e.length=n,this.defReader({names:r,indexes:e}))}i=t.length,i>0&&(r.length=0,this._getUnboundRoleDefaultDimNames("series",i,r),n=r.length,n>0&&(t.length=n,this.defReader({names:r,indexes:t})))}}),e.type("pvc.MetricPointPanel",Mt.CartesianAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.axes.size=e._getAxis("size",(n.option("SizeAxis")||0)-1);var i=n.option("SizeRole");this.visualRoles.size=i?e.visualRole(i):null,this.linesVisible=n.option("LinesVisible"),this.dotsVisible=n.option("DotsVisible"),!this.linesVisible&&!this.dotsVisible&&(this.linesVisible=!0,n.option.specify({LinesVisible:!0})),this.offsetPaddings||(this.offsetPaddings=new Ht(.01))}).add({sizeAxisRatio:.2,sizeAxisRatioTo:"minWidthHeight",autoPaddingByDotSize:!0,_v1DimRoleName:{category:"x",value:"y"},_creating:function(){var n=this.defaultLegendGroupScene();if(n&&!n.hasRenderer()){var r=n.colorAxis,i=e.nullyTo(r.option("LegendDrawMarker",!0),this.dotsVisible),s=e.nullyTo(r.option("LegendDrawLine",!0),this.linesVisible);if(i||s){var o={drawMarker:i,drawRule:s};i&&(o.markerShape=r.option("LegendShape",!0)||"circle",o.markerPvProto=(new t.Dot).lineWidth(1.5,Mt.extensionTag).shapeSize(12,Mt.extensionTag),this.extend(o.markerPvProto,"dot",{constOnly:!0})),s&&(o.rulePvProto=(new t.Line).lineWidth(1.5,Mt.extensionTag),this.extend(o.rulePvProto,"line",{constOnly:!0})),n.renderer(new Mt.visual.legend.BulletItemDefaultRenderer(o))}}},_getRootScene:function(){return e.lazy(this,"_rootScene",this._buildScene,this)},_calcLayout:function(e){var t=this._getRootScene();t.isSizeBound&&this.axes.size.setScaleRange(this._calcDotAreaRange(e)),this._calcAxesPadding(e,t)},_getDotDiameterRefLength:function(t){var n=t.clientSize,r=t.paddings;switch(this.sizeAxisRatioTo){case"minWidthHeight":return Math.min(n.width+r.width,n.height+r.height);case"width":return n.width+r.width;case"height":return n.height+r.height}return Mt.debug>=2&&this._log(e.format("Invalid option 'sizeAxisRatioTo' value. Assuming 'minWidthHeight'.",[this.sizeAxisRatioTo])),this.sizeRatioTo="minWidthHeight",this._getDotDiameterRefLength(t)},_calcDotRadiusRange:function(e){var t=this._getDotDiameterRefLength(e),n=this.sizeAxisRatio/2*t,r=Math.sqrt(12);return{min:r,max:n}},_calcDotAreaRange:function(t){var n=this._calcDotRadiusRange(t);"diamond"===this.shape&&(n.max/=Math.SQRT2,n.min/=Math.SQRT2);var r=e.sqr(n.max),i=e.sqr(n.min),s=r-i;return 1>=s&&(r=Math.max(r,2),i=1,s=r-i,n={min:Math.sqrt(i),max:Math.sqrt(r)},Mt.debug>=3&&this._log("Using rescue mode dot area calculation due to insufficient space.")),{min:i,max:r,span:s}},_calcAxesPadding:function(t,n){var r;if(this.autoPaddingByDotSize){var i=this.axes,s=t.clientSize,o=t.paddings;r={},i.x.setScaleRange(s.width),i.y.setScaleRange(s.height);var u=this.isOrientationVertical(),a=i.x.sceneScale({sceneVarName:u?"x":"y"}),f=i.y.sceneScale({sceneVarName:u?"y":"x"}),l=i.x.scale.max,c=i.y.scale.max,h=n.isSizeBound,p=h?i.size.scale:null;if(!p){var d=e.number.as(this._getExtension("dot","shapeRadius"),0);0>=d?(d=e.number.as(this._getExtension("dot","shapeSize"),0),0>=d&&(d=12)):d=e.sqr(d),p=e.fun.constant(d)}r={};var v;this.offsetPaddings&&(v={},Ht.names.forEach(function(e){var t=Mt.BasePanel.orthogonalLength[e];v[e]=(this.offsetPaddings[e]||0)*(s[t]+o[t])},this));var m=function(e,t){v&&(t+=v[e]||0),0>t&&(t=0);var n=r[e];(null==n||t>n)&&(r[e]=t)},g=function(e){var t=a(e),n=f(e),r=Math.sqrt(p(h?e.vars.size.value:0));m("left",r-t),m("bottom",r-n),m("right",t+r-l),m("top",n+r-c)};n.children().selectMany(function(e){return e.childNodes}).each(g)}else r=this._calcRequestPaddings(t);t.requestPaddings=r},_createCore:function(){var t=this;t.base();var n=t.chart,r=t._getRootScene(),i=t._buildSignsWrapper(),s=t.compatVersion()<=1;this._finalizeScene(r),t.pvPanel.zOrder(1),this.pvScatterPanel=(new Mt.visual.Panel(t,t.pvPanel,{extensionId:"panel"})).lock("data",r.childNodes).pvMark;var o=n.selectableByFocusWindow(),u=r.isColorBound&&this.visualRoles.color.isDiscrete(),a=(new Mt.visual.Line(t,t.pvScatterPanel,{extensionId:"line",wrapper:i,noTooltip:!1,noSelect:o,showsSelection:!o})).lockMark("data",function(e){return e.childNodes}).intercept("visible",function(e){if(!t.linesVisible)return!1;var n=this.delegateExtension();return null==n&&(n=!e.isNull&&(!r.isSizeBound&&!r.isColorBound||r.isSizeBound&&null!=e.vars.size.value||r.isColorBound&&(u||null!=e.vars.color.value))),n}).override("x",function(e){return e.basePosition}).override("y",function(e){return e.orthoPosition});t.pvLine=a.pvMark;var f=(new Mt.visual.DotSizeColor(t,t.pvLine,{extensionId:"dot",wrapper:i,activeSeriesAware:t.linesVisible})).override("x",function(e){return e.basePosition}).override("y",function(e){return e.orthoPosition}).override("color",function(e,n){return t.dotsVisible||e.isActive||e.isSingle?this.base(e,n):Mt.invisibleFill});r.isSizeBound?t.autoPaddingByDotSize&&"minWidthHeight"===t.sizeAxisRatioTo||t.pvPanel.borderPanel.overflow("hidden"):f.override("baseSize",function(n){if(!t.dotsVisible&&n.isSingle){var r=Math.max(t.pvLine.scene[this.pvMark.index].lineWidth,.2)/2;return e.sqr(r)}return this.base(n)}),t.pvDot=f.pvMark,t.pvDot.rubberBandSelectionMode="center";if(Mt.visual.ValueLabel.isNeeded(t)){var l=["label"];s&&l.push("lineLabel");var c=Mt.visual.ValueLabel.maybeCreate(t,t.pvDot,{extensionId:l,wrapper:i});c&&(t.pvHeatGridLabel=c.pvMark)}},_buildSignsWrapper:function(){return this.compatVersion()>1?null:function(e){return function(t){var n={category:t.vars.x.rawValue,value:t.vars.y.rawValue},r=Object.create(this);return r.index=t.dataIndex,e.call(r,n)}}},renderInteractive:function(){this.pvScatterPanel.render()},_buildScene:function(){function e(e){var t=new Mt.visual.Scene(i,{source:e});t.vars.series=Xt.fromComplex(e),o.onNewScene(t,!1),e.datums().each(function(e,n){var r=e.atoms[a.name];if(null!=r.value){var i=e.atoms[f.name];if(null!=i.value){var s=new Mt.visual.Scene(t,{source:e});s.dataIndex=n,s.vars.x=Xt.fromAtom(r),s.vars.y=Xt.fromAtom(i),u.onNewScene(s,!0),o.onNewScene(s,!0),s.isIntermediate=!1}}})}function t(e){for(var t,r=e.childNodes,i=0,s=0,o=r.length;o>i;i++,s++){var u=r[s];u.isSingle=!t&&!u.nextSibling;if(t){var a=n(e,t,u,s);a&&s++}t=u}}function n(e,t,n,r){var i=+n.vars.y.value,s=+t.vars.y.value,l=+n.vars.x.value,c=+t.vars.x.value,h=f.type.cast.call(null,(i+s)/2),p=a.type.cast.call(null,(l+c)/2),d=new Mt.visual.Scene(e,{index:r,source:n.datum});return d.dataIndex=n.dataIndex,d.vars.x=new Xt(p,a.format(p),p),d.vars.y=new Xt(h,f.format(h),h),u.onNewScene(d,!0),o.onNewScene(d,!0),d.ownerScene=n,d.isIntermediate=!0,d.isSingle=!1,d}var r=this.visibleData({ignoreNulls:!1}),i=new Mt.visual.Scene(null,{panel:this,source:r}),s=this.visualRoles,o=(this.axes,new Mt.visual.RoleVarHelper(i,s.color,{roleVar:"color"})),u=new Mt.visual.RoleVarHelper(i,s.size,{roleVar:"size"}),a=r.owner.dimensions(s.x.firstDimensionName()),f=r.owner.dimensions(s.y.firstDimensionName());return r.children().each(e,this),i.children().each(t,this),i},_finalizeScene:function(e){var t=this.axes,n=t.base.sceneScale({sceneVarName:"x"}),r=t.ortho.sceneScale({sceneVarName:"y"});return e.children().selectMany(function(e){return e.childNodes}).each(function(e){e.basePosition=n(e),e.orthoPosition=r(e)}),e}}),e.type("pvc.MetricPointAbstract",Mt.MetricXYAbstract).add({_trendable:!0,_initPlotsCore:function(){var e=this._createPointPlot(),t=e.option("Trend");(this._trendable=!!t)&&new Mt.visual.MetricPointPlot(this,{name:"trend",fixed:{DataPart:"trend",TrendType:"none",NullInterpolatioMode:"none",ColorRole:"series",SizeRole:null,SizeAxis:null,OrthoAxis:1},defaults:{ColorAxis:2,LinesVisible:!0,DotsVisible:!1}})},_hasDataPartRole:function(){return!0},_getColorRoleSpec:function(){return{defaultSourceRole:"series",defaultDimension:"color*",dimensionDefaults:{valueType:Number}}},_initVisualRoles:function(){this.base(),this._addVisualRole("size",{isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,defaultDimension:"size",dimensionDefaults:{valueType:Number}})},_getTranslationClass:function(t){return e.type(this.base(t)).add(Mt.data.MetricPointChartTranslationOper)},_createPlotPanels:function(t,n){var r=this.options,i=e.set(Object.create(n),"sizeAxisRatio",r.sizeAxisRatio,"sizeAxisRatioTo",r.sizeAxisRatioTo,"autoPaddingByDotSize",r.autoPaddingByDotSize),s=this.plots.scatter;this.scatterChartPanel=new Mt.MetricPointPanel(this,t,s,i);var o=this.plots.trend;o&&new Mt.MetricPointPanel(this,t,o,Object.create(i))},defaults:{axisOriginIsZero:!1,tooltipOffset:10}}),e.type("pvc.MetricDotChart",Mt.MetricPointAbstract).add({_createPointPlot:function(){return new Mt.visual.MetricPointPlot(this,{fixed:{DotsVisible:!0}})}}),e.type("pvc.MetricLineChart",Mt.MetricPointAbstract).add({_createPointPlot:function(){return new Mt.visual.MetricPointPlot(this,{fixed:{LinesVisible:!0}})}}),e.type("pvc.BulletChart",Mt.BaseChart).init(function(e){e=e||{};var t=e.dimensionGroups||(e.dimensionGroups={}),n=t.range||(t.range={});void 0===n.valueType&&(n.valueType=Number);var r=t.marker||(t.marker={});void 0===r.valueType&&(r.valueType=Number),this.base(e)}).add({bulletChartPanel:null,allowNoData:!0,_processOptionsCore:function(e){e.legend=!1,e.selectable=!1,this.base(e)},_initVisualRoles:function(){this.base(),this._addVisualRole("title",{defaultDimension:"title*"}),this._addVisualRole("subTitle",{defaultDimension:"subTitle*"}),this._addVisualRole("value",{isMeasure:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"value*"}),this._addVisualRole("marker",{isMeasure:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"marker*"}),this._addVisualRole("range",{isMeasure:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"range*"})},_createTranslation:function(e){var n=this.base(e),r=n.virtualItemSize();if(r)switch(r){case 1:n.defReader({names:"value"});break;case 2:n.defReader({names:["title","value"]});break;case 3:n.defReader({names:["title","value","marker"]});break;default:n.defReader({names:["title","subTitle","value","marker"]}),r>4&&n.defReader({names:"range",indexes:t.range(4,r)})}return n},_initPlotsCore:function(){new Mt.visual.BulletPlot(this)},_createContent:function(e){var t=this.plots.bullet;this.bulletChartPanel=new Mt.BulletChartPanel(this,this.basePanel,t,e)},defaults:{compatVersion:1,orientation:"horizontal",bulletSize:30,bulletSpacing:50,bulletMargin:100,bulletTitle:"Title",bulletSubtitle:"",bulletTitlePosition:"left",tooltipFormat:function(e,t,n){return this.chart.options.valueFormat(n)},crosstabMode:!1,seriesInRows:!1}}),e.type("pvc.BulletChartPanel",Mt.PlotPanel).add({pvBullets:null,pvBullet:null,data:null,onSelectionChange:null,_createCore:function(e){var n,r,i,s,o,u,a,f,l,c=this.chart,h=c.options,p=this.buildData(),d="horizontal"==h.orientation?"left":"bottom";if("horizontal"==h.orientation){n=e.clientSize.width-this.chart.options.bulletMargin-20,r=0;switch(h.bulletTitlePosition){case"top":a=this.chart.options.bulletMargin,s=0,i="left",o=-12,l=parseInt(h.titleSize/2,10);break;case"bottom":a=this.chart.options.bulletMargin,s=0,i="left",o=h.bulletSize+32,l=0;break;case"right":a=5,s=n+5,i="left",o=parseInt(h.bulletSize/2,10),l=0;break;case"left":default:a=this.chart.options.bulletMargin,s=0,o=parseInt(h.bulletSize/2,10),i="right",l=0}u="bottom",f=function(){return this.index*(h.bulletSize+h.bulletSpacing)+l}}else{n=e.clientSize.height-this.chart.options.bulletMargin-20;switch(h.bulletTitlePosition){case"top":a=this.chart.options.bulletMargin,s=0,i="left",o=-20,r=0,f=void 0;break;case"bottom":a=this.chart.options.bulletMargin,s=0,i="left",o=n+20,r=0,f=20;break;case"right":a=5,s=this.chart.options.bulletSize+40,i="left",o=n,r=-Math.PI/2,f=void 0;break;case"left":default:a=this.chart.options.bulletMargin,s=-12,o=this.height-this.chart.options.bulletMargin-20,i="left",r=-Math.PI/2,f=void 0}u="right",a=function(){return h.bulletMargin+this.index*(h.bulletSize+h.bulletSpacing)}}this.pvBullets=this.pvPanel.add(t.Panel).data(p)[Mt.BasePanel.orthogonalLength[d]](n)[Mt.BasePanel.parallelLength[d]](this.chart.options.bulletSize).margin(20).left(a).top(f),this.pvBullet=this.pvBullets.add(t.Layout.Bullet).orient(d).ranges(function(e){return e.ranges}).measures(function(e){return e.measures}).markers(function(e){return e.markers});if(c.clickable()&&this.clickAction){var v=this;this.pvBullet.cursor("pointer").event("click",function(e){var n=e.title,r=e.subtitle,i=t.event;return v.clickAction(n,r,e.measures,i)})}this.pvBulletRange=this.pvBullet.range.add(t.Bar),this.pvBulletMeasure=this.pvBullet.measure.add(t.Bar).text(function(e,t){return t.formattedMeasures[this.index]}),this.pvBulletMarker=this.pvBullet.marker.add(t.Dot).shape("square").fillStyle("white").text(function(e,t){return t.formattedMarkers[this.index]});if(this.showsTooltip()){var m=this;this.pvBulletMeasure.localProperty("tooltip").tooltip(function(e,t){var n=t.title,r=t.subtitle;return c.options.tooltipFormat.call(m,n,r,e)}),this.pvBulletMarker.localProperty("tooltip").tooltip(function(e,t){var n=t.title,r=t.subtitle;return c.options.tooltipFormat.call(m,n,r,e)}),this.pvBulletMeasure.event("mouseover",t.Behavior.tipsy(this.chart._tooltipOptions)),this.pvBulletMarker.event("mouseover",t.Behavior.tipsy(this.chart._tooltipOptions))}this.pvBulletRule=this.pvBullet.tick.add(t.Rule),this.pvBulletRuleLabel=this.pvBulletRule.anchor(u).add(t.Label).text(this.pvBullet.x.tickFormat),this.pvBulletTitle=this.pvBullet.anchor(d).add(t.Label).font("bold 12px sans-serif").textAngle(r).left(-10).textAlign(i).textBaseline("bottom").left(s).top(o).text(function(e){return e.formattedTitle}),this.pvBulletSubtitle=this.pvBullet.anchor(d).add(t.Label).textStyle("#666").textAngle(r).textAlign(i).textBaseline("top").left(s).top(o).text(function(e){return e.formattedSubtitle});var g="function"==typeof h.axisDoubleClickAction?function(e,t){h.axisDoubleClickAction(e,t)}:null;c.doubleClickable()&&g&&(this.pvBulletTitle.cursor("pointer").events("all").event("dblclick",function(e){g(e,arguments[arguments.length-1])}),this.pvBulletSubtitle.cursor("pointer").events("all").event("dblclick",function(e){g(e,arguments[arguments.length-1])}))},applyExtensions:function(){this.base(),this.extend(this.pvBullets,"bulletsPanel"),this.extend(this.pvBullet,"bulletPanel"),this.extend(this.pvBulletRange,"bulletRange"),this.extend(this.pvBulletMeasure,"bulletMeasure"),this.extend(this.pvBulletMarker,"bulletMarker"),this.extend(this.pvBulletRule,"bulletRule"),this.extend(this.pvBulletRuleLabel,"bulletRuleLabel"),this.extend(this.pvBulletTitle,"bulletTitle"),this.extend(this.pvBulletSubtitle,"bulletSubtitle")},_getExtensionId:function(){return[{abs:"content"}].concat(this.base())},buildData:function(){var t,n=this.chart,r=n.options,i=n.visualRoles.title,s=i.grouping,o=n.visualRoles.subTitle,u=o.grouping,a=n.visualRoles.value,f=a.grouping,l=n.visualRoles.marker,c=l.grouping,h=n.visualRoles.range,p=h.grouping,d={title:r.bulletTitle,formattedTitle:r.bulletTitle,subtitle:r.bulletSubtitle,formattedSubtitle:r.bulletSubtitle,ranges:e.array.to(r.bulletRanges)||[],measures:e.array.to(r.bulletMeasures)||[],markers:e.array.to(r.bulletMarkers)||[]};return e.set(d,"formattedRanges",d.ranges.map(String),"formattedMeasures",d.measures.map(String),"formattedMarkers",d.markers.map(String)),t=f||s||c||u||p?n.data.datums().select(function(e){var t,n=Object.create(d);return f&&(t=f.view(e),n.measures=t.values(),n.formattedMeasures=t.labels()),s&&(t=s.view(e),n.title=t.value,n.formattedTitle=t.label),u&&(t=u.view(e),n.subtitle=t.value,n.formattedSubtitle=t.label),c&&(t=c.view(e),n.markers=t.values(),n.formattedMarkers=t.labels()),p&&(t=p.view(e),n.ranges=t.values(),n.formattedRanges=t.labels()),n},this).array():[d],t}}),e.type("pvc.ParallelCoordinates",Mt.BaseChart).init(function(e){e=e||{},e.dimensions=e.dimensions||{},e.dimensions.value||(e.dimensions.value={valueType:null}),this.base(e)}).add({parCoordPanel:null,_createContent:function(t){this.parCoordPanel=new Mt.ParCoordPanel(this,this.basePanel,e.create(t,{topRuleOffset:this.options.topRuleOffset,botRuleOffset:this.options.botRuleOffset,leftRuleOffset:this.options.leftRuleOffset,rightRuleOffset:this.options.rightRuleOffset,sortCategorical:this.options.sortCategorical,mapAllDimensions:this.options.mapAllDimensions,numDigits:this.options.numDigits}))},defaults:e.create(Mt.BaseChart.prototype.defaults,{compatVersion:1,topRuleOffset:30,botRuleOffset:30,leftRuleOffset:60,rightRuleOffset:60,sortCategorical:!0,mapAllDimensions:!0,numDigits:0})}),e.type("pvc.ParCoordPanel",Mt.BasePanel).add({anchor:"fill",pvParCoord:null,dimensions:null,dimensionDescr:null,data:null,retrieveData:function(){var e=this.chart.data,t=this.chart.options.numDigits;this.dimensions=e.getVisibleCategories();var n=e.getValues(),r=e.getVisibleSeriesIndexes(),i=e.getVisibleCategoriesIndexes(),s=e.getCategories(),o=i.map(this.chart.options.mapAllDimensions?function(e){return isNaN(n[e][0])?{categorical:!0,len:0,map:[]}:{categorical:!1,len:0,map:[],displayValue:[]}}:function(e){return isNaN(n[e][0])?{categorical:!0,len:0,map:[]}:null}),u=function(e,n){var r=o[e],i=null;if(r.categorical)i=r.map[n],null==i&&(i=r.len,r.len++,r.map[n]=i);else{var s=n.toFixed(t);i=r.map[s],null==i&&(i=r.len,r.len++,r.map[s]=i,r.displayValue[s]=n)}return i};for(var a in o)o.hasOwnProperty(a)&&o[a]&&o[a].categorical&&(o[a].displayValue=o[a].map);var f,l,c;if(this.chart.options.sortCategorical||this.chart.options.mapAllDimensions)for(f=0;f<o.length;f++)if(o[f]){for(var h=0;h<n[f].length;h++)u(f,n[f][h]);var p=o[f].map,d=[];for(l in p)p.hasOwnProperty(l)&&d.push(l);d.sort();if(o[f].categorical)for(c=0;c<d.length;c++)p[d[c]]=c;else for(c=0;c<d.length;c++)p[d[c]].index=c}var v=function(e){var t={};for(var r in i)i.hasOwnProperty(r)&&(t[s[r]]=o[r]?u(r,n[r][e]):n[r][e]);return t};this.data=r.map(function(e){return v(e)});var m=this.dimensions.map(function(e){var t={},n=e.split("__");return t.id=e,t.name=n[0],t.unit=n.length>1?n[1]:"",t});for(f=0;f<m.length;f++){l=m[f];var g=i[f];l.orgRowIndex=g;var y,b,w,E,S,x=n[g].length;if(o[g]){y=b=w=E=o[g].displayValue[n[g][0]];for(c=1;x>c;c++)S=o[g].displayValue[n[g][c]],y>S&&(w=y,y=S),S>b&&(E=b,b=S)}else{y=b=w=E=n[g][0];for(c=1;x>c;c++)S=n[g][c],y>S&&(w=y,y=S),S>b&&(E=b,b=S)}var T=(b-E+(w-y))/2;l.min=y,l.max=b,l.step=T,l.categorical=!1;if(o[g]){l.map=o[g].map,l.mapLength=o[g].len,l.categorical=o[g].categorical;if(!l.categorical){l.orgValue=[];var N=o[g].map;for(var C in N)N.hasOwnProperty(C)&&(l.orgValue[N[C]]=0+C)}}}var k=function(e,t){for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n};this.dimensionDescr=k(this.dimensions,m)},_createCore:function(){function e(e){var t=e.dim;return E[t].min=Math.max(b[t].domain()[0],b[t].invert(i-e.y-e.dy)),E[t].max=Math.min(b[t].domain()[1],b[t].invert(i-e.y)),S=t,_.render(),!1}function n(e){if(e.dy<3){var t=e.dim;E[t].min=Math.max(b[t].domain()[0],b[t].invert(0)),E[t].max=Math.min(b[t].domain()[1],b[t].invert(i)),e.y=u,e.dy=c,S=t,_.render()}return!1}var r=this;this.retrieveData();var i=this.height,s=this.chart.options.numDigits,o=this.chart.options.topRuleOffset,u=this.chart.options.botRuleOffset,a=this.chart.options.leftRuleOffset,f=this.width-this.chart.options.rightRuleOffset,l=this.height-o,c=l-u,h=o-12,p=this.dimensions,d=this.dimensionDescr,v=function(e,n){var r=d[e].min,i=d[e].max,s=d[e].step;return n&&(r-=s,i+=s),t.Scale.linear(r,i).range(u,l)},m=function(e){var t=v(e,!0).range(u,l),n=d[e];if(n.orgValue&&!n.categorical){var r=function(e){var r=t(n.orgValue[e]);return r};return r.domain=function(){return t.domain()},r.invert=function(e){return t.invert(e)},r}return t},g=function(e){var t=v(e,!1).range("steelblue","brown");return t},y=t.Scale.ordinal(p).splitFlush(a,f),b=t.dict(p,m),w=t.dict(p,g),E=t.dict(p,function(e){return{min:b[e].domain()[0],max:b[e].domain()[1]}}),S=p[0],x=this.chart.options.mapAllDimensions?function(e){return p.every(function(t){var n=d[t],r=n.orgValue&&!n.categorical?n.orgValue[e[t]]:e[t];return r>=E[t].min&&r<=E[t].max})}:function(e){return p.every(function(t){return e[t]>=E[t].min&&e[t]<=E[t].max})};this.pvParCoord=this.pvPanel.add(t.Panel).data(r.data).visible(x).add(t.Line).data(p).left(function(e){return y(e)}).bottom(function(e,t){var n=b[e](t[e]);return n}).strokeStyle("#ddd").lineWidth(1).antialias(!1);var T=this.pvPanel.add(t.Rule).data(p).left(y).top(o).bottom(u);T.anchor("top").add(t.Label).top(h).font("bold 10px sans-serif").text(function(e){return d[e].name});var N=[],C=6,k=3;for(var L in d)if(d.hasOwnProperty(L)){var A=d[L];if(A.categorical){var O=y(A.id)+C;for(var M in A.map)A.map.hasOwnProperty(M)&&(N[N.length]={x:O,y:b[A.id](A.map[M])+k,label:M})}}var _=(this.pvPanel.add(t.Panel).data(N).add(t.Label).left(function(e){return e.x}).bottom(function(e){return e.y}).text(function(e){return e.label}).textAlign("left"),this.pvPanel.add(t.Panel)),D=(_.add(t.Panel).data(r.data).visible(x).add(t.Line).data(p).left(function(e){return y(e)}).bottom(function(e,t){return b[e](t[e])}).strokeStyle(function(e,t){var n=d[S],r=n.orgValue&&!n.categorical?n.orgValue[t[S]]:t[S];return w[S](r)}).lineWidth(1),_.add(t.Panel).data(p.map(function(e){return{y:u,dy:c,dim:e}})).left(function(e){return y(e.dim)-30}).width(60).fillStyle("rgba(0,0,0,.001)").cursor("crosshair").event("mousedown",t.Behavior.select()).event("select",e).event("selectend",n).add(t.Bar).left(25).top(function(e){return e.y}).width(10).height(function(e){return e.dy}).fillStyle(function(e){return e.dim==S?w[e.dim]((E[e.dim].max+E[e.dim].min)/2):"hsla(0,0,50%,.5)"}).strokeStyle("white").cursor("move").event("mousedown",t.Behavior.drag()).event("dragstart",e).event("drag",e));D.anchor("bottom").add(t.Label).textBaseline("top").text(function(e){return d[e.dim].categorical?"":E[e.dim].min.toFixed(s)+d[e.dim].unit}),D.anchor("top").add(t.Label).textBaseline("bottom").text(function(e){return d[e.dim].categorical?"":E[e.dim].max.toFixed(s)+d[e.dim].unit}),this.extend(this.pvParCoord,"parCoord"),this.extend(this.pvPanel,"chart")}}),e.type("pvc.DataTree",Mt.BaseChart).init(function(e){e=e||{},e.dimensionGroups=e.dimensionGroups||{},e.dimensionGroups.value||(e.dimensionGroups.value={valueType:null}),this.base(e)}).add({structEngine:null,structMetadata:null,structDataset:null,DataTreePanel:null,_getColorRoleSpec:function(){return{isRequired:!0,defaultSourceRole:"category",requireIsDiscrete:!0}},setStructData:function(e){this.structDataset=e.resultset,this.structDataset.length||this._log("Warning: Structure-dataset is empty"),this.structMetadata=e.metadata,this.structMetadata.length||this._log("Warning: Structure-Metadata is empty")},_createContent:function(t){var n=this.structEngine,r=n?n.type:new Mt.data.ComplexType;r.addDimension("value",{});var i={seriesInRows:!0,crosstabMode:!0},s=new Mt.data.CrosstabTranslationOper(r,this.structDataset,this.structMetadata,i);s.configureType(),n||(n=this.structEngine=new Mt.data.Data({type:r})),n.load(s.execute(n)),Mt.debug>=3&&this._log(this.structEngine.getInfo()),this.dataTreePanel=new Mt.DataTreePanel(this,this.basePanel,e.create(t,{topRuleOffset:this.options.topRuleOffset,botRuleOffset:this.options.botRuleOffset,leftRuleOffset:this.options.leftRuleOffset,rightRuleOffset:this.options.rightRuleOffset,boxplotColor:this.options.boxplotColor,valueFontsize:this.options.valueFontsize,headerFontsize:this.options.headerFontsize,border:this.options.border,perpConnector:this.options.perpConnector,numDigits:this.options.numDigits,minVerticalSpace:this.options.minVerticalSpace,connectorSpace:this.options.connectorSpace,minAspectRatio:this.options.minAspectRatio}))},defaults:{compatVersion:1,topRuleOffset:30,botRuleOffset:30,leftRuleOffset:60,rightRuleOffset:60,boxplotColor:"grey",headerFontsize:16,valueFontsize:20,border:2,perpConnector:!1,numDigits:0,connectorSpace:.15,minVerticalSpace:.05,minAspectRatio:2}}),e.type("pvc.DataTreePanel",Mt.PlotPanel).add({pvDataTree:null,treeElements:null,structMap:null,structArr:null,hRules:null,vRules:null,rules:null,generatePerpConnectors:function(e){this.hRules=[],this.vRules=[],this.rules=[];for(var t in this.structMap){var n=this.structMap[t];if(null!=n.children){var r=1e4,i=-1e4,s=n.left+n.width;this.hRules.push({left:s,width:e,bottom:n.bottom+n.height/2}),s+=e;for(var o in n.children){var u=this.structMap[n.children[o]],a=u.bottom+u.height/2;a>i&&(i=a),r>a&&(r=a),this.hRules.push({left:s,width:u.left-s,bottom:a})}i>r&&this.vRules.push({left:s,bottom:r,height:i-r})}}},generateLineSegment:function(e,t,n,r){var i=[];i.push({x:e,y:t}),i.push({x:n,y:r}),this.rules.push(i)},generateConnectors:function(e){this.hRules=[],this.vRules=[];if(this.chart.options.perpConnector)this.generatePerpConnectors(e);else{this.rules=[];for(var t in this.structMap){var n=this.structMap[t];if(null!=n.children){var r,i,s,o=1e4,u=-1e4;for(s in n.children)i=this.structMap[n.children[s]],r=i.bottom+i.height/2,r>u&&(u=r),o>r&&(o=r);var a=(u+o)/2,f=n.left+n.width,l=f+e;this.generateLineSegment(f,n.bottom+n.height/2,l,a);for(s in n.children)i=this.structMap[n.children[s]],r=i.bottom+i.height/2,this.generateLineSegment(l,a,i.left,r)}}}},retrieveStructure:function(){var e=this.chart.structEngine,t=this.chart.options,n=e.getVisibleCategories();this.treeElements=e.getVisibleSeries();var r,i=e.getValues(),s=n.length>4;for(r in this.treeElements)this.treeElements[r]=$.trim(this.treeElements[r]);var o=[];o.getElement=function(e){return null==o[e]&&(o[e]={min:1e4,max:-1e4}),o[e]},o.addValue=function(e,t){var n=o.getElement(e);return t<n.min&&(n.min=t),t>n.max&&(n.max=t),n};var u,a,f,l;for(r in this.treeElements)f=this.treeElements[r],u=f[0],a=u.charCodeAt(0),l=parseInt(f.slice(1),10),o.addValue("__cols",a),o.addValue(u,l);var c=o.getElement("__cols"),h=this.innerWidth/(c.max-c.min+1),p=t.connectorSpace*h,d=h-p,v=d/t.minAspectRatio,m=c.min;delete o.__cols;for(r in o){c=o[r];if("function"!=typeof c){var g=c.max-c.min+1;c.gridHeight=this.innerHeight/g,c.cellHeight=c.gridHeight*(1-t.minVerticalSpace),c.cellHeight>v&&(c.cellHeight=v),c.relBottom=(c.gridHeight-c.cellHeight)/2,c.numRows=g}}var y=new RegExp("[\\s\"']+","g");this.structMap={};for(r in this.treeElements){var b={};f=this.treeElements[r],b.box_id=f,this.structMap[f]=b,u=f[0],a=u.charCodeAt(0),l=parseInt(f.slice(1),10),c=o.getElement(u),b.colIndex=a-m,b.rowIndex=c.numRows-(l-c.min)-1,b.left=this.leftOffs+b.colIndex*h,b.width=d,s?(b.bottom=i[4][r],b.height=i[5][r]):(b.bottom=this.botOffs+b.rowIndex*c.gridHeight+c.relBottom,b.height=c.cellHeight),b.label=i[0][r],b.selector=i[1][r],b.aggregation=i[2][r];var w=(i[3][r]||"").replace(y," ");b.children=" "===w||""===w?null:w.split(" ")}this.generateConnectors((h-d)/2),this.structArr=[];for(r in this.structMap)f=this.structMap[r],this.structArr.push(f)},findDataValue:function(e,t){for(var n=0;n<t[0].length;n++)if(t[0][n]==e)return t[1][n];this._log("Error: value with key : "+e+" not found.")},generateBoxPlots:function(){var e=this.chart.options;for(var n in this.structArr){var r=this.structArr[n];if(r.values.length){r.subplot={};var i=r.subplot,s=[],o=15,u=r.width/6;i.hRules=[],i.vRules=[],i.marks=[],i.labels=[],s.push(this.findDataValue("_p5",r.values)),s.push(this.findDataValue("_p25",r.values)),s.push(this.findDataValue("_p50",r.values)),s.push(this.findDataValue("_p75",r.values)),s.push(this.findDataValue("_p95",r.values));var a=!1;if("undefined"!=typeof s[2]){s[4]<s[0]&&(s=s.reverse(),this._log(" dataset "+r.box_id+" repaired (_p95 was smaller than _p5)")),s[4]>s[0]?i.hScale=t.Scale.linear(s[0],s[4]):(a=!0,i.hScale=t.Scale.linear(s[0]-1e-10,s[0]+1e-10)),i.hScale.range(r.left+u,r.left+r.width-u);var f,l=""+s[2];for(f=0;f<s.length;f++)s[f]=i.hScale(s[f]);i.bot=r.bottom+r.height/3,i.top=r.bottom+2*r.height/3,i.mid=(i.top+i.bot)/2,i.textBottom=r.bottom+o,i.textBottom=i.bot-e.valueFontsize-1;var c=3;if(a)i.vRules.push({left:s[0],bottom:i.bot,lWidth:c,height:i.top-i.bot});else{i.hRules.push({left:s[0],width:s[1]-s[0],lWidth:1,bottom:i.mid}),i.hRules.push({left:s[1],width:s[3]-s[1],lWidth:1,bottom:i.bot}),i.hRules.push({left:s[1],width:s[3]-s[1],lWidth:1,bottom:i.top}),i.hRules.push({left:s[3],width:s[4]-s[3],lWidth:1,bottom:i.mid});for(f=0;f<s.length;f++)i.vRules.push({left:s[f],bottom:i.bot,lWidth:2==f?c:1,height:i.top-i.bot})}i.labels.push({left:s[2],bottom:i.textBottom,text:this.labelFixedDigits(l),size:e.smValueFont,color:e.boxplotColor})}}}},labelFixedDigits:function(e){"string"==typeof e&&(e=parseFloat(e));if("number"==typeof e){var t=this.chart.options.numDigits;e=e.toFixed(t)}return""+e},addDataPoint:function(e){var t=this.chart.options;for(var n in this.structArr){var r=this.structArr[n];if(r.values.length){var i=this.findDataValue(e,r.values);if("undefined"!=typeof i){var s=r.subplot,o=s.hScale(i),u="green";s.marks.push({left:o,bottom:s.mid,color:u}),s.labels.push({left:o,bottom:s.textBottom,text:this.labelFixedDigits(i),size:t.valueFont,color:u})}}}},retrieveData:function(){var e,t=this.chart.data,n=this.chart.options,r=(t.getVisibleCategories(),t.getVisibleSeries()),i=t.getValues(),s={},o=i.length;for(var u in this.structArr){var a=this.structArr[u];a.values=[];for(e=0;o>e;e++)a.values.push([]);s[a.selector]=a}var f={};for(e in r){var l=s[r[e]];if("undefined"!=typeof l)for(var c in i)l.values[c].push(i[c][e]);else f[r[e]]=!0}for(var h in f)this._log("Could'nt find box for selector: "+h);this.generateBoxPlots();var p=new RegExp("[\\s\"']+","g");if(n.selectParam){var d=n.selectParam.replace(p,"");"undefined"!=d&&d.length>0&&"undefined"!=typeof window[d]&&(d=window[d],this.addDataPoint(d))}},_createCore:function(){var e=this,n=this.chart.options;n.smValueFontsize=Math.round(.6*n.valueFontsize),n.smValueFont=""+n.smValueFontsize+"px sans-serif",n.valueFont=""+n.valueFontsize+"px sans-serif";var r=n.topRuleOffset,i=n.botRuleOffset,s=n.leftRuleOffset;this.innerWidth=this.width-s-n.rightRuleOffset,this.innerHeight=this.height-r-i,this.botOffs=i,this.leftOffs=s,this.retrieveStructure(),this.retrieveData();var o,u=n.headerFontsize+3,a=this.rules;for(o=0;o<a.length;o++)this.pvPanel.add(t.Line).data(a[o]).left(function(e){return e.x}).bottom(function(e){return e.y}).lineWidth(1).strokeStyle("black");this.pvDataTree=this.pvPanel.add(t.Bar).data(e.structArr).left(function(e){return e.left}).bottom(function(e){return e.bottom}).height(function(e){return e.height}).width(function(e){return e.width}).fillStyle("green").add(t.Bar).left(function(e){return e.left+n.border}).bottom(function(e){return e.bottom+n.border}).height(function(e){return e.height-n.border-u}).width(function(e){return e.width-2*n.border}).fillStyle("white").add(t.Label).text(function(e){return e.label}).textAlign("center").left(function(e){return e.left+e.width/2}).bottom(function(e){return e.bottom+e.height-n.headerFontsize-5+n.headerFontsize/5}).font(""+n.headerFontsize+"px sans-serif").textStyle("white").fillStyle("blue");for(o=0;o<this.structArr.length;o++){var f=this.structArr[o];this.pvPanel.add(t.Rule).data(f.subplot.hRules).left(function(e){return e.left}).width(function(e){return e.width}).bottom(function(e){return e.bottom}).lineWidth(function(e){return e.lWidth}).strokeStyle(e.chart.options.boxplotColor),this.pvPanel.add(t.Rule).data(f.subplot.vRules).left(function(e){return e.left}).height(function(e){return e.height}).bottom(function(e){return e.bottom}).lineWidth(function(e){return e.lWidth}).strokeStyle(e.chart.options.boxplotColor),this.pvPanel.add(t.Dot).data(f.subplot.marks).left(function(e){return e.left}).bottom(function(e){return e.bottom}).fillStyle(function(e){return e.color}),this.pvPanel.add(t.Label).data(f.subplot.labels).left(function(e){return e.left}).bottom(function(e){return e.bottom}).font(function(e){return e.size}).text(function(e){return e.text}).textAlign("center").textStyle(function(e){return e.color})}n.perpConnector&&(this.pvPanel.add(t.Rule).data(e.vRules).left(function(e){return e.left}).bottom(function(e){return e.bottom}).height(function(e){return e.height}).strokeStyle("black"),this.pvPanel.add(t.Rule).data(e.hRules).left(function(e){return e.left}).bottom(function(e){return e.bottom}).width(function(e){return e.width}).strokeStyle("black"))},applyExtensions:function(){this.extend(this.pvDataTree,"dataTree")}}),e.type("pvc.data.BoxplotChartTranslationOper").add({_configureTypeCore:function(){var t=[],n=[],r=[];this.collectFreeDiscreteAndConstinuousIndexes(r,n),this._getUnboundRoleDefaultDimNames("category",r.length,t),e.query(Mt.BoxplotChart.measureRolesNames).take(n.length).each(function(e){this._getUnboundRoleDefaultDimNames(e,1,t)},this),t.length&&this.defReader({names:t})}}),e.type("pvc.BoxplotPanel",Mt.CategoricalAbstractPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.boxSizeRatio=n.option("BoxSizeRatio"),this.maxBoxSize=n.option("BoxSizeMax")}).add({plotType:"box",anchor:"fill",_v1DimRoleName:{value:"median"},_createCore:function(){function t(e,t){var n=this.base(e,t);return"stroke"===t?n.darker(1):n}function n(e){return e.lock(u,function(){return this.pvMark.parent[a]()/2}).override("defaultColor",t),e}function r(e){return e.lockMark(u,function(e){return e.vars.category.boxLeft}).lockMark(a,function(e){return e.vars.category.boxWidth}),e}function i(e){return r(e),e.override("defaultColor",t),e}this.base();var s=this._buildScene(),o=this.isOrientationVertical()?"bottom":"left",u=this.anchorOrtho(o),a=this.anchorLength(o),f=this.anchorOrthoLength(o),l=["panel"];this.compatVersion()<=1&&l.push(""),this.pvBoxPanel=(new Mt.visual.Panel(this,this.pvPanel,{extensionId:l})).lock("data",s.childNodes).lockMark(u,function(e){var t=e.vars.category;return t.x-t.width/2}).pvMark[a](function(e){return e.vars.category.width}),this.pvRuleWhiskerUpper=n(new Mt.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleWhisker",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,showsInteraction:!0})).intercept("visible",function(e){return e.vars.category.showRuleWhiskerUpper&&this.delegateExtension(!0)}).pvMark.lock(o,function(e){return e.vars.category.ruleWhiskerUpperBottom}).lock(f,function(e){return e.vars.category.ruleWhiskerUpperHeight}),this.pvRuleWhiskerLower=n(new Mt.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleWhisker",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,showsInteraction:!0})).intercept("visible",function(e){return e.vars.category.showRuleWhiskerBelow&&this.delegateExtension(!0)}).pvMark.lock(o,function(e){return e.vars.category.ruleWhiskerLowerBottom}).lock(f,function(e){return e.vars.category.ruleWhiskerLowerHeight}),this.pvBar=r(new Mt.visual.Bar(this,this.pvBoxPanel,{extensionId:"boxBar",freePosition:!0,normalStroke:!0})).intercept("visible",function(e){return e.vars.category.showBox&&this.delegateExtension(!0)}).lockMark(o,function(e){return e.vars.category.boxBottom}).lockMark(f,function(e){return e.vars.category.boxHeight}).override("defaultColor",t).override("defaultStrokeWidth",e.fun.constant(1)).pvMark,this.pvRuleMin=i(new Mt.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMin",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,showsInteraction:!0})).intercept("visible",function(e){return null!=e.vars.minimum.value&&this.delegateExtension(!0)}).pvMark.lock(o,function(e){return e.vars.minimum.position}),this.pvRuleMax=i(new Mt.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMax",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,showsInteraction:!0})).intercept("visible",function(e){return null!=e.vars.maximum.value&&this.delegateExtension(!0)}).pvMark.lock(o,function(e){return e.vars.maximum.position}),this.pvRuleMedian=i(new Mt.visual.Rule(this,this.pvBoxPanel,{extensionId:"boxRuleMedian",freePosition:!0,noHover:!1,noSelect:!1,noClick:!1,noDoubleClick:!1,showsInteraction:!0})).intercept("visible",function(e){return null!=e.vars.median.value&&this.delegateExtension(!0)}).lockMark(o,function(e){return e.vars.median.position}).override("defaultStrokeWidth",e.fun.constant(2)).pvMark},renderInteractive:function(){this.pvBoxPanel.render()},_buildScene:function(){function t(t){var s=new Mt.visual.Scene(o,{source:t}),h=s.vars;h.series=new Xt(null,"");var p=h.category=new Xt(t.value,t.label);e.set(p,"group",t,"x",u(t.value),"width",a,"boxWidth",f,"boxLeft",a/2-f/2),n.measureVisualRoles().forEach(function(e){var n,s=r[e.name];if(s){var o=t.dimensions(s),u=o.value(i);n=new Xt(u,o.format(u)),n.position=l(u)}else n=new Xt(null,""),n.position=null;h[e.name]=n}),c.onNewScene(s,!0);var d,v,m=null!=h.minimum.value,g=null!=h.lowerQuartil.value,y=null!=h.median.value,b=null!=h.upperQuartil.value,w=g||b;w&&(d=g?h.lowerQuartil.position:y?h.median.position:h.upperQuartil.position,v=b?h.upperQuartil.position:y?h.median.position:h.lowerQuartil.position,w=v!==d,w&&(p.boxBottom=d,p.boxHeight=v-d)),p.showBox=w,w=null!=h.maximum.value,w&&(d=b?h.upperQuartil.position:y?h.median.position:g?h.lowerQuartil.position:m?h.minimum.position:null,w=null!=d,w&&(p.ruleWhiskerUpperBottom=d,p.ruleWhiskerUpperHeight=h.maximum.position-d)),p.showRuleWhiskerUpper=w,w=m,w&&(v=g?h.lowerQuartil.position:y?h.median.position:b?h.upperQuartil.position:null,w=null!=v,w&&(d=h.minimum.position,p.ruleWhiskerLowerHeight=v-d,p.ruleWhiskerLowerBottom=d)),p.showRuleWhiskerBelow=w}var n=this.chart,r=e.query(n.measureVisualRoles()).object({name:function(e){return e.name},value:function(e){return e.firstDimensionName()}}),i={visible:!0,zeroIfNone:!1},s=this.visibleData({ignoreNulls:!1}),o=new Mt.visual.Scene(null,{panel:this,source:s}),u=this.axes.base.scale,a=u.range().band,f=Math.min(a*this.boxSizeRatio,this.maxBoxSize),l=this.axes.ortho.scale,c=new Mt.visual.RoleVarHelper(o,this.visualRoles.color,{roleVar:"color"});return s.children().each(t,this),o}}),e.type("pvc.BoxplotChart",Mt.CategoricalAbstract).add({_processOptionsCore:function(e){this.base.apply(this,arguments),e.stacked=!1},_initVisualRoles:function(){this.base();var t={isMeasure:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number};[{name:"median",label:"Median",defaultDimension:"median",isRequired:!0},{name:"lowerQuartil",label:"Lower Quartil",defaultDimension:"lowerQuartil"},{name:"upperQuartil",label:"Upper Quartil",defaultDimension:"upperQuartil"},{name:"minimum",label:"Minimum",defaultDimension:"minimum"},{name:"maximum",label:"Maximum",defaultDimension:"maximum"}].forEach(function(n){this._addVisualRole(n.name,e.create(t,n))},this)},_getTranslationClass:function(t){return e.type(this.base(t)).add(Mt.data.BoxplotChartTranslationOper)},_initPlotsCore:function(){new Mt.visual.BoxPlot(this),this.options.plot2&&(this._animatable=!0,new Mt.visual.PointPlot(this,{name:"plot2",defaults:{LinesVisible:!0,DotsVisible:!0,OrthoRole:"median",ColorAxis:2},fixed:{OrthoAxis:1}}))},_initAxes:function(e){this.base(e);var t=this.axesByType.ortho;t&&t.forEach(function(e){e.option.defaults({Offset:.02})})},_createPlotPanels:function(e,t){var n=this.plots,r=n.box,i=new Mt.BoxplotPanel(this,e,r,Object.create(t));this.bpChartPanel=i;var s=n.plot2;if(s){Mt.debug>=3&&this._log("Creating Point panel.");var o=new Mt.PointPanel(this,e,s,Object.create(t));o._v1DimRoleName.value=s.option("OrthoRole")}},defaults:{crosstabMode:!1}}).addStatic({measureRolesNames:["median","lowerQuartil","upperQuartil","minimum","maximum"]}),e.type("pvc.visual.TreemapDiscreteColorAxis",Mt.visual.ColorAxis).init(function(e,t,n,r){this.base(e,t,n,r),this.isByParent="byparent"===e.plots.treemap.option("ColorMode")}).add({domainItemValueProp:function(){return this.role&&this.role.grouping.isSingleDimension?"value":"absKey"},domainGroupOperator:function(){return"select"},_calcAvgColor:function(e){var n=e.length;if(n>1){var r=0,i=0,s=0,o=0;e.forEach(function(e){var t=e.rgb();r+=t.r,i+=t.g,s+=t.b,o+=t.a});var u=Math.floor;return t.rgb(u(r/n),u(i/n),u(s/n),u(o/n))}var a=e[0];return n?a.darker(.7):a},_getBaseScheme:function(){var t=this,n=function(e){return null!=e.value},r=function(e){return e.children().where(n)},i=function(e){return r(e).any()},s=function(e){return r(e).any(i)},o=e.query(this.domainData().nodes()).where(s).array(),u=t.option("Colors");return function(n){var i=n instanceof Array?n:e.array.copy(arguments),s=e.query(o).object({name:function(e){return t.domainItemValue(e)}});e.array.removeIf(i,function(t){return e.hasOwnProp.call(s,t)});var a=u(i),f={},l=function(n){var i,o=t.domainItemValue(n);if(e.hasOwnProp.call(s,o)){i=e.getOwn(f,o);if(!i){var u=r(n).select(l).array();if(!u.length)throw e.assert("Should have at least one child that is also a parent.");i=f[o]=t._calcAvgColor(u)}}else i=a(o);return i};o.forEach(l);var c=function(t){return e.getOwn(f,t)||a(t)};e.copy(c,a);var h,p;return c.domain=function(){if(arguments.length)throw e.error.operationInvalid("The scale cannot be modified.");return h||(h=e.array.append(e.ownKeys(f),i))},c.range=function(){if(arguments.length)throw e.error.operationInvalid("The scale cannot be modified.");return p||(p=e.array.append(e.own(f),a.range()))},c}},_selectDomainItems:function(t){var n=e.query(t.nodes()),r=function(e){return null!=e.value},i=function(e){return e.children().where(r)},s=function(e){return i(e).any()},o=function(e){return!s(e)};return n.where(this.isByParent?function(e){return e.parent?r(e)&&s(e):o(e)||i(e).any(o)}:function(e){return(!e.parent||r(e))&&o(e)})}}),e.type("pvc.data.TreemapChartTranslationOper").add({_configureTypeCore:function(){var t=[],n=[],r=[];this.collectFreeDiscreteAndConstinuousIndexes(r,n);var i=r.length,s=n.length;i&&this._getUnboundRoleDefaultDimNames("category",i,t),s&&e.query(["size","color"]).take(s).each(function(e){this._getUnboundRoleDefaultDimNames(e,1,t)},this),t.length&&this.defReader({names:t})}}),e.type("pvc.TreemapPanel",Mt.PlotPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.axes.size=e._getAxis("size",(n.option("SizeAxis")||0)-1),this.visualRoles.size=e.visualRole(n.option("SizeRole")),this.layoutMode=n.option("LayoutMode")}).add({_createCore:function(n){var r=this,i=n.clientSize,s=r._buildScene();if(s){if(!s.childNodes.length&&!this.visualRoles.multiChart.isBound())throw new InvalidDataException("Unable to create a treemap chart, please check the data values.");var o=e.number.to(r._getConstantExtension("leaf","lineWidth"),1),u=o,a=u/2,f=r.visualRoles.size.isBound()?r.axes.size.scale.by1(function(e){return e.vars.size.value}):100,l=r.pvTreemapPanel=(new Mt.visual.Panel(r,r.pvPanel,{panelType:t.Layout.Treemap,extensionId:"panel"})).pvMark.lock("visible",!0).lock("nodes",s.nodes()).lock("left",a).lock("top",a).lock("width",i.width-u).lock("height",i.height-u).lock("size",f).lock("mode",r.layoutMode).lock("order",null).lock("round",!1);l.node.left(function(e){return e.x+a}).top(function(e){return e.y+a}).width(function(e){return e.dx-u}).height(function(e){return e.dy-u});var c,h=r.axes.color;c=r.visualRoles.color.isBound()?h.sceneScale({sceneVarName:"color"}):e.fun.constant(h.option("Unbound"));var p=(new Mt.visual.Bar(r,l.leaf,{extensionId:"leaf"})).lockMark("visible").override("defaultColor",function(e){return c(e)}).override("defaultStrokeWidth",function(){return o}).pvMark.antialias(!1).lineCap("round").strokeDasharray(function(e){return e.vars.size.value<0?"dash":null});(new Mt.visual.Bar(r,l.node,{extensionId:"ascendant",noHover:!0,noSelect:!0,noClick:!0,noDoubleClick:!0})).intercept("visible",function(e){return!!e.parent&&!!e.firstChild&&this.delegateExtension(!0)}).override("anyInteraction",function(e){return e.anyInteraction()||e.isActiveDescendantOrSelf()}).override("defaultStrokeWidth",function(){return 1.5*u}).override("interactiveStrokeWidth",function(e,t){return this.showsActivity()&&e.isActiveDescendantOrSelf()&&(t=1.5*Math.max(1,t)),t}).override("defaultColor",function(e){return c(e)}).override("normalColor",e.fun.constant(null)).override("interactiveColor",function(e,n,r){if("stroke"===r){if(this.showsActivity()){if(e.isActiveDescendantOrSelf())return t.color(n).brighter(.5);if(e.anyActive())return null}if(this.showsSelection()&&e.isSelectedDescendantOrSelf())return t.color(n).brighter(.5)}return null}).pvMark.antialias(!1);var d=Mt.visual.ValueLabel.maybeCreate(r,l.label,{noAnchor:!0});d&&d.pvMark.textMargin(3).sign.optional("textAngle",function(e){var n=this.defaultText(e),r=this.pvMark;return e.dx-2*r.textMargin()>t.Text.measureWidth(n,r.font())?0:e.dx>=e.dy?0:-Math.PI/2}).override("calcTextFitInfo",function(e,n){var r=this.pvMark,i=r.textMargin();if(!(-0.000001>i)){var s=r.textAngle();isHorizText=Math.abs(Math.sin(s))<1e-6,isVertiText=!isHorizText&&Math.abs(Math.cos(s))<1e-6;if(isHorizText||isVertiText){var o,u=!1,a=t.Text.measure(n,r.font()),f=.75*a.height,l=e[isVertiText?"dx":"dy"];"middle"!==r.textBaseline()&&(l/=2),l-=2*i,u|=f>l;var o=e[isVertiText?"dy":"dx"];return"center"!==r.textAlign()&&(o/=2),o-=2*i,u|=0>=o||this.hideOverflowed&&a.width>o,{hide:u,widthMax:o}}}}).override("getAnchoredToMark",function(){return p})}},_getExtensionId:function(){var e=[{abs:this.chart.parent?"smallContent":"content"}];return e.concat(this.base())},renderInteractive:function(){this.pvTreemapPanel.render()},_buildScene:function(){var e=this.visibleData({ignoreNulls:!1});if(!e.childCount())return null;var t=this.visualRoles,n=new Mt.visual.Scene(null,{panel:this,source:e}),r=new Mt.visual.RoleVarHelper(n,t.size,{roleVar:"size",allowNestedVars:!0,hasPercentSubVar:!0}),i=t.size.isBound(),s=t.color&&t.color.grouping,o=s&&"byparent"===this.plot.option("ColorMode"),u=function(e){var t=e.group;e.vars.category=Xt.fromComplex(t),r.onNewScene(e,!0);if(i&&!e.vars.size.value)return e.parentNode&&e.parentNode.removeChild(e),e;var n=t.children().where(function(e){return null!=e.value}).array();if(s){var a=o&&!n.length?t.parent:t;if(a){var f=s.view(a);e.vars.color=new Xt(f.keyTrimmed(),f.label)}else e.vars.color=new Xt(null,"")}else e.parent||(e.vars.color=new Xt(null,""));return n.length&&n.forEach(function(t){u(new Mt.visual.Scene(e,{source:t}))}),e};return u(n)}}),e.type("pvc.TreemapChart",Mt.BaseChart).add({_animatable:!1,_axisClassByType:{size:Mt.visual.NormalizedAxis},_axisCreateIfUnbound:{color:!0},_getColorRoleSpec:function(){return{defaultSourceRole:"category",defaultDimension:"color*"}},_initVisualRoles:function(){this.base(),this._addVisualRole("category",{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0}),this._addVisualRole("size",{isMeasure:!0,isRequired:!1,isPercent:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"size"})},_getTranslationClass:function(t){return e.type(this.base(t)).add(Mt.data.TreemapChartTranslationOper)},_getIsNullDatum:e.fun.constant(),_initPlotsCore:function(){var e=new Mt.visual.TreemapPlot(this);null==this.options.legend&&(this.options.legend="byparent"===e.option("ColorMode"));var t=e.option("RootCategoryLabel");this.visualRoles.category.setRootLabel(t),this.visualRoles.color.setRootLabel(t)},_initAxes:function(t){return this.visualRoles.color.isDiscrete()?(e.hasOwnProp.call(this,"_axisClassByType")||(this._axisClassByType=Object.create(this._axisClassByType)),this._axisClassByType.color=Mt.visual.TreemapDiscreteColorAxis):delete this._axisClassByType,this.base(t)},_createContent:function(e){this.base();var t=this.plots.treemap;new Mt.TreemapPanel(this,this.basePanel,t,e)},_createVisibleData:function(e,t){return this.visualRoles.category.select(e,t)},defaults:{legend:null}}),e.type("pvc.visual.SunburstDiscreteColorAxis",Mt.visual.ColorAxis).add({_getOptionsDefinition:function(){return ln},domainItemValueProp:function(){return this.role&&this.role.grouping.isSingleDimension?"value":"absKey"},domainGroupOperator:function(){return"select"},_selectDomainItems:function(t){var n=e.query(t.nodes()),r=function(e){return null!=e.value};return n.where(function(e){return e.parent?r(e)&&!e.parent.parent:!1})}});var ln=e.create(on,{SliceBrightnessFactor:{resolve:"_resolveFull",cast:Mt.castNonNegativeNumber,value:1}});return e.type("pvc.visual.SunburstSlice",Mt.visual.Sign).init(function(n,r,i){var s=r.add(t.Wedge);i=e.setDefaults(i,"freeColor",!1),this.base(n,s,i),this._bindProperty("lineWidth","strokeWidth")}).prototype.property("strokeWidth").constructor.add({defaultStrokeWidth:e.fun.constant(.5),interactiveStrokeWidth:function(e,t){return this.showsActivity()&&e.isActiveDescendantOrSelf()?2*Math.max(1,t):t},defaultColor:function(e){return e.color},normalColor:function(e,t,n){return t&&"stroke"===n?t.darker():t},interactiveColor:function(e,t,n){if(this.showsActivity())if("stroke"===n){if(e.isActiveDescendantOrSelf())return t.brighter(2).alpha(.7)}else if(e.isActive)return t.brighter(.2).alpha(.8);return this.mayShowNotAmongSelected(e)?this.dimColor(t,n):this.normalColor(e,t,n)}}),e.type("pvc.data.SunburstChartTranslationOper").add({_configureTypeCore:function(){var e=[],t=[],n=[];this.collectFreeDiscreteAndConstinuousIndexes(n,t);var r=n.length,i=t.length;r&&this._getUnboundRoleDefaultDimNames("category",r,e),i&&this._getUnboundRoleDefaultDimNames("size",1,e),e.length&&this.defReader({names:e})}}),e.type("pvc.SunburstPanel",Mt.PlotPanel).init(function(e,t,n,r){this.base(e,t,n,r),this.axes.size=e._getAxis("size",(n.option("SizeAxis")||0)-1),this.visualRoles.size=e.visualRole(n.option("SizeRole")),this.sliceOrder=n.option("SliceOrder"),this.emptySlicesVisible=n.option("EmptySlicesVisible"),this.emptySlicesLabel=this.emptySlicesVisible?n.option("EmptySlicesLabel"):""}).add({_createCore:function(n){var r=this._getConstantExtension("label","font");e.string.is(r)&&(this.valuesFont=r);var i=this,s=(n.clientSize,i._buildScene());if(s){if(!s.childNodes.length&&!this.visualRoles.multiChart.isBound())throw new InvalidDataException("Unable to create a sunburst chart, please check the data values.");var o=i.visualRoles.size.isBound()?i.axes.size.scale.by1(function(e){return e.vars.size.value}):e.fun.constant(100),u=i.pvSunburstPanel=(new Mt.visual.Panel(i,i.pvPanel,{panelType:t.Layout.Partition.Fill,extensionId:"panel"})).pvMark.lock("visible",!0).lock("nodes",s.nodes()).lock("size",o).lock("orient","radial"),a=new Mt.visual.SunburstSlice(this,u.node,{extensionId:"slice",tooltipArgs:{options:{useCorners:!0,gravity:function(){var e=this.midAngle(),t=Math.cos(e)>=0,n=Math.sin(e)>=0;return t?n?"nw":"sw":n?"ne":"se"}}}}),f=Mt.visual.ValueLabel.maybeCreate(i,u.label,{noAnchor:!0});f&&f.override("defaultText",function(e){return e.isRoot()?"":this.base(e)}).override("calcTextFitInfo",function(e,n){var r=this.pvMark,i=r.textMargin();if(!(-0.000001>i)&&"center"===r.textAlign()&&n){var s=Mt.normAngle(e.midAngle),o=Mt.normAngle(r.textAngle()),u=Math.abs(s-o)<1e-6,a=!1;if(!u){var f=Mt.normAngle(o+Math.PI);a=Math.abs(s-f)<1e-6}if(u||a){var l,c=e.innerRadius,h=c,p=e.outerRadius,i=r.textMargin(),d=e.angle,v=t.Text.measure(n,r.font()),m=!1;if(d<Math.PI){var g=.85*v.height,y=r.textBaseline(),b="middle"===y?g+i/2:2*(g+3*i/2);h=Math.max(h,b/(2*Math.tan(d/2)))}return l=p-i-h,m|=0>=l,l-=i,m|=this.hideOverflowed&&v.width>l,{hide:m,widthMax:l}}}}).override("getAnchoredToMark",function(){return a.pvMark})}},_getExtensionId:function(){var e=[{abs:this.chart.parent?"smallContent":"content"}];return e.concat(this.base())},renderInteractive:function(){this.pvSunburstPanel.render()},_buildScene:function(){var t=this.visibleData({ignoreNulls:!1}),n=this.emptySlicesVisible,r=this.emptySlicesLabel;if(!t.childCount())return null;var i,s=this.visualRoles,o=new Mt.visual.SunburstScene(null,{panel:this,source:t}),u=s.size.isBound(),a=new Mt.visual.RoleVarHelper(o,s.size,{roleVar:"size",allowNestedVars:!0,hasPercentSubVar:!0}),f=s.color&&s.color.grouping,l=this.axes.color,c=l.option("SliceBrightnessFactor");i=s.color.isBound()?l.sceneScale({sceneVarName:"color"}):e.fun.constant(l.option("Unbound"));var h=function(e){var t=e.group,i=e.vars.category=Xt.fromComplex(t);r&&null==i.value&&(i.value=r),a.onNewScene(e,!0);if(u&&!e.vars.size.value)return e.parentNode&&e.parentNode.removeChild(e),e;var s=t.children();n||(s=s.where(function(e){return null!=e.value}));if(f){var o=f.view(t);e.vars.color=new Xt(o.keyTrimmed(),o.label)}else e.vars.color=new Xt(null,"");return s.each(function(t){h(new Mt.visual.SunburstScene(e,{source:t}))}),e},p=function(e,t,n){var r=null,s=e.parent;s&&(r=i(e),!s.isRoot()&&!r.isFixedColor&&(r=s.color,t&&c&&(r=r.brighter(c*t/(n-1))))),e.color=r;var o=e.childNodes,u=o.length;o.forEach(function(e,t){p(e,t,u)})};h(o);if(this.sliceOrder&&u&&"none"!==this.sliceOrder){var d="bysizeascending"===this.sliceOrder?e.ascending:e.descending;o.sort(function(t,n){return d(t.vars.size.value,n.vars.size.value)||e.ascending(t.childIndex(),n.childIndex())})}return p(o,0),o}}),e.type("pvc.visual.SunburstScene",Mt.visual.Scene).add({_createSelectedInfo:function(){var e=this.chart().data.owner.selectedCount()>0,t=e&&this.datums().all(zt);return{any:e,is:t}}}),e.type("pvc.SunburstChart",Mt.BaseChart).add({_animatable:!1,_axisClassByType:{size:Mt.visual.NormalizedAxis},_axisCreateIfUnbound:{color:!0},_getColorRoleSpec:function(){return{defaultSourceRole:"category",defaultDimension:"color*",requireIsDiscrete:!0}},_initVisualRoles:function(){this.base(),this._addVisualRole("category",{isRequired:!0,defaultDimension:"category*",autoCreateDimension:!0}),this._addVisualRole("size",{isMeasure:!0,isRequired:!1,isPercent:!0,requireSingleDimension:!0,requireIsDiscrete:!1,valueType:Number,defaultDimension:"size"})},_getTranslationClass:function(t){return e.type(this.base(t)).add(Mt.data.SunburstChartTranslationOper)},_getIsNullDatum:e.fun.constant(),_initPlotsCore:function(){var e=new Mt.visual.SunburstPlot(this);this.options.legend=!1;var t=e.option("RootCategoryLabel");this.visualRoles.category.setRootLabel(t),this.visualRoles.color.setRootLabel(t)},_initAxes:function(t){return e.hasOwnProp.call(this,"_axisClassByType")||(this._axisClassByType=Object.create(this._axisClassByType)),this._axisClassByType.color=Mt.visual.SunburstDiscreteColorAxis,this.base(t)},_createContent:function(e){this.base();var t=this.plots.sunburst;new Mt.SunburstPanel(this,this.basePanel,t,e)},_createVisibleData:function(e,t){return this.visualRoles.category.select(e,t)}}),Mt}(def,pv);define("ccc-pvc",["ccc-def"],function(){}),!function(e){function t(e){var t=e.attr("title");(t||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",t||"").removeAttr("title")}function n(n,r){this.$element=e(n),this.options=r,this.enabled=!0,t(this.$element)}n.prototype={enter:function(){var e=this,t=this.options;0==t.delayIn?(e.hoverState=null,e.show()):(e.hoverState="in",setTimeout(function(){"in"===e.hoverState&&(e.hoverState=null,e.show())},t.delayIn))},leave:function(){var e=this,t=this.options;0==t.delayOut?e.hide():(e.hoverState="out",setTimeout(function(){"out"===e.hoverState&&e.hide()},t.delayOut))},visible:function(){var e;return"in"===this.hoverState||"out"!==this.hoverState&&!!this.$tip&&!!(e=this.$tip[0].parentNode)&&11!==e.nodeType},update:function(){this.visible()?this.show(!0):this.enter()},show:function(t){function n(e){var t;switch(e.charAt(0)){case"n":t={top:o.top+o.height+a,left:o.left+o.width/2-c/2};break;case"s":t={top:o.top-h-a,left:o.left+o.width/2-c/2};break;case"e":t={top:o.top+o.height/2-h/2,left:o.left-c-a};break;case"w":t={top:o.top+o.height/2-h/2,left:o.left+o.width+a}}return 2===e.length&&(t.left="w"==e.charAt(1)?f?o.left+o.width+a:o.left+o.width/2-15:f?o.left-c-a:o.left+o.width/2-c+15),t}if("in"!==this.hoverState){var r=this.getTitle();if(this.enabled&&r){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](r),i[0].className="tipsy",t||i.remove();var s=i[0].parentNode;s&&11!==s.nodeType||i.css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var o=e.extend({},this.$element.offset());if(this.$element[0].nearestViewportElement){var u=this.$element[0].getBoundingClientRect();o.width=u.width,o.height=u.height}else o.width=this.$element[0].offsetWidth||0,o.height=this.$element[0].offsetHeight||0;var a=this.options.offset,f=this.options.useCorners,l=this.options.arrowVisible,c=i[0].offsetWidth,h=i[0].offsetHeight;l||(a-=4);var p="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0],{width:c,height:h},n):this.options.gravity,d=n(p);i.css(d).addClass("tipsy-"+p+(f&&p.length>1?p.charAt(1):""));if(l){var v=f&&2===p.length;i.find(".tipsy-arrow")[v?"hide":"show"]()}var m=this.options.fade&&(!t||!this._prevGravity||this._prevGravity!==p);m?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity}),this._prevGravity=p,this.hoverState=null}else this.hoverState=null,this.hide()}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.$tip&&this.tip().remove(),this.hoverState=null},setTitle:function(e){e=null==e?"":""+e,this.$element.attr("original-title",e).removeAttr("title")},getTitle:function(){var e,n=this.$element,r=this.options;return t(n),"string"==typeof r.title?e=n.attr("title"==r.title?"original-title":r.title):"function"==typeof r.title&&(e=r.title.call(n[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||r.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>'),this.$tip.html(this.options.arrowVisible?'<div class="tipsy-arrow"></div><div class="tipsy-inner"/></div>':'<div class="tipsy-inner"/></div>'),this.$tip.remove()),this.$tip},validate:function(){var e=this.$element[0].parentNode;if(!e||11===e.nodeType)this.hide(),this.$element=null,this.options=null},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t,r){function i(r){var i=e.data(r,"tipsy");return i||(i=new n(r,e.fn.tipsy.elementOptions(r,t)),e.data(r,"tipsy",i)),i}function s(){i(this).enter()}function o(){i(this).leave()}if(t===!0)return this.data("tipsy");if("string"==typeof t)return this.data("tipsy")[t](r);t=e.extend({},e.fn.tipsy.defaults,t),null==t.arrowVisible&&(t.arrowVisible=!t.useCorners),t.live||this.each(function(){i(this)});if("manual"!=t.trigger){var u=t.live?"live":"bind",a="hover"==t.trigger?"mouseenter":"focus",f="hover"==t.trigger?"mouseleave":"blur";this[u](a,s)[u](f,o)}return this},e.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",useCorners:!1,arrowVisible:null},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"}}(jQuery),define("ccc-jquery.tipsy",["ccc-def"],function(){}),!function(){function e(e){return pv.Transform.identity.translate(e.left(),e.top()).times(e.transform())}function t(t){for(var n,r,i,s=t.instance(),o=s.left,u=s.top,a=s.width,f=s.height;i=t.parent;){0>o&&(a+=o,o=0),0>u&&(f+=u,u=0),n=s.right,0>n&&(a+=n),r=s.bottom,0>r&&(f+=r);var l=e(i),c=l.k;o=l.x+c*o,u=l.y+c*u,a=c*a,f=c*f,t=i,s=t.instance()}return{left:o,top:u,width:a,height:f}}var n=0;pv.Behavior.tipsy=function(e){function i(){var e=D.instance(),t=D.properties.tooltip?e.tooltip:"function"==typeof D.tooltip?D.tooltip():e.title||e.text;return"function"==typeof t&&(t=t()),t||""}function s(){var e,n,r,i,s=D.instance();if(D.properties.width){var o=t(D);e=o.left,n=o.top,r=o.width,i=o.height}else{var u,a=D.toScreenTransform();if(D.properties.outerRadius){var f=s.startAngle+s.angle/2;u=s.outerRadius,e=a.x+s.left+u*Math.cos(f),n=a.y+s.top+u*Math.sin(f)}else if(D.properties.shapeRadius){u=Math.max(2,s.shapeRadius);var l=s.left,c=s.top;switch(s.shape){case"diamond":u*=Math.SQRT2;break;case"circle":u/=Math.SQRT2}e=(l-u)*a.k+a.x,n=(c-u)*a.k+a.y,i=r=2*u*a.k}else e=s.left*a.k+a.x,n=s.top*a.k+a.y}var h=Math.ceil(e),p=Math.ceil(n),d=h-e,v=p-n;return r=Math.max(1,Math.floor((r||0)-d)),i=Math.max(1,Math.floor((i||0)-v)),{left:h,top:p,width:r,height:i}}function o(){return C&&(k=C.call(D)||$.fn.tipsy.defaults.gravity),k}function u(e,t){function n(e){var n=t(e);return i(e,n)}function i(e,t){var n=s(t.left,"width"),r=s(t.top,"height"),i=n.fits&&r.fits;return{gravity:e,width:n,height:r,value:n.value+r.value+(2-e.length),isTotal:i,isPartial:!i&&(n.fits||r.fits)}}function s(t,n){var r=f[n],i=e[n],s=t-u[n],o=r-(s+i),a=s>=0&&o>=0,l=(s>=0?s:4*s)+(o>=0?o:4*o);return{fits:a,value:l}}this===L[0]||def.assert();var o=$(window),u={width:o.scrollLeft(),height:o.scrollTop()},f={width:o.width(),height:o.height()},l=k;"c"===l&&(l="w");var c=n(l);if(!c.isTotal){for(var h=R.indexOf(l),p=1,d=R.length;d>p;p++){var v=(h+p)%d;c=a(c,n(R[v]))}r.debug>=21&&l!==c.gravity&&r.log("[TIPSY] #"+N+" Choosing gravity '"+c.gravity+"' over '"+l+"'"),l=c.gravity}return r.debug>=21&&r.log("[TIPSY] #"+N+" Gravity '"+l+"'"),l}function a(e,t){if(e.isTotal){if(!t.isTotal)return e}else if(t.isTotal){if(!e.isTotal)return t}else if(e.isPartial){if(!t.isPartial)return e}else if(t.isPartial&&!e.isPartial)return t;return t.value>e.value?t:e}function f(e){L.css({left:e.left+parseFloat(H.css("padding-left")),top:e.top+parseFloat(H.css("padding-top")),width:e.width,height:e.height})}function l(t){var n=t.root.canvas();H=$(n),n.style.position="relative",H.mouseleave(g),c(),P||(P="tipsyPvBehavior_"+(new Date).getTime());var r=document.getElementById(P);r||(r=document.createElement("div"),r.id=P,n.appendChild(r));var i=r.style;i.padding="0px",i.margin="0px",i.position="absolute",i.pointerEvents="none",i.display="block",i.zIndex=-10,L=$(r),h(),L.data("tipsy",null),L.tipsy(e)}function c(){B=H.data("tipsy-pv-shared-info");if(B){var e=H[0].$pvCreateId||0;if(B.createId===e){B.behaviors.push(y);return}B.behaviors.forEach(function(e){e()})}B={createId:H[0].$pvCreateId||0,behaviors:[y]},H.data("tipsy-pv-shared-info",B)}function h(){L&&L.css(r.debug>=22?{borderColor:"red",borderWidth:"1px",borderStyle:"solid",zIndex:1e3}:{borderWidth:"0px",zIndex:-10})}function p(e){e||(e=pv.event);var t=5,n=H.offset();return{left:e.pageX-n.left-t,top:e.pageY-n.top-t,width:10+2*t,height:20}}function d(e,t){if(!A&&e||A&&A[0]!==e)r.debug>=20&&r.log("[TIPSY] #"+N+" Changing target element."),A&&(A.unbind("mousemove",E),I||A.unbind("mouseleave",g)),A=e?$(e):null,D=e?t:null,O=M=_=null,A&&(A.mousemove(E),I||A.mouseleave(g))}function v(){return j++}function m(e){return e===j-1}function g(){var e=v();r.debug>=20&&r.log("[TIPSY] #"+N+" Delayed Hide Begin opId="+e),F>0?window.setTimeout(function(){m(e)?(r.debug>=20&&r.log("[TIPSY] #"+N+" Hiding opId="+e+" nextOperationId="+j),b(e)):r.debug>=20&&r.log("[TIPSY] #"+N+" Delayed Hide Cancelled opId="+e)},F):(r.debug>=20&&r.log("[TIPSY] #"+N+" Hiding Immediately opId="+e),b(e))}function y(){var e=v();r.debug>=20&&r.log("[TIPSY] #"+N+" Hiding as Other opId="+e),b(e)}function b(){d(null,null),L&&L.tipsy("leave")}function w(){var e=B&&B.behaviors;e&&e.length>1&&e.forEach(function(e){e!==y&&e()})}function E(t){if(L&&!(null!=O&&Math.abs(t.clientX-O)<3&&Math.abs(t.clientY-M)<3)){var n,u=this.$scene;if(u&&(n=u.scenes)&&n.mark&&n.mark===D){var a=D.renderId(),l=a!==_,c=e.followMouse;if(c||l){var h=v();r.debug>=20&&r.log("[TIPSY] #"+N+" Updating opId="+h),O=t.clientX,M=t.clientY;var d;c&&(d=p(t)),l&&(_=a,D.context(n,u.index,function(){c||(d=s());var e=i();r.debug>=20&&r.log("[TIPSY] #"+N+" Update text. Was hidden. Text: "+e),L.tipsy("setTitle",e),o()})),f(d),w(),L.tipsy("update")}}}}function S(e){r.debug>=20&&r.log("[TIPSY] #"+N+" Creating"),l(e),I&&e.event("unpoint",g)}function x(t){var n=v();r.debug>=20&&r.log("[TIPSY] #"+N+" Show IN opId="+n),H||S(t);var u=!A;d(pv.event.target,t);var a=i();r.debug>=20&&r.log("[TIPSY] #"+N+" Text: "+a),L.tipsy("setTitle",a),f(e.followMouse?p():s()),o(),w(),L.tipsy(u?"enter":"update"),r.debug>=20&&r.log("[TIPSY] #"+N+" Show OUT")}function T(){var e=this;(!q||q(T,e))&&x(e)}var N=n++;e=e?Object.create(e):{},e.trigger="manual";var C,k=e.gravity||$.fn.tipsy.defaults.gravity;"function"==typeof k&&(C=k,k=null),e.gravity=u;var L,A,O,M,_,D,P,H,B,j=0,F=e.delayOut,I=e.usesPoint,q=e.isEnabled;e.delayOut=0;var R=["nw","n","ne","e","se","s","sw","w"];return T};var r=pv.Behavior.tipsy;r.debug=0,r.setDebug=function(e){r.debug=e},r.log=function(e){"undefined"!=typeof console&&console.log(""+e)}}(),define("ccc-tipsy",["ccc-def"],function(){}),function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=String.fromCharCode,r=function(){try{document.createElement("$")}catch(e){return e}}();e.Base64||(e.Base64={encode:function(e){var n,i,s,o,u,a,f,l=0,c=e.length,h=Math.max,p="";while(l<c){n=e.charCodeAt(l++)||0,i=e.charCodeAt(l++)||0,f=e.charCodeAt(l++)||0;if(h(n,i,f)>255)throw r;s=n>>2&63,o=(n&3)<<4|i>>4&15,u=(i&15)<<2|f>>6&3,a=f&63,i?f||(a=64):u=a=64,p+=t.charAt(s)+t.charAt(o)+t.charAt(u)+t.charAt(a)}return p}})}(this);var isIE=function(){var e,t=3,n=navigator.appVersion;return n.indexOf("MSIE")!=-1?(t=parseFloat(n.split("MSIE ")[1]),t>4?t:!1):!1}();$.blockUI&&($.blockUI.defaults.css={"font-size":"14px"},$.blockUI.defaults.overlayCSS={},$.blockUI.defaults.blockMsgClass="processing",$.blockUI.defaults.fadeOut=0,$.blockUI.defaults.fadeIn=0,$.blockUI.defaults.ignoreIfBlocked=!1);var SaikuConfig={server:null,path:null,user:null,password:null},SaikuCall={file:null,render:"table",mode:"null",formatter:"flattened",htmlObject:"saiku",params:{}},SaikuRenderer={table:SaikuTableRenderer,chart:SaikuChartRenderer},SaikuClient=function(e){this.config=_.extend(SaikuConfig,e)};SaikuClient.prototype.error=function(e,t,n){typeof console!="undefined"&&console&&(console.error(t),console.error(e),console.error(n))},SaikuClient.prototype.execute=function(e){var t=this,n=_.extend({},SaikuCall,e);typeof console!="undefined"&&console&&console.log(n);var r=this.config,i={};if(n.params)for(key in n.params)i["param"+key]=n.params[key];i=_.extend(i,{formatter:n.formatter},{file:n.file}),$.blockUI&&$(n.htmlObject).block({message:'<span class="saiku_logo" style="float:left">&nbsp;&nbsp;</span> Executing....'});var s={url:r.server+(r.path?r.path:"")+"/export/saiku/json",type:"GET",cache:!1,data:i,contentType:"application/x-www-form-urlencoded",dataType:"json",success:function(e,t,r){if(n.render in SaikuRenderer){var i=new SaikuRenderer[n.render](e,n);i.render(),$.blockUI&&$(n.htmlObject).unblock()}else alert("Render type "+n.render+" not found!");$.blockUI&&$(n.htmlObject).unblock()},error:function(e,r,i){$.blockUI&&$(n.htmlObject).unblock(),$(n.htmlObject).text("Error: "+r),t.error(e,r,i)},crossDomain:!0,async:!0,beforeSend:function(e){if(r&&r.user&&r.password){var t="Basic "+Base64.encode(r.user+":"+r.password);return e.setRequestHeader("Authorization",t),!0}}};$.ajax(s)},define("saiku-embed",["jquery-blockui","saiku-chart-renderer","saiku-table-renderer","ccc-protovis","ccc-protovis-msie","ccc-pvc","ccc-jquery.tipsy","ccc-tipsy"],function(){}),define("core/controller/RootController",[],function(){return["$scope","$rootScope","$state","$q","AuthenticationService","ShoppingCartService",function(e,t,n,r,i,s){e.contextPath="laundry",e.shoppingCart=s,e.isAuthorized=function(t){if(!e.principal)return!1;if(t==="authenticated"&&e.principal)return!0;for(var n in e.principal.authorities)if(angular.isArray(t)){for(var r in t)if(e.principal.authorities[n].authority===t[r])return!0}else if(e.principal.authorities[n].authority===t)return!0;return!1},e.isAuthenticated=function(){return null!=e.principal},i.get(function(t){t.principal?(e.principal=t.principal,n.current.name==="default.login"&&e.onLogin()):n.go("default.login")}),e.onLogin=function(){e.principal=i.get(function(t){if(!t.principal){n.go("default.login");return}e.principal=t.principal;if(e.isAuthorized("ROLE_ADMIN")){n.go("default.admin.dashboard");return}if(e.isAuthorized("ROLE_BRAND_MANAGER")){n.go("default.brandmgr.dashboard");return}if(e.isAuthorized("ROLE_POS")){n.go("default.pos.dashboard");return}})},t.$on("$stateChangeStart",function(t,r){typeof r.access!="undefined"&&!e.isAuthorized(r.access)?(t.preventDefault(),n.go("default.login",{msg:"unauthorized"})):typeof r.data!="undefined"&&typeof r.data.access!="undefined"&&!e.isAuthorized(r.data.access)&&(t.preventDefault(),n.go("default.login",{msg:"unauthorized"}))}),e.cgLoader={},t.$on("loader_show",function(){e.cgLoader.promise=r.defer()}),t.$on("loader_hide",function(){delete e.cgLoader.promise})}]}),define("core/controller/AuthenticationController",[],function(){return["$scope","$stateParams","LoginService",function(e,t,n){e.params=t,e.authenticate=function(){n.save({username:e.username,password:e.password},function(t){e.onLogin()},function(t){e.error=t.data.error||"Authentication failed"})}}]}),define("core/service/AuthenticationService",[],function(){return["$resource",function(e){return e("/auth")}]}),define("core/service/LoginService",[],function(){return["$resource",function(e){return e("/login")}]}),define("core/service/JobItemTypeService",[],function(){return["$resource",function(e){return e("/jobitemtype")}]}),define("core/service/GenericConfirmService",[],function(){return["$modal",function(e){return this.confirm=function(t,n,r,i){return e.open({backdrop:"static",templateUrl:"core/view/modal_generic_confirm.html",controller:["$scope","$modalInstance",function(e,s){e.title=t,e.msg=n,e.okBtn=r,e.cancelBtn=i,e.ok=function(){s.close(!0)},e.cancel=function(){s.close(!1)}}]})},this}]}),define("core/service/DashboardService",[],function(){return["$resource",function(e){return e("/dashboard")}]}),define("core/core.module.js",["angular","core/controller/RootController","core/controller/AuthenticationController","core/service/AuthenticationService","core/service/LoginService","core/service/JobItemTypeService","core/service/GenericConfirmService","core/service/DashboardService"],function(e,t,n,r,i,s,o,u){console.debug("Configuring core.module"),e.module("core.module",[]).service("AuthenticationService",r).service("LoginService",i).service("JobItemTypeService",s).service("confirm",o).service("DashboardService",u).config(["$stateProvider","$urlRouterProvider",function(e,r){r.when("","/"),e.state("default",{url:"/",templateUrl:"core/view/default.html",controller:t,"abstract":!0}).state("default.login",{url:"login?msg",templateUrl:"core/view/login.html",controller:n})}]).config(["$httpProvider",function(e){e.interceptors.push(["$q","$rootScope",function(e,t){var n=0;return{request:function(r){return n++,t.$broadcast("loader_show"),r||e.when(r)},response:function(e){return--n===0&&t.$broadcast("loader_hide"),e},responseError:function(r){return--n||t.$broadcast("loader_hide"),e.reject(r)}}}])}]).run(["$rootScope","$window",function(e,t){e.$on("$locationChangeSuccess",function(){t.scrollTo(0,0)})}])}),define("admin/controller/AdminRootController",[],function(){return["$scope",function(e){}]}),define("admin/controller/AdminDashboardController",[],function(){return["$scope","events","dashboard","EventService",function(e,t,n,r){e.page=1,e.totalEvents=0,e.dashboard=n,t.$promise.then(function(t){e.events=t.data,e.totalEvents=t.total}),n.$promise.then(function(t){e.hasAccountsDue=t.accountsDue!=0}),e.moreEvents=function(){e.page=e.page+1,r.get({page:e.page,count:5,sort:"dateCreated,DESC"},function(t){e.events=e.events.concat(t.data),e.totalEvents=t.total})}}]}),define("admin/resolve/AdminDashboardResolve",[],function(){return{events:["EventService",function(e){return e.get({page:1,count:5,sort:"dateCreated,DESC"})}],dashboard:["DashboardService",function(e){return e.get()}]}}),define("admin/admin.module.js",["angular","admin/controller/AdminRootController","admin/controller/AdminDashboardController","admin/resolve/AdminDashboardResolve"],function(e,t,n,r){console.debug("Configuring admin.module"),e.module("admin.module",[]).config(["$stateProvider",function(e){e.state("default.admin",{url:"admin",template:"<ui-view></ui-view>",controller:t,"abstract":!0}).state("default.admin.dashboard",{url:"",templateUrl:"admin/view/dashboard.html",controller:n,resolve:r,access:"ROLE_ADMIN"})}])}),define("brandmgr/controller/BrandMgrRootController",[],function(){return["$scope",function(e){}]}),define("brandmgr/controller/BrandMgrDashboardController",[],function(){return["$scope","events","dashboard","EventService",function(e,t,n,r){e.page=1,e.totalEvents=0,e.dashboard=n,t.$promise.then(function(t){e.events=t.data,e.totalEvents=t.total}),n.$promise.then(function(t){e.hasAccountsDue=t.accountsDue!=0}),e.moreEvents=function(){e.page=e.page+1,r.get({page:e.page,count:5,sort:"dateCreated,DESC"},function(t){e.events=e.events.concat(t.data),e.totalEvents=t.total})}}]}),define("brandmgr/resolve/BrandMgrDashboardResolve",[],function(){return{events:["EventService",function(e){return e.get({page:1,count:5,sort:"dateCreated,DESC"})}],dashboard:["DashboardService",function(e){return e.get()}]}}),define("brandmgr/brandmgr.module.js",["angular","brandmgr/controller/BrandMgrRootController","brandmgr/controller/BrandMgrDashboardController","brandmgr/resolve/BrandMgrDashboardResolve"],function(e,t,n,r){console.debug("Configuring brandmgr.module"),e.module("brandmgr.module",[]).config(["$stateProvider",function(e){e.state("default.brandmgr",{url:"brandmgr",template:"<ui-view></ui-view>",controller:t,"abstract":!0}).state("default.brandmgr.dashboard",{url:"",templateUrl:"brandmgr/view/dashboard.html",access:"ROLE_BRAND_MANAGER",controller:n,resolve:r})}])}),define("pos/controller/PosRootController",[],function(){return["$scope",function(e){}]}),define("pos/pos.module.js",["angular","pos/controller/PosRootController"],function(e,t){console.debug("Configuring pos.module"),e.module("pos.module",[]).config(["$stateProvider",function(e){e.state("default.pos",{url:"pos",template:"<ui-view></ui-view>",controller:t,"abstract":!0}).state("default.pos.dashboard",{url:"",templateUrl:"pos/view/dashboard.html",access:"ROLE_POS"})}])}),define("brand/controller/BrandRootController",[],function(){return["$scope",function(e){}]}),define("brand/controller/BrandListController",[],function(){return["$scope","ngTableParams","BrandService",function(e,t,n){e.tableParams=new t({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,t){n.get(t.$params,function(n){t.total(n.total),e.resolve(n.data)})}})}]}),define("brand/controller/BrandViewController",[],function(){return["$scope","brand",function(e,t){e.brand=t}]}),define("brand/controller/BrandUpdateController",[],function(){return["$scope","$state","brand","BrandService",function(e,t,n,r){e.brand=n,e.save=function(){r.save(e.brand,function(e){t.go("default.brand.view",{brandCode:e.code,urlSlug:e.slug})})}}]}),define("brand/service/BrandService",[],function(){return["$resource",function(e){return e("/brand")}]}),define("brand/resolve/BrandViewResolve",[],function(){return{brand:["BrandService","$stateParams",function(e,t){return e.get({brandCode:t.brandCode})}]}}),define("brand/resolve/BrandUpdateResolve",[],function(){return{brand:["BrandService","$stateParams",function(e,t){return t.brandCode?e.get({brandCode:t.brandCode}):{}}]}}),define("brand/brand.module.js",["angular","brand/controller/BrandRootController","brand/controller/BrandListController","brand/controller/BrandViewController","brand/controller/BrandUpdateController","brand/service/BrandService","brand/resolve/BrandViewResolve","brand/resolve/BrandUpdateResolve"],function(e,t,n,r,i,s,o,u){console.debug("Configuring brand.module"),e.module("brand.module",[]).service("BrandService",s).config(["$stateProvider",function(e){e.state("default.brand",{url:"brand",template:"<ui-view></ui-view>",controller:t,"abstract":!0}).state("default.brand.list",{url:"",templateUrl:"brand/view/list.html",controller:n,access:["ROLE_ADMIN","ROLE_BRAND_MANAGER"]}).state("default.brand.add",{url:"/add",templateUrl:"brand/view/update.html",controller:i,resolve:u,access:"ROLE_ADMIN"}).state("default.brand.update",{url:"/update/{brandCode}/{urlSlug}",templateUrl:"brand/view/update.html",controller:i,resolve:u,access:"ROLE_ADMIN"}).state("default.brand.view",{url:"/{brandCode}/{urlSlug}",templateUrl:"brand/view/view.html",controller:r,resolve:o})}])}),define("branch/controller/BranchRootController",[],function(){return["$scope",function(e){}]}),define("branch/controller/BranchListController",[],function(){return["$scope","ngTableParams","brand","BrandService",function(e,t,n,r){e.brand=n,e.tableParams=new t({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(t,n){n.$params.brandCode=e.brand.brandCode,r.get(n.$params,function(e){n.total(e.total),t.resolve(e.data)})}})}]}),define("branch/controller/BranchViewController",[],function(){return["$scope","brand","branch",function(e,t,n){e.brand=t,e.branch=n}]}),define("branch/controller/BranchUpdateController",[],function(){return["$scope","$state","brand","branch","BranchService",function(e,t,n,r,i){e.brand=n,e.branch=r,e.save=function(){e.branch.brand=e.brand,i.save(e.branch,function(r){e.branch=r,t.go("default.branch.view",{brandCode:n.code,branchCode:r.code,urlSlug:r.slug})})}}]}),define("branch/service/BranchService",[],function(){return["$resource",function(e){return e("/branch/:brandCode")}]}),define("branch/resolve/BranchListResolve",[],function(){return{brand:["BrandService","$stateParams",function(e,t){return e.get({brandCode:t.brandCode})}]}}),define("branch/resolve/BranchViewResolve",[],function(){return{brand:["BrandService","$stateParams",function(e,t){return e.get({brandCode:t.brandCode})}],branch:["BranchService","$stateParams",function(e,t){return t.branchCode?e.get({brandCode:t.brandCode,branchCode:t.branchCode}):{}}]}}),define("branch/resolve/BranchUpdateResolve",[],function(){return{brand:["BrandService","$stateParams",function(e,t){return e.get({brandCode:t.brandCode})}],branch:["BranchService","$stateParams",function(e,t){return e.get({brandCode:t.brandCode,branchCode:t.branchCode})}]}}),define("branch/branch.module.js",["angular","branch/controller/BranchRootController","branch/controller/BranchListController","branch/controller/BranchViewController","branch/controller/BranchUpdateController","branch/service/BranchService","branch/resolve/BranchListResolve","branch/resolve/BranchViewResolve","branch/resolve/BranchUpdateResolve"],function(e,t,n,r,i,s,o,u,a){console.debug("Configuring branch.module"),e.module("branch.module",[]).service("BranchService",s).config(["$stateProvider",function(e){e.state("default.branch",{url:"{brandCode}/branches",template:"<ui-view></ui-view>",controller:t,"abstract":!0}).state("default.branch.list",{url:"",templateUrl:"branch/view/list.html",controller:n,resolve:o}).state("default.branch.add",{url:"/add",templateUrl:"branch/view/update.html",controller:i,resolve:a}).state("default.branch.update",{url:"/update/{branchCode}/{urlSlug}",templateUrl:"branch/view/update.html",controller:i,resolve:a}).state("default.branch.view",{url:"/{branchCode}/{urlSlug}",templateUrl:"branch/view/view.html",controller:r,resolve:u})}])}),define("user/controller/UserRootController",[],function(){return["$scope",function(e){e.isSelf=function(t){return e.principal?t===e.principal.username:!1},e.isSameLevel=function(t){return e.principal?e.principal.authorities[0].authority===t[0]:!1}}]}),define("user/controller/UserListController",[],function(){return["$scope","ngTableParams","UserService",function(e,t,n){e.tableParams=new t({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,t){n.get(t.$params,function(n){t.total(n.total),e.resolve(n.data)})}})}]}),define("user/controller/UserViewController",[],function(){return["$scope","user","brands",function(e,t,n){e.user=t,e.brands=n,e.joinBrands=function(e){return e.map(function(e){return e.name}).join(",")}}]}),define("user/controller/UserUpdateController",[],function(){return["$scope","$state","toaster","user","brands","userBrands","UserService",function(e,t,n,r,i,s,o){e.userBrands=s,e.user=r||{roles:["ROLE_POS"]},e.updateUserRequest={user:e.user,brandCodes:[]},e.roles=e.isAuthorized("ROLE_ADMIN")?["ROLE_BRAND_MANAGER","ROLE_POS"]:["ROLE_POS"],e.brands=i,e.brandsAvailable={};for(var u in i)e.brandsAvailable[i[u].code]=!1;for(var u in s){if(!s[u].code)continue;e.brandsAvailable[s[u].code]=!0,e.updateUserRequest.brandCodes.push(s[u].code)}e.brandName=function(e){for(var t in i)if(i[t].code===e)return i[t].name},e.toggleUserBrandCode=function(t,n){console.debug("brand code "+t+" is "+(n?"included":"excluded"));if(n)e.updateUserRequest.brandCodes.push(t);else for(var r in e.updateUserRequest.brandCodes)e.updateUserRequest.brandCodes[r]===t&&e.updateUserRequest.brandCodes.splice(r,1)},e.resetPassword=function(){e.updateUserRequest.resetPassword=!0,delete e.updateUserRequest.user.password},e.save=function(){o.create(e.updateUserRequest,function(e){n.pop("success","Succesfully updated user","User has been successfully updated"),t.go("default.user.view",{userCode:e.code,urlSlug:e.slug})},function(e){n.pop("error","Error updating user",e.data&&e.data.message?e.data.message:"Unknown error")})}}]}),define("user/service/UserService",[],function(){return["$resource",function(e){return e("/user",{},{create:{url:"/user/create",method:"post"}})}]}),define("user/resolve/UserViewResolve",[],function(){return{user:["UserService","$stateParams",function(e,t){return e.get({userCode:t.userCode})}],brands:["BrandService","$stateParams",function(e,t){return e.query({userCode:t.userCode})}]}}),define("user/resolve/UserUpdateResolve",[],function(){return{user:["UserService","$stateParams",function(e,t){return t.userCode?e.get({userCode:t.userCode}):undefined}],brands:["$q","BrandService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}],userBrands:["$q","$stateParams","BrandService",function(e,t,n){var r=e.defer();return t.userCode?n.query({userCode:t.userCode},function(e){r.resolve(e)}):r.resolve([]),r.promise}]}}),define("user/user.module.js",["angular","user/controller/UserRootController","user/controller/UserListController","user/controller/UserViewController","user/controller/UserUpdateController","user/service/UserService","user/resolve/UserViewResolve","user/resolve/UserUpdateResolve"],function(e,t,n,r,i,s,o,u){console.debug("Configuring user.module"),e.module("user.module",[]).service("UserService",s).config(["$stateProvider",function(e){e.state("default.user",{url:"user",template:"<ui-view></ui-view>",controller:t,"abstract":!0}).state("default.user.list",{url:"",templateUrl:"user/view/list.html",controller:n}).state("default.user.add",{url:"/add",templateUrl:"user/view/update.html",controller:i,resolve:u,access:["ROLE_ADMIN","ROLE_BRAND_MANAGER"]}).state("default.user.update",{url:"/update/{userCode}/{urlSlug}",templateUrl:"user/view/update.html",controller:i,resolve:u,access:["ROLE_ADMIN","ROLE_BRAND_MANAGER"]}).state("default.user.view",{url:"/{userCode}/{urlSlug}",templateUrl:"user/view/view.html",controller:r,resolve:o})}])}),define("joborder/controller/JobOrderRootController",[],function(){return["$scope","JobOrderStatusService","JobOrderService","confirm","toaster",function(e,t,n,r,i){e.colorizeBalance=function(e){return e.totalAmount>e.totalAmountPaid?"text-danger text-strong":e.totalAmountPaid>e.totalAmount?"text-success text-strong":""},e.josLabel=function(e){return t.toLabel(e)},e.deleteJobOrder=function(e,t){r.confirm("Confirm delete Job Order","Are you sure you want to delete this job order for "+e.customer.formattedName+"? This operation can't be undone.").result.then(function(r){r&&n.remove({id:e.id},function(){i.pop("success","Delete successful","Job order for "+e.customer.formattedName+" has been deleted."),angular.isFunction(t)&&t()})})}}]}),define("joborder/controller/JobOrderListController",[],function(){return["$scope","$modal","$stateParams","ngTableParams","branches","moment","JobOrderService","JobOrderStatusService",function(e,t,n,r,i,s,o,u){function f(){a.page()==1?a.reload():a.page(1)}function l(){function i(e){t.length&&(t+=";"),t+=e}var t="deleted==false",r=n.customerCode||e.filter.customerCode;return r?i("customerCode=="+r):e.filter.customerNameLike&&i("(customerSurname=="+e.filter.customerNameLike+"*,customerGivenName=="+e.filter.customerNameLike+"*)"),e.filter.branchCode&&i("branchCode=="+e.filter.branchCode),e.filter.status&&i("status=="+e.filter.status),e.filter.datefrom&&i("dateReceived>="+s(e.filter.datefrom).format("YYYY-MM-DD")),e.filter.dateto&&i("dateReceived<="+s(e.filter.dateto).format("YYYY-MM-DD")),t}function c(e){return t.open({templateUrl:"joborder/view/modal-make-payment.html",background:"static",controller:["$scope","$modalInstance",function(t,n){t.joborder=e,t.paymentAmount=e.totalAmount-e.totalAmountPaid,t.proceed=function(){n.close(t.paymentAmount)},t.cancel=function(){n.close(!1)}}],resolve:{}})}function h(e,n){return t.open({templateUrl:"joborder/view/modal-give-change.html",background:"static",controller:["$scope","$modalInstance",function(t,r){t.joborder=e,t.changeAmount=+parseFloat(n-e.totalAmount).toFixed(2),t.maxChange=n-e.totalAmount,t.totalAmountPaid=n,t.proceed=function(){r.close(t.changeAmount)},t.cancel=function(){r.close(undefined)}}],resolve:{}})}function p(e){return t.open({templateUrl:"joborder/view/modal-update-status.html",background:"static",controller:["$scope","$modalInstance",function(t,n){t.joborder=e,t.statuses=u.statusMap(),t.newStatus=e.status,t.josLabel=function(e){return u.toLabel(e)},t.proceed=function(){n.close(t.newStatus)},t.cancel=function(){n.close(undefined)}}],resolve:{}})}e.filter={},e.branches=i,e.statuses=u.statusList(),e.dateFormat="yyyy MMM-dd",e.today=s(),e.customerName=n.customerName,e.clearFilters=function(){e.filter={},f()},e.doFilter=function(){f()},e.open=function(t,n){n.preventDefault(),n.stopPropagation(),t==="from"?e.openDatefrom=!0:t==="to"&&(e.openDateto=!0)};var a=e.tableParams=new r({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,t){t.$params.sort="dateCreated,DESC",t.$params.term=l(),o.get(t.$params,function(n){t.total(n.total),e.resolve(n.data)})}});e.filterByCustomer=function(t){e.showFilters=!0,e.filter.customerCode=t.code,e.filter.customerName=t.formattedName,f()},e.makePayment=function(e){c(e).result.then(function(t){if(t){var n=e.totalAmountPaid+t;n>e.totalAmount?h(e,n).result.then(function(t){t!=undefined&&(e.totalAmountPaid=n-t,o.save(e,function(){f()}))}):(e.totalAmountPaid=n,o.save(e,function(){f()}))}})},e.giveChange=function(e){h(e,e.totalAmountPaid).result.then(function(t){t&&(e.totalAmountPaid=e.totalAmountPaid-t,o.save(e,function(){f()}))})},e.updateStatus=function(e){p(e).result.then(function(t){t&&e.status!=t&&(e.status=t,o.save(e,function(){f()}))})},e.deleteFromList=function(t){e.deleteJobOrder(t,function(){f()})}}]}),define("joborder/controller/JobOrderViewController",[],function(){return["$scope","joborder","jobItemTypes",function(e,t,n){e.joborder=t,e.getJobItemType=function(e){for(var t in n)if(n[t].code===e)return n[t]}}]}),define("joborder/controller/JobOrderUpdateController",[],function(){return["$scope","$q","$modal","$filter","confirm","toaster","joborder","jobItemTypes","CustomerService","ServiceTypeService","JobOrderService","BranchService",function(e,t,n,r,i,s,o,u,a,f,l,c){function h(){delete e.joborder,e.customerHolder={},f.get().$promise.then(function(t){e.serviceTypes=t.data,e.serviceTypeHolder={serviceType:e.serviceTypes[0]},e.jobItemTypes=u,e.jobItems={}})}e.jobItemTypes=u,e.jobItems={},e.customerHolder={},e.customers=[],e.refreshCustomers=function(t){var n={term:t,page:1,count:10};a.get(n,function(t){e.customers=t.data})},e.createNewCustomer=function(){a.createCustomer().then(function(t){e.customerHolder.customer=t})},e.updateServiceTypes=function(n){var r=t.defer();return f.findEnabled({branchCode:n,page:1},function(t){e.serviceTypes=t.data,e.serviceTypeHolder={serviceType:e.serviceTypes[0]},r.resolve(e.serviceTypes)}),r},e.setWeight=function(t){e.serviceTypeHolder.serviceType.weight=t,s.pop("success","Service added",e.serviceTypeHolder.serviceType.label+": "+t+" Kg")},e.branchHolder={},e.onCustomerSelect=function(){c.query({brandCode:e.customerHolder.customer.brandCode,byBrandCode:!0},function(t){e.branches=t,t.length&&(e.branchHolder.branch=t[0],e.updateServiceTypes(t[0].code))})},e.joborder=o,o&&o.$promise.then(function(t){e.customerHolder.customer=t.customer,c.query({brandCode:e.customerHolder.customer.brandCode,byBrandCode:!0},function(n){e.branches=n,e.branchHolder.branch=t.branchInfo,e.updateServiceTypes(t.branchInfo.code).promise.then(function(e){for(var t in o.jobServices){var n=!1;for(var r in e)if(e[r].code===o.jobServices[t].serviceType.code){e[r].weight=o.jobServices[t].weightInKilos,n=!0;continue}n||(o.jobServices[t].serviceType.weight=o.jobServices[t].weightInKilos,e.push(o.jobServices[t].serviceType))}})});for(var n in o.jobItems)e.jobItems[o.jobItems[n].jobItemType]=o.jobItems[n].quantity}),e.createJobOrder=function(t){function u(){if(!e.customerHolder.customer)return s.pop("error","Customer required","Please select an existing customer record or create a new one"),!1;var t=0;for(var n in e.serviceTypes)t+=e.serviceTypes[n].weight||0;return t?!0:(s.pop("error","Services required","Please select at least one service and enter the corresponding weight"),!1)}function a(){return n.open({templateUrl:"modal-confirm-joborder",background:"static",controller:["$scope","$modalInstance","jobOrder",function(t,n,s){s.totalAmount<e.branchHolder.branch.minimumJobOrderAmount&&i.confirm("Confirm minimum amount","This job order does not exceed the minimum job order amount of "+r("currency")(e.branchHolder.branch.minimumJobOrderAmount,"Php ")+". The minimum amount will be charged.").result.then(function(t){t?s.totalAmount=e.branchHolder.branch.minimumJobOrderAmount:n.close(!1)}),t.jobOrder=s,t.proceed=function(){n.close(s)},t.cancel=function(){n.close(!1)}}],resolve:{jobOrder:function(){console.debug("$scope.branch="+e.branchHolder.branch.name);var t={id:o?o.id:null,dateReceived:o?o.dateReceived:null,dateCompleted:o?o.dateCompleted:null,dateClaimed:o?o.dateClaimed:null,customer:e.customerHolder.customer,jobServices:[],jobItems:[],totalAmount:0,totalAmountPaid:o?o.totalAmountPaid:0,status:o?o.status:"NEW",branchInfo:e.branchHolder.branch};for(var n in e.serviceTypes){var r=e.serviceTypes[n];if(!r.weight)continue;var i=r.weight*r.pricePerKilo;t.totalAmount+=i,t.jobServices.push({serviceType:r,weightInKilos:r.weight,pricePerKilo:r.pricePerKilo,amount:i})}for(var n in e.jobItems)e.jobItems[n]&&t.jobItems.push({jobItemType:n,quantity:e.jobItems[n]});return t}}})}function f(e){n.open({templateUrl:"modal-create-success",controller:["$scope","$state","$modalInstance",function(t,n,r){t.jobOrder=e,t.backToList=function(){r.close(),n.go("default.joborder.list")},t.viewJobOrder=function(){r.close(),n.go("default.joborder.view",{joborderCode:e.trackingNo,urlSlug:e.slug})},t.createNew=function(){r.close()}}]})}if(!t){s.pop("error","Job Order form is invalid");return}if(!u())return;if(!e.branchHolder.branch)return s.pop("error","Branch required","Job orders must be assigned to a branch"),!1;a().result.then(function(e){e&&l.save(e,function(e){s.pop("success","Job Order saved","Job order w/ tracking number "+e.trackingNo+" saved."),h(),f(e)},function(){s.pop("error","Error saving Job order")})})}}]}),define("joborder/service/JobOrderService",[],function(){return["$resource",function(e){return e("/joborder")}]}),define("joborder/service/JobOrderStatusService",[],function(){return[function(){var e={NEW:"New",CLEANED:"Cleaned",PAID_CLAIMED:"Claimed",CLOSED:"Closed",CANCELLED:"Cancelled"};return this.statusMap=function(){return e},this.statusList=function(){var t=[];for(var n in e)t.push({value:n,label:e[n]});return t},this.toLabel=function(e){switch(e){case"NEW":return"New";case"CLEANED":return"Cleaned";case"PAID_CLAIMED":return"Claimed";case"CANCELLED":return"Cancelled";case"CLOSED":return"Closed";default:return"Unknown code: "+e}},this}]}),define("joborder/resolve/JobOrderListResolve",[],function(){return{branches:["$q","BranchService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("joborder/resolve/JobOrderViewResolve",[],function(){return{joborder:["JobOrderService","$stateParams",function(e,t){return e.get({trackingNo:t.joborderCode})}],jobItemTypes:["JobItemTypeService",function(e){return e.query()}]}}),define("joborder/resolve/JobOrderUpdateResolve",[],function(){return{joborder:["JobOrderService","$stateParams",function(e,t){if(t.joborderCode)return e.get({trackingNo:t.joborderCode})}],jobItemTypes:["JobItemTypeService",function(e){return e.query()}]}}),define("joborder/joborder.module.js",["angular","joborder/controller/JobOrderRootController","joborder/controller/JobOrderListController","joborder/controller/JobOrderViewController","joborder/controller/JobOrderUpdateController","joborder/service/JobOrderService","joborder/service/JobOrderStatusService","joborder/resolve/JobOrderListResolve","joborder/resolve/JobOrderViewResolve","joborder/resolve/JobOrderUpdateResolve"],function(e,t,n,r,i,s,o,u,a,f){console.debug("Configuring joborder.module"),e.module("joborder.module",[]).service("JobOrderService",s).service("JobOrderStatusService",o).config(["$stateProvider",function(e){e.state("default.joborder",{url:"joborders",template:"<ui-view></ui-view>",controller:t,"abstract":!0,access:["authenticated"]}).state("default.joborder.list",{url:"",templateUrl:"joborder/view/list.html",controller:n,resolve:u}).state("default.joborder.customer",{url:"/customer/{customerCode}?{customerName}",templateUrl:"joborder/view/list.html",controller:n,resolve:u}).state("default.joborder.add",{url:"/add",templateUrl:"joborder/view/update.html",controller:i,resolve:f}).state("default.joborder.update",{url:"/update/{joborderCode}/{urlSlug}",templateUrl:"joborder/view/update.html",controller:i,resolve:f}).state("default.joborder.view",{url:"/{joborderCode}/{urlSlug}",templateUrl:"joborder/view/view.html",controller:r,resolve:a})}])}),define("customer/controller/CustomerRootController",[],function(){return["$scope","confirm","toaster","CustomerService",function(e,t,n,r){e.colorizeBalance=function(e){return e.balance>0?"text-danger text-strong":joborder.balance<0?"text-success text-strong":""},e.deleteCustomer=function(e,i){t.confirm("Confirm delete customer","Are you sure you want to delete "+e.formattedName+"? Existing job orders will be unaffected. This operation can't be undone.").result.then(function(t){t&&r.remove({id:e.id},function(){n.pop("success","Delete successful",e.formattedName+" has been deleted."),angular.isFunction(i)&&i()})})}}]}),define("customer/controller/CustomerListController",[],function(){return["$scope","ngTableParams","toaster","CustomerService",function(e,t,n,r){var i=e.tableParams=new t({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(t,n){n.$params.sort=["balance,DESC","name.surname,ASC"],e.namefilter?n.$params.term=e.namefilter:delete n.$params.term,r.get(n.$params,function(e){n.total(e.total),t.resolve(e.data)})}});e.doFilter=function(){i.page()===1?i.reload():i.page(1)},e.clearFilter=function(){delete e.namefilter,e.doFilter()},e.deleteCustomerFromList=function(t){e.deleteCustomer(t,function(){i.reload()})}}]}),define("customer/controller/CustomerViewController",[],function(){return["$scope","customer",function(e,t){e.customer=t}]}),define("customer/controller/CustomerUpdateController",[],function(){return["$scope","$state","customer","brands","CustomerService",function(e,t,n,r,i){e.customer=n,e.brands=r,!n.brandCode&&angular.isArray(r)&&r.length&&(n.brandCode=r[0].code),e.save=function(){i.save(e.customer,function(e){t.go("default.customer.view",{customerCode:e.code,urlSlug:e.slug})})}}]}),define("customer/service/CustomerService",[],function(){return["$resource",function(e){return e("/customer")}]}),define("customer/resolve/CustomerListResolve",[],function(){return{}}),define("customer/resolve/CustomerViewResolve",[],function(){return{customer:["CustomerService","$stateParams",function(e,t){return e.get({customerCode:t.customerCode})}]}}),define("customer/resolve/CustomerUpdateResolve",[],function(){return{customer:["CustomerService","$stateParams",function(e,t){return t.customerCode?e.get({customerCode:t.customerCode}):{}}],brands:["$q","BrandService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("customer/customer.module.js",["angular","customer/controller/CustomerRootController","customer/controller/CustomerListController","customer/controller/CustomerViewController","customer/controller/CustomerUpdateController","customer/service/CustomerService","customer/resolve/CustomerListResolve","customer/resolve/CustomerViewResolve","customer/resolve/CustomerUpdateResolve"],function(e,t,n,r,i,s,o,u,a){console.debug("Configuring customer.module"),e.module("customer.module",[]).service("CustomerService",s).config(["$stateProvider",function(e){e.state("default.customer",{url:"customers",template:"<ui-view></ui-view>",controller:t,"abstract":!0}).state("default.customer.list",{url:"",templateUrl:"customer/view/list.html",controller:n,resolve:o}).state("default.customer.add",{url:"/add",templateUrl:"customer/view/update.html",controller:i,resolve:a}).state("default.customer.update",{url:"/update/{customerCode}/{urlSlug}",templateUrl:"customer/view/update.html",controller:i,resolve:a}).state("default.customer.view",{url:"/{customerCode}/{urlSlug}",templateUrl:"customer/view/view.html",controller:r,resolve:u})}])}),define("servicetype/controller/PriceManagementController",[],function(){return["$scope","toaster","confirm","serviceTypes","ServiceTypeService",function(e,t,n,r,i){e.serviceTypes=r,e.save=function(r){if(!r.$valid){t.pop("error","Invalid price values");return}n.confirm("Save services","Updated prices will be applied to all future job orders. Existing job orders will be unaffected").result.then(function(n){if(!n)return;i.saveList(e.serviceTypes,function(n){t.pop("success","Prices updated"),e.serviceTypes=n,r.$setPristine(!0)})})},e.reset=function(t){n.confirm("Reset services","This will discard all unsaved changes. Proceed?").result.then(function(n){n&&i.get({page:1},function(n){e.serviceTypes=n.data,t.$setPristine(!0)})})}}]}),define("servicetype/service/ServiceTypeService",[],function(){return["$resource",function(e){return e("/servicetype",{},{findEnabled:{url:"/servicetype/enabled",method:"GET"},saveList:{url:"/servicetype/batch",method:"POST",isArray:!0}})}]}),define("servicetype/resolve/PriceManagementResolve",[],function(){return{serviceTypes:["$q","ServiceTypeService",function(e,t){var n=e.defer();return t.get({page:1},function(e){n.resolve(e.data)}),n.promise}]}}),define("servicetype/servicetype.module.js",["angular","servicetype/controller/PriceManagementController","servicetype/service/ServiceTypeService","servicetype/resolve/PriceManagementResolve"],function(e,t,n,r){console.debug("Configuring servicetype.module"),e.module("servicetype.module",[]).service("ServiceTypeService",n).config(["$stateProvider",function(e){e.state("default.pricemanagement",{url:"price-mgt",templateUrl:"servicetype/view/price-management.html",controller:t,resolve:r,access:["ROLE_ADMIN","ROLE_BRAND_MANAGER"]})}])}),define("inventory/controller/InventoryItemTypeRootController",[],function(){return["$scope",function(e){}]}),define("inventory/controller/InventoryItemTypeListController",[],function(){return["$scope","ngTableParams","brands","InventoryItemTypeService",function(e,t,n,r){function s(){function n(e){t.length&&(t+=";"),t+=e}var t="";return e.filter.brandCode&&n("brandCode=="+e.filter.brandCode),t}e.filter={},e.brands=n;var i=e.tableParams=new t({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,t){t.$params.sort="name,ASC",t.$params.term=s(),r.get(t.$params,function(n){t.total(n.total),e.resolve(n.data)})}});e.doFilter=function(){i.page()===1?i.reload():i.page(1)},e.clearFilter=function(){e.filter={},e.doFilter()}}]}),define("inventory/controller/InventoryItemTypeViewController",[],function(){return["$scope","inventoryItemType",function(e,t){e.inventoryItemType=t}]}),define("inventory/controller/InventoryItemTypeUpdateController",[],function(){return["$scope","$state","inventoryItemType","brands","InventoryItemTypeService",function(e,t,n,r,i){e.inventoryItemType=n,e.brands=r,!n.brandCode&&angular.isArray(r)&&r.length&&(n.brandCode=r[0].code),e.save=function(){i.save(e.inventoryItemType,function(e){t.go("default.inv_item_type.view",{invItemTypeCode:e.code,urlSlug:e.slug})})}}]}),define("inventory/service/InventoryItemTypeService",[],function(){return["$resource",function(e){return e("/inv-item-type")}]}),define("inventory/resolve/InventoryItemTypeListResolve",[],function(){return{brands:["$q","BrandService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("inventory/resolve/InventoryItemTypeViewResolve",[],function(){return{inventoryItemType:["InventoryItemTypeService","$stateParams",function(e,t){return e.get({invItemTypeCode:t.invItemTypeCode})}]}}),define("inventory/resolve/InventoryItemTypeUpdateResolve",[],function(){return{inventoryItemType:["InventoryItemTypeService","$stateParams",function(e,t){return t.invItemTypeCode?e.get({invItemTypeCode:t.invItemTypeCode}):{}}],brands:["$q","BrandService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("inventory/controller/InventoryItemRootController",[],function(){return["$scope",function(e){}]}),define("inventory/controller/InventoryItemListController",[],function(){return["$scope","$state","$modal","ngTableParams","toaster","branches","InventoryItemService","ShoppingCartService",function(e,t,n,r,i,s,o,u){function f(){function n(e){t.length&&(t+=";"),t+=e}var t="";return e.filter.branchCode&&n("branchCode=="+e.filter.branchCode),t}function l(e){return n.open({templateUrl:"inventory/view/modal-restock.html",background:"static",controller:["$scope","$modalInstance",function(t,n){t.restockQuantity=0,t.inventoryItem=e,t.proceed=function(){n.close(t.restockQuantity)},t.cancel=function(){n.close(!1)}}],resolve:{}})}function c(e){return n.open({templateUrl:"inventory/view/modal-consume.html",background:"static",controller:["$scope","$modalInstance",function(t,n){t.consumeQuantity=0,t.inventoryItem=e,t.proceed=function(){n.close(t.consumeQuantity)},t.cancel=function(){n.close(!1)}}],resolve:{}})}function h(e){return n.open({templateUrl:"inventory/view/modal-add-to-cart.html",background:"static",controller:["$scope","$modalInstance",function(t,n){t.addToCartQuantity=0,t.inventoryItem=e,t.proceed=function(e){n.close({qty:t.addToCartQuantity,checkout:e})},t.cancel=function(){n.close(!1)}}],resolve:{}})}e.filter={},e.branches=s;var a=e.tableParams=new r({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,t){t.$params.sort="dateUpdated,DESC",t.$params.term=f(),o.get(t.$params,function(n){t.total(n.total),e.resolve(n.data)})}});e.doFilter=function(){a.page()===1?a.reload():a.page(1)},e.clearFilter=function(){e.filter={},e.doFilter()},e.restock=function(e){l(e).result.then(function(t){t&&o.restock({inventoryItemCode:e.code,quantity:t},{},function(n){i.pop("success","Restock successful","Sucessfully restocked "+e.inventoryItemTypeName+" by "+t),e.quantity=n.quantity})})},e.consume=function(e){c(e).result.then(function(t){t&&o.consume({inventoryItemCode:e.code,quantity:t},{},function(n){i.pop("success","Consume successful","Sucessfully consumed "+e.inventoryItemTypeName+" by "+t),e.quantity=n.quantity})})},e.addToCart=function(e){h(e).result.then(function(n){var r=n.qty;r&&(i.pop("success","Add to cart successful","Successfully added "+r+" of "+e.inventoryItemTypeName+" to shopping cart"),u.add(e,r),n.checkout&&t.go("default.checkout"))})}}]}),define("inventory/controller/InventoryItemViewController",[],function(){return["$scope","inventoryItem",function(e,t){e.inventoryItem=t}]}),define("inventory/controller/InventoryItemUpdateController",[],function(){return["$scope","$state","toaster","inventoryItem","branches","InventoryItemService","InventoryItemTypeService",function(e,t,n,r,i,s,o){e.inventoryItem=r,e.branches=i,e.updateItemTypes=function(){e.inventoryItemTypes=o.query({branchCode:r.branchCode})},!r.branchCode&&angular.isArray(i)&&i.length?r.branchCode=i[0].code:r.inventoryItemType={code:r.inventoryItemTypeCode},e.updateItemTypes(),e.setInventoryItemTypeProperties=function(t){e.inventoryItem.inventoryItemTypeCode=t.code,e.inventoryItem.forSale=t.forSale,t.defaultBuyingPrice&&(e.inventoryItem.buyingPrice=t.defaultBuyingPrice),t.defaultSellingPrice&&(e.inventoryItem.sellingPrice=t.defaultSellingPrice),t.defaultSupplierName&&(e.inventoryItem.supplierName=t.defaultSupplierName)},e.save=function(r){r||n.pop("error","Invalid submit","Inventory item form is invalid"),s.save(e.inventoryItem,function(e){n.pop("success","Update successful",e.inventoryItemTypeName+" successfully updated"),t.go("default.inv_item.view",{invItemCode:e.code,urlSlug:e.slug})})}}]}),define("inventory/service/InventoryItemService",[],function(){return["$resource",function(e){return e("/inv-item",{},{restock:{url:"/inv-item/:inventoryItemCode/:quantity",method:"PUT"},consume:{url:"/inv-item/consume/:inventoryItemCode/:quantity",method:"PUT"}})}]}),define("inventory/resolve/InventoryItemListResolve",[],function(){return{branches:["$q","BranchService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("inventory/resolve/InventoryItemViewResolve",[],function(){return{inventoryItem:["InventoryItemService","$stateParams",function(e,t){return e.get({invItemCode:t.invItemCode})}]}}),define("inventory/resolve/InventoryItemUpdateResolve",[],function(){return{inventoryItem:["InventoryItemService","$stateParams",function(e,t){return t.invItemCode?e.get({invItemCode:t.invItemCode}):{}}],branches:["$q","BranchService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("inventory/service/ShoppingCartService",[],function(){return["confirm","toaster",function(e,t){this.items=[],this.add=function(e,n){if(this.contains(e))return t.pop("error","Item already in cart","That item is already in the shopping cart"),!1;this.items.push({inventoryItem:e,quantity:n,price:e.sellingPrice*n})},this.contains=function(e){var t,n;for(t=0;t<this.items.length;t++){n=this.items[t];if(n.inventoryItem.code===e.code)return!0}return!1},this.removeItem=function(e){this.items.splice(e,1)},this.clearCart=function(){var t=this;e.confirm("Confirm clear shopping cart","Remove all items from shopping cart?").result.then(function(e){if(!e)return!1;t.items=[]})},this.onCheckout=function(){this.items=[]},this.totalPrice=function(){var e=0;for(var t in this.items)e+=this.items[t].price;return e}}]}),define("inventory/controller/CheckoutController",[],function(){return["$scope","$state","$modal","toaster","ShoppingCartService","SalesHeaderService",function(e,t,n,r,i,s){function o(){return n.open({templateUrl:"inventory/view/modal-confirm-checkout.html",background:"static",controller:["$scope","$modalInstance","ShoppingCartService",function(e,t,n){e.totalPrice=n.totalPrice(),e.proceed=function(){t.close(!0)},e.cancel=function(){t.close(!1)}}]})}e.shoppingCart=i,e.checkout=function(){o().result.then(function(n){n&&s.save(e.shoppingCart,function(e){r.pop("success","Sale complete","Sale complete"),i.onCheckout(),t.go("default.sales_header.view",{id:e.id})})})}}]}),define("inventory/service/SalesHeaderService",[],function(){return["$resource",function(e){return e("/sales-header/:id")}]}),define("inventory/controller/SalesHeaderListController",[],function(){return["$scope","$state","$stateParams","$modal","ngTableParams","toaster","moment","branches","SalesHeaderService",function(e,t,n,r,i,s,o,u,a){function l(){function i(e){t.length&&(t+=";"),t+=e}var t="",r=n.itemCode||e.filter.itemCode;return r&&i("itemCode=="+r),e.filter.branchCode&&i("branchCode=="+e.filter.branchCode),e.filter.datefrom&&i("dateCreated>="+o(e.filter.datefrom).format("YYYY-MM-DD")),e.filter.dateto&&i("dateCreated<="+o(e.filter.dateto).format("YYYY-MM-DD")),t}function c(){f.page()===1?f.reload():f.page(1)}e.moment=o,e.filter={},e.itemCode=n.itemCode,e.itemName=n.itemName,e.branches=u,e.dateFormat="yyyy MMM-dd",e.today=o(),e.clearFilters=function(){e.filter={},c()},e.doFilter=function(){c()},e.open=function(t,n){n.preventDefault(),n.stopPropagation(),t==="from"?e.openDatefrom=!0:t==="to"&&(e.openDateto=!0)};var f=e.tableParams=new i({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,t){t.$params.sort="dateUpdated,DESC",t.$params.term=l(),a.get(t.$params,function(n){t.total(n.total),e.resolve(n.data)})}})}]}),define("inventory/controller/SalesHeaderViewController",[],function(){return["$scope","salesHeader",function(e,t){e.salesHeader=t}]}),define("inventory/resolve/SalesHeaderViewResolve",[],function(){return{salesHeader:["SalesHeaderService","$stateParams",function(e,t){return e.get({id:t.id})}]}}),define("inventory/resolve/SalesHeaderListResolve",[],function(){return{branches:["$q","BranchService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("inventory/inventory.module.js",["angular","inventory/controller/InventoryItemTypeRootController","inventory/controller/InventoryItemTypeListController","inventory/controller/InventoryItemTypeViewController","inventory/controller/InventoryItemTypeUpdateController","inventory/service/InventoryItemTypeService","inventory/resolve/InventoryItemTypeListResolve","inventory/resolve/InventoryItemTypeViewResolve","inventory/resolve/InventoryItemTypeUpdateResolve","inventory/controller/InventoryItemRootController","inventory/controller/InventoryItemListController","inventory/controller/InventoryItemViewController","inventory/controller/InventoryItemUpdateController","inventory/service/InventoryItemService","inventory/resolve/InventoryItemListResolve","inventory/resolve/InventoryItemViewResolve","inventory/resolve/InventoryItemUpdateResolve","inventory/service/ShoppingCartService","inventory/controller/CheckoutController","inventory/service/SalesHeaderService","inventory/controller/SalesHeaderListController","inventory/controller/SalesHeaderViewController","inventory/resolve/SalesHeaderViewResolve","inventory/resolve/SalesHeaderListResolve"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){console.debug("Configuring inventory.module"),e.module("inventory.module",[]).service("InventoryItemService",p).service("InventoryItemTypeService",s).service("ShoppingCartService",g).service("SalesHeaderService",b).config(["$stateProvider",function(e){e.state("default.inv_item",{url:"inv-item",template:"<ui-view></ui-view>",controller:f,"abstract":!0}).state("default.inv_item.list",{url:"",templateUrl:"inventory/view/list.html",controller:l,resolve:d}).state("default.inv_item.view",{url:"/{invItemCode}/{urlSlug}",templateUrl:"inventory/view/view.html",controller:c,resolve:v}).state("default.inv_item.add",{url:"/add",templateUrl:"inventory/view/update.html",controller:h,resolve:m}).state("default.inv_item.update",{url:"/update/{invItemCode}/{urlSlug}",templateUrl:"inventory/view/update.html",controller:h,resolve:m}).state("default.inv_item_type",{url:"inv-item-type",template:"<ui-view></ui-view>",controller:t,data:{access:["ROLE_ADMIN","ROLE_BRAND_MANAGER"]},"abstract":!0}).state("default.inv_item_type.list",{url:"",templateUrl:"inventory/view/type-list.html",controller:n,resolve:o}).state("default.inv_item_type.add",{url:"/add",templateUrl:"inventory/view/type-update.html",controller:i,resolve:a}).state("default.inv_item_type.update",{url:"/update/{invItemTypeCode}/{urlSlug}",templateUrl:"inventory/view/type-update.html",controller:i,resolve:a}).state("default.inv_item_type.view",{url:"/{invItemTypeCode}/{urlSlug}",templateUrl:"inventory/view/type-view.html",controller:r,resolve:u}).state("default.checkout",{url:"checkout",templateUrl:"inventory/view/checkout.html",controller:y}).state("default.sales_header",{url:"sales-header",template:"<ui-view></ui-view>","abstract":!0}).state("default.sales_header.list",{url:"",templateUrl:"inventory/view/sales-header-list.html",controller:w,resolve:x}).state("default.sales_header.byitem",{url:"/item/{itemCode}?{itemName}",templateUrl:"inventory/view/sales-header-list.html",controller:w,resolve:x}).state("default.sales_header.view",{url:"/{id}",templateUrl:"inventory/view/sales-header-view.html",controller:E,resolve:S})}])}),define("acctspayable/controller/AcctsPayableRootController",[],function(){return["$scope","$state","$modal","moment","toaster","AcctsPaymentService",function(e,t,n,r,i,s){function o(e){return n.open({templateUrl:"acctspayable/view/modal-make-payment.html",background:"static",controller:["$scope","$modalInstance",function(t,n){t.acctspayable=e,t.dateFormat="yyyy MMM-dd",t.today=r(),t.open=function(e){e.preventDefault(),e.stopPropagation(),t.openPaymentDate=!0},t.proceed=function(){n.close({amount:t.paymentAmount,paymentDate:t.paymentDate})},t.cancel=function(){n.close(!1)}}],resolve:{}})}e.makePayment=function(e,n){o(e).result.then(function(r){if(!r)return!1;s.save({amount:r.amount,paymentDate:r.paymentDate,accountsPayableCode:e.code},function(r){i.pop("success","Payment success","Accounts payable payment successfully recorded."),angular.isFunction(n)?n():t.go("default.acctspayable.view",{apCode:e.code,urlSlug:e.slug})})})}}]}),define("acctspayable/controller/AcctsPayableListController",[],function(){return["$scope","ngTableParams","AcctsPayableService","branches",function(e,t,n,r){function s(){function n(e){t.length&&(t+=";"),t+=e}var t="";return e.filter.branchCode&&n("branchCode=="+e.filter.branchCode),t}e.filter={},e.branches=r;var i=e.tableParams=new t({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,t){t.$params.sort="dateUpdated,DESC",t.$params.term=s(),n.get(t.$params,function(n){t.total(n.total),e.resolve(n.data)})}});e.doFilter=function(){i.page()===1?i.reload():i.page(1)},e.clearFilter=function(){e.filter={},e.doFilter()}}]}),define("acctspayable/controller/AcctsPayableViewController",[],function(){return["$scope","acctspayable","moment","ngTableParams","AcctsPaymentService",function(e,t,n,r,i){e.acctspayable=t,e.moment=n;var s=e.tableParams=new r({page:1,count:5},{total:0,counts:[2,5,10,25,50,100],getData:function(e,n){n.$params.sort="paymentDate,DESC",n.$params.term="acctsPayableCode=="+t.code,i.get(n.$params,function(t){n.total(t.total),e.resolve(t.data)})}});t.$promise.then(function(){s.reload()}),e.makePaymentFromViewPage=function(t){e.makePayment(t,function(){s.reload()})}}]}),define("acctspayable/controller/AcctsPayableUpdateController",[],function(){return["$scope","$state","acctspayable","branches","AcctsPayableService",function(e,t,n,r,i){e.acctspayable=n,e.branches=r,!n.branchCode&&angular.isArray(r)&&r.length&&(n.branchCode=r[0].code),e.save=function(){i.save(e.acctspayable,function(e){t.go("default.acctspayable.view",{apCode:e.code,urlSlug:e.slug})})}}]}),define("acctspayable/service/AcctsPayableService",[],function(){return["$resource",function(e){return e("/accounts-payable")}]}),define("acctspayable/service/AcctsPaymentService",[],function(){return["$resource",function(e){return e("/accounts-payment")}]}),define("acctspayable/resolve/AcctsPayableListResolve",[],function(){return{branches:["$q","BranchService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("acctspayable/resolve/AcctsPayableViewResolve",[],function(){return{acctspayable:["AcctsPayableService","$stateParams",function(e,t){return e.get({apCode:t.apCode})}]}}),define("acctspayable/resolve/AcctsPayableUpdateResolve",[],function(){return{acctspayable:["AcctsPayableService","$stateParams",function(e,t){return t.apCode?e.get({apCode:t.apCode}):{repeat:{repeatType:"NONE"}}}],branches:["$q","BranchService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("acctspayable/acctspayable.module.js",["angular","acctspayable/controller/AcctsPayableRootController","acctspayable/controller/AcctsPayableListController","acctspayable/controller/AcctsPayableViewController","acctspayable/controller/AcctsPayableUpdateController","acctspayable/service/AcctsPayableService","acctspayable/service/AcctsPaymentService","acctspayable/resolve/AcctsPayableListResolve","acctspayable/resolve/AcctsPayableViewResolve","acctspayable/resolve/AcctsPayableUpdateResolve"],function(e,t,n,r,i,s,o,u,a,f){console.debug("Configuring acctspayable.module"),e.module("acctspayable.module",[]).service("AcctsPayableService",s).service("AcctsPaymentService",o).config(["$stateProvider",function(e){e.state("default.acctspayable",{url:"accounts-payable",template:"<ui-view></ui-view>",controller:t,"abstract":!0,access:["ROLE_ADMIN","ROLE_BRAND_MANAGER"]}).state("default.acctspayable.list",{url:"",templateUrl:"acctspayable/view/list.html",controller:n,resolve:u}).state("default.acctspayable.add",{url:"/add",templateUrl:"acctspayable/view/update.html",controller:i,resolve:f}).state("default.acctspayable.update",{url:"/update/{apCode}/{urlSlug}",templateUrl:"acctspayable/view/update.html",controller:i,resolve:f}).state("default.acctspayable.view",{url:"/{apCode}/{urlSlug}",templateUrl:"acctspayable/view/view.html",controller:r,resolve:a})}])}),define("event/service/EventService",[],function(){return["$resource",function(e){return e("/event")}]}),define("event/event.module.js",["angular","event/service/EventService"],function(e,t){console.debug("Configuring event.module"),e.module("event.module",[]).service("EventService",t)}),define("reports/controller/ReportsRootController",[],function(){return["$scope","$resource","moment","brands",function(e,t,n,r){function a(){var t;e.params.year!=o?e.availableMonths=e.months:(t=e.months.slice(0),t.splice(s+1,11-s),e.availableMonths=t)}e.params={},e.saikuRepositoryService=t("/saiku/rest/saiku/admin/repository"),e.reports=e.saikuRepositoryService.query(function(t){for(var n=0;n<t.length;n++)t[n].xml.indexOf("${")==-1&&t.splice(n,1);if(!e.reports.length)return;e.reports=t,t.length&&(e.params.saikuFile=e.reports[0].name+".saiku")}),e.brands=r,e.brands.length&&(e.params.brand=e.brands[0]);var i=n(),s=i.get("month"),o=i.get("year");e.params.year=o,e.years=[];for(var u=2010;u<=o;u++)e.years.push(u);e.yearUpdated=function(t){t===o&&(e.params.month=e.months[s]),a()},e.months=["January","February","March","April","May","June","July","August","September","October","November","December"],e.availableMonths=[],a(),e.params.month=e.months[s],e.saikuClient=new SaikuClient({server:"/saiku",path:"/rest/saiku/embed"}),e.refreshQueries=function(){console.debug("month: "+e.params.month+", year: "+e.params.year+", brand: "+e.params.brand.code+", report: "+e.params.saikuFile);if(!e.params.brand||!e.params.month||!e.params.year)return;e.saikuClient.execute({file:e.params.saikuFile,htmlObject:"#saiku-chart",render:"chart",mode:"bar",zoom:!0,chartDefinition:{height:400,colors:["blue","red","green","yellow"],baseAxisSize:"300px",baseAxisSizeMax:"200"},params:{brandCode:e.params.brand.code,year:e.params.year,month:e.params.month}}),angular.element("#saiku-table").html(""),e.saikuClient.execute({file:e.params.saikuFile,htmlObject:"#saiku-table",render:"table",params:{brandCode:e.params.brand.code,year:e.params.year,month:e.params.month}})}}]}),define("reports/resolve/ReportsDashboardResolve",[],function(){return{brands:["$q","BrandService",function(e,t){var n=e.defer();return t.get({page:1,count:9999},function(e){n.resolve(e.data)}),n.promise}]}}),define("reports/reports.module.js",["angular","reports/controller/ReportsRootController","reports/resolve/ReportsDashboardResolve"],function(e,t,n){console.debug("Configuring reports.module"),e.module("reports.module",[]).config(["$stateProvider",function(e){e.state("default.reports",{url:"reports",template:"<ui-view></ui-view>",controller:t,resolve:n,access:["ROLE_ADMIN","ROLE_BRAND_MANAGER"],"abstract":!0}).state("default.reports.dashboard",{url:"",templateUrl:"reports/view/dashboard.html"})}])}),require.config({paths:{angular:"../lib/angular/angular","angular-animate":"../lib/angular-animate/angular-animate.min","angular-ui-router":"../lib/angular-ui-router/release/angular-ui-router","angular-resource":"../lib/angular-resource/angular-resource.min","angular-ngtable":"../lib/ng-table/dist/ng-table.min","angular-ui-select":"../lib/angular-ui-select/dist/select","angular-sanitize":"../lib/angular-sanitize/angular-sanitize.min","angular-bootstrap":"../lib/angular-bootstrap/ui-bootstrap-tpls.min",toaster:"../lib/angularjs-toaster/toaster",bootstrap:"../lib/bootstrap/dist/js/bootstrap",jquery:"../lib/jquery/dist/jquery.min",metisMenu:"../lib/metisMenu/dist/metisMenu.min",moment:"../lib/moment/min/moment.min","angular-moment":"../lib/angular-moment/angular-moment.min","angular-busy":"../lib/angular-busy/dist/angular-busy.min","jquery-ui":"../lib/jquery-ui/jquery-ui.min","jquery-blockui":"../lib/jquery.blockUI/jquery.blockUI",underscore:"../saiku_components/js/backbone/underscore",json2:"../saiku_components/js/backbone/json2",backbone:"../saiku_components/js/backbone/backbone","ccc-def":"../saiku_components/js/saiku/plugins/CCC_Chart/def","ccc-protovis":"../saiku_components/js/saiku/plugins/CCC_Chart/protovis","ccc-protovis-msie":"../saiku_components/js/saiku/plugins/CCC_Chart/protovis-msie","ccc-pvc":"../saiku_components/js/saiku/plugins/CCC_Chart/pvc","ccc-jquery.tipsy":"../saiku_components/js/saiku/plugins/CCC_Chart/jquery.tipsy","ccc-tipsy":"../saiku_components/js/saiku/plugins/CCC_Chart/tipsy","saiku-renderer":"../saiku_components/js/saiku/render/SaikuRenderer","saiku-table-renderer":"../saiku_components/js/saiku/render/SaikuTableRenderer","saiku-chart-renderer":"../saiku_components/js/saiku/render/SaikuChartRenderer","saiku-embed":"../saiku_components/js/saiku/embed/SaikuEmbed"},shim:{angular:{exports:"angular",deps:["jquery"]},"angular-resource":{deps:["angular"]},"angular-ui-router":{deps:["angular"]},"angular-animate":{deps:["angular"]},"angular-ngtable":{deps:["angular"]},"angular-ui-select":{deps:["angular"]},"angular-sanitize":{deps:["angular"]},"angular-bootstrap":{deps:["angular"]},"angular-moment":{deps:["angular","moment"]},"angular-busy":{deps:["angular"]},toaster:{deps:["angular"]},metisMenu:{deps:["jquery"]},bootstrap:{deps:["jquery"]},backbone:{deps:["underscore","jquery"],exports:"Backbone"},underscore:{exports:"_"},"jquery-ui":{deps:["jquery"]},"jquery-blockui":{deps:["jquery","jquery-ui"]},"saiku-table-renderer":{deps:["backbone","jquery-blockui","saiku-renderer"]},"ccc-protovis-msie":{deps:["ccc-def"]},"ccc-pvc":{deps:["ccc-def"]},"ccc-jquery.tipsy":{deps:["ccc-def"]},"ccc-tipsy":{deps:["ccc-def"]},"saiku-embed":{deps:["jquery-blockui","saiku-chart-renderer","saiku-table-renderer","ccc-protovis","ccc-protovis-msie","ccc-pvc","ccc-jquery.tipsy","ccc-tipsy"]}}}),require(["angular","angular-resource","angular-animate","angular-ngtable","angular-ui-select","angular-sanitize","angular-bootstrap","toaster","angular-ui-router","jquery","bootstrap","metisMenu","moment","angular-busy","angular-moment","saiku-embed","core/core.module.js","admin/admin.module.js","brandmgr/brandmgr.module.js","pos/pos.module.js","brand/brand.module.js","branch/branch.module.js","user/user.module.js","joborder/joborder.module.js","customer/customer.module.js","servicetype/servicetype.module.js","inventory/inventory.module.js","acctspayable/acctspayable.module.js","event/event.module.js","reports/reports.module.js"],function(e){e.element().ready(function(){e.bootstrap(document,["ui.router","ngResource","ngAnimate","ngTable","ui.select","ngSanitize","ui.bootstrap","toaster","cgBusy","angularMoment","core.module","admin.module","brandmgr.module","pos.module","brand.module","branch.module","user.module","joborder.module","customer.module","servicetype.module","inventory.module","acctspayable.module","event.module","reports.module"])})}),define("main",function(){});